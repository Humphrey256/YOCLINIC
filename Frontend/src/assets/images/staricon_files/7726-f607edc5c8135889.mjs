"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["7726"],{160943:function(e,t,i){i.d(t,{Z:()=>x});var n=i("310387"),r=i("883119"),s=i("112393"),l=i("708130"),o=i("342117"),a=i("296004"),u=i("668796"),d=i("785893");let c=(s.yF+s.lX)*s.yc-s.lX,h=Array.from(Array(s.g5-s.yc).keys()).reduce((e,t)=>{let i=t+s.yc,n=(s.yF+s.lX)*i-s.lX;return e+(0,s.KN)(s.yF,i,i,`.banner-content {
          width: ${n}px;
          min-width: ${n}px;
        }`,s.lX)},`.banner-content {
      width: ${c}px;
      min-width: ${c}px;
  }`);function m(e){let t=(0,l.ZP)(),{displayData:{backgroundColorNarrow:i,backgroundColorWide:n,backgroundImageNarrow:s,backgroundImageWide:c,canClose:m,completeButtonText:p,coverImage:f,dismissButtonText:x,iconImage:y,layoutNarrow:g,layoutWide:v,links:_=[],linkTitles:w=[],message:b,onCompleteRedirectUrl:j,onDismissRedirectUrl:S,textColorNarrow:C,textColorWide:T,titleText:E,external:k},onComplete:L,onDismiss:I}=e,{windowWidth:A}=(0,a.Z)(),D=A<=480,Z=D?g:v,P=!D&&3!==Z,O=D?i:n,z=D?C:T,{altText:$,uri:B}=(D?s:c)||{},{altText:W,uri:F}=f||{},{altText:M,uri:N}=y||{},U=D&&2===Z||!D&&2===Z,H=D?"96px":"48px",R=D&&3===Z,K=p&&!j&&(0,d.jsx)(r.zx,{color:"white",onClick:({event:e})=>{L?.(e)},text:p}),V=(0,u.Z)({url:j}),X=p&&j&&(0,d.jsx)(r.ZP,{color:"white",href:j,onClick:({event:e})=>{L?.(e)},rel:V?"nofollow":"none",size:"lg",target:k?"blank":void 0,text:p},"naglink"),G=(0,u.Z)({url:S}),J=x&&S&&(0,d.jsx)(r.ZP,{color:"white",href:S,onClick:({event:e})=>{I?.(e)},rel:G?"nofollow":"none",size:"lg",target:k?"blank":void 0,text:x},"naglink"),Y=x&&!S&&(0,d.jsx)(r.zx,{color:"white",onClick:({event:e})=>{I?.(e)},size:"lg",text:x}),Q=m&&(0,d.jsx)(r.hU,{accessibilityLabel:t._('Close', 'accessibility close label', 'accessibility close label'),bgColor:"lightGray",icon:"cancel",iconColor:"gray",onClick:({event:e})=>{I?.(e)},size:"md"}),q=_.reduce((e,t,i)=>{let n=t.startsWith("https://")||t.startsWith("http://")?'rel="noreferrer noopener" target="_blank"':"",r=`<a href="${t}" ${n}>${w[i]}</a>`;return e.replace(`{${i}}`,r)},b),ee={backgroundColor:O,backgroundImage:!B||U||R?void 0:`url(${B})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return(0,d.jsxs)(r.xu,{direction:P?"row":"column",display:"flex",marginBottom:5,marginEnd:2,marginStart:2,marginTop:2,children:[(0,d.jsx)(o.Z,{unsafeCSS:h}),(0,d.jsx)("div",{className:"banner-content",style:{borderRadius:"16px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",margin:"0 auto"},children:(0,d.jsxs)(r.zd,{rounding:4,width:"100%",children:[R&&F&&(0,d.jsx)(r.kC,{alignItems:"start",height:128,justifyContent:"center",width:"100%",children:(0,d.jsx)(r.Ee,{alt:W||"cover image",fit:"cover",naturalHeight:1,naturalWidth:3,src:F})}),(0,d.jsxs)(r.xu,{alignItems:"center","aria-label":$,dangerouslySetInlineStyle:{__style:ee},direction:P?"row":"column",display:"flex",justifyContent:"between",marginTop:R?-2:0,padding:6,children:[(0,d.jsxs)(r.kC,{alignItems:"center",direction:P?"row":"column",justifyContent:"between",maxWidth:P?void 0:"560px",children:[U&&N&&(0,d.jsx)(r.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginBottom:P?0:6,marginEnd:P?4:0,children:(0,d.jsx)(r.xu,{height:H,width:H,children:(0,d.jsx)(r.zd,{rounding:P?4:6,children:(0,d.jsx)(r.Ee,{alt:M||"icon",naturalHeight:1,naturalWidth:1,src:N})})})}),!P&&E&&(0,d.jsx)(r.xv,{align:"center",weight:"bold",children:(0,d.jsx)("div",{className:"banner-title",style:{color:z,fontSize:"28px",marginBottom:"8px"},children:E})}),q&&(0,d.jsxs)(r.xv,{align:P?"start":"center",overflow:"normal",children:[(0,d.jsx)("style",{dangerouslySetInnerHTML:{__html:`
                        .banner-text a {
                          color: ${z||""};
                          font-weight: bold;
                        }`}}),(0,d.jsx)("div",{className:"banner-text",dangerouslySetInnerHTML:{__html:q},style:{color:z}})]})]}),(0,d.jsx)(r.xu,{marginBottom:P?0:-1,marginStart:P?4:0,marginTop:P?0:4,children:(0,d.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",wrap:!P,children:[Y||J,K||X,Q]})})]})]})})]})}var p=i("265432"),f=i("394303");let x=({placementId:e})=>(0,d.jsx)(n.Z,{placementId:e,predicate:e=>e.display_data?.component_type===1,children:({complete:e,dismiss:t,experience:{display_data:i}})=>{let n=(0,p.Z)(f.Z)(i);return(0,d.jsx)(m,{displayData:n,onComplete:()=>e(),onDismiss:t})}})},710510:function(e,t,i){i.d(t,{Z:()=>_});var n=i("667294"),r=i("310387"),s=i("883119"),l=i("558919"),o=i("708130"),a=i("668796"),u=i("785893");function d(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.Component{constructor(...e){super(...e),d(this,"state",{surveyLoaded:!1}),d(this,"loadSurvey",()=>{this.setState({surveyLoaded:!0}),this.props.view?.()}),d(this,"handleDismiss",()=>{this.props.dismiss(),this.setState({surveyLoaded:!1})}),d(this,"handleComplete",()=>{this.props.complete(),this.setState({surveyLoaded:!1})})}componentDidMount(){let{displayData:{delay:e}}=this.props;this.surveyTimer=window.setTimeout(this.loadSurvey,e)}componentWillUnmount(){clearTimeout(this.surveyTimer)}render(){if(!this.state.surveyLoaded)return null;let{displayData:{buttons:e,detailed_text:t,title_text:i}}=this.props;return(0,u.jsx)(l.ZP,{accessibilityModalLabel:this.props.i18n._('Would you mind taking a survey?', 'User eval survey', 'User eval survey'),footer:(0,u.jsx)(s.kC,{alignItems:"stretch",justifyContent:"end",children:e.map(e=>{if(!e.uri)return(0,u.jsx)(s.xu,{marginStart:1,children:(0,u.jsx)(s.zx,{fullWidth:!0,onClick:this.handleDismiss,text:e.text})},e.text);{let t=e.uri,i=(0,a.Z)({url:t});return(0,u.jsx)(s.xu,{marginStart:1,children:(0,u.jsx)(s.ZP,{color:"red",fullWidth:!0,href:t,onClick:this.handleComplete,rel:i?"nofollow":"none",target:"blank",text:e.text})},e.text)}})}),heading:i,onDismiss:this.handleDismiss,size:"sm",children:(0,u.jsx)(s.xu,{padding:3,children:(0,u.jsx)(s.xv,{children:t})})})}}function h(e){let t=(0,o.ZP)();return(0,u.jsx)(c,{...e,i18n:t})}var m=i("616550"),p=i("561162");function f(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class x extends n.Component{constructor(...e){super(...e),f(this,"isOnClose",this.props.onCloseEnabled&&2===this.props.actionTrigger),f(this,"state",{surveyAccepted:!1,surveyLoaded:!1,surveyLoadFailed:!1,showSurveyOnClose:this.isOnClose}),f(this,"loadSurvey",(e=!0)=>{let{onView:t}=this.props;e&&t(),this.setState({surveyLoaded:!0})}),f(this,"processIFrameMessage",e=>{let{presentationDelay:t=5e3,onComplete:i,surveyLink:n,onCloseEnabled:r}=this.props,s=e.origin||e.originalEvent.origin;n.startsWith(s)&&("surveyFinished"===e.data?i():"surveyLoaded"===e.data&&(window.clearTimeout(this.loadSurveyFailureTimeout),this.isOnClose&&this.showSurveyOnLeavingPage(),r?this.actionTriggerHandler():this.loadSurveyTimeout=window.setTimeout(this.loadSurvey,t)))}),f(this,"handleShowSurvey",()=>{this.setState({surveyAccepted:!0})})}componentDidMount(){window.addEventListener("message",this.processIFrameMessage),this.loadSurveyFailureTimeout=window.setTimeout(()=>{this.state.surveyLoaded||(window.clearTimeout(this.loadSurveyTimeout),this.setState({surveyLoadFailed:!0}))},15e3)}componentWillUnmount(){window.removeEventListener("message",this.processIFrameMessage),window.clearTimeout(this.loadSurveyTimeout),window.clearTimeout(this.loadSurveyFailureTimeout),this.isOnClose&&this.props.unblock()}actionTriggerHandler(){let{actionTrigger:e,presentationDelay:t=5e3}=this.props;switch(e){case 1:this.loadSurvey();break;case 2:this.loadSurvey(!1);break;default:this.loadSurveyTimeout=window.setTimeout(this.loadSurvey,t)}}showSurveyOnLeavingPage(){let{onView:e,block:t}=this.props;t(()=>{e(),this.setState({showSurveyOnClose:!1})})}render(){let{surveyAccepted:e,surveyLoadFailed:t,surveyLoaded:i,showSurveyOnClose:n}=this.state;if(t)return null;let{acceptButtonText:r,bodyText:l,declineButtonText:o,onDismiss:a,subtitleText:d,surveyLink:c,titleText:h}=this.props,m=(0,u.jsx)("iframe",{"data-test-id":"anket-iframe",src:c,style:e?{border:0,minHeight:810,paddingBottom:4,width:"100%"}:{display:"none"},title:this.props.i18n._('Pinterest Survey', 'Accessible label for survey frame', 'Accessible label for survey frame')});return i&&!n?(0,u.jsx)(s.xu,{position:"absolute",zIndex:new s.Ry(1e3),children:(0,u.jsxs)(s.u_,{accessibilityModalLabel:this.props.i18n._('Have a few minutes to take a survey?', 'User evaluation survey', 'User evaluation survey'),footer:!e&&(0,u.jsxs)(s.xu,{display:"flex",justifyContent:"end",paddingX:1,children:[(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{padding:"6px 8px"}},children:(0,u.jsx)(s.zx,{fullWidth:!0,onClick:()=>{this.setState({surveyAccepted:!1}),a()},text:o})}),(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{padding:"6px 8px"}},children:(0,u.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:this.handleShowSurvey,text:r})})]}),heading:e?"":h,onDismiss:a,padding:"none",role:"alertdialog",size:e?"lg":"md",children:[(0,u.jsx)(s.xu,{children:m}),!e&&(0,u.jsxs)(s.xu,{padding:3,children:[(0,u.jsx)(s.xv,{children:d}),(0,u.jsx)(s.xv,{children:l})]})]})}):m}}let y=function(e){let t=(0,o.ZP)(),{checkExperiment:i}=(0,p.F)(),r=(0,m.k6)(),[s,l]=(0,n.useState)(null),a=(0,n.useRef)(null);return(0,u.jsx)(x,{...e,block:e=>{a.current=r.block((t,i)=>(l({location:t,action:i}),e(),!1))},i18n:t,onCloseEnabled:i("discovery_measurements_on_close_survey").anyEnabled,unblock:()=>{if(a&&a.current?.(),s){let{location:e,action:t}=s;"PUSH"===t?r.push(`${e.pathname}${e.search}`):"POP"===t&&r.goBack()}}})},g=e=>{let{complete:t,dismiss:i,view:n,displayData:r}=e,{anket:s,buttons:l,delay:o,detailed_text:a,subtitle_text:d,title_text:c,action_trigger:m=3}=r,[p,f]=l;return s?(0,u.jsx)(y,{acceptButtonText:f.text,actionTrigger:m,bodyText:a,declineButtonText:p.text,onComplete:t,onDismiss:i,onView:n,presentationDelay:o,subtitleText:d,surveyLink:f.uri,titleText:c}):(0,u.jsx)(h,{complete:t,dismiss:i,displayData:r,view:n})},v=e=>{let{experienceId:t,displayData:i}=e,{delay:r=0}=i,s={...i,delay:0},l={...e,displayData:{...s}},o=(0,n.useRef)(),[a,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=["/pin-builder","/idea-pin-builder"],t=e=>window.location.pathname.includes(e),i=()=>e.some(t),n=()=>{i()?o.current=setTimeout(()=>n(),3e3):d(!0)};return o.current=setTimeout(()=>n(),r),()=>{clearTimeout(o.current)}},[t,r]),a?(0,u.jsx)(g,{...l}):null};function _(e){let{placementId:t,experience:i,targeting:n,eligibleIds:s}=e;return(0,u.jsx)(r.Z,{disableAutoView:!0,eligibleIds:s||[],eligibleTypes:[5],experience:i,placementId:t,targeting:n,children:({complete:e,dismiss:i,view:n,experience:r})=>{let s=r.display_data,l=r.experience_id;return 1000421===t?(0,u.jsx)(v,{complete:e,dismiss:i,displayData:s,experienceId:l,view:n}):(0,u.jsx)(g,{complete:e,dismiss:i,displayData:s,view:n})}})}},288435:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(667294),r=i(200351),s=i(693958),l=i(710510),o=i(861025),a=i(674817),u=i(785893);let d=({placementId:e})=>{let{experienceForPlacement:t}=(0,o.Z)(e),{unmountPlacement:i,registerAfterActionPlacement:d}=(0,a.Z)();return(0,n.useEffect)(()=>(d(e),()=>{i(e)}),[e,i,d]),(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(s.Z,{experience:t}),(0,u.jsx)(l.Z,{experience:t}),(0,u.jsx)(r.Z,{experience:t})]})}},968933:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i(667294),r=i(288435),s=i(923765),l=i(3366),o=i(785893);let a=({placementId:e})=>{let t=(0,s.c)(),i=(0,l.Z)();return(0,n.useEffect)(()=>{let e=e=>{let{clickthroughProperties:i,offsiteTimedPair:n}=e;(i?.aux_data?.time_to_offsite??5e8)<5e8&&t("Clickthrough",{is_promoted:i?.aux_data?.is_promoted,pin_id:i?.object_id_str,clickthrough_duration_ns:n?.duration})};return e&&i?.onOffsiteEnd(e),()=>{e&&i?.removeOnOffsiteEnd(e)}},[t,i]),(0,o.jsx)(r.Z,{placementId:e})}},296004:function(e,t,i){i.d(t,{Z:function(){return n}});function n(){let e=800,t=400;return"undefined"!=typeof window&&(e=window.innerHeight,t=window.innerWidth),{windowHeight:e,windowWidth:t}}},657156:function(e,t,i){i.d(t,{Z:()=>a});var n=i("333832"),r=i("667294"),s=i("235518"),l=i("927998"),o=i("117576");function a({children:e,isAtEndOfFeed:t,pinData:i,itemCount:a,includeBackgroundImages:u=!1,includeVideos:d=!1,includeSections:c=!1,isPlaceholderGrid:h}){return o.Z()?.isAuthenticated||(c=!0),(0,n.Z)({pinData:i,isAtEndOfFeed:t,includeBackgroundImages:u,includeVideos:d,includeSections:c,isPlaceholderGrid:h}),!function(e){let t=(0,l.E)(),i=(0,r.useRef)(null);(0,r.useEffect)(()=>{e!==i.current&&(i.current=e,t&&(0,s.ZP)(s.at))},[!!t,e])}(a),e}},333832:function(e,t,i){i.d(t,{Z:function(){return g},v:function(){return m}});var n=i(667294),r=i(497e3),s=i(411914),l=i(730679),o=i(602096),a=i(235518),u=i(927998),d=i(101585),c=i(403555);let h=(0,s.XV)("GridProfiler"),m=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,l.VZ)(),p=e=>"LAYOUT"===e.status&&500||"TIMING"===e.status&&100||null,f=(e,t)=>{if(!t){let t=(0,l.LM)();if(t===e)return h("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,l.F9)())return h("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}},x=(e,t)=>{let i=0,n=0,r=0,s=0,l=0;return e=e.filter(e=>"pin"===e.type),t.forEach((t,o)=>{let a;let u=t.fileName.split(".")[0];a=e[o],u!==a?.image_signature&&(a=e.find(e=>u===e?.image_signature)),void 0===a?l+=1:a.is_promoted||a.recommendation_reason?.reason==="PROMOTED_PIN"||a?.promoter?.length?r+=1:null!==a.story_pin_data_id&&void 0!==a.story_pin_data_id?i+=1:a?.videos?.video_list?n+=1:s+=1}),{storyPinCount:i,videoCount:n,adCount:r,imageCount:s,unknownCount:l}},y=(e,t)=>{let i=()=>{window.removeEventListener(e,i),t()};return window.addEventListener(e,i),()=>window.removeEventListener(e,i)};function g({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:i,includeVideos:m=!1,includeSections:g,isPlaceholderGrid:v}){let _=(0,u.E)(),w=_?.getId(),b=_?.setVisuallyCompleteResult,[j,S]=(0,n.useState)({status:"DISABLED"});(0,n.useEffect)(()=>{b?S({status:"LAYOUT",failedCount:0,numOfItemsChecked:0}):S({status:"DISABLED"})},[w,b]),(0,n.useEffect)(()=>{if("DISABLED"!==j.status&&(0,a.ZP)(`GridVisuallyCompleteProfiler_${j.status}`),h("new status",j),"LAYOUT"===j.status){let e=y("scroll",()=>{(0,a.ZP)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[j.status]),(0,c.Z)(()=>{if(!_||!b)return;let{abort:n,getMetricId:a}=_,u=a(),c=(0,l.cQ)(i,m,g);if(v&&!c.length){h("bypassing PWT run due to skeleton pin grid");return}switch(j.status){case"LAYOUT":{let t=f(j.numOfItemsChecked,e);t.complete?S({status:"TIMING",failedCount:0,pinElements:c}):500*j.failedCount>6e4?((0,o.A9)(`images.${(0,r.KJ)(u)}.visuallyComplete.maxLayoutAttempt`),n("visuallyComplete_layoutTimeout"),S({status:"DISABLED"})):S({...j,failedCount:j.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,d.Cg)(),i=j.pinElements.length,l=[],a=0,c=0,m=0;if(j.pinElements.forEach(({element:t,fileName:i})=>{let n=e.find(e=>e.name.endsWith(i));n?n.responseEnd?(l.push(n),(0,s.v5)(t,"green")):(m+=1,(0,s.v5)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(c+=1,(0,s.v5)(t,"red")):(a+=1,(0,s.v5)(t,"greenyellow"))}),a||m)100*j.failedCount>6e4?((0,o.A9)(`images.${(0,r.KJ)(u)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:i,incompleteCount:a,noTimingCount:c,noTimingResponseEndCount:m}}),n("visuallyComplete_timingTimeout"),S({status:"DISABLED"})):S({...j,failedCount:j.failedCount+1});else{if(h(`All ${l.length} images are fetched`),t&&t.length){let e=x(t,j.pinElements);Object.entries(e).forEach(([e,t])=>{_.addBinaryAnnotation(e,t,"I16")}),(0,o.A9)(`${(0,r.KJ)(u)}.pinTypes`,{tags:e})}b({imageTimings:l}),S({status:"DISABLED"}),(0,o.A9)(`images.${(0,r.KJ)(u)}.visuallyComplete.complete`,{tags:{totalImageCount:i,noTimingCount:c}})}}}},p(j))}},403555:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(667294);let r=(e,t)=>{let i=(0,n.useRef)(()=>{});(0,n.useEffect)(()=>{i.current=e},[e]),(0,n.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>i.current(),t);return()=>clearInterval(e)},[t])}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/7726-f607edc5c8135889.mjs.map