"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["7305"],{463722:function(e,t,n){n.d(t,{Z:()=>eN});var i=n("667294"),s=n("581722"),r=n("616550"),a=n("883119"),o=n("731996");let l={inject:()=>{!function(e,t,n,i,s){function r(){let e=t.createElement("script");e.async=!0,e.src="//radar.cedexis.com/1/14290/radar.js",t.body?.appendChild(e)}(function(){for(let e=[/\bMSIE (5|6)/i],t=e.length;t--;)if(e[t].test(navigator.userAgent))return!1;return!0})()&&("complete"!==t.readyState?(n=e[n])?n(s,r,!1):(n=e[i])&&n("on"+s,r):r())}(window,document,"addEventListener","attachEvent","load")}};var d=n("807776"),c=n("758226"),u=n("47988"),h=n("427380"),p=n("799412"),_=n("70455"),m=n("657156"),f=n("820368"),b=n("785893");function g({getColumnSpanConfig:e,renderItem:t}){let{data:n,fetchMore:i,isAtEnd:s}=(0,f.Z)({name:"PinterestPicksFeedResource",options:(0,p.Z)({staticFeed:!1,viewerIsPartner:!1})}),r=n?n.slice(1):null;return r?(0,b.jsx)(a.xu,{"data-test-id":"pinterest-picks-feed",children:(0,b.jsx)(m.Z,{includeBackgroundImages:!0,includeVideos:!0,isAtEndOfFeed:s,itemCount:r.length,pinData:r,children:(0,b.jsx)(_.default,{_dynamicHeights:!0,_getColumnSpanConfig:e,cacheKey:"pinterest_picks",items:r,loadItems:i,renderItem:t})})}):null}var w=n("677643"),x=n("450527"),y=n("804167"),v=n("980570"),P=n("391501"),S=n("86485"),I=n("310387"),j=n("710510"),A=n("861025"),C=n("674817"),k=n("157190"),E=n("924967"),R=n("249043"),T=n("112393"),Z=n("170217"),B=n("708130"),z=n("342117"),F=n("967629"),D=n("374746"),L=n("337907"),N=n("768255"),W=n("561162"),H=n("998836"),M=n("3879"),U=n("26918"),O=n("887817"),G=n("673695"),Y=n("3915"),q=n("676129"),$=n("45389"),K=n("935415"),Q=n("226978"),J=n("903979"),V=n("465683"),X=n("219300"),ee=n("320288");let et={Chrome:{version:80,url:"https://www.google.com/chrome/update/"},Edge:{version:93,url:"https://support.microsoft.com/en-us/topic/microsoft-edge-update-settings-af8aaca2-1b69-4870-94fe-18822dbb7ef1"},"Mobile Safari":{version:11,url:"https://support.apple.com/en-us/HT204416"},Safari:{version:11,url:"https://support.apple.com/en-us/HT204416"},Firefox:{version:90,url:"https://support.mozilla.org/en-US/kb/update-firefox-latest-release"},"Samsung Browser":{version:15,url:"https://www.samsung.com/sg/support/apps-services/install-or-update-samsung-internet/#:~:text=1%20After%20you%20search%20for,the%20Samsung%20Internet%20browser%20again."}};function en(){let e=(0,B.ZP)(),{logContextEvent:t}=(0,X.v)(),{userAgent:n}=(0,M.B)(),{checkExperiment:s}=(0,W.F)(),{browserName:r,browserVersion:o}=n,l=!1;Object.keys(et).includes(r)&&(l=parseInt(o,10)<et[r].version&&s("browser_upgrade_version").anyEnabled);let[d,c]=(0,i.useState)(l),u=e=>{c(!1),(0,ee.nP)("webapp.upgrade_browser.dismiss",{sampleRate:1,tags:{banner:e,browser:r}}),t({event_type:101,element:10109})},h=e=>{(0,ee.nP)("webapp.upgrade_browser.upgrade",{sampleRate:1,tags:{banner:e,browser:r}}),t({event_type:101,element:10108})};return(0,b.jsx)(i.Fragment,{children:d&&(0,b.jsx)(a.xu,{alignItems:"start",color:"default",direction:"row",display:"flex",justifyContent:"center",margin:4,children:(0,b.jsxs)(a.xu,{column:12,direction:"column",display:"flex",children:["enabled_slim_banner"===s("browser_upgrade_version").group&&(0,b.jsx)(a.he,{helperLink:{accessibilityLabel:(0,F.nk)(e._('Upgrade {{ browserName }}', 'unsupportedBrowser.banner.upgrade', 'link to upgrading browser instructions, browserName:browser the user is using'),{browserName:r}).join(""),text:(0,F.nk)(e._('Upgrade {{ browserName }}', 'unsupportedBrowser.banner.upgrade', 'link to upgrading browser instructions, browserName:browser the user is using'),{browserName:r}).join(""),href:et[r].url,onClick:()=>{h("slim_banner")}},iconAccessibilityLabel:"Warning",message:(0,F.nk)(e._('It looks like you are using an old version of {{ browserName }}. Download the latest version to access all of Pinterest`s tools and features.', 'unsupportedBrowser.banner.upgradeDescription', 'text asking user to upgrade their browser, browserName:browser the user is using'),{browserName:r}).join(""),onDismiss:()=>{u("slim_banner")},type:"warning"}),"enabled"===s("browser_upgrade_version").group&&(0,b.jsx)(a.ci,{dismissButton:{accessibilityLabel:e._('Maybe later', 'unsupportedBrowser.banner.dismiss', 'dismiss banner'),onDismiss:()=>{u("callout")}},iconAccessibilityLabel:"Info",message:(0,F.nk)(e._('It looks like you are using an old version of {{ browserName }}. Download the latest version to access all of Pinterest`s tools and features.', 'unsupportedBrowser.banner.upgradeDescription', 'text asking user to upgrade their browser, browserName:browser the user is using'),{browserName:r}).join(""),primaryAction:{accessibilityLabel:e._('Get started', 'unsupportedBrowser.banner.start', 'link to upgrading browser instructions'),label:e._('Get started', 'unsupportedBrowser.banner.start', 'link to upgrading browser instructions'),href:et[r].url,onClick:()=>{h("callout")},role:"link"},title:e._('Your browser is not fully supported.', 'unsupportedBrowser.banner.upgradeTitle', 'banner title warning user that their browser is not fully supported'),type:"warning"})]})})})}var ei=n("137123"),es=n("55077"),er=n("236256"),ea=n("787683"),eo=n("959474"),el=n("580705"),ed=n("927997"),ec=n("844854"),eu=n("458199"),eh=n("164927"),ep=n("546045"),e_=n("349970"),em=n("356336"),ef=n("634408"),eb=n("689222"),eg=n("202583"),ew=n("757892"),ex=n("52302");function ey(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ev=(0,ex.Z)(()=>Promise.resolve().then(n.bind(n,427380)),{ssr:!1}),eP=(0,ex.Z)(()=>n.e("29281").then(n.bind(n,168849)),{ssr:!1}),eS=(0,ex.Z)(()=>n.e("2158").then(n.bind(n,507508)),{ssr:!1}),eI=(0,i.lazy)(()=>n.e("87947").then(n.bind(n,171641))),ej=(0,i.lazy)(()=>n.e("86013").then(n.bind(n,610931))),eA=(0,i.lazy)(()=>n.e("12374").then(n.bind(n,738221))),eC=(0,ex.Z)(()=>n.e("94833").then(n.bind(n,783423)),void 0,"app-packages-StructuredFeed-Feed-StructuredFeed"),ek=(0,ex.Z)(()=>Promise.all([n.e("38475"),n.e("57907")]).then(n.bind(n,524644)),void 0,"app-common-react-components-save-board-BoardMoreIdeasTabContentResourceWrapper"),eE=(0,i.lazy)(()=>n.e("58670").then(n.bind(n,375037))),eR=(0,ex.Z)(()=>n.e("24561").then(n.bind(n,790944)),void 0,"app-www-discover-Bubbles-BubblesGridRep"),eT=(0,ex.Z)(()=>n.e("42008").then(n.bind(n,456826)),void 0,"app-common-react-components-SummaryCard-Story-StoryCard"),eZ=(0,i.createRef)(),eB=e=>{let t=document.createElement("link"),n=document.querySelector("link[rel='icon']")||document.getElementById("dynamic-favicon");if(t.id="dynamic-favicon",t.rel="shortcut icon",t.type="image/x-icon",t.href=e,document.head){if(n){if(n instanceof HTMLLinkElement&&n.href===e)return;document.head.removeChild(n)}document.head.appendChild(t)}},ez=(e,t)=>(e||[]).slice(0,t).map(e=>e.id),eF=(e,t)=>JSON.stringify(e)===JSON.stringify(t);class eD extends i.PureComponent{constructor(...e){super(...e),ey(this,"state",{boundingClientRectTop:0,hasScrolled:!1,hideTabs:!1,refreshReason:null,isRefreshing:!1,showYipModal:!1}),ey(this,"refreshData",(e="unknown")=>{let{refreshData:t}=this.props;this.setState({refreshReason:e,isRefreshing:!0},()=>{t()})}),ey(this,"handleScroll",(0,$.Z)(()=>{let{boundingClientRectTop:e,hasScrolled:t,hideTabs:n}=this.state,{experience:i}=this.props,s=this.scrollContainer&&this.scrollContainer.getBoundingClientRect(),r=s&&s.top;"number"==typeof r&&(r<u.Z&&e>r?n||this.setState({hideTabs:!0}):n&&this.setState({hideTabs:!1}),this.setState({boundingClientRectTop:r})),i&&502535===i.experience_id&&!t&&this.setState({hasScrolled:!0})},10)),ey(this,"onWindowFocus",()=>{this.windowBlurStart>-1&&Date.now()-this.windowBlurStart>6e5&&this.refreshData("MORE_THAN_10_MINUTES"),this.windowBlurStart=-1,this.clearFaviconNotification()}),ey(this,"onWindowBlur",()=>{this.windowBlurStart=Date.now(),this.prepareForFaviconUpdate()}),ey(this,"onInstallPrompt",e=>{this.installPromptEvent=e,this.setState({pwaUpsellBannerEligibility:this.getpwaUpsellBannerEligibility()})}),ey(this,"getTimeSpentSpinnerAuxData",()=>({resource_fetch_count:this.resourceFetchCount,viewport_height:"undefined"!=typeof window?window.innerHeight:null,viewport_width:"undefined"!=typeof window?window.innerWidth:null})),ey(this,"clearFaviconNotification",()=>{this.faviconUpdateTimeout&&(clearTimeout(this.faviconUpdateTimeout),this.faviconUpdateTimeout=null),eB("https://s.pinimg.com/webapp/favicon_48x48-7470a30d.png")}),ey(this,"prepareForFaviconUpdate",()=>{this.faviconUpdateTimeout=setTimeout(()=>{let e=Y.ZP.getItem(v.jz);(!e||new Date().getTime()-e>=P.F4)&&(eB("https://s.pinimg.com/webapp/favicon-notification_48x48-caeeb45a.png"),Y.ZP.setItem(v.jz,new Date().getTime()))},6e5)}),ey(this,"windowBlurStart",-1),ey(this,"faviconUpdateTimeout",null),ey(this,"loadItems",()=>{let{dataIsFetching:e,feedLimit:t,fetchMoreData:n,homefeedData:i}=this.props;if(t&&(i||[]).length>t){this.props.setFeedLoading&&this.props.setFeedLoading(!1);return}e||(this.resourceFetchCount+=1,n())}),ey(this,"resourceFetchCount",0),ey(this,"installPromptEvent",null),ey(this,"getpwaUpsellBannerEligibility",()=>{let{requestContext:e}=this.props,{pwaUpsellBannerEligibility:t}=this.state;if(!(0,H.So)(window)&&e&&!t&&window.navigator.userAgent){if(window.navigator.userAgent.includes("Windows NT 10.0"))return"windows";if(this.installPromptEvent)return"chrome"}return"notEligible"}),ey(this,"handleInstallWindowsPWA",e=>{e(),(0,ee.nP)("windows.web.upsell.completed"),this.setState({pwaUpsellBannerEligibility:"notEligible"})}),ey(this,"handleInstallChromePWA",e=>{e(),(0,ee.nP)("chrome.web.upsell.completed"),this.setState({pwaUpsellBannerEligibility:"notEligible"})}),ey(this,"handleDismissChromePWAUpsell",e=>{e(),(0,ee.nP)("chrome.web.upsell.dismissed"),this.setState({pwaUpsellBannerEligibility:"notEligible"})}),ey(this,"renderItem",({data:e,itemIdx:t})=>{let{cropOptions:n,homefeedData:i,lfvExperiences:s,location:r}=this.props;if(!e||!e.type)return console.error("Invalid data received. ",t,e),null;let a=i?.find(({type:e})=>"home_feed_tabs"===e)?.tabs,{boardId:o}=(0,ei.mB)(r.search),l=a?this.getCurrentTabIndex(r,o,a):eh.ef,d=l>=1&&a[l-1]?.tab_type==="pinterest_picks",u=!!d&&a[l-1]?.action.quick_save_icon===1,h=d&&u;switch(e.type){case"pin":let p=!!s&&!!(0,D.Z)(s);return(0,b.jsx)(ef.ZP,{authDesktopSurface:"AuthHomefeed",duploQueryRef:null,imageOnlyOption:p?"image-only":"default",isEggsUi:h,pin:e,pinId:e.id,pinImageCrop:n,saveButtonOptions:h?{savedInfo:{boardId:void 0,pinId:e.id,title:void 0,url:void 0},type:"inline"}:void 0,slotIndex:t,viewParameter:h?4055:92,viewType:1});case"story":{let{story_type:n}=e;if((0,ee.nP)("web_story_card_type",{sampleRate:1,tags:{story_type:n||"unknown",surface:"homefeed"}}),"BUBBLE_ONE_COL"===n)return(0,b.jsx)(eR,{bubbles:e.objects,id:e.id,referringSource:e.referring_source,slotIndex:t,storyType:n,title:e.title,viewParameter:92,viewType:1});if("featured_boards"===n)return(0,b.jsx)(c.default,{slotIndex:t,story:e,surface:"AuthHomefeed",viewParameter:92,viewType:1});return(0,b.jsx)(eT,{component:h?14769:void 0,isEggsUi:h,itemIdx:t,saveButtonOptions:h?{savedInfo:{boardId:void 0,pinId:e.id,title:void 0,url:void 0},type:"inline"}:void 0,story:e,surface:"AuthHomefeed",viewParameter:h?4055:92,viewType:1})}default:return null}})}componentDidMount(){let{checkExperiment:e,experienceClient:t,history:n,location:i,mountWebRepinPlacement:s,toastManagerContext:r}=this.props;t.triggerExperimentsForPlacement(1000116),e("web_disable_cedexis_sampling").anyEnabled||l.inject(),(0,ei.mB)(i.search).show_error?r.showOneToast(({hideToast:e})=>(0,b.jsx)(R.ZP,{duration:5e3,onHide:e,text:this.props.i18n._('We can\u2019t find that idea! Try searching for one just like it.', ' - ', ' -- ')})):i.state&&"/pin-builder/"===i.state.from?i.state.boardName&&i.state.imageUrl&&this.handlePinSuccessPinBuilder():(0,ei.mB)(i.search).show_yip_modal&&(n.replace("/homefeed/"),this.setState({showYipModal:!0})),window.addEventListener("focus",this.onWindowFocus),window.addEventListener("blur",this.onWindowBlur),window.addEventListener("beforeinstallprompt",this.onInstallPrompt),document.addEventListener("scroll",this.handleScroll),s()}componentDidUpdate(e){let{dataIsFetching:t,history:n,homefeedData:i}=this.props,{refreshReason:s}=this.state,{dataIsFetching:r,homefeedData:a}=e;if(i&&a&&r&&!t&&i.length<=a.length){let e=n&&"POP"!==n.action,t=ez(i,10),r=ez(a,10);this.logRefreshStats(s||(e?"ROUTE_CHANGE":"UNKNOWN"),eF(r,t)),this.setState({isRefreshing:!1,refreshReason:null})}}logRefreshStats(e,t){let{currentHistoryStack:n,requestContext:i}=this.props,s={appType:"web",language:i.language||"unknown",locale:i.locale||"unknown",refreshReason:e},r=JSON.parse((0,q.qn)(w.g,null)),a=r?.time?new Date(r.time):null,o=n&&n.length>1?n[n.length-2]:{};N.default.logToServer(N.default.SERVER_LOG_TYPE.HF_REFRESH,N.default.HTTP_METHOD.POST,{refreshReason:e,lastRoute:o.match,timeSinceHomefeed:a?Date.now()-a.getTime():null,timeSinceBlur:this.windowBlurStart?Date.now()-this.windowBlurStart:null}),(0,ee.nP)("home_product.homefeed.refresh",{sampleRate:1,tags:s}),t&&(0,ee.nP)("home_product.homefeed.refresh.no_change",{sampleRate:1,tags:s})}componentWillUnmount(){let{unmountWebRepinPlacement:e}=this.props;window.removeEventListener("focus",this.onWindowFocus),window.removeEventListener("blur",this.onWindowBlur),window.removeEventListener("beforeinstallprompt",this.onInstallPrompt),(0,q.Nh)(w.g,JSON.stringify({time:Date.now(),scrollPosition:[window.scrollX,window.scrollY]})),document.removeEventListener("scroll",this.handleScroll),e()}get isHomefeed(){let{inLocalNavigation:e,location:t}=this.props,n=(0,ei.mB)(t.search);return!(n&&"string"==typeof n.boardId&&n.boardId)||!!e}handlePinSuccessPinBuilder(){let{location:e,toastManagerContext:t}=this.props,{boardName:n}=e.state||{},{imageUrl:i}=e.state||{},s=(0,F.nk)(this.props.i18n._('You saved this Pin to {{ selectedBoardName }}!', 'Board create confirmation message', 'Board create confirmation message'),{selectedBoardName:(0,b.jsx)(a.xv,{inline:!0,lineClamp:1,size:"200",weight:"bold",children:n},n)});t.showOneToast(({hideToast:e})=>(0,b.jsx)(R.ZP,{duration:5e3,imageUrl:i,onHide:e,text:(0,b.jsx)(a.xv,{children:s},`toast_${n}`)}))}getCurrentTabIndex(e,t,n){return"/homefeed/holiday_finds/"===e.pathname?n.findIndex(e=>"pinterest_picks"===e.tab_type)+1:t?n.findIndex(e=>e?.id===t)+1:eh.ef}getColumnSpanConfig(e){let t="recently_viewed"===e.story_type&&this.props.checkExperiment("web_recently_viewed_responsive").anyEnabled;if(e.display_options?.item_view_rep_style?.explore_article_rep_style===10||t)return{sm:2,md:3,lg:3,xl:4};if("story"===e.type&&"featured_boards"===e.story_type){let t=e?.objects?.length||0;return{sm:2,md:2,lg:Math.min(3,t),xl:Math.min(4,t)}}return"story"===e.type&&e?.display_options?.content_display?.grid_layout?.cols?e.display_options.content_display.grid_layout.cols:e.columnSpan??1}render(){let{hasScrolled:e,hideTabs:t,isRefreshing:n,pwaUpsellBannerEligibility:s,showYipModal:r}=this.state,{checkExperiment:o,dataIsFetching:l,dataIsLoaded:d,dataIsRefreshing:c,deviceType:p,experimentalGutter:f,hasRefreshSpinner:w,headerHeight:y,homefeedData:v,i18n:P,inFluidGridExp:A,inFluidGridGroup:C,inLocalNavigation:E,isInGridLoadingStateExp:R,location:Z,requestContext:B,viewer:F}=this.props,D=v||[],L=D[0],N=!!L&&"story"===L.type&&["board_more_ideas","boards_more_ideas_feed_upsell_list_cards","boards_more_ideas_feed_upsell_list_cards_square"].includes(L.story_type);N&&L.objects&&(L.objects=L.objects.filter(e=>e?.images&&"70x"in e.images&&"170x"in e.images));let W=N?D.slice(1):D,H=navigator.onLine&&(!W||l&&(0===W.length||!d)||n)&&!R,M=Z&&Z.pathname.includes("news_hub"),U=E?W.find(({type:e})=>"home_feed_tabs"===e)?.tabs:void 0,{boardId:O}=(0,ei.mB)(Z.search),Y=o("hfp_pinterest_picks_mock_exp").anyEnabled||o("hfp_web_holiday_finds_gtm").anyEnabled,q=U?this.getCurrentTabIndex(Z,O,U):eh.ef,$=(0,ed.s)({trafficSource:"board",deviceType:p||"desktop",experimentalGutter:f})||0,Q=(0,ed.SY)({deviceType:p||"desktop",experimentalColumnWidth:A?236:void 0}),V=(0,ed.mb)({gutterWidth:$,itemWidth:Q,className:eh.Do});return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(I.Z,{eligibleIds:[505801],placementId:11,children:({complete:e})=>(0,b.jsx)(G.Z,{children:(0,b.jsx)(eE,{complete:e})})}),(0,b.jsx)(I.Z,{eligibleIds:[504943,505226],placementId:11,children:({complete:e,dismiss:t,experience:{display_data:n}})=>{let i=!("is_blocking"in n)||!!n.is_blocking,s=n.message_blocking;return i||(s=n.message_dismissible),(0,b.jsx)(eS,{complete:e,dismiss:t,isBlockingModal:i,modalDescription:s})}}),(0,b.jsx)(I.Z,{eligibleIds:[505111],placementId:11,children:({complete:e,dismiss:t})=>(0,b.jsx)(i.Suspense,{children:(0,b.jsx)(eA,{complete:e,dismiss:t})})}),"windows"===s&&(0,b.jsx)(I.Z,{eligibleIds:[501123],placementId:11,children:({complete:e})=>(0,b.jsx)(i.Suspense,{children:(0,b.jsx)(ej,{handleComplete:()=>this.handleInstallWindowsPWA(e),language:B.language||"",locale:B.locale||""})})}),"chrome"===s&&(0,b.jsx)(I.Z,{eligibleIds:[500999],placementId:11,children:({complete:e,dismiss:t})=>(0,b.jsx)(J.Z,{completeButtonText:P._('Get the app', 'Confirm button to install Chrome PWA', 'Confirm button to install Chrome PWA'),dismissButtonText:P._('Not now', 'Dismiss button for Chrome PWA upsell banner', 'Dismiss button for Chrome PWA upsell banner'),message:P._('Get our Chrome app for faster searching and saving', 'Text for banner to install Chrome PWA', 'Text for banner to install Chrome PWA'),onComplete:()=>this.handleInstallChromePWA(e),onDismiss:()=>this.handleDismissChromePWAUpsell(t)})}),e&&(0,b.jsx)(I.Z,{eligibleIds:[502535],placementId:11,children:({complete:e,dismiss:t})=>(0,b.jsx)(i.Suspense,{children:(0,b.jsx)(eI,{handleComplete:e,handleDismiss:t})})}),r&&(0,b.jsx)(S.Z,{name:"SafeSuspense_AuthHomefeed_YearInPreview",children:(0,b.jsx)(eP,{onModalDismiss:()=>{this.setState({showYipModal:!1})}})}),(0,b.jsx)(K.Z,{view:1,viewParameter:92,children:(0,b.jsxs)(i.Fragment,{children:[F.isAuth&&F.isPartner&&!M&&(0,b.jsx)(S.Z,{name:"SafeSuspense_AuthHomefeed_MoreIdeas",children:(0,b.jsx)(a.Le,{top:y,zIndex:new a.Ry(this.isHomefeed?2:0),children:(0,b.jsx)(a.xu,{ref:e=>this.scrollContainer=e,"data-root-margin":"more-ideas-tabs",height:u.Z,children:(0,b.jsx)(ev,{fallback:(0,b.jsx)(h.MoreIdeasFallback,{}),hideTabs:t,nonFixed:!0})})})}),this.isHomefeed&&(0,b.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:T.$H}},"data-test-id":"homefeed-feed",children:[(0,b.jsx)(ec.Z,{text:this.props.i18n._('Home', 'text for accessibility hidden heading', 'text for accessibility hidden heading')}),!H&&(0,b.jsxs)(i.Fragment,{children:[w&&c&&(0,b.jsx)(a.xu,{paddingY:6,children:(0,b.jsx)(a.$j,{accessibilityLabel:this.props.i18n._('Refreshing homefeed', 'Authhomefeed.refreshSpinner', 'spinner for refreshing homefeed'),show:!0})}),N&&(0,b.jsx)(a.xu,{marginBottom:2,marginTop:4,children:(0,b.jsxs)("div",{className:"gridCentered",children:[(0,b.jsx)(z.Z,{unsafeCSS:(0,k.Z)({gutterWidth:0,isRTL:!1,itemWidth:T.yF+T.ZZ,maxColumns:W.length,minColumns:T.yc})}),(0,b.jsx)(eC,{disableLastGutter:!0,fallback:(0,b.jsx)(a.xu,{height:142}),feed:[L],view:1,viewParameter:92})]})}),!!U?.length&&F.isAuth&&!F.isPartner&&(0,b.jsx)(el.Z,{dataLayoutShiftBoundaryId:"TabsContentHeader",position:"sticky",shouldShowShadow:!0,stickyZIndex:new a.H3(this.isHomefeed?[new a.Ry(1)]:[new a.Ry(0)]),style:{width:"100%",backgroundColor:"#ffffff"},children:(0,b.jsx)(a.xu,{"data-root-margin":"more-ideas-tabs",marginBottom:q!==eh.ef&&"enabled_bmi_header"===o("hfp_local_nav_tabs_web").group?0:4,marginEnd:(0,x.mH)(C||""),marginStart:(0,x.mH)(C||""),marginTop:2,overflow:"visible",children:A?(0,b.jsx)(ev,{boards:U,currentTabIndex:q,hideTabs:t,inLocalNavigation:E,nonFixed:!0}):(0,b.jsxs)("div",{className:eh.Do,style:{margin:"auto"},children:[(0,b.jsx)(z.Z,{unsafeCSS:V}),(0,b.jsx)(ev,{boards:U,currentTabIndex:q,hideTabs:t,inLocalNavigation:E,nonFixed:!0})]})})}),!!U?.length&&!!q&&"pinterest_picks"===U[q-1].tab_type&&Y&&(0,b.jsx)(g,{getColumnSpanConfig:e=>this.getColumnSpanConfig(e),renderItem:this.renderItem}),!!U?.length&&!!q&&"pinterest_picks"!==U[q-1].tab_type&&(0,b.jsx)(ek,{experimentalGutter:f,inFluidGridExp:A||!1,inFluidGridGroup:C||"",inLocalNavigation:E,tabBoard:U[q-1]}),q===eh.ef&&(0,b.jsx)(m.Z,{includeBackgroundImages:!0,includeVideos:!0,isAtEndOfFeed:this.props.dataIsAtEnd,isPlaceholderGrid:R,itemCount:W.length,pinData:W,children:(0,b.jsx)(_.default,{_dynamicHeights:!0,_getColumnSpanConfig:e=>this.getColumnSpanConfig(e),cacheKey:"homefeed",columnWidth:T.yF,items:W,loadItems:this.loadItems,masonryRef:eZ,renderItem:this.renderItem,useLoadingState:R})})]}),(0,b.jsx)(j.Z,{placementId:11}),(0,b.jsx)(K.Z,{auxData:this.getTimeSpentSpinnerAuxData(),component:13213,children:(0,b.jsx)(i.Fragment,{children:H?(0,b.jsxs)(a.xu,{paddingY:6,position:"relative",children:[(0,b.jsx)(a.$j,{accessibilityLabel:this.props.i18n._('Loading homefeed', 'spinner for loading homefeed', 'spinner for loading homefeed'),show:!0}),(0,b.jsx)(a.kC,{alignItems:"stretch",justifyContent:"center",children:(0,b.jsx)(a.xu,{marginTop:8,maxWidth:"432px",children:(0,b.jsx)(a.X6,{align:"center",size:"500",children:this.props.i18n._('We\'re adding new ideas to your home feed!', 'loading message for home feed', 'loading message for home feed')})})})]}):(0,b.jsx)(a.xu,{})})})]})]})})]})}}function eL(e){let t=(0,B.ZP)(),n=(0,es.ZP)(),o=(0,s.I0)(),l=(0,r.TH)(),c=(0,eo.Z)(),u=(0,M.B)(),h=(0,Q.Z)(),p=(0,ew.AF)(),_=(0,e_.f)(),{pins:m,clear:g}=(0,ep.Z)(),x=(0,V.F9)(),{mountPlacement:P,unmountPlacement:S}=(0,C.Z)(),{checkExperiment:I}=(0,W.F)(),j=(0,Z.aX)(),k=(0,A.Z)(),R=(0,r.k6)(),z=(0,ea.Z)(),{shouldMaintainHomefeed:F}=(0,w.Z)(),D=(0,eu.t)(),N=(0,em.Z)(),{anyEnabled:H,group:O,experimentalGutter:G}=(0,E.Z)(),q=(0,f.Z)(N?null:{...e.homefeedResourceConfig,enabledRouteRefresh:!F}),$=(0,U.Z)(e.homefeedResourceRef);(0,i.useEffect)(()=>{N&&!F&&R?.action!=="POP"&&e.homefeedResourceRef.refresh()},[R,e.homefeedResourceRef,N,F]);let K=N?$.isAtEnd:q.isAtEnd,J=N?e.homefeedResourceRef.isFetching:q.isFetching,X=N?e.homefeedResourceRef.isLoaded:q.isLoaded,ee=N?e.homefeedResourceRef.isRefreshing:q.isRefreshing,et=N?e.homefeedResourceRef.fetchMore:q.fetchMore,ei=N?$.data:q.data,el=N?e.homefeedResourceRef.refresh:q.refresh,ed=N?$.auxData?.w_h_ratio:q.auxData?.w_h_ratio,ec=("enabled"===I("dweb_hfp_even_grid_res_users").group||"enabled"===I("dweb_hfp_even_grid_new_users").group)&&ed?{width:T.yF,height:T.yF*ed}:void 0,eh=I("hfp_local_nav_tabs_web").anyEnabled,ef=(0,d.Z)();(0,er.Z)(()=>{let e=ei||[];if(!c.isPartner&&(0,L.Z)(c.createdAt)&&e.length>0){let e=Y.ZP.getItem(v.M8);if(e||m.length>0){let n=[...m,...e?[{id:e}]:[]];setTimeout(()=>{n.forEach(({id:e,nodeId:n})=>{(0,y.Z)({description:"",entityId:e,link:"",promotedIsRemovable:void 0,title:""},t).then(t=>{let{id:i,url:s,name:r}=t;o((0,eb.d)({boardId:i,url:s,title:r||"",pinId:e||"",nodeId:n}))})}),h({action:"trigger",item:"unauth-save-button-quicksave"}),o((0,eg.hT)(!0)),Y.ZP.removeItem(v.M8),Y.ZP.removeItem(v.RD),g()},1500)}}});let ex=(0,i.useCallback)(()=>P(1000294,{}),[P]),ey=(0,i.useCallback)(()=>S(1000294),[S]);return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(a.Le,{top:D,children:(0,b.jsx)(en,{})}),(0,b.jsx)(eD,{...e,checkExperiment:I,cropOptions:ec,currentHistoryStack:j,dataIsAtEnd:K,dataIsFetching:J,dataIsLoaded:X,dataIsRefreshing:ee,deviceType:n,dispatch:o,experienceClient:k,experimentalGutter:G,fetchMoreData:et,hasRefreshSpinner:!0,headerHeight:D,history:R,homefeedData:ei,i18n:t,inFluidGridExp:H,inFluidGridGroup:O,inLocalNavigation:eh,isInGridLoadingStateExp:ef,lfvExperiences:z,location:l,mostRecentPLP:_.id?p[_.id]:null,mountWebRepinPlacement:ex,refreshData:el,requestContext:u,toastManagerContext:x,unmountWebRepinPlacement:ey,viewer:c})]})}function eN(e){let t=(0,o.q)(),n=(0,i.useMemo)(()=>t(),[t]),s=(0,em.Z)(),r=(0,O.Z)(s?n:null);return s?(0,b.jsx)(i.Suspense,{children:(0,b.jsx)(eL,{...e,homefeedResourceConfig:n,homefeedResourceRef:r})}):(0,b.jsx)(eL,{...e,homefeedResourceConfig:n,homefeedResourceRef:r})}},427380:function(e,t,n){n.r(t),n.d(t,{default:()=>j,MoreIdeasFallback:()=>S});var i=n("667294"),s=n("616550"),r=n("883119"),a=n("47988"),o=n("219300"),l=n("836855"),d=n("69103"),c=n("708130"),u=n("24461"),h=n("391374"),p=n("812035"),_=n("785893");let m=new r.Ry(6),f=new r.Ry(1);function b({boards:e,currentTabId:t,currentTabIndex:n,headerShadowContext:s,hideTabs:b,inLocalNavigation:g,isPartner:w,isTodayTabEnabled:x,nonFixed:y}){let v=(0,c.ZP)(),{logContextEvent:P}=(0,o.v)(),S=(0,i.useRef)(null),I=(0,i.useRef)(null),j=(0,i.useRef)(null),[A,C]=(0,i.useState)(0),[k,E]=(0,i.useState)(!1),[R,T]=(0,i.useState)(!1),[Z,B]=(0,i.useState)(0),[z,F]=(0,i.useState)(0),D=(e,t)=>(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{background:`linear-gradient(to ${"back"===e?"right":"left"}, #FFFFFF 51.56%, rgba(255, 255, 255, 0) 100%`,padding:"back"===e?"8px 32px 8px 0":"8px 0 8px 32px"}},left:"back"===e,position:"absolute",right:"forward"===e,children:(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px 0px rgba(0, 0, 0, 0.1)"}},rounding:"circle",children:(0,_.jsx)(r.hU,{accessibilityLabel:"back"===e?v._('Previous tabs', 'localNav.tab.backArrow', 'accessibility label for local navigation back arrow'):v._('Next tabs', 'localNav.tab.fwdArrow', 'accessibility label for local navigation forward arrow'),bgColor:"white",icon:"back"===e?"arrow-back":"arrow-forward",onClick:t,size:"sm"})})}),L=({activeTabIndex:t,currentTab:n})=>{if(!w&&g&&e?.[t-1]?.tab_type==="pinterest_picks")return 14584;switch(n){case"homefeed":return 11081;case"today":return 11674;default:return 11082}},N=(()=>{let t=[{href:"/homefeed/",id:"homefeed",text:w&&!g?v._('For you', 'authHomefeed.moreIdeasNav.homefeed', 'Homefeed tab shown when user is a partner'):v._('All', 'authHomefeed.moreIdeasNav.homefeed', 'Homefeed tab shown when user is not a partner ')}];if(w&&!g)return x?[...t,{href:(0,p.tG)(),id:"today",text:v._('Explore', 'authHomefeed.moreIdeasNav.explore', 'Explore tab shown when user is a partner')}]:t;if(e&&g){let n=e.findIndex(e=>"board_more_ideas"===e.tab_type);return[...t,...e.map((e,t)=>({href:"pinterest_picks"===e.tab_type?"/homefeed/holiday_finds/":`/?boardId=${e.id}`,id:String(e.id),text:e.name,ref:t===n?I:void 0}))]}return t})(),W=(0,i.useCallback)((e,t)=>{E(e>0),T(e<t)},[]),H=(0,i.useCallback)(e=>{let t=j.current;if(t&&null!=n){let i=t.children[0]?.children[0]?.children[n];if(i){let n=t.clientWidth,s=i.offsetLeft-(n-i.offsetWidth)/2;F(s=Math.max(0,Math.min(s,e))),W(s,e)}}},[n,W]),M=(0,i.useCallback)(()=>{let e=Math.min(z+(A-90),Z);F(e),W(e,Z)},[z,A,Z,W]),U=(0,i.useCallback)(()=>{let e=Math.max(z-(A-90),0);F(e),W(e,Z)},[z,A,Z,W]);(0,i.useEffect)(()=>(s.setSubheaderShadow("moreIdeas"),S.current&&u.Z.addObstruction("top",S.current),()=>{s.setSubheaderShadow(null)}),[s]),(0,i.useEffect)(()=>{let e=(0,l.Z)(()=>{let e=j.current;if(e){let t=e.children[0]?.scrollWidth||0,n=e.clientWidth,i=Math.max(0,t-n);C(n),B(i),F(Math.min(z,i)),H(i)}},200);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[z,H]),(0,i.useEffect)(()=>{let e=j.current;if(e){let t=e.children[0]?.scrollWidth||0,n=e.clientWidth,i=Math.max(0,t-n);C(n),B(i),F(Math.min(0,i)),H(i)}},[H]);let O=g?n:N.findIndex(e=>e.id===t),G=O?N[O]:void 0;return(0,_.jsx)(r.xu,{ref:S,children:(0,_.jsx)(r.xu,{color:"default",dangerouslySetInlineStyle:{__style:{transform:b?"translate(0, -64px)":"translate(0, 0)",transition:"all .2s cubic-bezier(0.1, 0.7, 1, 0.1)",...s.isScrolled&&!g?h.Rz:{}}},position:y?"static":"fixed",width:"100%",zIndex:m,children:(0,_.jsxs)(r.xu,{ref:j,alignItems:"stretch",dangerouslySetInlineStyle:{__style:{overflowX:"clip"}},display:"flex",justifyContent:!w&&g?"start":"center",width:"100%",children:[(0,_.jsxs)(r.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:`-${z}px`,transition:"left 0.3s, right 0.3s"}},display:"flex",height:a.Z,justifyContent:!w&&g?"start":"center",paddingY:0,position:"relative",children:[(0,_.jsx)(r.mQ,{activeTabIndex:null!=O&&G?O:0,onChange:({activeTabIndex:e,event:t})=>{t.preventDefault();let n=N[e];n&&P({aux_data:{index:e.toString()},component:13184,element:L({activeTabIndex:e,currentTab:n.id}),event_type:101,view_parameter:3173,view_type:1})},tabs:N}),!w&&g&&I?.current&&(0,_.jsx)(d.default,{anchor:I?.current,experienceIds:[506684],forceDirection:!0,idealDirection:"down",placementId:11,showCaret:!0,textWeight:"normal",zIndex:h.NW})]}),g&&!w&&(0,_.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",zIndex:f,children:[k&&D("back",U),R&&D("forward",M)]})]})})})}var g=n("250487"),w=n("803736"),x=n("137123"),y=n("959474"),v=n("943281"),P=n("102635");let S=()=>(0,_.jsx)(r.xu,{height:a.Z}),I=({search:e})=>e&&"string"==typeof(0,x.mB)(e).boardId&&(0,x.mB)(e).boardId||null;function j({boards:e,currentTabIndex:t,hideTabs:n,inLocalNavigation:r,nonFixed:a}){let o=(0,P.WQ)(),{setIsContentHeaderPresent:l}=(0,v.i)(),d=(0,s.TH)(),c=(0,y.Z)(),u=!!c.isAuth&&c.isPartner,h=(0,w.Z)(),m=h?{component:8,element:11674}:Object.freeze({});return((0,g.Z)(m),(0,i.useEffect)(()=>(l(!0),function(){l(!1)}),[]),u&&d||r)?(0,_.jsx)(b,{boards:e,currentTabId:function(){let{pathname:e,search:t}=d;if(u){if("/following/"===e)return"following";if(e.includes((0,p.tG)()))return"today";if("/homefeed/"===e&&""===t)return"homefeed"}return I(d)}(),currentTabIndex:t,headerShadowContext:o,hideTabs:n,inLocalNavigation:r,isPartner:u,isTodayTabEnabled:h,nonFixed:a}):null}},47988:function(e,t,n){n.d(t,{Z:function(){return i}});let i=64},804167:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(694623);async function s(e,t){let n=async()=>{let e={name:t._('Quick Saves', 'quickSave.defaultBoardName', 'Name of the auto-created board for quicksave experience saves.'),layout:"quick_saves",privacy:"public",return_existing:!0,aux_data:{source:"unauth_quick_save"}};return i.Z.create("BoardResource",e).callCreate()},{resource_response:{data:s}}=await n(),r=async t=>i.Z.create("RepinResource",{board_id:t,description:e.description||"",is_removable:e.promotedIsRemovable??void 0,link:e.link,pin_id:e.entityId||"",title:e.title||""}).callCreate({showError:!1});return await r(s.id),s}},450527:function(e,t,n){n.d(t,{$H:function(){return r},AG:function(){return o},GJ:function(){return c},M5:function(){return l},Qu:function(){return s},W5:function(){return d},_Y:function(){return a},mH:function(){return u}});var i=n(883119);let s="bmiTabPage",r=16,a=137,o=103,l="rgba(17,17,17,0.4)",d=new i.Ry(1),c=(e,t,n)=>t.enabled_226_12&&"enabled_226_12"===e?t.enabled_226_12:t.enabled_221_16&&"enabled_221_16"===e?t.enabled_221_16:t.enabled_230_8&&e.includes("enabled_230_8")?t.enabled_230_8:n,u=e=>c(e,{enabled_226_12:4,enabled_221_16:5,enabled_230_8:3},2)},250487:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(667294),s=n(219300),r=n(264723);let a=e=>{let t=(0,i.useRef)(!1),{logContextEvent:n}=(0,s.v)(),{viewType:a,viewParameter:o}=(0,r.SU)();(0,i.useEffect)(()=>{Object.entries(e).length>0&&!t.current&&a&&(n({event_type:13,view_type:a,view_parameter:o,...e}),t.current=!0)})}},164927:function(e,t,n){n.d(t,{C5:function(){return s},Do:function(){return r},ef:function(){return i}});let i=0,s=new Set(["/","/today"]),r="localNavTabCarousel"},356336:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(561162);function s(){return(0,i.F)().checkExperiment("web_homefeed_suspense_resource").anyEnabled}},689222:function(e,t,n){function i(e){return{type:"PIN_QUICK_SAVE",payload:e}}function s(e){return{type:"UPDATE_PINS_WITH_QUICKSAVE_REPIN",payload:{newPin:e}}}n.d(t,{X:function(){return s},d:function(){return i}})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/7305-a4496d3b3e7bcf20.mjs.map