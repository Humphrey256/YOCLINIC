"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["16223"],{488944:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:function(){return s}});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardRep_board",selections:[{alias:"boardAccess",args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"archivedByMeAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"boardOrderModifiedAt",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[i,a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CoverPin",kind:"LinkedField",name:"coverPin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"crop",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}],storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"followedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasCustomCover",storageKey:null},{alias:"images170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"170x")'},{alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isTemporarilyDisabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[a,{args:null,kind:"FragmentSpread",name:"BoardCard_user"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinThumbnailUrls",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sectionCount",storageKey:null},{alias:null,args:null,concreteType:"SensitivityScreen",kind:"LinkedField",name:"sensitivityScreen",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showWarning",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldShowBoardCollaborators",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},l,{args:null,kind:"FragmentSpread",name:"useGetCoverPhoto_board"}],type:"Board",abstractKey:null};r.hash="3fc8a3c79e94dc09a6f9c6b242ea21dc";let s=r},653984:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:function(){return s}});let r=(i={alias:null,args:null,kind:"ScalarField",name:"heading",storageKey:null},l=[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CardSourceDescriptionText_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinBasics",kind:"LinkedField",name:"basics",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinListBlock",kind:"LinkedField",name:"listBlocks",plural:!0,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[{kind:"InlineFragment",selections:[a,i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[{kind:"InlineFragment",selections:l,type:"TextBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"ParagraphBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"HeadingBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"LinkBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"StoryPinImageBlock",abstractKey:null},{kind:"InlineFragment",selections:l,type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],type:"StoryPinListBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinKeyValueBlock",kind:"LinkedField",name:"keyValueBlocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"categoryType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"objectId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});r.hash="c59b0c8f1e2d8941637eb8ebc540d999";let s=r},235118:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselVideoItem_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="510195e37611b9b69a16eccfeb13e9cf";let a=i},313566:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:function(){return s}});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupAttributionAndDescription_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"authorName",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"authorUrl",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"ccUrl",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"providerName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"providerUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtype",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaAttribution",kind:"LinkedField",name:"mediaAttribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null},i,a,{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaType",storageKey:null},l],storageKey:null},{args:null,kind:"FragmentSpread",name:"Description_pin"}],type:"Pin",abstractKey:null};r.hash="7142df6a7a3c1aee54267c5441d3d50b";let s=r},54163:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"CarouselVideoItem_pin"}],type:"Pin",abstractKey:null};i.hash="83e61e6fc89222c2a0b03276839f44a5";let a=i},783072:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCutout_pin",selections:[{alias:null,args:null,concreteType:"ShuffleAsset",kind:"LinkedField",name:"shuffleAsset",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"buildCutout_image_details",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],args:null,argumentDefinitions:[]}],storageKey:'cutoutImages(spec:"originals")'}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="85d67dc4c42c4d27b7d701b2e5f85f14";let a=i},701645:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:function(){return s}});let r=(i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],l=[a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupLink_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[{alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadFormId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null});r.hash="5186d62da994a6e2ad78ea5d7022cc61";let s=r},427464:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupMainPinImpression_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="9fe338bb0275ffff2818b274fce014af";let a=i},410388:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedModule_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupRelatedModuleOneTapConfiguration_pin"}],type:"Pin",abstractKey:null};i.hash="535b0dce979f4e368b354c1d7db63f73";let a=i},954795:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedModulesContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"CloseupRelatedPins_pin"},{args:null,kind:"FragmentSpread",name:"CloseupRelatedModule_pin"},{args:null,kind:"FragmentSpread",name:"useIsInCloseupShoppingRefinementsExp_pin"}],type:"Pin",abstractKey:null};i.hash="0122ac469895f29aa7d039970fa36eb0";let a=i},636689:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupRelatedPins_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"ShoppingModule_pin"}],type:"Pin",abstractKey:null};a.hash="3fa8620068a79dc4a73dbbcde3f352f9";let l=a},741789:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoEndCard_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="e04be51b4be0a2585e7803d004fa83b7";let a=i},646583:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoNonDuplo_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoEndCard_pin"},{args:null,kind:"FragmentSpread",name:"VideoWithContextLogging_pin"},{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};i.hash="53ae9ecd15f057f744460205e5d495fd";let a=i},865637:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoWithVisibility_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};i.hash="60493becbbe037be854a8cd1136fede6";let a=i},663930:function(e,t,n){var i,a;n.r(t),n.d(t,{default:function(){return r}});let l=(a=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="6e4bec581cece19361386d6124ddde90";let r=l},254203:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:function(){return s}});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CreatorCard_pin",selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"templateType",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isAdsOnlyProfile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adsOnlyProfileSite",storageKey:null},i,a={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[a,l],storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"creator",plural:!1,selections:[{alias:"creatorId",args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:[{alias:"sponsorId",args:null,kind:"ScalarField",name:"id",storageKey:null},a,l],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{args:null,kind:"FragmentSpread",name:"useCreatorRecsPrevStateCloseup_pin"}],type:"Pin",abstractKey:null};r.hash="e1e37c221693c863e8ed160cd9265c59";let s=r},197096:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CutoutParentPin_pin",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"followerCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"siteName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="0621674c84b2dfd6957d10ac96954bb6";let a=i},716e3:function(e,t,n){var i,a,l,r;n.r(t),n.d(t,{default:function(){return o}});let s=(a=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DefaultMetadata_pin",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUserNote",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:r=[l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"affiliateLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"objectId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"originPin",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:a,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[l,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:r,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasProductPins",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasAffiliateProducts",storageKey:null},{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinBasics",kind:"LinkedField",name:"basics",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinKeyValueBlock",kind:"LinkedField",name:"keyValueBlocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"categoryType",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"templateType",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useHandleTitleClick_pin"},{args:null,kind:"FragmentSpread",name:"useIsGroupBoard_pin"},{args:null,kind:"FragmentSpread",name:"useIsBoardOwnerOrCollaborator_pin"},{args:null,kind:"FragmentSpread",name:"useCloseupBodyUtils_pin"},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"},{args:null,kind:"FragmentSpread",name:"TitleDesktop_pin"},{args:null,kind:"FragmentSpread",name:"PartnerModule_pin"},{args:null,kind:"FragmentSpread",name:"SavedInfo_pin"},{args:null,kind:"FragmentSpread",name:"CreatorCard_pin"},{args:null,kind:"FragmentSpread",name:"VisitButton_pin"},{args:null,kind:"FragmentSpread",name:"CloseupAttributionAndDescription_pin"}],type:"Pin",abstractKey:null});s.hash="632786254ea232e7f61cc27d859c1fe7";let o=s},910230:function(e,t,n){var i,a,l;n.r(t),n.d(t,{default:function(){return s}});let r=(i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],l=[a={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Description_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:i,storageKey:null},a,{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:l,storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CardSourceDescriptionText_pin"}],type:"Pin",abstractKey:null});r.hash="28ab0b1e7aa7707dbaca4eab96280169";let s=r},864541:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButton_pin",selections:[{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};i.hash="08b89bb2190b936e38e11d4ce341058f";let a=i},292289:function(e,t,n){var i,a,l,r,s,o,d;n.r(t),n.d(t,{default:function(){return u}});let c={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LinkModule_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[a={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},a,r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},l,{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:s=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[r],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:d=[o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:s,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},o],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:d,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null}],type:"Pin",abstractKey:null};c.hash="2be523d18cdb97a01003da320f0cb7d3";let u=c},130643:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MaybeClickthroughLink_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[i={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},i,{args:null,kind:"FragmentSpread",name:"LinkModule_pin"}],type:"Pin",abstractKey:null};a.hash="39a7882a66a91ae06ef6da7137136e67";let l=a},459019:function(e,t,n){var i,a;n.r(t),n.d(t,{default:function(){return r}});let l=(a=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductCommentsAccordion_pin",selections:[i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:a,storageKey:null}],type:"Pin",abstractKey:null});l.hash="7b93dc8732e3dc9764f0322a05c18386";let r=l},430624:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedModule_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};i.hash="cce8a8d5ad05c8e6c1137bf7c8845c2a";let a=i},986214:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedModules_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"ProductDetailPageRelatedPins_pin"},{args:null,kind:"FragmentSpread",name:"ProductDetailPageRelatedModule_pin"},{args:null,kind:"FragmentSpread",name:"useIsInCloseupShoppingRefinementsExp_pin"}],type:"Pin",abstractKey:null};i.hash="ab1d44e9e9493de6e62e369100d61e23";let a=i},825888:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductDetailPageRelatedPins_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"ShoppingModule_pin"}],type:"Pin",abstractKey:null};a.hash="86cb4963f4714e2184c01e13236c3616";let l=a},219974:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProductHeading_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};a.hash="20bd5f77ed00d817dd05c61ec8903627";let l=a},616683:function(e,t,n){var i,a,l,r,s,o,d,c,u,p,m,g,h,_,y,f,x,v,k,b,P,S,w,j,I,C,T,F,L,A,K,Z,R,E,D,z,M,B,O,V,H,U,N,W,$,G,X,q,Y,J,Q,ee,et,en,ei,ea,el,er,es,eo,ed;n.r(t),n.d(t,{default:function(){return eu}});let ec=(i={defaultValue:null,kind:"LocalArgument",name:"isDesktop"},a={defaultValue:null,kind:"LocalArgument",name:"pinId"},l=[{kind:"Variable",name:"pin",variableName:"pinId"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s={alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},d=[o={alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null}],u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},m=[{kind:"Literal",name:"spec",value:"236x"}],y={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"followedByMe",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},j=[g={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],I=[{kind:"Literal",name:"spec",value:"170x"}],C=[{kind:"Literal",name:"spec",value:"474x"}],T=[{kind:"Literal",name:"spec",value:"736x"}],F={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},R=[p,L={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},b,r,A={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],E={alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},z={alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[D={alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null},M=[r],B={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null},O={alias:"productId",args:null,kind:"ScalarField",name:"id",storageKey:null},U={alias:"image236x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:H=[{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:V=[h,c,_],storageKey:null},w],storageKey:'additionalImagesPerSpec(spec:"236x")'},N={alias:"image474x",args:C,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:H,storageKey:'additionalImagesPerSpec(spec:"474x")'},$={alias:"image564x",args:W=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:H,storageKey:'additionalImagesPerSpec(spec:"564x")'},G={alias:"image736x",args:T,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:H,storageKey:'additionalImagesPerSpec(spec:"736x")'},X=[p,L,b,A,K,Z],q={alias:"entityId",args:null,kind:"ScalarField",name:"id",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},et=[c],en={alias:null,args:null,concreteType:"PinAnalyticsStats",kind:"LinkedField",name:"creatorAnalytics",plural:!1,selections:[{alias:null,args:null,concreteType:"CreatorAnalytics",kind:"LinkedField",name:"_30dRealtime",plural:!1,selections:M,storageKey:null}],storageKey:null},ei=[A,b],eo={alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},ed=[ea={alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null},el={alias:null,args:null,kind:"ScalarField",name:"localPinId",storageKey:null},er={alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},es={alias:null,args:null,kind:"ScalarField",name:"sectionId",storageKey:null},u,y,c],{fragment:{argumentDefinitions:[i,a],kind:"Fragment",metadata:null,name:"ShoppingModuleQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"v3GetStelaShoppingCarouselQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[r,{args:null,kind:"FragmentSpread",name:"ShoppingModule_v3GetStelaShoppingCarousel"}],type:"V3GetStelaShoppingCarousel",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,i],kind:"Operation",name:"ShoppingModuleQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"v3GetStelaShoppingCarouselQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"data",plural:!0,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayViewState",storageKey:null},{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentCarouselDisplayOptions",kind:"LinkedField",name:"carouselDisplayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"navigationType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselScrollingMode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null},{alias:null,args:null,concreteType:"StoryContentVisibleItemCount",kind:"LinkedField",name:"contentVisibleItemCount",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mobile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"web",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryTilesGridLayout",kind:"LinkedField",name:"gridLayout",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cols",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemWidthHeightRatio",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselFadeEnds",storageKey:null},{alias:null,args:null,concreteType:"StoryItemViewRepStyle",kind:"LinkedField",name:"itemViewRepStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"exploreArticleRepStyle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"moreIdeasRepStyle",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDisplay",kind:"LinkedField",name:"headerDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expandedTextAlignment",storageKey:null},{alias:null,args:null,concreteType:"StoryThumbnailDisplayOptions",kind:"LinkedField",name:"thumbnail",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thumbnailUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnailWidth",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnailWidthHeightRatio",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"textAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"headerSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"titlePosition",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleStyle",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"titleTextColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleTextColor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:d,storageKey:null},{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"requestParams",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[r,o],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[r,{kind:"InlineFragment",selections:[u,p,{alias:"imageSpec_236x",args:m,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[c,g,h,_],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"adMatchReason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,concreteType:"Attribution",kind:"LinkedField",name:"attribution",plural:!1,selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[y],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"adDestinationUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[p,f,x,v,c,k,b,P,{alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[p,b],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"descriptionHtml",storageKey:null},S,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},g,{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},y,_],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,concreteType:"ImageCrop",kind:"LinkedField",name:"imageCrop",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"maxY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"minY",storageKey:null}],storageKey:null},w,{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:j,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:I,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:j,storageKey:'images(spec:"170x")'},{alias:"imageSpec_474x",args:C,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:j,storageKey:'images(spec:"474x")'},{alias:"imageSpec_736x",args:T,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:j,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[g,h,c,_,r],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},F,{alias:null,args:null,kind:"ScalarField",name:"mobileLink",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:R,storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[x,c],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingKlpUrls",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[p,k,x,c,b,r],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"explicitlyFollowedByMe",storageKey:null},L,b,A,Z,{alias:null,args:null,kind:"ScalarField",name:"imageLargeUrl",storageKey:null},E,z,K,r],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:R,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[S,u,{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:M,storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[r,x,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:M,storageKey:null}],storageKey:null},B,O,U,N,$,G,{alias:"additionalImageSpec_236x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:M,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:"additionalImageSpec_474x",args:C,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:M,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImageSpec_564x",args:W,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:M,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImageSpec_736x",args:T,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:M,storageKey:'additionalImagesPerSpec(spec:"736x")'}],storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},B,{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[x],storageKey:null},O,U,N,$,G,{alias:null,args:null,concreteType:"LabelInfo",kind:"LinkedField",name:"labelInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"labels",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"siteName",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"displayCookTime",storageKey:null},{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"Sponsorship",kind:"LinkedField",name:"sponsorship",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"creator",plural:!1,selections:X,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sponsor",plural:!1,selections:X,storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isDeleted",storageKey:null},{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},b,r,{alias:null,args:null,kind:"ScalarField",name:"hasProductPins",storageKey:null},{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},{alias:null,args:null,concreteType:"StoryPinVideoMetadata",kind:"LinkedField",name:"video",plural:!1,selections:[q,{alias:null,args:null,concreteType:"StoryPinVideoFormats",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:[h,Y,_,c],storageKey:null}],storageKey:null}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalVideoDuration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"staticPageCount",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},J,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[p,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:[Q,h,_,c,r],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[r,h,Y,c,_],storageKey:null},r,{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:M,storageKey:null}],storageKey:null},b,r,Q],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[x,c,b,r,p],storageKey:null},ee,{alias:null,args:null,kind:"ScalarField",name:"reasonId",storageKey:null},{alias:null,args:null,concreteType:"PinThroughProperties",kind:"LinkedField",name:"throughProperties",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[u,{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null},F,q,{alias:"slotId",args:null,kind:"ScalarField",name:"id",storageKey:null},w,{alias:"imagesSpec_236x",args:m,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"236x")'},{alias:"image236x",args:m,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"236x")'},{alias:"image474x",args:C,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"474x")'},{alias:"image564x",args:W,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"564x")'},{alias:"image736x",args:T,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"736x")'},r],storageKey:null},b,{alias:"carouselDataId",args:null,kind:"ScalarField",name:"id",storageKey:null},p,r],storageKey:null},{alias:null,args:null,concreteType:"AdTargetingAttribution",kind:"LinkedField",name:"adTargetingAttribution",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"geoPostalCode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"geoRegion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCustomerListMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingRetargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isActalikeMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEngagementMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isExpandTargetingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFromGpsLocation",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVisitorMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppingProspectingMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPlPersonaMatched",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedAgeBucket",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedDevice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedGender",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedInterest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedKeyword",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"matchedLocale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFirstPartyAdPersonalizationEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAdPersonalizationEnabled",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAdvertiserName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedPartnershipAttributionName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPromotedPartnership",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"digitalMediaSourceType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"videoStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"AdData",kind:"LinkedField",name:"adData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ceAltImageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collectionGridClickType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dpaCreativeType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:"imageSpec_564x",args:W,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:et,storageKey:'images(spec:"564x")'},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadFormId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},b,en,{alias:null,args:null,concreteType:"PinTagChipImagesPerSpec",kind:"LinkedField",name:"pinTagsChips",plural:!0,selections:[r,q,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"image",plural:!1,selections:V,storageKey:null},F],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRepin",storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:[A,b,p,K,Z,{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},L],storageKey:null},b,r],storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:ei,storageKey:null},b],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:ei,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viaPinner",plural:!1,selections:ei,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isShoppable",storageKey:null},en,{alias:null,args:null,concreteType:"CollectionPin",kind:"LinkedField",name:"collectionPin",plural:!1,selections:[{alias:null,args:null,concreteType:"CollectionPinItem",kind:"LinkedField",name:"itemData",plural:!0,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"pinId",storageKey:null},{alias:null,args:[{kind:"Literal",name:"spec",value:"750x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:[c,_,h],storageKey:'images(spec:"750x")'},F],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Interest",kind:"LinkedField",name:"sourceInterest",plural:!1,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"urlName",storageKey:null},b,p],storageKey:null},{alias:null,args:null,concreteType:"ReactionCountModel",kind:"LinkedField",name:"reactionCountsData",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reactionCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reactionType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldOpenInStream",storageKey:null},{alias:"image236x",args:m,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"236x")'},{alias:"image474x",args:C,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"474x")'},{alias:"image564x",args:W,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"564x")'},{alias:"image736x",args:T,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:V,storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},b],storageKey:null},{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:et,storageKey:'images(spec:"60x60")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:et,storageKey:'images(spec:"600x315")'},{alias:null,args:null,kind:"ScalarField",name:"isVideo",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedInfo",plural:!1,selections:[ea,el,c,er,es,u,y,r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},eo,{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"saved",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedCutout",plural:!1,selections:ed,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"selectedItem",plural:!1,selections:ed,storageKey:null}]},{condition:"isDesktop",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null}]}],type:"Pin",abstractKey:null},{kind:"InlineFragment",selections:[s,{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:d,storageKey:null}],type:"Story",abstractKey:null},{kind:"InlineFragment",selections:[p,x,{alias:"boardAccess",args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"archivedByMeAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"boardOrderModifiedAt",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[r,p,b],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CoverPin",kind:"LinkedField",name:"coverPin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"crop",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},eo],storageKey:null},f,{alias:null,args:null,kind:"ScalarField",name:"hasCustomCover",storageKey:null},{alias:"images170x",args:I,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!0,selections:et,storageKey:'images(spec:"170x")'},P,{alias:null,args:null,kind:"ScalarField",name:"isTemporarilyDisabled",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"blockedByMe",storageKey:null},A,K,E,L,{alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[x,D],storageKey:null},b],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinThumbnailUrls",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"sectionCount",storageKey:null},{alias:null,args:null,concreteType:"SensitivityScreen",kind:"LinkedField",name:"sensitivityScreen",plural:!1,selections:[ee,{alias:null,args:null,kind:"ScalarField",name:"showWarning",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shouldShowBoardCollaborators",storageKey:null},y,c,{alias:"coverImageSpec_222x",args:[{kind:"Literal",name:"spec",value:"222x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:et,storageKey:'coverImages(spec:"222x")'},{alias:"coverImageSpec_400x300",args:[{kind:"Literal",name:"spec",value:"400x300"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:et,storageKey:'coverImages(spec:"400x300")'},{alias:"coverImageSpec_216x146",args:[{kind:"Literal",name:"spec",value:"216x146"}],concreteType:"ImageDetails",kind:"LinkedField",name:"coverImages",plural:!1,selections:et,storageKey:'coverImages(spec:"216x146")'},{alias:null,args:null,kind:"ScalarField",name:"imageCoverHdUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageCoverUrl",storageKey:null},{alias:"image_170x",args:I,concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!0,selections:et,storageKey:'images(spec:"170x")'}],type:"Board",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"boardMoreIdeasFeedUpsellId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"boardMoreIdeasFeedUpsellName",args:null,kind:"ScalarField",name:"boardName",storageKey:null}],type:"BoardMoreIdeasFeedUpsell",abstractKey:null},{kind:"InlineFragment",selections:[p,L],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[p,{alias:"exploreArticleTitle",args:null,concreteType:"ArticleTitleGraphQL",kind:"LinkedField",name:"title",plural:!1,selections:d,storageKey:null}],type:"ExploreArticle",abstractKey:null},{kind:"InlineFragment",selections:[b],type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[A,E,z,L,K,b],storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"subtitle",plural:!1,selections:d,storageKey:null},{alias:"storyDescription",args:null,concreteType:"StoryText",kind:"LinkedField",name:"description",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slot",storageKey:null},J],storageKey:null}],type:"V3GetStelaShoppingCarousel",abstractKey:null}],storageKey:null}]},params:{id:"c2c73112ceb0c87e752118f4687ae9f4f56af97330ed1240c1a2621fe27d0f98",metadata:{},name:"ShoppingModuleQuery",operationKind:"query",text:null}});ec.hash="ae0dd45720447ea2600d4d0b9300ae1c";let eu=ec;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(ec.default||ec)},954129:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ShoppingModule_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStelaUrlWithLargestStelaObject_pin"}],type:"Pin",abstractKey:null};i.hash="8f5a1016117d8ba33bcd13e6842ad7f2";let a=i},981913:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ShoppingModule_story",selections:[{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"slot",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayViewState",storageKey:null},{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null};i.hash="1dad325a13951c2d1449a683f8133aae";let a=i},676079:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ShoppingModule_v3GetStelaShoppingCarousel",selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"data",plural:!0,selections:[{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayViewState",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"requestParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CarouselModule_story"},{args:null,kind:"FragmentSpread",name:"ShoppingModule_story"}],storageKey:null}],type:"V3GetStelaShoppingCarousel",abstractKey:null};i.hash="7de97cda23e7c0e0ca8a7061c960550e";let a=i},529802:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlockCloseup_pin"}],type:"Pin",abstractKey:null};i.hash="8bb1bb1f7bafeed0fe43bed44ef12d2a";let a=i},261549:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlockCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="7e8d917850c8329247291df0d281a59b";let a=i},738471:function(e,t,n){var i,a,l,r,s,o,d;n.r(t),n.d(t,{default:function(){return u}});let c=(i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},r=[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],s=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TitleDesktop_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},l,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:d=[o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:d,storageKey:null},a,{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinFormattedLink_pin"},{args:null,kind:"FragmentSpread",name:"usePinHasProducts_pin"}],type:"Pin",abstractKey:null});c.hash="d4e636f5150567634adf5f0bc4e7b67e";let u=c},739806:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"},{args:null,kind:"FragmentSpread",name:"CloseupVideoWithVisibility_pin"}],type:"Pin",abstractKey:null};i.hash="89029511c11617e1150976d1002228db";let a=i},163046:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisitButton_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};a.hash="e327c6c7127550a2f17b174cd4dcfa73";let l=a},944443:function(e,t,n){var i,a,l,r,s;n.r(t),n.d(t,{default:function(){return d}});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualContext_pin",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:r=[{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captionsUrls",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:r,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtype",storageKey:null}],storageKey:null},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s=[l,i,a],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'},{alias:"imageSpec_1200x",args:[{kind:"Literal",name:"spec",value:"1200x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"1200x")'}],type:"Pin",abstractKey:null};o.hash="e126fc0a8b5540f962701fad164e178c";let d=o},874466:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={kind:"InlineDataFragment",name:"buildCutout_image_details"};i.hash="c9c1f5db310f1e3f6a6ee886120de1d0";let a=i},207432:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useBuildCloseupImageOverlayProps_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="773fc34db33e0adf6079c9c326106f45";let l=a},287960:function(e,t,n){var i,a,l,r;n.r(t),n.d(t,{default:function(){return o}});let s=(i={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},r=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:l=[{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null}],storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[i,a],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:l,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},i,a,{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null});s.hash="f74f2f62c4eecb2cf72ace142fd51cb3";let o=s},796557:function(e,t,n){var i,a,l,r,s,o,d;n.r(t),n.d(t,{default:function(){return u}});let c=(i={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},l=[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],o={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCloseupBodyUtils_pin",selections:[i,{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[a,{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:l,storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:l,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"ShuffleAsset",kind:"LinkedField",name:"shuffleAsset",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:s=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domainUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domainVerified",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"thirdPartyPinOwner",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:l,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[a,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:s,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[o,i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:d=[r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForAggregatedComments",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"CreatorClass",kind:"LinkedField",name:"creatorClass",plural:!1,selections:l,storageKey:null}],type:"Pin",abstractKey:null});c.hash="b5e0125fa06225b134dd0a5e1c29ac2a";let u=c},262501:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCreatorRecsPrevStateCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"showSuggestedCreatorRecs",storageKey:null}]}],type:"Pin",abstractKey:null};i.hash="a1f87ab2b8198cdc7fd8fc3cdaa872f0";let a=i},103498:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetMainPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};a.hash="3ecf70d7e25decf88c7b8bafd5993b03";let l=a},126087:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};a.hash="3d7a6d04f923d00acfb2887f852aea16";let l=a},654593:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetStelaUrlWithLargestStelaObject_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="93be9368e70d087bc7ea24af201598f9";let a=i},327786:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useHandleBackButtonClick_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,concreteType:"PromotedLeadForm",kind:"LinkedField",name:"promotedLeadForm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"leadId",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};a.hash="efee9cd30f69b524ed9920746ed65ceb";let l=a},459908:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useHandleTitleClick_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="2eb6a7a4cf67ae04de84ac1b2b5e2715";let a=i},104637:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useIsBoardOwnerOrCollaborator_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:i,storageKey:null}],type:"Pin",abstractKey:null};a.hash="120c47eff2cf4911de716b514608718f";let l=a},328230:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useIsGroupBoard_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isCollaborative",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="72582aa208f6837fe96ba824d0271616";let a=i},478641:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useIsInCloseupShoppingRefinementsExp_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"isEligibleForCloseupOneBarRefinements",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null}],type:"Pin",abstractKey:null};i.hash="25d061dfff6d75937841f5a3a23e65e0";let a=i},612658:function(e,t,n){var i;n.r(t),n.d(t,{default:function(){return l}});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMediaContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isHidden",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnsafe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Shuffle",kind:"LinkedField",name:"shuffle",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"ShuffleAsset",kind:"LinkedField",name:"shuffleAsset",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null}],type:"Pin",abstractKey:null};a.hash="93ace6f56ec7b54c66c11d868a89a448";let l=a},70973:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinFormattedLink_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinHasProducts_pin"}],type:"Pin",abstractKey:null};i.hash="1380cc65fb1c2132004a18dee261602e";let a=i},12118:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinHasProducts_pin",selections:[{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="e1f413e0ba2f9031ea605d85baa14a4b";let a=i},816967:function(e,t,n){n.d(t,{CA:function(){return a},Gv:function(){return i},k5:function(){return l}});let i=({orbacSubjectId:e,pinIsRepin:t,pinPinnerId:n,viewerId:i,viewerIsPartner:a})=>!t&&!!a&&[i,e].includes(n),a=e=>!!(e&&!e.insufficient_data_response&&e.results&&e.results.length>0),l=(e,t)=>{if(!e)return e;let n=[...e].filter(e=>!!e.mom_change?.roundedPercentChange&&e.mom_change.roundedPercentChange>0);return n.length<=t?n:Array(t).fill(1).map(()=>{let e=Math.floor(Math.random()*n.length);return n.splice(e,1)[0]})}},29944:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(667294);let a="undefined"!=typeof document?document:{},l=()=>{let e=(0,i.useRef)(),t=a.documentElement,{body:n}=a;return t?[()=>{if(!n||!n.style||e.current)return;let i=window.innerWidth-t.clientWidth,a=parseInt(window.getComputedStyle(n).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",n.style.position="relative",n.style.overflow="hidden",n.style.paddingRight=`${a+i}px`,e.current=!0},()=>{n&&n.style&&e.current&&(t.style.position="",t.style.overflow="",n.style.position="",n.style.overflow="",n.style.paddingRight="",e.current=!1)}]:[]}},852935:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(967629);function a({altText:e,autoAltText:t,i18n:n}){let a=e?(0,i.nk)(n._('This contains: {{ altText }}', 'web.altText', 'Alt text input by a human'),{altText:e}).join(""):"",l=t?(0,i.nk)(n._('This may contain: {{ autoAltText }}', 'web.altText', 'Alt text generated by a computer'),{autoAltText:t}).join(""):"";return a||l||""}},211763:function(e,t,n){n.r(t),n.d(t,{default:()=>B});var i,a,l=n("667294"),r=n("581722");n("167912");var s=n("883119"),o=n("219300"),d=n("558792"),c=n("422578"),u=n("596040");let p=function(e,t,n){switch((0,u.oy)(e)){case"SingularLegacy":case"PluralLegacy":case"PaginationLegacyData":return t;case"GraphQL":{let e=(0,c.useRelayEnvironment)();return t=>(0,c.commitLocalUpdate)(e,e=>n(e,t))}default:throw Error("Unexpected case")}};var m=n("131548"),g=n("708130"),h=n("35988"),_=n("959474"),y=n("80887"),f=n("820368"),x=n("967629"),v=n("236256"),k=n("971634"),b=n("272083"),P=n("98957"),S=n("650201"),w=n("785893");let j=({creatorData:e,onTap:t,onUserFollow:n})=>{let i=(0,g.ZP)(),a=(0,_.Z)(),{explicitly_followed_by_me:l,follower_count:r=0,full_name:o,id:d,image_medium_url:c,username:u,verified_identity:p,is_verified_merchant:m}=e||{},h=`/${u}/`;return(0,w.jsx)(s.sg,{span:4,children:(0,w.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{padding:"0px 2px"}},direction:"column",display:"flex",marginBottom:1,children:[(0,w.jsx)(s.Tg,{href:h,onTap:()=>t(d),children:(0,w.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,w.jsx)(s.xu,{height:60,width:60,children:(0,w.jsx)(k.qE,{name:o??"",size:"fit",src:c??"",verified:!1})}),(0,w.jsxs)(s.xu,{marginBottom:1,paddingY:2,children:[(0,w.jsx)(s.xu,{marginBottom:1,children:(0,w.jsx)(s.xv,{align:"center",lineClamp:1,size:"100",weight:"bold",children:p||m?(0,w.jsx)(S.Z,{badgeSize:"xs",badgeSpacing:2,fullName:o??"",isVerifiedIdentity:p?.verified,isVerifiedMerchant:m}):o})}),(0,w.jsx)(s.xv,{align:"center",size:"100",children:(0,x.nk)(i.ngettext('{{ followerCount }} follower', '{{ followerCount }} followers', r, 'suggestedCreatorRep.creator.followerCount', 'the number of followers the user has'),{followerCount:(0,w.jsx)(b.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:r},r)})})]})]})}),(0,w.jsx)(P.Z,{fullName:o,id:d,imageUrl:c,isOwnProfile:a.isAuth&&a.id===d,isSecondaryButton:!0,onUserFollow:e=>n({userIsNowFollowing:e,creatorId:d}),profileUrl:`/${u}/`,shouldStopEventPropagation:!0,size:"sm",userFollowed:l,viewParameter:156,viewType:3})]})})},I=({creatorRecs:e,fullName:t,pinId:n,viewParameter:i,viewType:a})=>{let{logContextEvent:l}=(0,o.v)(),r=(0,g.ZP)();(0,v.Z)(()=>{l({event_type:13,component:13891,view_parameter:i,view_type:a,aux_data:{...n?{pin_id:n}:{}}})});let d=e=>{l({event_type:101,component:13891,view_parameter:i,view_type:a,object_id_str:e,aux_data:{...n?{pin_id:n}:{}}})},c=({userIsNowFollowing:e,creatorId:t})=>{e?l({event_type:45,component:13891,object_id_str:t,view_parameter:i,view_type:a,aux_data:{...n?{pin_id:n}:{}}}):l({event_type:46,component:13891,object_id_str:t,view_parameter:i,view_type:a,aux_data:{...n?{pin_id:n}:{}}})};return(0,w.jsx)(s.xu,{minWidth:432,paddingY:4,children:(0,w.jsxs)(s.xu,{borderStyle:"shadow",paddingX:5,paddingY:4,rounding:4,children:[t&&(0,w.jsx)(s.X6,{align:"center",size:"300",children:(0,x.nk)(r._('More like {{creatorName}}', 'suggestedCreatorRecs.title', 'Users like the one just followed. creatorName: the creator\'s name'),{creatorName:t})}),(0,w.jsx)(s.xu,{display:"flex",justifyContent:"between",marginTop:4,width:"100%",children:e.map(e=>(0,w.jsx)(j,{creatorData:e.user,onTap:d,onUserFollow:c},e.user_id))})]})})},C=3,T=["creatorrecommendationitem.user_id","creatorrecommendationitem.user()","user.explicitly_followed_by_me","user.id","user.follower_count","user.full_name","user.image_medium_url","user.username","user.verified_identity","user.is_verified_merchant"],F=({fullName:e,id:t,numCreatorsToShow:n=C,pinId:i,viewParameter:a,viewType:l})=>{let r=(0,f.Z)({name:"ApiResource",options:{url:"/v3/orientation/nux_creator_recommendations/",data:{fields:T.join(","),page_size:n,referrer:4,target_user:t}}});if(!r.isLoaded||!(r.data&&r.data.length===n))return null;let s=r.data||[];return(0,w.jsx)(I,{creatorRecs:s,fullName:e,pinId:i,viewParameter:a,viewType:l})};var L=n("170217");let A=void 0!==i?i:i=n(262501),K=e=>e.includes("/:username"),Z=function(e){let t=function(){let{forward:e}=(0,L.Hv)(),t=e&&e.length>0&&e[0].match&&e[0].match.path?e[0].match.path:null;return!!(t&&K(t))}(),n=(0,m.Z)(A,e);if(!t||!n)return{creatorRecsPrevState:!1};{let e=!!n.promotedIsLeadAd,t=n.richSummary?.typeName==="product";return{creatorRecsPrevState:!!n&&!e&&!t&&!!n.showSuggestedCreatorRecs}}};var R=n("444195"),E=n("220334");function D(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let z=void 0!==a?a:a=n(254203);class M extends l.PureComponent{constructor(...e){super(...e),D(this,"state",{shouldShowCreatorRecs:this.props.suggestedCreatorRecsPrevState,user:this.props.officialUser}),D(this,"anchorElementRef",(0,l.createRef)()),D(this,"handleNavigateAndLog",(e,t)=>{let{pin:n}=this.props,i=!!n.storyPinDataId;e===t?this.props.logContextEvent({event_type:101,element:13382,view_type:this.viewType,view_parameter:this.viewParameter,...i?{component:230}:Object.freeze({}),object_id_str:n.entityId,aux_data:{pin_id:n.entityId,creator_id:n.sponsorship?.creator?.creatorId,aop_origin:"CreatorCard",...i?{story_pin_template_type:n.storyPinData?.metadata?.templateType}:{}}}):this.props.logContextEvent({event_type:101,view_type:this.viewType,view_parameter:this.viewParameter,element:11619,...i?{component:230}:Object.freeze({}),object_id_str:n.entityId,aux_data:{pin_id:n.entityId,creator_id:n.sponsorship?.creator?.creatorId,...i?{story_pin_template_type:n.storyPinData?.metadata?.templateType}:{}}})}),D(this,"handleNavigateAndLogSponsorClick",()=>{let{pin:e}=this.props,t=e.entityId,n=e.sponsorship?.creator?.creatorId,i=e.sponsorship?.sponsor?.sponsorId,a=!!e.storyPinDataId;n&&i&&this.props.logContextEvent({event_type:101,view_type:this.viewType,view_parameter:this.viewParameter,element:11619,...a?{component:230}:Object.freeze({}),object_id_str:t,aux_data:{pin_id:t,creator_id:n,sponsor_id:i}})}),D(this,"handleUserFollow",(e,t)=>{let{setShowSuggestedCreatorRecs:n,pin:{entityId:i,doneByMe:a},clientTrackingParams:l}=this.props;i.length,t?(this.props.logContextEvent({event_type:45,view_type:this.viewType,view_parameter:this.viewParameter,object_id_str:e,view_data:{isCurrentUser:a,viewObjectId:i,viewObjectIdStr:i},aux_data:{pin_id:i},clientTrackingParams:l}),this.setState({shouldShowCreatorRecs:!0}),n()):this.props.logContextEvent({event_type:46,view_type:this.viewType,view_parameter:this.viewParameter,object_id_str:e,aux_data:{pin_id:i},clientTrackingParams:l})})}static getDerivedStateFromProps(e,t){let n=e.officialUser;if(n&&n!==t.user)return{...t,user:n};let i=e.suggestedCreatorRecsPrevState;return i&&!t.shouldShowCreatorRecs?{...t,shouldShowCreatorRecs:i}:null}get viewType(){return this.props.viewType||3}get viewParameter(){return this.props.viewParameter||156}render(){let{user:e}=this.state;if(!e)return(0,w.jsx)(s.xu,{});let{pin:t,viewerUserId:n,isORBACProfileManager:i,clientTrackingParams:a,isCloseupRelatedPinsAboveTheFoldEnabled:l}=this.props,{full_name:r,follower_count:o,id:c,image_medium_url:u,is_verified_merchant:p,username:m,verified_identity:g}=e,h=!!g?.verified,_=!!t.promotedIsLeadAd,y=t.richSummary?.typeName==="product",f=!!(!_&&!y&&this.state.shouldShowCreatorRecs),x=!!n&&n===c,v=t.pinner?.isAdsOnlyProfile&&t.pinner.adsOnlyProfileSite?t.pinner?.adsOnlyProfileSite:`/${m}/`;return(0,w.jsx)(s.xu,{position:"relative",children:(0,w.jsxs)(s.xu,{children:[(0,w.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,w.jsx)(s.xu,{flex:"grow",children:(0,w.jsx)(R.Z,{followerCount:o,fullName:r,imageUrl:u,isPromoted:!!(t.promoter&&t.isPromoted),isVerifiedIdentity:h,isVerifiedMerchant:p,onNavigateClick:()=>this.handleNavigateAndLog(v,t.pinner?.adsOnlyProfileSite),onNavigateSponsorClick:this.handleNavigateAndLogSponsorClick,openNewTab:v===t.pinner?.adsOnlyProfileSite,profileUrl:v,sponsorName:t.sponsorship?.sponsor?.fullName??"",sponsorshipStatus:t.sponsorship?.status,sponsorUsername:t.sponsorship?.sponsor?.username??""})}),!i&&(0,w.jsx)(s.xu,{flex:"none",children:(0,w.jsx)(s.xu,{children:!x&&!l&&(0,w.jsx)(d.Z,{anchor:".followButton",anchorElementRef:this.anchorElementRef.current,children:(0,w.jsx)(s.xu,{ref:this.anchorElementRef,children:(0,w.jsx)(P.Z,{button:({followText:e,onClick:t,userFollowed:n})=>(0,w.jsx)(s.xu,{"data-test-id":`user-${n?"unfollow":"follow"}-button`,children:(0,w.jsx)(s.Fm,{accessibilityLabel:n?this.props.i18n._('Following', 'creatorCard.followingButton.accessibilityLabel', 'Label to indicate this button as the following button'):this.props.i18n._('Follow', 'creatorCard.followButton.accessibilityLabel', 'Label to indicate this button as the follow button'),onClick:t,selected:!!n,size:"lg",text:e})}),clientTrackingParams:a,fullName:r,id:c,imageUrl:u||"",inline:!0,isOwnProfile:x,onUserFollow:e=>this.handleUserFollow(c,e),profileUrl:v,size:"md",viewParameter:this.viewParameter,viewType:this.viewType})})})})})]}),f&&(0,w.jsx)(s.xu,{marginEnd:1,marginStart:1,children:(0,w.jsx)(F,{fullName:r,id:c,pinId:t.entityId,viewParameter:this.viewParameter,viewType:this.viewType})})]})})}}let B=(0,h.Z)(function(e){let{logContextEvent:t}=(0,o.v)(),n=(0,g.ZP)(),i=(0,m.Z)(z,e.input),a=(0,r.I0)(),l=p(e.input,()=>{a((0,E.Vw)(i.entityId))},e=>{let t=e.get(i.entityId);t&&t.setValue(!0,"showSuggestedCreatorRecs")}),s=(0,_.Z)(),{creatorRecsPrevState:d}=Z(i),{isCloseupRelatedPinsAboveTheFoldEnabled:c}=(0,y.x4)();return(0,w.jsx)(M,{...e,i18n:n,isCloseupRelatedPinsAboveTheFoldEnabled:c,logContextEvent:t,pin:i,setShowSuggestedCreatorRecs:l,suggestedCreatorRecsPrevState:d,viewerUserId:s.isAuth?s.id:null})})},821728:function(e,t,n){n.d(t,{Z:()=>u});var i=n("667294"),a=n("581722"),l=n("883119"),r=n("708130"),s=n("80887"),o=n("785893");function d({isCloseupButton:e,isDisabled:t,isFavorited:n,onTap:i,size:a}){let d=(0,r.ZP)(),{closeupWithinMasonryEnabled:c,isCloseupRelatedPinsAboveTheFoldEnabled:u}=(0,s.x4)();return e?(0,o.jsx)(l.hU,{accessibilityLabel:d._('Favorite icon', 'pinRep.footer.favoriteIcon', 'Accessible label for favorite icon on Pin'),bgColor:c?"white":void 0,disabled:t,icon:n?"star":"star-outline",iconColor:"darkGray",onClick:i,size:u?"sm":"lg"}):(0,o.jsx)(l.iP,{disabled:t,onTap:i,children:(0,o.jsx)(l.JO,{accessibilityLabel:d._('Favorite icon', 'pinRep.footer.favoriteIcon', 'Accessible label for favorite icon on Pin'),color:"default",icon:n?"star":"star-outline",size:a})})}var c=n("193733");function u({favorited:e,favoriteCount:t,isCloseupButton:n,onFavorite:s,onUnfavorite:u,pinId:p,size:m}){let g=(0,r.ZP)(),h=(0,a.I0)(),[_,y]=(0,i.useState)(!1),[f,x]=(0,i.useState)(e),[v,k]=(0,i.useState)(t??0),b=async()=>{(x(!f),y(!0),f)?(k(v-1),await h(async e=>{await (0,c.Z)({url:`/v3/pins/${p}/favorite/`,method:"DELETE"}),e({type:"PIN_FAVORITE",payload:{id:p,increment:-1,value:!1}})}),u()):(k(v+1),await h(async e=>{await (0,c.Z)({url:`/v3/pins/${p}/favorite/`,method:"POST"}),e({type:"PIN_FAVORITE",payload:{id:p,increment:1,value:!0}})}),s()),y(!1)},P=v<10?v:g._('9+', 'favoriteButton.favoriteCountText', 'Text shown when greater than 9 favorites on Pin');return(0,o.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[void 0!==t&&v>0&&(0,o.jsx)(l.xv,{size:"200",weight:"bold",children:P}),(0,o.jsx)(d,{isCloseupButton:n,isDisabled:_,isFavorited:f,onTap:()=>{b()},size:m})]})}},985250:function(e,t,n){n.d(t,{Z:()=>tC});var i,a,l=n("581722"),r=n("616550"),s=n("260327"),o=n("201070"),d=n("667294"),c=n("883119"),u=n("816967"),p=n("954543"),m=n("714833"),g=n("724784"),h=n("962520"),_=n("475869"),y=n("459892"),f=n("160394"),x=n("658045"),v=n("350711"),k=n("62927"),b=n("431190"),P=n("992512"),S=n("318258"),w=n("808992"),j=n("85172"),I=n("172119"),C=n("420213"),T=n("60530"),F=n("682753"),L=n("674094"),A=n("608115"),K=n("772866"),Z=n("496211"),R=n("353063");n("167912");var E=n("431217"),D=n("84071"),z=n("407553"),M=n("219300"),B=n("131548"),O=n("708130"),V=n("991342"),H=n("400996"),U=n("80887"),N=n("641851"),W=n("785893");let $=void 0!==i?i:i=n(459019),G=({inCommentFeedRedesignExp:e,isLoadingNewlyCreatedComment:t,pinKey:n,scrollContainerRef:i,viewParameter:a,peekCloseupEnabled:r})=>{let s=(0,O.ZP)(),o=(0,H.lV)(),{inCommentFooterRedesignExp:u,isCommentThreadExpanded:p,setIsCommentThreadExpanded:m}=(0,U.x4)(),{logContextEvent:g}=(0,M.v)(),[h,_]=(0,d.useState)(!1),y=(0,B.Z)($,n),{aggregatedPinData:f}=y||{},{didItData:x,entityId:v}=f||{},k=f?.commentCount??0,b=x?.imagesCount??0,P=k+b,S=P>0,w=u?(0,z.i$)(P,s):s._('Comments', 'productComments.accordionHeader.text', 'text in tap area to open product comments panel'),j=u?(0,z.mz)(s):s._('No comments yet! Add one to start the conversation.', 'commentThread.emptyState.message', 'comment thread empty state message'),I=(0,l.v9)(e=>(0,N.Z)(e,v,o))[0],T=!!I&&e&&(0,W.jsx)(E.Z,{comment:I});return(0,W.jsx)(D.Z,{paddingY:e?4:3,topBorder:!0,children:(0,W.jsx)(V.Z,{arrowDirection:"arrow-down",content:S?(0,W.jsx)(C.Z,{aggregatedPinId:y.aggregatedPinData?.entityId,closeupAttributionId:y.closeupAttribution?.entityId,closeupAttributionUsername:y.closeupAttribution?.username,commentCount:k,commentsDisabled:y.commentsDisabled,commentsLoadedCallback:_,inCommentFeedRedesignExp:e,isCommentSectionOpen:!r,isLoadingNewCreatedComment:t,isVideo:!!y.videos?.videoList,photoCount:b,pinId:y.entityId,pinnerId:y.pinner?.entityId,scrollContainerRef:i,shouldShowHeading:!1,storyPinDataId:y.storyPinData?.entityId,viewParameter:a}):null,header:w,inCommentFeedRedesignExp:e,isCollapsible:(y.aggregatedPinData?.commentCount??0)+(y.aggregatedPinData?.didItData?.imagesCount??0)>0,isCommentSectionOpen:p&&e,isContentLoaded:h,isOpenByDefault:!e&&!r&&S,onToggle:e?e=>{m&&m(e),e&&g({component:13464,element:11981,event_type:10554,view_type:3})}:void 0,previewContent:S?T:(0,W.jsx)(c.xv,{size:"200",children:j}),previewContentHeight:24,shouldToggleOnBodyTap:e})})};var X=n("971634"),q=n("129611");function Y({clickable:e=!0,fontWeight:t="normal",getDisplayName:n,onMouseDown:i,user:a}){let l=(0,r.k6)(),{logContextEvent:s}=(0,M.v)(),{isCloseupRelatedPinsAboveTheFoldEnabled:o,peekCloseupEnabled:d}=(0,U.x4)(),{is_verified_merchant:u,full_name:p="",verified_identity:m,username:g="",is_ads_only_profile:h,ads_only_profile_site:_,image_medium_url:y}=a,f=u||m?.verified,x=(0,W.jsxs)(c.xu,{alignItems:o?"center":void 0,dangerouslySetInlineStyle:{__style:o?{gap:"8px"}:{}},direction:o?"row":void 0,display:o?"flex":void 0,onMouseDown:()=>{i&&i()},children:[d&&(0,W.jsx)(X.qE,{name:p??"",size:"xs",src:y??""}),(0,W.jsx)(c.xv,{lineClamp:1,size:d?"200":"300",weight:t,children:n?n(p):p})]});if(!e)return x;let v=h&&!!_;return(0,W.jsxs)(c.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,W.jsx)(c.xu,{children:v?(0,W.jsx)(c.Tg,{href:_||"",onTap:()=>{s({event_type:9371,element:13382,aux_data:{aop_origin:"OfficialUserAttributionText"}})},rel:"nofollow",target:"blank",children:x}):(0,W.jsx)(c.iP,{onTap:()=>{l.push(`/${g}/`)},children:x})}),f&&(0,W.jsx)(c.xu,{marginStart:2,children:(0,W.jsx)(q.Z,{isVerifiedIdentity:m?.verified,isVerifiedMerchant:u,size:"sm"})})]})}var J=n("965456"),Q=n("791776"),ee=n("522282"),et=n("150608"),en=n("652348");let ei=void 0!==a?a:a=n(219974);function ea({clientTrackingParams:e,enableDynamicSizeAdjustment:t,link:n,pinKey:i,text:a,onClickThrough:l}){let r=(0,B.Z)(ei,i),s=(0,d.useRef)(null),[o,u]=(0,d.useState)("500"),{closeupWithinMasonryEnabled:p}=(0,U.x4)(),m=(0,ee.Z)({href:n||"",clientTrackingParams:(0,en.Z)(e,r?.trackingParams),externalData:{pin:r&&{attributionSourceId:r.attributionSourceId,board:r.board&&{url:r.board.url},campaignId:r.campaignId,entityId:r.entityId,isDownstreamPromotion:r.isDownstreamPromotion,isPromoted:r.isPromoted,pinner:r.pinner&&{username:r.pinner.username},pinPromotionId:r.pinPromotionId,promoter:r.promoter&&{entityId:r.promoter.entityId},storyPinDataId:r.storyPinDataId,trackingParams:r.trackingParams,advertiserId:r.advertiserId}}}),g=(0,W.jsx)(c.xu,{ref:s,children:(0,W.jsx)(c.X6,{id:"product-heading",size:p?"400":o,children:a})});return(0,d.useEffect)(()=>{if(!s||!s.current||!t)return;let e=s.current.querySelector("#product-heading");if(!e)return;let n=Number(e.offsetHeight)||0;Number.isFinite(n)&&u(2>=Math.floor(n/33)?"500":"400")},[t,s]),(0,W.jsx)(et.q,{children:({hovered:t,onMouseEnter:i,onMouseLeave:a})=>(0,W.jsx)(Q.Z,{clientTrackingParams:e,hovered:t,pinKey:r,viewType:3,children:(0,W.jsx)(c.xu,{onMouseEnter:i,onMouseLeave:a,children:n?(0,W.jsx)(c.xu,{"data-test-id":"link-navigation",children:(0,W.jsx)(c.xv,{children:(0,W.jsx)(c.rU,{href:n,onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),m({event:e}),l({componentType:14284})},underline:"none",children:g})})}):g})})})}var el=n("463996"),er=n("804906"),es=n("31889"),eo=n("86485"),ed=n("342117"),ec=n("967629"),eu=n("927998"),ep=n("673695");function em({richPinData:e={}}){return e?.products?.[0]}var eg=n("105161"),eh=n("657204"),e_=n("959474"),ey=n("460515"),ef=n("237861"),ex=n("228132");function ev({priceHistorySummary:e}){let t;let n=(0,O.ZP)(),{durationDays:i,typicalPrice:a,lowestPrice:l}=e||{};return Number.isInteger(i)&&(a||l)?(a?t=(0,ec.nk)(n._('{{ typicalPrice }} average price last {{ durationDays }} days', 'PriceHistorySummary.typicalPriceText', 'typicalPrice: typical price (average price), durationDays: duration days'),{typicalPrice:a,durationDays:i}):l&&(t=(0,ec.nk)(n._('{{ lowestPrice }} lowest price in {{ durationDays }} days', 'PriceHistorySummary.lowestPriceText', 'lowestPrice: lowest price, durationDays: duration days'),{lowestPrice:l,durationDays:i})),(0,W.jsx)(c.xu,{"data-test-id":"price-history-summary",children:(0,W.jsx)(c.xv,{children:t})})):null}var ek=n("494086"),eb=n("52302");let eP=(0,eb.Z)(()=>n.e("96615").then(n.bind(n,351760)),void 0,"CloseupPartnerModule"),eS=(0,eb.Z)(()=>n.e("34966").then(n.bind(n,116025)),void 0,"app-common-react-components-closeup-CloseupBody-CloseupPinNote-CloseupPinNote");function ew({clientTrackingParams:e,detailsScrollContainerRef:t,hasXYcoordinates:n,inCommentFeedRedesignExp:i,isBoardOwnerOrCollaborator:a,isLoadingNewlyCreatedComment:l,onClickThrough:r,outerPaddingSize:s,pin:o,pin:{closeup_attribution:u,closeup_unified_description:p,closeup_unified_title:m,is_oos_product:g,is_stale_product:h,link_user_website:_,link_domain:y,rich_metadata:f},showPartnerModule:x,showPDPComments:v,showPinNote:k,showPinStats:b,showTrendsOnPinCloseup:P,trendsData:S,viewParameter:w}){let j=(0,O.ZP)(),{logContextEvent:I}=(0,M.v)(),E=(0,e_.Z)(),{isCloseupRelatedPinsAboveTheFoldEnabled:z,closeupWithinMasonryEnabled:B,peekCloseupEnabled:V,viewportSize:H}=(0,U.x4)(),[N,$]=(0,d.useState)(!1),X=(0,eu.E)(),q=(0,d.useCallback)(()=>{X&&X.markConstraintComplete("shopButton")},[X]),Q=(0,eh.Z)({type:"deprecated",data:o}),ee=(0,A.Z)({type:"deprecated",data:o},E),et=Q(),en=(0,ey.Z)(),ei=(0,ef.lJ)(E,en),eb=(0,ef.q6)(E,o?.pinner?.id,en),ew=em({richPinData:f}),ej=ew?.offer_summary||{},{in_stock:eI}=ej,{duration_days:eC,lowest_price:eT,typical_price:eF}=ew?.price_history_summary||{},eL=Number.isInteger(eC)&&(!!eT||!!eF),eA=g||!1===eI,{rating_value:eK,review_count:eZ,rating_count:eR}=(f||{}).aggregate_rating||{},{shipping_info:eE}=ew||{},eD=_?.official_user?.first_name,{official_user:ez}=y||{},eM=u||ez,{first_name:eB}=eM||{},eO=(0,eg.ZP)(eD||eB||"",20),eV=ew?.brand,eH=eV?.name,eU=eV?.user_id,eN=eM?.id===eU||eV?.is_merchant,eW=!!eH,e$=(0,d.useCallback)(e=>{if(e&&eW){let t=eH!==e&&(null===eN||!1===eN),n=z?"normal":"bold",i=V?"200":void 0;return z?(0,W.jsx)(c.xv,{align:"center",size:i,weight:n,children:e}):t?(0,W.jsx)(c.xv,{align:"center",size:i,weight:n,children:(0,ec.nk)(j._('{{ brand }} sold by {{ merchant }}', 'productmetadata.officialuserattribution.text', 'officialuserattribution text. brand:name of the brand. merchant:name of the merchant'),{brand:(0,W.jsx)(c.xv,{inline:!0,size:i,weight:n,children:eH},"brand-name"),merchant:(0,W.jsx)(c.xv,{inline:!0,size:i,weight:n,children:e},"merchant-name")})}):[(0,W.jsx)(c.xv,{inline:!0,size:i,weight:n,children:eH},"brand-name")]}return e},[eH,eN,z,j,eW,V]),eG=(p||"").trim(),eX=o.formatted_description?.components??[],eq=(0,ek.j)({components:eX,pinDescription:eG}),{link:eY,tracked_link:eJ}=o||{},eQ=decodeURIComponent(eJ||eY||""),{currentDomain:e0}=(0,R.Wp)({carouselData:o.carousel_data&&{carouselSlots:o.carousel_data.carousel_slots&&o.carousel_data.carousel_slots.map(e=>({domain:e.domain,link:e.link})),index:o.carousel_data?.index},domain:o.domain}),e1=e0.split(".")[0],{free_shipping_price:e2,free_shipping_value:e8}=eE||{},e3=!!(eK&&(eZ||eR)||e2&&e8),e6=(eO||e1)&&eQ,e7=s??ex.ER,e4=B?0:6;e4=i?8:e4;let e5=o.favorited_by_me?j._('Remove from favorites', 'closeup.productMetadata.removeFromFavorites', 'Text for button allowing users to unfavorite a saved Product Pin'):j._('Add to favorites', 'closeup.productMetadata.addToFavorites', 'Text for button allowing users to favorite a saved Product Pin'),e9=[...V?[]:[(0,W.jsx)(F.Z,{paddingLeft:B?e7/2:0,paddingRight:B?e7/2:0,children:eq.length>0&&(0,W.jsx)(c.xu,{"data-test-id":"product-description",marginTop:B?2:5,children:(0,W.jsx)(J.Z,{commerceData:et,inCommentFeedRedesignExp:i,structuredDescription:eq,type:"expandable",viewParameter:w})})},"closeupProductDescription")],...z&&a?[(0,W.jsx)(F.Z,{paddingLeft:B?e7/2:0,paddingRight:B?e7/2:0,children:(0,W.jsxs)(c.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:B?0:2,marginTop:2,children:[B?(0,W.jsx)(c.X6,{size:"400",children:e5}):(0,W.jsx)(c.xv,{weight:"bold",children:e5}),(0,W.jsx)(T.Z,{board:o.board,favorited:!!o.favorited_by_me,pinId:o.id,section:o.section})]})},"closeupProductMetadataFavoriteBarMetadataPadding")]:[],...k?[(0,W.jsx)(F.Z,{paddingLeft:B?e7/2:0,paddingRight:B?e7/2:0,children:(0,W.jsx)(D.Z,{paddingY:z?0:3,topBorder:!z,children:(0,W.jsx)(eS,{boardId:o.board?.id,isGroupNote:ee,pinId:o.id,pinNoteText:o.pin_note?.text})})},"closeupPinNote")]:[]],te=()=>(0,W.jsx)(c.xu,{"data-test-id":"product-price",marginTop:z?0:2,children:(0,W.jsx)(el.Z,{colorOverride:"default",isSoldOut:eA,isStale:h,productDetails:{maxPrice:ej.max_price,minPrice:ej.min_price,price:ej.price,standardPrice:ej.standard_price},type:B?"mobileHeading":"heading"})},"product-price"),tt=()=>(0,W.jsx)(c.xu,{marginTop:z?0:3,children:(0,W.jsx)(er.Z,{bracket:!0,count:eR||eZ,countFormat:"number",countType:eR?"rating":"review",hideSeparationDot:!0,ratingValue:eK,shippingInfo:{freeShippingPrice:e2,freeShippingValue:e8}})}),tn=()=>eM?(0,W.jsx)(c.xu,{"data-test-id":"pdp-product-metadata-domain-owner",marginBottom:B?2:void 0,marginTop:2,children:(0,W.jsx)(Y,{getDisplayName:e$,onMouseDown:eW?()=>{I({event_type:102,object_id_str:o.id,view_type:3,view_parameter:144,element:13592,aux_data:et})}:void 0,user:eM})}):null,ti=()=>(0,W.jsx)(F.Z,{paddingBottom:V?e7/2:void 0,paddingRight:0,children:(0,W.jsx)(c.xu,{"data-test-id":"product-shop-button",marginTop:z?void 0:5,children:(0,W.jsx)(es.Z,{clientTrackingParams:e,color:"blue",link:eQ,onClickThrough:r,onLoad:q,pinKey:{type:"deprecated",data:o},text:j._('Visit site', 'closeup.shop.button', 'shop button')})})}),ta=4;B?ta=0:V&&eM&&(ta=2);let tl=`
    [data-testid="product-metadata-details-flex"] > div:last-of-type {
      margin-top: auto;
    }
  `;return(0,W.jsxs)(c.xu,{marginTop:B?2:0,children:[B&&x&&(0,W.jsx)(F.Z,{paddingRight:s,children:(0,W.jsx)(c.xu,{"data-test-id":"PartnerModule",width:"100%",children:(0,W.jsx)(eo.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,W.jsx)(ep.Z,{children:(0,W.jsx)(eP,{borderStyle:K.te,isStoryPin:!1,pinKey:{type:"deprecated",data:o},showPinStats:b,trendsData:P?S?.data?.results:null,viewportSize:H})})})})}),V&&(0,W.jsx)(F.Z,{paddingRight:0,children:tn()}),(0,W.jsxs)(c.xu,{dangerouslySetInlineStyle:{__style:{overflowY:V?"auto":void 0,paddingRight:V?`${K.Gd}px`:void 0}},height:V?"100%":void 0,marginBottom:a||v?0:5,marginEnd:V?void 0:e4,marginTop:B?2:0,children:[V&&(0,W.jsx)(ed.Z,{unsafeCSS:tl}),(0,W.jsxs)(c.kC,{"data-testid":"product-metadata-details-flex",direction:"column",height:V?"100%":void 0,children:[(0,W.jsx)(F.Z,{paddingLeft:B?e7/2:0,paddingRight:B?e7/2:0,children:(0,W.jsxs)(c.xu,{alignItems:B?"start":void 0,display:B?"flex":void 0,justifyContent:B?"between":void 0,children:[(0,W.jsxs)(c.kC.Item,{flexBasis:"77%",children:[!!m&&(0,W.jsx)(c.xu,{"data-test-id":"product-title",marginTop:ta,children:(0,W.jsx)(ea,{clientTrackingParams:e,link:eQ,onClickThrough:r,pinKey:{type:"deprecated",data:o},text:m})},"product-title"),z?(0,W.jsxs)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{columnGap:B?4:8,flexWrap:B?"wrap":void 0}},display:"flex",marginTop:2,children:[te(),e3&&tt()]}):te(),eL&&(0,W.jsx)(c.xu,{"data-test-id":"product-price-history-summary",marginTop:2,children:(0,W.jsx)(ev,{priceHistorySummary:{durationDays:eC,lowestPrice:eT,typicalPrice:eF}})},"product-price-history-summary"),!z&&e3&&tt(),!V&&tn()]}),(0,W.jsx)(c.kC.Item,{children:B&&ti()})]})}),V&&(0,W.jsx)(F.Z,{paddingLeft:B?e7/2:0,paddingRight:B?e7/2:0,children:eq.length>0&&(0,W.jsx)(c.xu,{"data-test-id":"product-description",marginTop:B?2:0,children:(0,W.jsx)(Z.Z,{pinKey:{type:"deprecated",data:o}})})}),e6&&!B&&ti(),(0,W.jsx)(d.Fragment,{children:e9.map(e=>(0,W.jsxs)(d.Fragment,{children:[e,B&&(0,W.jsx)(F.Z,{paddingLeft:e7/2,paddingRight:e7/2,children:(0,W.jsx)(c.xu,{marginBottom:2,marginTop:2,width:"100%",children:(0,W.jsx)(L.Z,{show:!0,surface:"product-metadata-details"})})})]},`detailFragment-${e.key}`))}),!e9.length&&(0,W.jsx)(F.Z,{paddingLeft:e7/2,paddingRight:e7/2,children:(0,W.jsx)(c.xu,{marginBottom:2,marginTop:2,width:"100%",children:(0,W.jsx)(L.Z,{show:B,surface:"product-metadata-details"})})}),v&&(0,W.jsxs)(F.Z,{marginTop:"auto",paddingBottom:B?e7/2:void 0,paddingLeft:B?e7/2:0,paddingRight:B?ex.ER/2:0,children:[i&&!B&&(0,W.jsx)(c.xu,{marginBottom:5,children:(0,W.jsx)(L.Z,{show:!0})}),z?!n&&!!o.is_eligible_for_aggregated_comments&&(0,W.jsx)(eo.Z,{name:"ProductPinCanonicalCard",children:(0,W.jsx)(C.Z,{aggregatedPinId:o.aggregated_pin_data?.id,closeupAttributionId:o.closeup_attribution?.id,closeupAttributionUsername:o.closeup_attribution?.username,commentCount:o.aggregated_pin_data?.comment_count??0,commentsDisabled:o.comments_disabled,inCommentFeedRedesignExp:i,isCommentSectionOpen:N,isLoadingNewCreatedComment:l,isORBACProfileManager:eb,isShopTheLook:o.aggregated_pin_data?.is_shop_the_look,isVideo:!!o.videos?.video_list,onCommentSectionClick:()=>{$(!N)},orbacSubjectId:ei,photoCount:o.aggregated_pin_data?.did_it_data?.images_count??0,pinId:o.id,pinnerId:o.pinner?.id,scrollContainerRef:t,shouldShowHeading:!(V&&o.aggregated_pin_data?.comment_count===0),storyPinDataId:o.story_pin_data?.id,viewParameter:w})}):(0,W.jsx)(G,{inCommentFeedRedesignExp:i,isLoadingNewlyCreatedComment:l,peekCloseupEnabled:V,pinKey:{type:"deprecated",data:o},scrollContainerRef:t,viewParameter:w}),i&&!B&&(0,W.jsx)(F.Z,{paddingRight:0,children:(0,W.jsx)(L.Z,{show:!0})})]},"closeupProductMetadataComments")]})]})]})}var ej=n("40422");function eI(e){let{disabled:t,height:n,top:i=0,zIndex:a}=e,l=(0,d.useRef)(null),r=(0,ej.Z)();if(t)return e.children;let s=l.current?.getBoundingClientRect().top||0;return(0,W.jsx)(c.xu,{ref:l,"data-test-id":"product-sticky-container",id:"product-sticky-container ",children:(0,W.jsx)(c.Le,{height:n,top:r+i+s,zIndex:a,children:e.children})})}var eC=n("820368"),eT=n("417573");let eF=(0,eb.Z)(()=>Promise.all([n.e("89317"),n.e("55759")]).then(n.bind(n,981170)),void 0,"CloseupActionBarCommon");function eL({disableRelatedResource:e=!1,relatedResourceOptions:t,hasXYcoordinates:n,isEligibleForStlFlyout:i,isStoryPin:a,isWideVideo:l,pin:r,searchQuery:s,taggedProducts:o,trafficSource:c,viewParameterType:u,onClickThrough:p,showStructuredDescription:m,data:g,didShortClickThrough:h,goBack:_,isInStream:y=!1,isDeletedStoryPin:f,onSaveButtonClick:x,onUpdate:C,outerBodyStyle:T,routePush:F,showPartnerModule:L,showPinStats:A,showTrendsOnPinCloseup:K,showRepinOnInitialRender:Z,trendsData:R,viewType:E}){let D=(0,eC.Z)(e?null:t),z=(0,d.useRef)(null),M=(0,d.useRef)(null),B=(0,e_.Z)(),{closeupWithinMasonryEnabled:O,isCloseupRelatedPinsAboveTheFoldEnabled:V,viewportSize:H,clientTrackingParams:N}=(0,U.x4)(),$=(0,ey.Z)(),G=(0,ef.lJ)(B,$),X=(0,b.ZP)(!1,90),q=(0,w.Z)(),Y=(0,S.Z)({metadataContainerRef:z}),{isCloseupMediaViewerEnabled:J}=(0,I.Z)({isShufflePin:!!r?.shuffle}),[Q,ee]=(0,d.useState)(!1),et=!!r.is_eligible_for_aggregated_comments,{setClickthroughComponentForSurvey:en,imageContainerRef:ei}=q,{getViewParameter:ea}=(0,k.ZP)({type:"deprecated",data:r}),el=ea(u),er=V||"lg"===H?ex.ER:ex.g9,es=(0,W.jsx)(eF,{actionBarContainerRef:M,goBack:_,gridDescription:r.description??"",isDeletedStoryPin:!!f,isEligibleForPinReactions:!1,isOnSecretBoard:!1,isStoryPin:a,onEditSubmit:C,onSaveButtonClick:x,outerPaddingSize:er,pin:r,routePush:F,showRepinOnInitialRender:Z,viewParameter:el}),eo=(0,W.jsx)(j.Z,{hasXYcoordinates:n,isEligibleForStlFlyout:i,isStoryPin:a,isWideVideo:l,pin:r,searchQuery:s,taggedProducts:o,trafficSource:c,viewParameterType:u,visualContentContainerRef:et?X.visualContentContainerRef:void 0,imageContainerRef:ei,handleImageClickThrough:()=>p({wasImageClicked:!0}),setClickthroughComponentForSurvey:en,isShortImage:Y,onSaveButtonClick:x,viewParameter:el}),ed=(0,W.jsx)(eI,{disabled:!1,top:-16,zIndex:eT.mS,children:eo}),ec=m&&!J?ed:eo,eu=(0,P.Z)({pinKey:{type:"deprecated",data:r},orbacActingAs:$,viewer:B}),ep=(0,W.jsx)(d.Fragment,{children:(0,W.jsx)(ew,{clientTrackingParams:N,detailsScrollContainerRef:z.current,hasXYcoordinates:n,inCommentFeedRedesignExp:!1,isBoardOwnerOrCollaborator:eu,isLoadingNewlyCreatedComment:Q,onClickThrough:p,outerPaddingSize:er,pin:r,showPartnerModule:L,showPDPComments:et,showPinNote:eu,showPinStats:A,showStructuredDescription:m,showTrendsOnPinCloseup:K,trendsData:R,viewParameter:el})});return(0,W.jsx)(v.R,{descriptionContentMaxHeight:et?X.descriptionContentMaxHeight:void 0,inCommentFeedRedesignExp:!1,isEligibleForPinReactions:!r.is_promoted&&!r.is_downstream_promotion&&!f,isWideVideo:l,didShortClickThrough:h,webLinkSurveyState:q,pin:r,outerBodyStyle:T,isStoryPin:a,trafficSource:c,visualContentContainer:ec,isCloseupMaximized:!1,data:g,outerPaddingSize:er,isInStream:y,metadataContainerRef:z,onClickThrough:()=>{p&&p({componentType:129}),q.setClickthroughComponentForSurvey("legoMaybeLink")},isLoadingNewlyCreatedComment:Q,setIsLoadingNewlyCreatedComment:ee,viewParameter:el,viewType:E,metadata:ep,viewer:B,orbacSubjectId:G,relatedModulesResource:D,marginBottom:O?0:8,disableLeadPin:!0,isDeletedStoryPin:f,onSaveButtonClick:x,showRepinOnInitialRender:Z,goBack:_,onUpdate:C,showPDPComments:et,routePush:F,closeupActionBarMaxWidth:O?void 0:ex.CI,visualContentContainerRef:et?X.visualContentContainerRef:void 0,actionBarContainerRef:M,closeupActionBar:es})}var eA=n("612568"),eK=n("804167"),eZ=n("184189"),eR=n("453071"),eE=n("980570"),eD=n("348072"),ez=n("717671"),eM=n("517689"),eB=n("899142"),eO=n("126052"),eV=n("193733"),eH=n("840857"),eU=n("144767"),eN=n("337907"),eW=n("933404"),e$=n("922184"),eG=n("813972"),eX=n("719725"),eq=n("870912"),eY=n("831949"),eJ=n("961971"),eQ=n("958605"),e0=n("297706"),e1=n("561162"),e2=n("451308"),e8=n("238124"),e3=n("3879"),e6=n("3915"),e7=n("916225"),e4=n("45389"),e5=n("226978"),e9=n("348953"),te=n("465683"),tt=n("596563"),tn=n("81300"),ti=n("249278"),ta=n("566700"),tl=n("44858"),tr=n("353556"),ts=n("391374"),to=n("990833"),td=n("349970"),tc=n("689222");function tu(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let tp=(0,d.lazy)(()=>n.e("96615").then(n.bind(n,351760))),tm=(0,d.lazy)(()=>n.e("54347").then(n.bind(n,245935))),tg={sm:80},th=({verticalNavWidth:e})=>({BREAKPOINT:1056+e,WIDE_VIDEO_BREAKPOINT:998+e,WIDE_PDP_BREAKPOINT:1300+e,SM_BREAKPOINT:680+e,EXP_SM_BREAKPOINT:860+e,SM_WITH_CAROUSEL_BREAKPOINT:960+e,BACK_BUTTON_WIDE_BREAKPOINT:1135+e,BACK_BUTTON_WIDE_CAROUSEL_BREAKPOINT:1465+e,BACK_BUTTON_WITH_LABEL_WIDE_BREAKPOINT:1340+e,BACK_BUTTON_WITH_LABEL_WIDE_CAROUSEL_BREAKPOINT:1640+e,BACK_BUTTON_NARROW_CAROUSEL_BREAKPOINT:780+e,BACK_BUTTON_NARROW_BREAKPOINT:630+e}),t_={storyPinGradientStyle:{display:"block",position:"relative",cursor:"auto"}},ty={boxShadow:"0 1px 20px 0 rgba(0, 0, 0, 0.1)",borderRadius:32},tf={boxShadow:void 0,borderRadius:16};function tx({conversation_id:e,senderId:t,pinId:n}){(0,eV.Z)({url:`/v3/conversations/${e}/message/mark_seen/`,method:"POST",data:{sender:t,pin:n}})}function tv({viewportSize:e,hasCarouselData:t}){return t&&["lg","md"].includes(e)}let tk=({isWideVideo:e,viewportSize:t,peekCloseupEnabled:n})=>!["md","sm"].includes(t)&&!e||n&&"sm"!==t;class tb extends d.Component{constructor(...e){super(...e),tu(this,"state",this.props.initialState),tu(this,"removedPwtThumbnailsConstraint",!1),tu(this,"setResultScrollContainerRef",e=>{this.resultScrollContainer||(this.resultScrollContainer=e,this.forceUpdate())}),tu(this,"setRelatedPinsHeaderRef",e=>{this.relatedPinsHeaderRef=e}),tu(this,"mounted",!1),tu(this,"updateViewportSize",(0,e4.Z)(()=>{let{visualState:{carouselData:e}}=this.state,{pin:t,closeupWithinMasonryEnabled:n,peekCloseupEnabled:i}=this.props,{isWideVideo:a}=(0,eX.Z)((0,eQ.Z)({pin:t}))||{};if(this.mounted){let t=function({isWideVideo:e,hasCarouselData:t,closeupWithinMasonryEnabled:n,verticalNavWidth:i}){let{BREAKPOINT:a,WIDE_VIDEO_BREAKPOINT:l,WIDE_PDP_BREAKPOINT:r,SM_BREAKPOINT:s,EXP_SM_BREAKPOINT:o,SM_WITH_CAROUSEL_BREAKPOINT:d}=th({verticalNavWidth:i}),c=a,u=n?o:s;return(e&&(c=l),t&&(c=r,u=n?d:u),window?.innerWidth<u)?"sm":window?.innerWidth<c?"md":"lg"}({isWideVideo:!!a,hasCarouselData:!!e,closeupWithinMasonryEnabled:n,verticalNavWidth:this.props.verticalNavWidth}),l=tv({viewportSize:t,hasCarouselData:!!e}),{hideBackButton:r,backButtonLabelFitInScreen:s}=function({viewportSize:e,isWideCarousel:t,closeupWithinMasonryEnabled:n,peekCloseupEnabled:i,verticalNavWidth:a}){let l;let{BACK_BUTTON_NARROW_CAROUSEL_BREAKPOINT:r,BACK_BUTTON_NARROW_BREAKPOINT:s,BACK_BUTTON_WIDE_CAROUSEL_BREAKPOINT:o,BACK_BUTTON_WIDE_BREAKPOINT:d,BACK_BUTTON_WITH_LABEL_WIDE_CAROUSEL_BREAKPOINT:c,BACK_BUTTON_WITH_LABEL_WIDE_BREAKPOINT:u}=th({verticalNavWidth:a});return l=["md","sm"].includes(e)?t?r:s:t?o:d,{hideBackButton:!n&&!i&&window?.innerWidth<=l||i&&"sm"===e,backButtonLabelFitInScreen:window?.innerWidth>=(t?c:u)}}({viewportSize:t,isWideCarousel:l,closeupWithinMasonryEnabled:n,peekCloseupEnabled:i,verticalNavWidth:this.props.verticalNavWidth});this.setState({viewportSize:t,hideBackButton:r,backButtonLabelFitInScreen:s})}},50)),tu(this,"triggerQuickPromote",()=>{let{getSterlingURL:e,pinId:t,routePush:n,experimentsClient:i,requestContext:a}=this.props,{advertiser:l}=a,r=e((0,tt.G)(l)?"createAutomated":"create"),s=`${e7.auO}${r}?pinId=${t}`;this.setState({quickPromoteModalTriggered:!0});let o=e("quick_promote_on_www");i.checkExperiment("adv_growth_deprecate_qp_pins").anyEnabled?window.location.assign(s):n(`${o}?pinId=${t}`)}),tu(this,"clickThroughTimer",()=>{let{setPlacementExtraContext:e}=this.props;clearInterval(this.state.intervalId),e&&e({didLongClickThrough:!0})}),tu(this,"executeClickthrough",e=>{let{pinId:t,clientTrackingParams:n,setPlacementExtraContext:i,viewer:a,trafficSource:l,logContextEvent:r,pinFormattedLink:s,setAbortNoActionPlacementTimeout:o}=this.props,{pin:d,didPinClickThrough:c,didShortClickThrough:u}=this.state,p=!!d.story_pin_data,{wasImageClicked:m,auxData:g,componentType:h=p?228:4,elementType:_=m?35:p?11157:361,viewType:y=3}=e||{},f=(0,e0.Z)({hasPin:!0,hasPinRichMetadata:!!this.props.pin.rich_metadata,hasPinRichMetadataProducts:!!this.props.pin.rich_metadata?.products,hasPinRichMetadataArticle:!!this.props.pin.rich_metadata?.article,hasPinRichMetadataRecipe:!!this.props.pin.rich_metadata?.recipe,hasPinStoryPinData:!!this.props.pin.story_pin_data}),x={...this.props.getStringifiedCommerceAuxData(),...g||{}};if(a&&a.isAuth&&!c&&i&&(i({didPinClickThrough:!0}),this.setState({didPinClickThrough:!0})),p&&r({event_type:102,view_type:132,view_parameter:3549,element:12971,aux_data:{pin_id:d.id,url:s}}),r({event_type:101,object_id_str:t,component:h,element:_,aux_data:x,clientTrackingParams:n}),r({event_type:12,object_id_str:t,view_type:y,view_parameter:f,component:h,element:_,aux_data:x,clientTrackingParams:n}),r({event_type:8948,view_type:y,view_parameter:f,component:h,element:_,object_id_str:t,aux_data:{click_type:"clickthrough",closeup_navigation_type:l&&(0,eq.sV)(l)?"deeplink":"click",...x}}),m){let e=setInterval(this.clickThroughTimer,12e4);this.setState({intervalId:e})}this.clickThroughStartTime=Date.now(),u&&this.setState({didShortClickThrough:!1}),o(!0)}),tu(this,"handleFocus",()=>{let{setPlacementExtraContext:e}=this.props;clearInterval(this.state.intervalId),e&&e({didLongClickThrough:!1})}),tu(this,"handleWindowFocus",()=>{if(this.clickThroughStartTime>0){let e=Date.now()-this.clickThroughStartTime<5e3;this.setState({didShortClickThrough:e}),this.clickThroughStartTime=0}}),tu(this,"handleSaveButtonClick",()=>{this.props.logContextEvent({event_type:101,object_id_str:this.state.pin.id,component:4,element:13306,clientTrackingParams:this.props.clientTrackingParams,aux_data:{...this.props.getStringifiedCommerceAuxData()}}),this.props.setAbortNoActionPlacementTimeout(!0)}),tu(this,"handleBackButtonClick",()=>{this.props.onHandleBackButtonClick()}),tu(this,"handleCarouselSwipe",e=>{let{visualState:t,firstLoadComplete:n}=this.state;n&&this.setState({visualState:{...t,carouselData:{...t.carouselData,index:e}}})}),tu(this,"dispatch",(e,t)=>this.setState(t=>(0,g.Z)(t,e),t)),tu(this,"handleScroll",(0,e4.Z)(()=>{let{isOverRelatedPins:e}=this.state;if(this.relatedPinsHeaderRef){let t=ts.hu,n=this.relatedPinsHeaderRef.getBoundingClientRect().top<=t;n&&!e?this.setState({isOverRelatedPins:!0}):!n&&e&&this.setState({isOverRelatedPins:!1})}},10)),tu(this,"onWrapperClick",e=>{e.stopPropagation(),this.handleBackButtonClick()}),tu(this,"onRelatedInterestsBannerDismiss",()=>{this.setState({isRelatedInterestsBannerDismissed:!0})})}populatePlaceholderCarouselData(){let{pin:e}=this.props,{visualState:t}=this.state;this.setState({visualState:{...t,carouselData:(0,eB.Z)({carouselData:e.carousel_data,images:e.images,product:(e.rich_metadata||e.rich_summary)?.products?.[0]})}})}componentDidMount(){let{conversation_id:e,conversationOpen:t,dispatch:n,pin:i,pinId:a,senderId:l,setPlacementExtraContext:r,shouldShowInbox:s,toastManager:o,openInbox:d,trackInteraction:c}=this.props,{visualState:{carouselData:u}}=this.state,p=em({richPinData:i.rich_summary});this.mounted=!0,!u&&(p?.has_multi_images||p?.videos?.length)&&this.populatePlaceholderCarouselData(),e&&l&&a&&tx({conversation_id:e,senderId:l,pinId:a}),e&&(t(e),s&&d()),i.image_signature&&this.props.setMostRecentPinImage(i.image_signature),a&&this.props.setMostRecentPinId(a),r&&r({is_own_or_group_pin:this.isOwnOrGroupPin});let m=(0,e6.M0)().getItem(eE.M8)||"";m&&m===a&&((0,e6.M0)().removeItem(eE.M8),(0,e6.M0)().removeItem(eE.RD),c({action:"trigger",item:"unauth-save-button-quicksave"}),(0,eK.Z)({description:i.description,entityId:i.id,link:i.link,promotedIsRemovable:i.promoted_is_removable,title:i.title},this.props.i18n).then(e=>{let{id:t,url:l,name:r}=e;n((0,tc.d)({boardId:t,url:l,title:r||"",pinId:a,nodeId:i.node_id})),o.showToast(({hideToast:t})=>(0,W.jsx)(tl.Z,{boardName:e.name,boardUrl:e.url,onHide:t,pinImageUrl:i.images?.["236x"]?.url??""}))})),this.updateViewportSize(),window.addEventListener("resize",this.updateViewportSize),window.addEventListener("focus",this.handleWindowFocus),window?.location?.search?.includes("invite_code=")&&(0,eH.Z)()}componentDidUpdate(e){let{didRepin:t,isLandingPage:n,pin:i,pinId:a,conversation_id:l,senderId:r,pinResource:s,pinResource:{data:o},pwtSurfaceContext:d,setPlacementExtraContext:c,showQuickPromote:u}=this.props,{visualState:{carouselData:p},firstLoadComplete:m,quickPromoteModalTriggered:g}=this.state;this.visualDataDidUpdate(),!m||this.isWideCarousel()||this.removedPwtThumbnailsConstraint||(d?.removeConstraint("thumbnailsLoaded"),this.removedPwtThumbnailsConstraint=!0),o&&!m&&(o.carousel_data&&(o.carousel_data.index=p?.index||0),this.dispatch({type:"pinLoaded",pin:o})),l&&r&&a&&e.pinId!==a&&tx({conversation_id:l,senderId:r,pinId:a}),!e.pinResource.data&&s.data&&!g&&u&&this.triggerQuickPromote();let h={};(e6.ZP.getItem(eE.W3)||"").includes(`/pin/${a}`)&&n&&(h.loginPageType="pin"),t&&(h.didRepin=!0),i.image_signature&&(h.pin_image_signature=i.image_signature),h.is_own_or_group_pin=this.isOwnOrGroupPin,!(0,eU.Z)(h)&&c&&c({...h})}componentWillUnmount(){window.removeEventListener("resize",this.updateViewportSize),window.removeEventListener("focus",this.handleWindowFocus),this.mounted=!1}get isOwnOrGroupPin(){let{pin:e,viewer:t}=this.props,n=(e||{}).board||{},i=n.is_collaborative&&(0,ez.Z)(n.collaborated_by_me,n.owner?.id,t);return!!(t.isAuth&&e.pinner?.id===t.id||i)}isWideCarousel(){let{viewportSize:e,visualState:{carouselData:t}}=this.state;return tv({viewportSize:e,hasCarouselData:!!t})}visualDataDidUpdate(){let e;let{pin:t,mainImage:n}=this.props,{visualState:{carouselData:i,mainImage:a},firstLoadComplete:l}=this.state;if(!l)return;let r=(0,eB.Z)({carouselData:t.carousel_data,images:t.images,product:(t.rich_metadata||t.rich_summary)?.products?.[0]}),s=(r?.carousel_slots||[])[0]||{},o=(0,eO.Z)(s.images),d=i?.index||0;e=r&&(r.carousel_slots?.length||0)>1?{mainImage:n,carouselData:{...r,index:d},previewImage:(0,ti.Yf)(t.images?.["236x"])}:o?.url?{mainImage:{url:o.url,height:o.height||1,width:o.width||1}}:{mainImage:n,previewImage:(0,ti.Yf)(t.images?.["236x"])},(i?.id!==e.carouselData?.id||JSON.stringify(i?.carousel_slots)!==JSON.stringify(e.carouselData?.carousel_slots)||a.url!==e.mainImage.url)&&(this.setState({visualState:e}),this.updateViewportSize())}renderBodyContent({isEligibleForStlFlyout:e,relatedResourceOptions:t,maxWidth:n}){let{experimentsClient:{checkExperiment:i},isLimitedLogin:a,pin:l,pinResource:r,routePush:s,searchQuery:o,showRepinOnInitialRender:p,trafficSource:m,viewer:g,orbacActingAs:h,showStructuredDescription:_,userBusinessRoleResource:y,closeupWithinMasonryEnabled:f,trendsData:x}=this.props,{id:v,sponsorship:k,story_pin_data_id:b,story_pin_data:P}=l,S=!!b,w=!!P?.is_deleted,{creator:j,sponsor:I,status:C}=k||{},{username:T}=j||{},{username:F}=I||{},{refresh:L}=r,A=(0,ef.lJ)(g,h),{data:K}=y||{},Z=!l.is_repin&&!!F,R=F===g.username?[eM.V3.OWNER]:K?.permissions,E=F===g.username||!!R?.find(e=>eR.Z.includes(e)),D=F===g.username||!!R?.find(e=>eR.Z.includes(e)),{didShortClickThrough:z,viewportSize:M}=this.state,{isWideVideo:B}=(0,eX.Z)((0,eQ.Z)({pin:l}))||{},O=(0,eG.rh)(l&&{aggregatedPinData:l.aggregated_pin_data&&{creatorAnalytics:l.aggregated_pin_data.creator_analytics&&{_30dRealtime:l.aggregated_pin_data.creator_analytics["30d_realtime"]&&{carId:l.aggregated_pin_data.creator_analytics["30d_realtime"].id}}},board:l.board&&{privacy:l.board.privacy},creatorAnalytics:l.creator_analytics&&{_30dRealtime:l.creator_analytics["30d_realtime"]&&{carId:l.creator_analytics["30d_realtime"].id}},isRepin:l.is_repin,pinner:l.pinner&&{entityId:l.pinner.id},storyPinDataId:l.story_pin_data_id,videos:l.videos&&{videoList:l.videos.video_list&&{__typename:"VideoList"}}},g,this.props.experimentsClient,A),V=(0,u.CA)(x?.data),H=Z&&g.isAuth&&i("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled&&(E&&0===C||D&&1===C),U=S&&(P?.pages?.length??0)>0,N=(0,eG.WE)(g,M,O,V,x,H),$=f?tf:ty;return(0,W.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:S?{...t_.storyPinGradientStyle,width:"100%"}:{}},"data-test-id":"gradient",display:"flex",id:"gradient",justifyContent:"center",children:(0,W.jsx)(d.Fragment,{children:(0,W.jsx)(tn.Z,{isStoryPin:S,isWideVideo:B,children:(0,W.jsx)(eo.Z,{name:"CloseupBody",children:(0,W.jsxs)(c.xu,{children:[(0,W.jsxs)(c.xu,{alignItems:B?"center":void 0,direction:B?"column":void 0,display:B?"flex":void 0,children:[H&&"number"==typeof C&&(0,W.jsx)(c.xu,{"data-test-id":"sponsorship-approval-module",display:"flex",children:(0,W.jsx)(eo.Z,{name:"SafeSuspense_Closeup_SponsorshipApprovalModule",children:(0,W.jsx)(ep.Z,{children:(0,W.jsx)(tm,{business_role:R,creatorUsername:T??"",pinId:v,sponsorshipStatus:C})})})}),N&&!f&&(0,W.jsx)(c.xu,{"data-test-id":"PartnerModule",width:"lg"===M&&B?n:"100%",children:(0,W.jsx)(eo.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,W.jsx)(ep.Z,{children:(0,W.jsx)(tp,{borderStyle:$,isStoryPin:S,pinKey:{type:"deprecated",data:l},showPinStats:O,trendsData:V?x?.data?.results:null,viewportSize:M})})})})]}),(0,W.jsx)(eL,{data:r.data,didShortClickThrough:z,goBack:this.handleBackButtonClick,isDeletedStoryPin:!!w,isEligibleForStlFlyout:e,isStoryPin:S,isWideVideo:B,onClickThrough:this.executeClickthrough,onSaveButtonClick:this.handleSaveButtonClick,onUpdate:L,outerBodyStyle:S?null:$,pin:l,relatedResourceOptions:t,routePush:s,searchQuery:o,showPartnerModule:N,showPinStats:O,showRepinOnInitialRender:!a&&p,showStructuredDescription:_,showTrendsOnPinCloseup:V,trafficSource:m,trendsData:x,viewParameterType:U?157:void 0,viewType:3})]})})})})})}render(){let{abortNoActionPlacementTimeout:e,clientTrackingParams:t,contextPinIds:n,getStringifiedCommerceAuxData:i,pin:a,pinDerivedData:l,topLevelTrafficSource:r,topLevelTrafficSourceDepth:s,trafficSource:o,searchQuery:u,storyPinTaggedProductsResource:g,pinResource:h,viewer:_,orbacActingAs:y,inCommentFooterRedesignExp:f,isCloseupRelatedPinsAboveTheFoldEnabled:x,isCommentAttachmentSelectorOpen:v,peekCloseupEnabled:k,isCommentThreadExpanded:b,isPinNoteExpanded:P,isProductDetailsExpanded:S,isInRemoveMagnifyingGlassVariant:w,setIsCommentAttachmentSelectorOpen:j,setIsCommentThreadExpanded:I,setIsPinNoteExpanded:C,setIsProductDetailsExpanded:T,closeupWithinMasonryEnabled:F,setAbortNoActionPlacementTimeout:L,isCloseupMediaViewerOpen:A,setIsCloseupMediaViewerOpen:K,shouldFetchSLURPFields:Z,deepLinkBackGoesToBoard:R,landingContext:E,hideBackButtonExp:D}=this.props,{showStructuredDescription:z,...M}=this.props,B=i(),{isOverRelatedPins:O,backButtonLabelFitInScreen:V,viewportSize:H,didShortClickThrough:U,firstLoadComplete:N,visualState:{carouselData:$}}=this.state,{isWideVideo:G}=(0,eX.Z)((0,eQ.Z)({pin:a}))||{},X=!F&&tk({isWideVideo:!!G,viewportSize:H,peekCloseupEnabled:k}),{recommendation_reason:q}=a,Y={name:"RelatedModulesResource",options:{additional_fields:Z?["pin.is_eligible_for_closeup_one_bar_refinements"]:void 0,pin_id:a.id,context_pin_ids:n,homefeed_source_sig:q&&["NAVBOOST_P2P","NAVBOOST_PFY","INSTANT_PFY_NON_MATERIALIZABLE","P2P","P2P_CLICKTHROUGH","FRESH_TEXT_EMBEDDINGS","INTENTIONAL_DISTRIBUTION_GEMINI_V5"].includes(q.reason)&&q.reason_id,page_size:12,search_query:u,source:o,top_level_source:r,top_level_source_depth:s,is_pdp:a.is_eligible_for_pdp,landing_context:E}},J=(0,ef.q6)(_,a.pinner?.id,y),Q=!!a.id&&!J||F,{data:ee}=g||{},et=this.isWideCarousel(),en=F?ex.Gg:ex.CI,ei=et&&X?ex.Ch:en,ea=et?ex.Gb:ex.Kn,el=F||"lg"!==H?ei:ea-ei,er=N&&(this.isWideCarousel()||F),es=er&&(0,W.jsx)(eI,{disabled:!z||F,children:(0,W.jsx)(e2.Z,{containerId:"InnerScrollContainer",children:(0,W.jsx)(eZ.Z,{carouselSlots:$?.carousel_slots??[],commerceData:B,onImageSelect:this.handleCarouselSwipe,pinId:a.id,selectedIndex:$?.index||0,size:"sm",surfaceType:"closeup",viewParameter:(0,e0.Z)({hasPin:!!this.props.pin,hasPinRichMetadata:!!this.props.pin.rich_metadata,hasPinRichMetadataProducts:!!this.props.pin.rich_metadata?.products,hasPinRichMetadataArticle:!!this.props.pin.rich_metadata?.article,hasPinRichMetadataRecipe:!!this.props.pin.rich_metadata?.recipe,hasPinStoryPinData:!!this.props.pin.story_pin_data})})})}),eo=er&&(0,W.jsx)(c.xu,{width:tg.sm}),ed=this.renderBodyContent({relatedResourceOptions:Y,storyPinTaggedProducts:ee,maxWidth:ea}),ec=(0,W.jsx)(m.Z,{isVideoPin:l.isVideoPin,pin:a,pinResource:h,topLevelTrafficSource:r,didShortClickThrough:U,firstLoadComplete:N,viewportSize:H,relatedModulesContent:Q?(0,W.jsx)(eA.Z,{closeupBody:ed,pinKey:{type:"deprecated",data:a},relatedResourceOptions:Y,setRelatedPinsHeaderRef:this.setRelatedPinsHeaderRef,topLevelTrafficSource:r,viewParameter:(0,e0.Z)({hasPin:!!a,hasPinRichMetadata:!!a.rich_metadata,hasPinRichMetadataProducts:!!a.rich_metadata?.products,hasPinRichMetadataArticle:!!a.rich_metadata?.article,hasPinRichMetadataRecipe:!!a.rich_metadata?.recipe,hasPinStoryPinData:!!a.story_pin_data}),viewportSize:H}):(0,W.jsx)(d.Fragment,{}),onWrapperClick:this.onWrapperClick,beforeBodyContent:es,afterBodyContent:eo,bodyContent:ed,backButton:!D&&(0,W.jsx)(e9.Z,{deepLinkBackGoesToBoard:R,handleScroll:this.handleScroll,isNewOrRes:(0,eN.Z)(_.createdAt)||(0,eW.Z)(null,_),onClick:this.handleBackButtonClick,showLabel:!!(V&&!O),showShadow:O,trafficSource:o})});return(0,W.jsx)(p.Xl,{abortNoActionPlacementTimeout:e,beforeBodyContent:es,classProps:{...M,location:{pathname:"",search:"",hash:""}},classState:this.state,clientTrackingParams:t,commerceData:B,showCloseupContentRight:X,showProductDetailPage:!0,isWideCarousel:et,paneWidth:ei,maxWidth:ea,descriptionPaneWidth:el,handleCarouselSwipe:this.handleCarouselSwipe,handleFocus:this.handleFocus,setResultScrollContainerRef:this.setResultScrollContainerRef,handleScroll:this.handleScroll,handleBackButtonClick:this.handleBackButtonClick,closeupContent:ec,onRelatedInterestsBannerDismiss:this.onRelatedInterestsBannerDismiss,inCommentFooterRedesignExp:f,isCloseupMediaViewerOpen:A,isCloseupRelatedPinsAboveTheFoldEnabled:x,isCommentAttachmentSelectorOpen:v,isCommentThreadExpanded:b,isInRemoveMagnifyingGlassVariant:w,isPinNoteExpanded:P,isProductDetailsExpanded:S,peekCloseupEnabled:k,setIsCommentAttachmentSelectorOpen:j,setIsCommentThreadExpanded:I,setIsCloseupMediaViewerOpen:K,setIsPinNoteExpanded:C,setIsProductDetailsExpanded:T,closeupWithinMasonryEnabled:F,setAbortNoActionPlacementTimeout:L})}}let tP=(0,x.Z)(function(e){let{clientTrackingParams:t,pin:n,pinResource:i,pinId:a,viewer:r,deepLinkBackGoesToBoard:s,goBack:o,routePush:c,trafficSource:p}=e,{logContextEvent:m}=(0,M.v)(),g=(0,e5.Z)(),x=(0,O.ZP)(),v=(0,e3.B)(),k=(0,e1.F)(),{checkExperiment:b}=k,P=!!(n.is_eligible_for_pdp&&!n.story_pin_data&&n.formatted_description?.components),[S,w]=(0,d.useState)(!1),[j,I]=(0,d.useState)(!1),[C,T]=(0,d.useState)(!1),[F,L]=(0,d.useState)(!1),[A,K]=(0,d.useState)(!1),[Z,R]=(0,d.useState)(!1),{setMostRecentPinId:E,setMostRecentPinImage:D}=(0,td.f)(),z=(0,eh.Z)({type:"deprecated",data:n}),B=(0,eJ.Z)({type:"deprecated",data:n}),V=(0,eq.sY)(n.embed?.type)&&"gif"||!!n.is_eligible_for_pdp&&"productPin"||n.rich_summary?.type_name==="recipe"&&"recipePin"||n.story_pin_data_id&&"storyPin"||!!n.videos?.video_list&&"video"||"image",H="pin_closeup_lcp",U=(0,e8.PY)(H),{conversationOpen:N}=(0,tr.Z)(),$=(0,to.Z)(),{shouldFetchSLURPFields:G}=(0,y.Z)({pinKey:{type:"deprecated",data:n}}),{isEnabled:X}=(0,f.Z)(),{getLandingContext:q}=(0,e$.Z)(),Y=(0,ey.Z)(),J=(0,ef.lJ)(r,Y);(0,d.useEffect)(()=>{U&&(0,e8.ku)({stopwatchName:H,binaryAnnotationName:"pinType",value:V,annotationType:"STRING"})},[U,V]);let Q=n.sponsorship?.sponsor?.id,ee=!n.is_repin&&!!Q,et=(0,eC.Z)(Q&&ee&&r.isAuth&&"storyPin"===V?{name:"ApiResource",options:{url:`/ads/v4/business_access/businesses/${Q}/me/ad_accounts_permissions/`}}:null),{onHandleBackButtonClick:en}=(0,ta.Z)({logCommerceAuxData:!0,deepLinkBackGoesToBoard:s,element:13310,goBack:o,routePush:c,trafficSource:p,viewer:r,requestContext:v,pinKey:{type:"deprecated",data:n}},m),ei=r.isAuth&&(0,u.Gv)({orbacSubjectId:J,pinIsRepin:n.is_repin,pinPinnerId:n.pinner?.id,viewerId:r.id,viewerIsPartner:r.isPartner}),{data:ea,isLoaded:el}=(0,eC.Z)(ei?{name:"ApiResource",options:{url:`/v3/trends/partner/${r.id||""}/trends_for_pin/${n.id}/`,data:{number_terms_to_return:10}}}:null),er=b("ce_dweb_comment_feed_redesign").anyEnabled,{isCloseupRelatedPinsAboveTheFoldEnabled:es,closeupWithinMasonryEnabled:eo,peekCloseupEnabled:ed}=(0,h.Z)(r.isAuth),ec=r.isAuth&&b("closeup_dweb_remove_magnifying_glass").anyEnabled,ep=(0,_.Z)({closeupWithinMasonryEnabled:eo,pin:n,pinId:a,pinResource:i}),{getMainPinImage:em}=(0,eY.Z)({pinKey:{type:"deprecated",data:n},closeupWithinMasonryEnabled:eo});return(0,W.jsx)(tb,{...e,abortNoActionPlacementTimeout:S,clientTrackingParams:t,closeupWithinMasonryEnabled:eo,conversationOpen:N,dispatch:(0,l.I0)(),experimentsClient:k,getSterlingURL:(0,eD.Z)(),getStringifiedCommerceAuxData:z,hideBackButtonExp:X,i18n:x,inCommentFooterRedesignExp:er,initialState:ep,isCloseupMediaViewerOpen:Z,isCloseupRelatedPinsAboveTheFoldEnabled:es,isCommentAttachmentSelectorOpen:j,isCommentThreadExpanded:C,isInRemoveMagnifyingGlassVariant:ec,isPinNoteExpanded:F,isProductDetailsExpanded:A,landingContext:q(),logContextEvent:m,mainImage:em(),onHandleBackButtonClick:en,orbacActingAs:Y,peekCloseupEnabled:ed,pinFormattedLink:B,pwtSurfaceContext:(0,eu.E)(),requestContext:v,setAbortNoActionPlacementTimeout:w,setIsCloseupMediaViewerOpen:R,setIsCommentAttachmentSelectorOpen:I,setIsCommentThreadExpanded:T,setIsPinNoteExpanded:L,setIsProductDetailsExpanded:K,setMostRecentPinId:E,setMostRecentPinImage:D,shouldFetchSLURPFields:G,showStructuredDescription:P,toastManager:(0,te.F9)(),trackInteraction:g,trendsData:{data:ea,isLoaded:!ei||el},userBusinessRoleResource:et,verticalNavWidth:$})});var tS=n("170217"),tw=n("644319"),tj=n("757892");function tI(e){return(0,W.jsx)(s.l6,{...e,CloseupComponent:tP})}function tC(e){let t=(0,l.I0)(),n=(0,e_.Z)(),i=(0,r.UO)(),a=(0,tS.aX)(),s=(0,r.TH)(),c=(0,tj.S6)()(i.id),u=(0,en.Z)((s?.state||{}).trackingParams,c?.tracking_params),p={...e,history:(0,r.k6)(),location:(0,r.TH)(),clientTrackingParams:u,params:i,requestContext:(0,e3.B)(),searchPinCloseupViewed:(e,n)=>t((0,tw.Y4)(e,n)),viewer:n},{checkExperiment:m}=(0,e1.F)();return(0,W.jsx)(o.Z,{orbacSubjectId:(0,ef.lJ)(n,(0,ey.Z)()),pinId:i.id||"",children:({pinResource:e})=>(0,d.createElement)(tI,{...p,key:i.id,checkExperiment:m,clientTrackingParams:u,currentHistoryStack:a,pinResource:e})})}},612568:function(e,t,n){n.d(t,{A:()=>ed,Z:()=>eu});var i,a,l,r=n("667294");n("167912");var s=n("616550"),o=n("883119"),d=n("423107"),c=n("667542"),u=n("161668"),p=n("772866"),m=n("927657"),g=n("459892"),h=n("125243"),_=n("807776"),y=n("839513"),f=n("131548"),x=n("890847"),v=n("198803"),k=n("80887"),b=n("52302"),P=n("785893");let S=(0,b.Z)(()=>n.e("75139").then(n.bind(n,929212)),void 0,"StructuredFeedStoryModule"),w=(0,b.Z)(()=>n.e("65346").then(n.bind(n,713609)),void 0,"app-common-react-components-closeup-CloseupRelatedModules-DomainModule"),j=(0,b.Z)(()=>Promise.resolve().then(n.bind(n,161668)),void 0,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesInclusiveFilters"),I=(0,b.Z)(()=>n.e("99743").then(n.bind(n,349354)),void 0,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesHeader"),C=void 0!==i?i:i=n(430624),T=(0,r.forwardRef)(({clientTrackingParams:e,pinKey:t,setRelatedPinsHeaderRef:n,slotIndex:i,story:a,topLevelTrafficSource:l,viewParameter:r,viewportSize:s},d)=>{let c=(0,f.Z)(C,t),{closeupWithinMasonryEnabled:u}=(0,k.x4)();if(!a)return null;let{container_type:p,story_type:m}=a;if((0,v.Z)(p)){let e=88===p,t=90===p;return(0,P.jsx)(o.xu,{marginBottom:e||t?0:12,paddingX:t?12:0,children:(0,P.jsx)(S,{componentFallback:13176,initialSlotIndex:i,story:a,storyKey:{type:"deprecated",data:a},surface:"ShoppingDynamicHeightGrid",view:3,viewParameter:r})})}return(0,x.HM)(m)?!u&&(0,P.jsx)(o.xu,{alignSelf:"center",children:(0,P.jsx)(j,{filter:(0,x.oV)(m),story:a,viewParameter:r})}):["related_products_feed_header","related_modules_header"].includes(m)?(0,P.jsx)(o.xu,{ref:n,"data-test-id":"related-modules-header",children:(0,P.jsx)(I,{ref:d,clientTrackingParams:e,slotIndex:i,storyId:a.id,storyType:m,title:a.title?.format,viewParameter:r})}):"related_domain_carousel"===m?(0,P.jsx)(o.xu,{display:"flex",justifyContent:"center",marginBottom:12,children:(0,P.jsx)(w,{closeupImageSignature:c.imageSignature||"",data:a,slotIndex:i,storyId:a.id,storyType:m,topLevelTrafficSource:l,viewParameter:r,viewportSize:s})}):null});var F=n("840960"),L=n("115951"),A=n("574386"),K=n("646055"),Z=n("456826"),R=n("70455"),E=n("398605"),D=n("374746"),z=n("297706"),M=n("935415"),B=n("787683"),O=n("790944"),V=n("634408");let H=()=>(0,P.jsx)(r.Fragment,{children:Array(12).fill(void 0).map((e,t)=>(0,P.jsx)(o.xu,{marginEnd:4,width:A.j},`empty-pin-${t}`))}),U=void 0!==a?a:a=n(825888);function N(e){return 154===e.container_type?2:e.columnSpan??1}function W({authDesktopSurface:e="PdpRelatedPinGrid",closeupBody:t,closeupInclusiveFilters:n,initialSlotIndex:i,pinKey:a,relatedPins:l,isInGridLoadingStateExp:s,topLevelTrafficSource:d}){let{closeupWithinMasonryEnabled:c,viewportSize:u}=(0,k.x4)(),p=(0,f.Z)(U,a),m=(0,B.Z)(),g=(0,r.useRef)(null),h=(0,z.Z)({hasPin:!!p,hasPinRichMetadata:!!p.richMetadata,hasPinRichMetadataProducts:!!p.richMetadata?.products,hasPinRichMetadataArticle:!!p.richMetadata?.article,hasPinRichMetadataRecipe:!!p.richMetadata?.recipe,hasPinStoryPinData:!!p.storyPinData}),_=({data:a,itemIdx:l})=>{let r=(0,D.Z)(m),s=i+l,o=null;switch(a.type){case"closeup_module":o=t;break;case"shopping_module":o=(0,P.jsx)(L.Z,{moduleWidth:"100%",pinKey:p,trafficSource:d,viewParameter:h});break;case"inclusive_filters_module":o=n;break;case"story":switch(154===a.container_type&&(o=(0,P.jsx)(K.Z,{slotIndex:s,story:a,viewParameter:h,viewType:3})),a.story_type){case"BUBBLE_ONE_COL":o=(0,P.jsx)(O.default,{bubbles:a.objects,id:a.id,referringSource:a.referring_source,slotIndex:s,storyType:a.story_type,title:a.title,viewParameter:h,viewType:3});break;case"related_query_shop_upsell_closeup":o=(0,P.jsx)(Z.default,{itemIdx:s,story:a,viewParameter:h,viewType:3})}break;default:o=(0,P.jsx)(V.ZP,{authDesktopSurface:e,componentType:13176,duploQueryRef:null,imageOnlyOption:r?"image-only":"default",pin:a,pinId:a.id,slotIndex:s,viewData:{pin_id:p.entityId},viewParameter:h,viewType:3})}return(0,P.jsx)(F.Z,{children:o})},{_loadingStateItems:y}=(0,E.Z)({useLoadingState:s}),x=c?(0,P.jsx)(R.default,{_dynamicHeights:c,_getColumnSpanConfig:N,align:c||"sm"===u?"center":"start",items:l,layout:"basic",masonryRef:g,minCols:2,renderItem:_,serverRender:!0,useLoadingState:s}):(0,P.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"5px"}},children:[(0,P.jsx)(R.default,{_getColumnSpanConfig:N,items:l,renderItem:_,useLoadingState:s}),(0,P.jsx)(H,{})]});return(0,P.jsx)(M.Z,{component:86,viewParameter:h,children:x})}var $=n("880261"),G=n("112246"),X=n("394779"),q=n("990864"),Y=n("708130"),J=n("561162"),Q=n("539274"),ee=n("820368"),et=n("819536"),en=n("445470"),ei=n("18928"),ea=n("137123"),el=n("331749"),er=n("458199");let es=(0,b.Z)(()=>n.e("80949").then(n.bind(n,766480)),void 0,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesOneBar"),eo=void 0!==l?l:l=n(986214);function ed({isFromBackButton:e,referringSource:t,relatedModulesRef:n}){!e&&n?.current&&t===et.i.SHOPPING_FILTER&&setTimeout(()=>{n.current?.scrollIntoView(),window.scrollBy(0,-100)},10)}let ec=(0,r.forwardRef)(({clientTrackingParams:e,closeupBody:t,excludeStories:n,initialSlotIndex:i=0,isFilteredFeed:a,pinKey:l,relatedModulesFeedResource:p,setHasRelatedPins:g,setRelatedPinsHeaderRef:y,topLevelTrafficSource:v,viewParameter:b,viewportSize:S},w)=>{let{data:j,isLoaded:I,fetchMore:C,isFetching:F,isAtEnd:L,nextBookmark:A}=p,K=(0,f.Z)(eo,l),{closeupWithinMasonryEnabled:Z}=(0,k.x4)(),{closeupMasonryModules:R}=(0,m.Z)(K.entityId,p),E=(0,s.TH)(),D=(0,s.k6)(),z=(0,Y.ZP)(),{height:M}=(0,q.Z)()??{},B=(0,er.t)(),O=(0,_.Z)(),V=(0,el.Z)(),H=(0,r.useRef)(i),[U,N]=(0,r.useState)(!1),$=(0,ea.mB)(E.search).rs,G=D?.action==="POP";(0,r.useEffect)(()=>{ed({isFromBackButton:G,referringSource:$,relatedModulesRef:w})},[G,E,$,w]),(0,r.useEffect)(()=>{I&&!U&&N(!0)},[I,U]);let X=(j||[]).filter(Boolean);X=X.filter(e=>!(n&&"story"===e.type&&e.story_type&&n.includes(e.story_type)));let J=(0,ei.Z)(X),ee=e=>!!("pin"===e.type||"story"===e.type&&(en.v.has(e.story_type)||154===e.container_type)),et=a&&A===Q.qx,es=j?j.length:0,ec=M??h.Ep-B-h.Lu;(0,r.useEffect)(()=>{g(0!==es)},[es,g]);let eu=(Array.isArray(J)?J.filter(e=>e?.type==="story"):[]).find(e=>(0,x.HM)(e?.story_type??"")),ep=eu&&(0,P.jsx)(u.default,{filter:(0,x.oV)(eu?.story_type??""),story:eu,viewParameter:b});return V&&Z?(0,P.jsx)(W,{closeupBody:t,initialSlotIndex:H.current,pinKey:K,relatedPins:R,topLevelTrafficSource:v}):(0,P.jsxs)(r.Fragment,{children:[(I||Z)&&J.map((n,i)=>{let l=(0,P.jsx)(W,{authDesktopSurface:a?"ShoppingDynamicHeightGrid":void 0,closeupBody:t,initialSlotIndex:H.current,pinKey:K,relatedPins:R,topLevelTrafficSource:v});0===i&&(H.current=0);let r=0;return Array.isArray(n)?(r+=n.length,l=(0,P.jsx)(W,{authDesktopSurface:a?"ShoppingDynamicHeightGrid":void 0,closeupBody:t,closeupInclusiveFilters:ep,initialSlotIndex:H.current,pinKey:K,relatedPins:[...R,...n.filter(ee)],topLevelTrafficSource:v},n[0].id)):"story"===n.type&&(r+=n.objects?.length||1,l=(0,P.jsx)(o.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:(0,P.jsx)(T,{ref:w,clientTrackingParams:e,pinKey:K,setRelatedPinsHeaderRef:y,slotIndex:H.current,story:n,topLevelTrafficSource:v,viewParameter:b,viewportSize:S})},n.id)),H.current+=r,l}),F&&O&&!U&&(0,P.jsx)(o.xu,{children:(0,P.jsx)(W,{closeupBody:t,initialSlotIndex:0,isInGridLoadingStateExp:O,pinKey:K,relatedPins:R})}),(0,P.jsx)(o.gr,{fetchMore:C,isAtEnd:L,isFetching:F}),(0,P.jsx)(o.xu,{minHeight:F?ec:void 0,children:(0,P.jsx)(o.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,P.jsx)(o.$j,{accessibilityLabel:z._('Loading related products results', 'closeup.relatedProducts.results', 'Accessibility label for loading related products results'),show:F&&U||F&&!O})})}),et&&es>0&&(0,P.jsx)(d.Z,{}),et&&0===es&&(0,P.jsx)(c.Z,{})]})});function eu(e){let{relatedResourceOptions:t,clientTrackingParams:n,setRelatedPinsHeaderRef:i,pinKey:a,topLevelTrafficSource:l,viewParameter:s,viewportSize:d}=e,c=(0,J.F)(),u=(0,ee.Z)(t),m=(0,X.Z)(),[h,_]=(0,r.useState)(null),x=(0,G.Z)(),{cacheOneBarModules:v,cachedProductFilterOneBarModules:b}=(0,y.X)(),{closeupWithinMasonryEnabled:S}=(0,k.x4)(),w=(0,f.Z)(eo,a),{isInCloseupShoppingRefinementsExp:j,shouldFetchSLURPFields:I}=(0,g.Z)({pinKey:w}),C=(0,r.useRef)(null),F=(0,r.useCallback)(e=>{e&&(C.current=e)},[]),[L,A]=(0,r.useState)(!0),K=(0,ee.Z)(j&&x&&w.entityId?{name:"ApiResource",options:{url:`/v3/pins/${w.entityId}/related/pins/filter/`,field_sets:[...(0,$.wM)({experimentsClient:c,fields:["pin.domain","pin.dominant_color","pin.grid_title","pin.id","pin.images[170x,136x136,236x,474x,736x,orig]","pin.is_oos_product","pin.is_stale_product","pin.link_domain()","pin.link","pin.rich_summary()","pin.tracking_params","pin.type"]}),...I?["pin.is_eligible_for_closeup_one_bar_refinements"]:[],...(0,$.pb)({experimentsClient:c,fields:[]})],data:{applied_unified_filters:x}}}:null),Z=K?.data?K:u,R=Z?.data?.find(e=>"story"===e.type&&e.story_type&&e.story_type===p.vs),E=R?.objects;(0,r.useEffect)(()=>{j&&E&&v({baseCacheKey:w.entityId,oneBarModules:E})},[u,u.data,w.entityId,v,j,K,E]),(0,r.useEffect)(()=>{!h&&j&&_(u?.data?.find(e=>"story"===e.type&&e.story_type&&p.aW.has(e.story_type)))},[u,j,_,h]);let D=!j||j&&!m;return(0,P.jsxs)(o.xu,{ref:F,"data-test-id":"relatedPins",direction:"column",display:"flex",flex:"grow",position:"relative",children:[j&&h&&L&&(0,P.jsx)(T,{ref:C,clientTrackingParams:n,pinKey:w,setRelatedPinsHeaderRef:i,slotIndex:0,story:h,topLevelTrafficSource:l,viewParameter:s,viewportSize:d}),E&&E.length>0&&b&&b.length>0&&!S&&(0,P.jsx)(es,{oneBarModules:E,viewParameter:s,viewType:3}),m&&(0,P.jsx)(ec,{...e,ref:C,initialSlotIndex:1,isFilteredFeed:!0,relatedModulesFeedResource:K,setHasRelatedPins:A}),D&&(0,P.jsx)(ec,{...e,ref:C,excludeStories:j?[...p.aW,p.vs]:[],initialSlotIndex:m?1:0,relatedModulesFeedResource:u,setHasRelatedPins:A})]})}},453071:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(517689);let a=[i.gO.ADMIN,i.gO.CAMPAIGN_MANAGER]},420213:function(e,t,n){n.d(t,{Z:()=>K});var i=n("667294"),a=n("581722"),l=n("633301"),r=n("883119"),s=n("188568"),o=n("407553"),d=n("708130"),c=n("80887"),u=n("785893");let p=({collapsed:e,commentCount:t,onIconClick:n=()=>{}})=>{let i=(0,d.ZP)(),{inCommentFooterRedesignExp:a,closeupWithinMasonryEnabled:l}=(0,c.x4)(),r=a||l?(0,o.i$)(t,i):i._('Comments', 'comments on a Pin', 'comments on a Pin');return(0,u.jsx)(s.Z,{collapsed:e,heading:r,onClick:n,showArrow:t>0})};var m=n("431217"),g=n("682753"),h=n("674094"),_=n("772866"),y=n("495334"),f=n("441863"),x=n("342117"),v=n("3879"),k=n("820368"),b=n("55077"),P=n("959474"),S=n("460515"),w=n("237861"),j=n("400996"),I=n("253525"),C=n("865330"),T=n("165278"),F=n("553497"),L=n("641851");let A=({aggregatedPinId:e,closeupAttributionId:t,closeupAttributionUsername:n,commentCount:s,commentsDisabled:o,commentsLoadedCallback:d,featuredCommentId:y,inCommentFeedRedesignExp:F,isCommentSectionOpen:A,isLoadingNewCreatedComment:K,isORBACProfileManager:Z,isVideo:R,onCommentSectionClick:E,photoCount:D,pinId:z,pinnerId:M,scrollContainerRef:B,shouldShowHeading:O,storyPinDataId:V,viewParameter:H})=>{let U;let N=(0,a.I0)(),{updateCloseupBodyContainerHeight:W}=(0,i.useContext)(c.ZP),{isBot:$}=(0,v.B)(),G=(0,b.HG)(),X=(0,j.lV)(),{toggleAggregatedCommentHelpful:q,toggleAggregatedCommentLike:Y}=(0,j.nf)(),{closeupWithinMasonryEnabled:J,peekCloseupEnabled:Q,viewportSize:ee}=(0,c.x4)(),et=(0,i.useRef)(null),[en,ei]=(0,i.useState)(!1),[ea,el]=(0,i.useState)(!1),[er,es]=(0,i.useState)(!1),[eo,ed]=(0,i.useState)(void 0),[ec,eu]=(0,i.useState)(void 0),ep=(0,P.Z)(),em=(0,S.Z)(),eg=(0,w.lJ)(ep,em);U=J?0:F?A?4:3:6;let eh=Math.max(s+D,0)>0,e_=(0,i.useRef)(!eh),{fetchMore:ey,isAtEnd:ef,isFetching:ex,isLoaded:ev}=(0,k.Z)(!e_.current&&e?(0,C.w)({aggregatedPinDataId:e,featuredCommentIds:y?[y]:[],isDesktop:G,orbacSubjectId:eg}):null),ek=(0,a.v9)(t=>(0,L.Z)(t,e,X)),eb=er&&!A&&!!ek.length&&(J||F);(0,i.useEffect)(()=>{W&&W()},[W]),(0,i.useEffect)(()=>{d?.(ev||!eh)},[d,ev,eh]);let eP=e=>{ed(e?.id)},eS=(e,t,n)=>()=>{n?N((0,T.wH)({didItDataId:e,isLikedByMe:t,orbacSubjectId:eg})):Y({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:eg})},ew=(e,t,n)=>()=>{n?N((0,T.YH)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:eg})):q({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:eg})},ej=eb&&(0,u.jsx)(r.xu,{marginBottom:J?4:0,marginTop:J?1:0,children:(0,u.jsx)(m.Z,{comment:ek[0]})}),eI=a=>(0,u.jsxs)(i.Fragment,{children:[!!B&&(0,u.jsx)(r.gr,{container:J?et.current??void 0:B,fetchMore:$?void 0:ey,isAtEnd:ef,isFetching:ex}),(0,u.jsxs)(g.Z,{nodeRef:a??void 0,paddingLeft:J?8:0,paddingRight:J?8:0,children:[(0,u.jsx)(f.Z,{aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:n,comments:ek,commentsDisabled:o,commentsScrollContainerRef:et,featuredCommentId:y,gapSize:5,inCommentFeedRedesignExp:F,isDesktop:!0,isLoaded:ev||!eh,isLoading:!ev&&(K||ex),isORBACProfileManager:Z,isVideo:R,parentId:e??void 0,parentType:I.o.pin,pinId:z,pinnerId:M,reactionListCommentId:ec,replyingToCommentId:eo,showReactionListForComment:eu,storyPinDataId:V,toggleHelpful:ew,toggleLike:eS,toggleReplyComposer:eP,userAvatarSize:"sm",viewParameter:H}),(0,u.jsx)(h.Z,{show:J&&eh&&A&&ea,surface:"comment-body-scrolling"})]})]}),eC=0,{fiftyPercentHeight:eT}=(0,_.Re)();Q&&(eC=eT,"sm"===ee&&(eC=`calc(${eT}/2)`));let eF=`
    .comment-section-enter {
      max-height: 0;
      opacity: 0;
    }

    .comment-section-enter-active {
      max-height: ${eC};
      opacity: 1;
      transition: max-height 500ms ease-out, opacity 500ms ease-out;
    }

    .comment-section-exit {
      max-height: ${eC};
      opacity: 1;
    }

    .comment-section-exit-active {
      max-height: 0;
      opacity: 0;
      transition: max-height 500ms ease-out, opacity 500ms ease-out;
    }
  `;(0,i.useEffect)(()=>{if(!J)return()=>{};let e=()=>{(et?.current?.scrollTop??0)>0?ei(!0):ei(!1),(et?.current?.scrollHeight??0)>(et?.current?.clientHeight??0)&&el(!0)},t=et.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}},[J,A]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{es(!0)},J?0:1e3);return()=>clearTimeout(e)},[J]);let eL=er&&(A||!eh),eA=(0,i.useRef)(null);return(0,u.jsx)(r.xu,{id:"canonical-card",children:(0,u.jsxs)(r.kC,{dataTestId:"canonical-card",direction:"column",gap:Q?void 0:{row:0,column:U},children:[O&&(0,u.jsx)(r.kC.Item,{children:(0,u.jsxs)(r.xu,{color:J?"light":void 0,children:[(0,u.jsx)(p,{collapsed:!A,commentCount:o?0:Math.max(s+D,0),onIconClick:()=>{E&&E(!A)}}),(0,u.jsx)(h.Z,{show:J&&eh&&en&&A,surface:"comment-heading"})]})}),eb&&!Q&&ej,Q&&(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(x.Z,{unsafeCSS:eF}),(0,u.jsx)(l.Z,{classNames:"comment-section",in:er&&(A||!eh),nodeRef:eA,timeout:1e3,unmountOnExit:!0,children:eI(eA)})]}),eL&&!Q&&eI()]})})};function K(e){let t=(0,a.I0)();return(0,u.jsx)(A,{...e,featuredCommentId:(0,y.K)(),pinUpdateCommentCount:(e,n)=>t((0,F.R)(e,n))})}},431217:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(667294),a=n(883119),l=n(26445),r=n(407553),s=n(348324),o=n(708130),d=n(785893);function c({comment:e}){let t=(0,o.ZP)(),{user:{first_name:n,image_medium_url:c,username:u},tags:p=[]}=e,m="",g=e.text??e.details,h=[e.user];if("aggregatedcomment"===e.type){h.push(...e.tagged_users);let n=e.media?.media_type===1;m=`${u} ${n?g||(0,r.F1)(t):g}`}else m=`${u} ${g||(0,r.Ff)(t)}`;let _=(0,r.zs)(u,p),y=1===e.comment_tag;return(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(a.xu,{marginEnd:2,children:(0,d.jsx)(l.Z,{isQuestion:y,name:n||u||"",size:"xs",src:c??""})}),(0,d.jsx)(a.kC,{direction:"column",flex:"grow",justifyContent:"center",children:(0,d.jsx)(a.kC,{justifyContent:"between",children:(0,d.jsx)(a.kC.Item,{minWidth:0,children:(0,d.jsx)(a.kC,{dataTestId:"author-and-comment-container",direction:"column",children:(0,d.jsx)(s.Z,{inCommentFeedPreview:!0,isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:h,tags:_,text:m})})})})})]})})}},954543:function(e,t,n){n.d(t,{$y:()=>tK,Xl:()=>tL,z8:()=>tZ});var i,a,l,r=n("667294"),s=n("581722"),o=n("616550"),d=n("883119"),c=n("816967");let u=Object.freeze(["JP"]);var p=n("350711"),m=n("714833");n("167912");var g=n("131548"),h=n("890847"),_=n("80887"),y=n("52302"),f=n("785893");let x=(0,y.Z)(()=>Promise.resolve().then(n.bind(n,161668)),void 0,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesInclusiveFilters"),v=(0,y.Z)(()=>n.e("82713").then(n.bind(n,123901)),void 0,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModuleOneTapConfiguration"),k=(0,y.Z)(()=>n.e("99743").then(n.bind(n,349354)),void 0,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesHeader"),b=void 0!==i?i:i=n(410388),P=(0,r.forwardRef)(({clientTrackingParams:e,pinKey:t,searchQuery:n,setRelatedPinsHeaderRef:i,slotIndex:a,story:l,trafficSource:r,viewParameter:s,viewportSize:o},c)=>{let u=(0,g.Z)(b,t),{closeupWithinMasonryEnabled:p}=(0,_.x4)();if(!l)return null;let{story_type:m}=l;return"related_products_collage"===m?(0,f.jsx)(d.xu,{alignSelf:"center","data-test-id":"related-modules-one-tap-configuration",children:(0,f.jsx)(v,{pinKey:u,searchQuery:n,slotIndex:a,storyKey:{type:"deprecated",data:l},trafficSource:r,viewParameter:s,viewportSize:o})}):(0,h.HM)(m)?!p&&(0,f.jsx)(d.xu,{alignSelf:"center",children:(0,f.jsx)(x,{filter:(0,h.oV)(m),story:l,viewParameter:s})}):"related_modules_header"===m?(0,f.jsx)(d.xu,{ref:i,"data-test-id":"related-modules-header",children:(0,f.jsx)(k,{ref:c,clientTrackingParams:e,slotIndex:a,storyId:l.id,storyType:m,title:l.title?.format,viewParameter:s})}):null});var S=n("423107"),w=n("667542"),j=n("161668"),I=n("840960"),C=n("927657"),T=n("115951"),F=n("125243"),L=n("807776"),A=n("611662"),K=n("612568"),Z=n("971634"),R=n("112393"),E=n("668796"),D=n("801617");let z=[81];function M({data:e}){let{action:t,container_type:n,objects:i,title:a}=e||{},{format:l}=a??{},{text:r,url:s,user:o={}}=t??{},{image_large_url:c,full_name:u}=o,{images:p}=i?.find(e=>"pin"===e.type)||{},m=null,g=(0,E.Z)({url:s})?"nofollow":"none";return 81===n&&(m=(0,f.jsxs)(d.kC,{direction:"column",gap:{row:0,column:2},children:[(0,f.jsxs)(d.xu,{position:"relative",children:[(0,f.jsx)(D.Z,{coverImages:p??void 0,height:R.yF,text:l??"",textType:"text",url:s??""}),o.imageUrl&&(0,f.jsx)(d.xu,{left:!0,padding:2,position:"absolute",top:!0,children:(0,f.jsx)(Z.qE,{name:u||"",outline:!0,size:"md",src:c??""})})]}),(0,f.jsx)(d.ZP,{fullWidth:!0,href:s??"",rel:g,size:"lg",text:r??""})]})),m}var B=n("456826"),O=n("990864"),V=n("544358"),H=n("674320"),U=n("70455"),N=n("708130"),W=n("374746"),$=n("297706"),G=n("657156"),X=n("539274"),q=n("270756"),Y=n("935415"),J=n("137123"),Q=n("236256"),ee=n("790944"),et=n("458199"),en=n("634408"),ei=n("320288");let ea=e=>({height:q.zX*e,width:q.zX});function el(e){return e.columnSpan??1}let er=void 0!==a?a:a=n(636689),es=({closeupBody:e,authDesktopSurface:t="RelatedPinGrid",clientTrackingParams:n,hasSimplifiedPinGridExpLoaded:i,isFilteredFeed:a,lfvExperiences:l,relatedPinsResource:s,setHasRelatedPins:o,i18n:c,closeupWithinMasonryEnabled:u,isInGridLoadingStateExp:p,logContextEvent:m,relatedPinsInRow:g,spinnerMinHeight:_,pin:y,topLevelTrafficSource:x,viewParameter:v})=>{let[k,b]=(0,r.useState)(s.auxData?.grid_layout?.w_h_ratio),[P,F]=(0,r.useState)(!1),L=(0,r.useRef)(null),A=(0,r.useRef)(null),{closeupMasonryModules:K,skinToneModule:Z}=(0,C.Z)(y.entityId,s);(0,Q.Z)(()=>{m({event_type:13,view_parameter:v,view_type:3,component:86,clientTrackingParams:n})}),(0,r.useEffect)(()=>{!k&&s.auxData?.grid_layout?.w_h_ratio&&(b(s.auxData.grid_layout.w_h_ratio),L.current=window),!P&&s.isLoaded&&F(!0)},[u,P,k,s]);let R=s.data?s.data.length:0;(0,r.useEffect)(()=>{o(0!==R)},[R,o]);let{data:E,fetchMore:D,isAtEnd:O,isFetching:H,isLoaded:N}=s;if(!N&&!p)return null;let q=`relatedPins:${y.entityId}`,J=["related_products_button_footer","related_domain_carousel","related_products_feed_header"],et=(E&&E?.findIndex(e=>"pin"===e.type))??0,er=[...u?K:[],...(E||[]).slice(et).filter(e=>!J.includes(e?.story_type))],es=a&&s.nextBookmark===X.qx,eo=u||er&&i||p&&H&&!P,ed=(0,V.Z)({isHiddenPin:y?.isHidden,isUnsafePin:y?.isUnsafe});return(0,f.jsxs)(d.xu,{children:[eo&&(0,f.jsx)(Y.Z,{clientTrackingParams:n,component:86,viewParameter:(0,$.Z)({hasPin:!!y,hasPinRichMetadata:!!y.richMetadata,hasPinRichMetadataProducts:!!y.richMetadata?.products,hasPinRichMetadataArticle:!!y.richMetadata?.article,hasPinRichMetadataRecipe:!!y.richMetadata?.recipe,hasPinStoryPinData:!!y.storyPinData}),children:(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(G.Z,{isAtEndOfFeed:O,isPlaceholderGrid:p,itemCount:er.length,children:(0,f.jsx)(U.default,{_dynamicHeights:u,_getColumnSpanConfig:u?el:void 0,align:u?"center":void 0,cacheKey:q,isGridCentered:g,items:er,layout:"basic",loadItems:D,masonryRef:A,minCols:u?2:void 0,renderItem:({data:n,itemIdx:i})=>{let a;let r=(0,$.Z)({hasPin:!!y,hasPinRichMetadata:!!y.richMetadata,hasPinRichMetadataProducts:!!y.richMetadata?.products,hasPinRichMetadataArticle:!!y.richMetadata?.article,hasPinRichMetadataRecipe:!!y.richMetadata?.recipe,hasPinStoryPinData:!!y.storyPinData});switch(n.type){case"closeup_module":a=e;break;case"shopping_module":a=(0,f.jsx)(T.Z,{moduleWidth:"100%",pinKey:y,trafficSource:x,viewParameter:r});break;case"inclusive_filters_module":a=(0,f.jsx)(j.default,{filter:(0,h.oV)(Z?.story_type),story:Z,viewParameter:r});break;case"story":switch((0,ei.nP)("web_story_card_type",{sampleRate:1,tags:{story_type:n.story_type||"unknown",surface:"closeup"}}),n.story_type){case"BUBBLE_ONE_COL":a=(0,f.jsx)(ee.default,{bubbles:n.objects,id:n.id,referringSource:n.referring_source,slotIndex:i,storyType:n.story_type,title:n.title,viewParameter:r,viewType:3});break;case"related_query_shop_upsell_closeup":a=(0,f.jsx)(B.default,{itemIdx:i,story:n,viewParameter:r,viewType:3});break;default:a=null}n.container_type&&z.includes(n.container_type)&&(a=(0,f.jsx)(M,{data:n}));break;default:let s=(0,W.Z)(l);a=(0,f.jsx)(en.ZP,{authDesktopSurface:t,componentType:13007,duploQueryRef:null,imageOnlyOption:s?"image-only":"default",pin:n,pinId:n.id,pinImageCrop:k?ea(k):null,slotIndex:i,viewData:{pin_id:y.entityId},viewParameter:r,viewType:3})}return(0,f.jsx)(I.Z,{children:a})},scrollContainerRef:L,serverRender:!0,useLoadingState:p&&H&&ed})}),es&&R>0&&(0,f.jsx)(S.Z,{}),es&&0===R&&(0,f.jsx)(w.Z,{})]})}),(0,f.jsx)(d.xu,{minHeight:H?_:void 0,children:(0,f.jsx)(d.$j,{accessibilityLabel:c._('Loading related products results', 'closeup.relatedProducts.results', 'Accessibility label for loading related products results'),show:H&&P||H&&!p})})]})};function eo({pinKey:e,relatedModulesRef:t,...n}){let i=(0,N.ZP)(),a=(0,H.Z)(),{hasSimplifiedPinGridExpLoaded:l}=(0,A.$)(),{clientTrackingParams:s,closeupWithinMasonryEnabled:d}=(0,_.x4)(),c=(0,L.Z)(),u=(0,o.TH)(),{height:p}=(0,O.Z)()??{},m=(0,et.t)(),h=(0,o.k6)(),y=(0,g.Z)(er,e),x=(0,J.mB)(u.search).rs,v=p??F.Ep-m-F.Lu,k=h?.action==="POP";return(0,r.useEffect)(()=>{(0,K.A)({isFromBackButton:k,referringSource:x,relatedModulesRef:t})},[k,u,x,t]),(0,f.jsx)(es,{...n,clientTrackingParams:s,closeupWithinMasonryEnabled:d,hasSimplifiedPinGridExpLoaded:l,i18n:i,isInGridLoadingStateExp:c,logContextEvent:a,pin:y,relatedPinsInRow:d,spinnerMinHeight:v})}var ed=n("772866"),ec=n("459892"),eu=n("839513"),ep=n("880261"),em=n("112246"),eg=n("394779"),eh=n("561162"),e_=n("820368"),ey=n("787683");let ef=(0,y.Z)(()=>n.e("80949").then(n.bind(n,766480)),void 0,"app-common-react-components-closeup-CloseupRelatedModules-CloseupRelatedModulesOneBar"),ex=new Set([...ed.aW,"related_domain_carousel","related_products_collage","SKIN_TONE_FILTER_QUERIES","hair_pattern_filter_queries"]),ev=void 0!==l?l:l=n(954795);function ek({clientTrackingParams:e,closeupBody:t,isVideoPin:n,pinKey:i,relatedResourceOptions:a,searchQuery:l,setRelatedPinsHeaderRef:s,topLevelTrafficSource:o,trafficSource:c,viewParameter:u,viewportSize:p}){let m=(0,eh.F)(),{closeupWithinMasonryEnabled:h}=(0,_.x4)(),[y,x]=(0,r.useState)(!n),v=(0,e_.Z)(y?a:null),k=(0,eg.Z)(),b=(0,em.Z)(),S=(0,ey.Z)(),{cacheOneBarModules:w,cachedProductFilterOneBarModules:j}=(0,eu.X)(),I=(0,r.useRef)(null),C=(0,r.useCallback)(e=>{e&&(I.current=e)},[]),[T,F]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=y?void 0:setTimeout(()=>x(!0),h&&n?1e3:0);return()=>clearTimeout(e)},[h,n,y]);let L=(0,g.Z)(ev,i),{isInCloseupShoppingRefinementsExp:A,shouldFetchSLURPFields:K}=(0,ec.Z)({pinKey:L}),Z=(0,e_.Z)(A&&b&&L.entityId?{name:"ApiResource",options:{url:`/v3/pins/${L.entityId}/related/pins/filter/`,field_sets:[...(0,ep.wM)({experimentsClient:m,fields:["pin.domain","pin.dominant_color","pin.grid_title","pin.id","pin.images[170x,136x136,236x,474x,736x,orig]","pin.is_oos_product","pin.is_stale_product","pin.link_domain()","pin.link","pin.rich_summary()","pin.tracking_params","pin.type"]}),...K?["pin.is_eligible_for_closeup_one_bar_refinements"]:[],...(0,ep.pb)({experimentsClient:m,fields:[]})],data:{applied_unified_filters:b}}}:null),R=Z?.data?Z:v,E=R?.data?.find(e=>"story"===e.type&&e.story_type===ed.vs),D=E?.objects;(0,r.useEffect)(()=>{A&&E?.objects&&w({baseCacheKey:L.entityId,oneBarModules:E.objects})},[v,L.entityId,w,A,Z,E?.objects]);let z=!A||A&&!k;return(0,f.jsxs)(d.xu,{ref:C,"data-test-id":"relatedPins",direction:"column",display:"flex",flex:"grow",position:"relative",children:[T&&(v.data||[]).filter(e=>ex.has(e.story_type)).map((t,n)=>(0,f.jsx)(d.xu,{"data-test-id":`related-module-${t.id}`,direction:"column",display:"flex",children:(0,f.jsx)(P,{ref:I,clientTrackingParams:e,pinKey:L,searchQuery:l,setRelatedPinsHeaderRef:s,slotIndex:n,story:t,trafficSource:c,viewParameter:u,viewportSize:p})},`related-module-${t.id}`)),D&&D.length>0&&j&&j.length>0&&(0,f.jsx)(ef,{oneBarModules:D,viewParameter:u,viewType:3}),A&&k&&(0,f.jsx)(eo,{authDesktopSurface:"ShoppingDynamicHeightGrid",closeupBody:t,isFilteredFeed:!0,lfvExperiences:S,pinKey:L,relatedModulesRef:I,relatedPinsResource:Z,setHasRelatedPins:F,topLevelTrafficSource:o,viewParameter:u}),z&&(0,f.jsx)(eo,{closeupBody:t,lfvExperiences:S,pinKey:L,relatedModulesRef:I,relatedPinsResource:v,setHasRelatedPins:F,topLevelTrafficSource:o,viewParameter:u})]})}var eb=n("980374"),eP=n("724784"),eS=n("962520"),ew=n("475869"),ej=n("160394"),eI=n("983014"),eC=n("658045"),eT=n("84736"),eF=n("453071"),eL=n("980570"),eA=n("348072"),eK=n("717671"),eZ=n("517689"),eR=n("899142"),eE=n("126052"),eD=n("219300"),ez=n("86485"),eM=n("160943"),eB=n("517229"),eO=n("200351"),eV=n("693958"),eH=n("288435"),eU=n("968933"),eN=n("923765");let eW=({abortNoActionPlacementTimeout:e,extraContext:t,placementId:n})=>{let i=(0,eN.c)();return!function(e,t){let n=(0,r.useRef)(0),i=(0,r.useRef)(e);(0,r.useEffect)(()=>{i.current=e},[e]),(0,r.useEffect)(()=>{if("number"==typeof t)return n.current=window.setTimeout(()=>i.current(),t),()=>window.clearTimeout(n.current)},[t])}(()=>{i("NoAction",t)},e?null:4e3),(0,f.jsx)(eH.Z,{placementId:n})};var e$=n("710510"),eG=n("172693"),eX=n("193733"),eq=n("840857"),eY=n("144767"),eJ=n("337907"),eQ=n("933404"),e0=n("922184"),e1=n("813972"),e2=n("719725"),e8=n("870912"),e3=n("831949"),e6=n("961971"),e7=n("958605"),e4=n("927998"),e5=n("238124"),e9=n("3879"),te=n("673695"),tt=n("3915"),tn=n("436910"),ti=n("916225"),ta=n("45389"),tl=n("226978"),tr=n("348953"),ts=n("465683"),to=n("657204"),td=n("959474"),tc=n("460515"),tu=n("237861"),tp=n("596563"),tm=n("228132"),tg=n("81300"),th=n("249278"),t_=n("566700"),ty=n("353556"),tf=n("391374"),tx=n("990833"),tv=n("652348"),tk=n("349970");function tb(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let tP=(0,y.Z)(()=>n.e("14528").then(n.bind(n,34286)),{ssr:!1}),tS=(0,y.Z)(()=>n.e("96615").then(n.bind(n,351760)),{ssr:!1}),tw=(0,y.Z)(()=>n.e("54347").then(n.bind(n,245935)),{ssr:!1}),tj=(0,r.lazy)(()=>n.e("10485").then(n.bind(n,884012))),tI={storyPinGradientStyle:{display:"block",position:"relative",cursor:"auto"}},tC={boxShadow:"unset",borderRadius:ed.uO};function tT({conversation_id:e,senderId:t,pinId:n}){(0,eX.Z)({url:`/v3/conversations/${e}/message/mark_seen/`,method:"POST",data:{sender:t,pin:n}})}let tF=({isWideVideo:e,viewportSize:t,peekCloseupEnabled:n})=>!["md","sm"].includes(t)&&!e||n&&"sm"!==t;function tL({abortNoActionPlacementTimeout:e,classProps:t,classState:n,commerceData:i,showCloseupContentRight:a,showProductDetailPage:l,isWideCarousel:s,paneWidth:o,maxWidth:d,descriptionPaneWidth:c,handleCarouselSwipe:u,handleFocus:p,setIsCommentAttachmentSelectorOpen:m,setIsCommentThreadExpanded:g,setIsCloseupMediaViewerOpen:h,setIsMediaViewerOpen:y,setIsPinNoteExpanded:x,setIsProductDetailsExpanded:v,setIsShoppingModuleExpanded:k,setResultScrollContainerRef:b,handleScroll:P,handleBackButtonClick:S,closeupContent:w,inCommentFooterRedesignExp:j,isEligibleForStaticImageIdeaPin:I,isCloseupRelatedPinsAboveTheFoldEnabled:C,isCommentAttachmentSelectorOpen:T,isCommentThreadExpanded:F,isCloseupMediaViewerOpen:L,isMediaViewerOpen:A,isPinNoteExpanded:K,isProductDetailsExpanded:Z,isShoppingModuleExpanded:R,closeupWithinMasonryEnabled:E,peekCloseupEnabled:D,isInRemoveMagnifyingGlassVariant:z,setAbortNoActionPlacementTimeout:M,clientTrackingParams:B}){let{pin:O,pinId:V,trafficSource:H,deepLinkBackGoesToBoard:U}=t,{backButtonLabelFitInScreen:N,visualState:{carouselData:W,mainImage:G,previewImage:X},hideBackButton:q,isOverRelatedPins:J,viewportSize:Q}=n,ee=!!O.story_pin_data_id&&!I,et=(0,td.Z)(),{isInCloseupShoppingRefinementsExp:en}=(0,ec.Z)({pinKey:{type:"deprecated",data:O}}),{isEnabled:ei}=(0,ej.Z)(),ea=(0,f.jsx)(tr.Z,{deepLinkBackGoesToBoard:U,handleScroll:P,isNewOrRes:(0,eJ.Z)(et.createdAt)||(0,eQ.Z)(null,et),marginTop:en?0:void 0,onClick:()=>{S()},showLabel:!!(N&&!J),showShadow:J,trafficSource:H}),el=(0,_.YO)({showProductDetailPage:l,isLargerPane:s,showCloseupContentRight:a});return(0,f.jsx)(_.ZP.Provider,{value:(0,_.Nb)({showCloseupContentRight:a,showProductDetailPage:l,pdpCarouselSlotToPaneRatio:C?1:el,viewportSize:Q,paneWidth:o,maxWidth:d,descriptionPaneWidth:c,inCommentFooterRedesignExp:j,isCloseupRelatedPinsAboveTheFoldEnabled:C,isCommentAttachmentSelectorOpen:T,isCommentThreadExpanded:F,isCloseupMediaViewerOpen:L,isMediaViewerOpen:A,isPinNoteExpanded:K,isProductDetailsExpanded:Z,isShoppingModuleExpanded:R,setIsCommentAttachmentSelectorOpen:m,setIsCommentThreadExpanded:g,setIsCloseupMediaViewerOpen:h,setIsMediaViewerOpen:y,setIsPinNoteExpanded:x,setIsProductDetailsExpanded:v,setIsShoppingModuleExpanded:k,closeupWithinMasonryEnabled:E,peekCloseupEnabled:D,isInRemoveMagnifyingGlassVariant:z,setAbortNoActionPlacementTimeout:M,clientTrackingParams:B}),children:(0,f.jsxs)(eI.A,{overrideValue:{mainImage:G,previewImage:X,carouselInfo:W&&{carouselData:W,handleCarouselSwipe:u,viewType:L?675:3,componentType:O.is_eligible_for_pdp?14186:85,viewParameter:(0,$.Z)({hasPin:!0,hasPinRichMetadata:!!O.rich_metadata,hasPinRichMetadataProducts:!!O.rich_metadata?.products,hasPinRichMetadataArticle:!!O.rich_metadata?.article,hasPinRichMetadataRecipe:!!O.rich_metadata?.recipe,hasPinStoryPinData:!!O.story_pin_data})}},pinKey:{type:"deprecated",data:O},children:[(0,f.jsx)(eH.Z,{placementId:1000141}),(0,f.jsx)(eH.Z,{placementId:1000499}),(0,f.jsx)(eU.Z,{placementId:1000140}),(0,f.jsx)(eW,{abortNoActionPlacementTimeout:e,extraContext:{pin_id:V,is_promoted:O.is_promoted},placementId:1000564}),(0,f.jsx)(eB.Z,{placementId:12}),(0,f.jsx)(eM.Z,{placementId:12}),(0,f.jsx)(eV.Z,{placementId:12}),(0,f.jsx)(eO.Z,{placementId:12}),(0,f.jsx)(eT.Z,{placementId:12}),(0,f.jsx)(te.Z,{children:(0,f.jsx)(tj,{placementId:12})}),(0,f.jsx)(Y.Z,{auxData:i,clientTrackingParams:B,objectId:V,view:3,viewParameter:(0,e7.Z)(t)?(0,$.Z)({hasPin:!!O,hasPinRichMetadata:!!O.rich_metadata,hasPinRichMetadataProducts:!!O.rich_metadata?.products,hasPinRichMetadataArticle:!!O.rich_metadata?.article,hasPinRichMetadataRecipe:!!O.rich_metadata?.recipe,hasPinStoryPinData:!!O.story_pin_data}):void 0,children:(0,f.jsxs)("div",{ref:b,className:"reactCloseupScrollContainer","data-test-id":"closeup-layout",onFocus:p,children:[(0,f.jsx)(ez.Z,{name:"SafeSuspense_Closeup_ExperienceHero",children:(0,f.jsx)(tP,{placementId:12})}),(0,f.jsx)(e$.Z,{placementId:12}),C?w:(0,f.jsxs)(r.Fragment,{children:[!ei&&!q&&!ee&&ea,w]}),!A&&!L&&!T&&(0,f.jsx)(eb.Z,{onClose:S}),(0,f.jsx)(eG.Z,{placementId:12})]})})]})})}class tA extends r.Component{constructor(...e){super(...e),tb(this,"state",this.props.initialState),tb(this,"removedPwtThumbnailsConstraint",!1),tb(this,"setCloseupBodyContainerRef",e=>{this.closeupBodyContainerRef=e}),tb(this,"setResultScrollContainerRef",e=>{this.resultScrollContainer||(this.resultScrollContainer=e,this.forceUpdate())}),tb(this,"setRelatedPinsHeaderRef",e=>{this.relatedPinsHeaderRef=e}),tb(this,"mounted",!1),tb(this,"handleCloseupBodyUpdate",()=>{this.updateViewportSize()}),tb(this,"updateViewportSize",()=>{if(this.mounted){let{BACKBUTTON_WIDE_BREAKPOINT:e,BACKBUTTON_WITH_LABEL_WIDE_BREAKPOINT:t,BREAKPOINT:n,STACKED_CLOSEUP_BACKBUTTON_NARROW_BREAKPOINT:i,BACKBUTTON_NARROW_BREAKPOINT:a,EXP_SM_BREAKPOINT:l,SM_BREAKPOINT:r}=(0,ed.le)({verticalNavWidth:this.props.verticalNavWidth}),s=this.props.closeupWithinMasonryEnabled?l:r,o="lg";window&&window.innerWidth<n&&(o=window&&window.innerWidth<s?"sm":"md");let d=this.props.closeupWithinMasonryEnabled?i:a;this.setState({hideBackButton:window&&(!this.props.closeupWithinMasonryEnabled&&"lg"===o&&window.innerWidth<=e||["md","sm"].includes(o)&&window.innerWidth<=d),backButtonLabelFitInScreen:window&&"lg"===o&&window.innerWidth>=t,viewportSize:o})}}),tb(this,"throttleUpdateViewportSize",(0,ta.Z)(this.updateViewportSize,50)),tb(this,"clickThroughTimer",()=>{let{setPlacementExtraContext:e}=this.props;clearInterval(this.state.intervalId),e&&e({didLongClickThrough:!0})}),tb(this,"executeClickthrough",e=>{let{pinId:t,setPlacementExtraContext:n,clientTrackingParams:i,viewer:a,trafficSource:l,logContextEvent:r,getStringifiedCommerceAuxData:s,pinFormattedLink:o,setAbortNoActionPlacementTimeout:d,isEligibleForStaticImageIdeaPin:c,isCloseupMediaViewerOpen:u}=this.props,{pin:p,didPinClickThrough:m,didShortClickThrough:g}=this.state,h=!!p.story_pin_data_id&&c,{wasImageClicked:_,auxData:y,componentType:f=h?228:4,elementType:x=_?35:h?11157:361,viewType:v=u?675:3}=e||{},k=(0,$.Z)({hasPin:!!this.props.pin,hasPinRichMetadata:!!this.props.pin.rich_metadata,hasPinRichMetadataProducts:!!this.props.pin.rich_metadata?.products,hasPinRichMetadataArticle:!!this.props.pin.rich_metadata?.article,hasPinRichMetadataRecipe:!!this.props.pin.rich_metadata?.recipe,hasPinStoryPinData:!!this.props.pin.story_pin_data}),b={...s(),...y||{},is_promoted:p.is_promoted};if(a&&a.isAuth&&!m&&n&&(n({didPinClickThrough:!0}),this.setState({didPinClickThrough:!0})),h&&r({event_type:102,view_type:132,view_parameter:3549,element:12971,aux_data:{pin_id:p.id,url:o}}),r({event_type:101,object_id_str:t,component:f,element:x,clientTrackingParams:i,aux_data:{...s(),...y||{}}}),r({event_type:12,object_id_str:t,view_type:v,view_parameter:k,component:f,element:x,aux_data:b,clientTrackingParams:i}),r({event_type:8948,view_type:v,view_parameter:k,component:f,element:x,object_id_str:t,clientTrackingParams:i,aux_data:{click_type:"clickthrough",closeup_navigation_type:l&&(0,e8.sV)(l)?"deeplink":"click",...s(),...y||{}}}),_){let e=setInterval(this.clickThroughTimer,12e4);this.setState({intervalId:e})}this.clickThroughStartTime=Date.now(),g&&this.setState({didShortClickThrough:!1}),d(!0)}),tb(this,"handleFocus",()=>{let{setPlacementExtraContext:e}=this.props;clearInterval(this.state.intervalId),e&&e({didLongClickThrough:!1})}),tb(this,"handleWindowFocus",()=>{if(this.clickThroughStartTime>0){let e=Date.now()-this.clickThroughStartTime<5e3;this.setState({didShortClickThrough:e}),this.clickThroughStartTime=0}}),tb(this,"handleSaveClicked",()=>{this.props.logContextEvent({event_type:101,object_id_str:this.state.pin.id,component:4,element:0,aux_data:{...this.props.getStringifiedCommerceAuxData()}}),this.props.setAbortNoActionPlacementTimeout(!0)}),tb(this,"handleBackButtonClick",()=>{this.props.onHandleBackButtonClick()}),tb(this,"handleCarouselSwipe",e=>{let{visualState:t,firstLoadComplete:n}=this.state;n&&this.setState({visualState:{...t,carouselData:{...t.carouselData,index:e}}})}),tb(this,"dispatch",(e,t)=>this.setState(t=>(0,eP.Z)(t,e),t)),tb(this,"handleScroll",(0,ta.Z)(()=>{let{isOverRelatedPins:e}=this.state;if(this.relatedPinsHeaderRef){let t=tf.hu,n=this.relatedPinsHeaderRef.getBoundingClientRect().top<=t;n&&!e?this.setState({isOverRelatedPins:!0}):!n&&e&&this.setState({isOverRelatedPins:!1})}},10)),tb(this,"onToggleIdeaPinCloseupPanel",e=>{this.setState({isCloseupMaximized:!e}),this.closeupBodyContainerRef&&(this.closeupBodyContainerRef.ariaHidden=!e)}),tb(this,"onWrapperClick",e=>{e.stopPropagation(),this.handleBackButtonClick()}),tb(this,"handleIdeaCloseupCommentIconClick",e=>{let{setIsCommentThreadExpanded:t}=this.props;this.setState({isCommentSectionOpen:e}),t(!!e),e&&this.props.logContextEvent({component:13464,element:11981,event_type:10554,view_type:3})})}componentDidMount(){let{conversation_id:e,conversationOpen:t,pin:n,pinId:i,senderId:a,setPlacementExtraContext:l,shouldShowInbox:r,openInbox:s}=this.props;this.mounted=!0,e&&a&&i&&tT({conversation_id:e,senderId:a,pinId:i}),e&&(t(e),r&&s()),n.image_signature&&this.props.setMostRecentPinImage(n.image_signature),i&&this.props.setMostRecentPinId(i),l&&l({is_own_or_group_pin:this.isOwnOrGroupPin}),this.updateViewportSize(),window.addEventListener("resize",this.throttleUpdateViewportSize),window.addEventListener("focus",this.handleWindowFocus),window?.location?.search?.includes("invite_code=")&&(0,eq.Z)()}componentDidUpdate(e){let{didRepin:t,isLandingPage:n,pin:i,pinId:a,conversation_id:l,senderId:r,pinResource:{data:s},pwtSurfaceContext:o,setPlacementExtraContext:d}=this.props,{visualState:{carouselData:c},firstLoadComplete:u}=this.state;this.visualDataDidUpdate(),u&&!this.removedPwtThumbnailsConstraint&&(o?.removeConstraint("thumbnailsLoaded"),this.removedPwtThumbnailsConstraint=!0),s&&!u&&(s.carousel_data&&(s.carousel_data.index=c?.index||0),this.dispatch({type:"pinLoaded",pin:s})),l&&r&&a&&e.pinId!==a&&tT({conversation_id:l,senderId:r,pinId:a});let p={};(tt.ZP.getItem(eL.W3)||"").includes(`/pin/${a}`)&&n&&(p.loginPageType="pin"),t&&(p.didRepin=!0),i.image_signature&&(p.pin_image_signature=i.image_signature),p.is_own_or_group_pin=this.isOwnOrGroupPin;let{didRepin:m,isLandingPage:g,pinId:h}=e,_=m!==t||n!==g||h!==a;!(0,eY.Z)(p)&&_&&d&&d({...p})}componentWillUnmount(){window.removeEventListener("resize",this.throttleUpdateViewportSize),window.removeEventListener("focus",this.handleWindowFocus),this.mounted=!1}get isOwnOrGroupPin(){let{pin:e,viewer:t}=this.props,n=(e||{}).board||{},i=n.is_collaborative&&(0,eK.Z)(n.collaborated_by_me,n.owner?.id,t);return!!(t.isAuth&&e.pinner?.id===t.id||i)}visualDataDidUpdate(){let e;let{pin:t,mainImage:n}=this.props,{visualState:{carouselData:i,mainImage:a},firstLoadComplete:l}=this.state;if(!l)return;let r=(0,eR.Z)({carouselData:t.carousel_data,images:t.images,product:(t.rich_metadata||t.rich_summary)?.products?.[0]}),s=(r?.carousel_slots||[])[0]||{},o=(0,eE.Z)(s.images),d=i?.index||0;e=r&&(r.carousel_slots?.length||0)>1?{mainImage:n,carouselData:{...r,index:d},previewImage:(0,th.Yf)(t.images?.["236x"])}:o?.url?{mainImage:{url:o.url,height:o.height||1,width:o.width||1}}:{mainImage:n,previewImage:(0,th.Yf)(t.images?.["236x"])},(i?.id!==e.carouselData?.id||JSON.stringify(i?.carousel_slots)!==JSON.stringify(e.carouselData?.carousel_slots)||a.url!==e.mainImage.url)&&this.setState({visualState:e})}renderBodyContent({isCommentThreadExpanded:e,relatedResourceOptions:t,storyPinTaggedProducts:n,maxWidth:i,isEligibleForStaticImageIdeaPin:a,clientTrackingParams:l}){let s;let{experimentsClient:{checkExperiment:o},isLimitedLogin:u,pin:m,pinDerivedData:g,pinResource:h,requestContext:_,routePush:y,searchQuery:x,showRepinOnInitialRender:v,trafficSource:k,viewer:b,orbacActingAs:P,userBusinessRoleResource:S,trendsData:w,closeupWithinMasonryEnabled:j,peekCloseupEnabled:I,isCloseupRelatedPinsAboveTheFoldEnabled:C}=this.props,{id:T,sponsorship:F,story_pin_data_id:L,story_pin_data:A}=m,K=!!L&&!a,Z=!!A?.is_deleted,{creator:R,sponsor:E,status:D}=F||{},{username:z}=R||{},{username:M}=E||{},{refresh:B}=h,O=(0,tu.lJ)(b,P),{data:V}=S||{},H=!m.is_repin&&!!M,U=M===b.username?[eZ.V3.OWNER]:V?.permissions,N=M===b.username||!!U?.find(e=>eF.Z.includes(e)),W=M===b.username||!!U?.find(e=>eF.Z.includes(e)),{didShortClickThrough:$,isCloseupMaximized:G,isCommentSectionOpen:X,shopping:q,viewportSize:Y}=this.state,{isWideVideo:J}=(0,e2.Z)((0,e7.Z)({pin:m}))||{},Q=(0,e1.rh)(m&&{aggregatedPinData:m.aggregated_pin_data&&{creatorAnalytics:m.aggregated_pin_data.creator_analytics&&{_30dRealtime:m.aggregated_pin_data.creator_analytics["30d_realtime"]&&{carId:m.aggregated_pin_data.creator_analytics["30d_realtime"].id}}},board:m.board&&{privacy:m.board.privacy},creatorAnalytics:m.creator_analytics&&{_30dRealtime:m.creator_analytics["30d_realtime"]&&{carId:m.creator_analytics["30d_realtime"].id}},isRepin:m.is_repin,pinner:m.pinner&&{entityId:m.pinner.id},storyPinDataId:m.story_pin_data_id,videos:m.videos&&{videoList:m.videos.video_list&&{__typename:"VideoList"}}},b,this.props.experimentsClient,O),ee=(0,c.CA)(w?.data),et=H&&b.isAuth&&o("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled&&(N&&0===D||W&&1===D),en=m.link_domain?.official_user?.username||m.native_creator?.username,ei=(0,tu.Ms)(b,P)===en&&(0,tu.nl)(b,P)&&_.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,ea=K&&(A?.pages?.length??0)>0,el=(0,e1.WE)(b,Y,Q,ee,w,et);s=K?{boxShadow:void 0,borderRadius:void 0}:j?tC:ed.te;let er=ea?226:3;er=C?3:er;let es=(0,f.jsx)(ez.Z,{name:"CloseupBody",children:(0,f.jsxs)(d.xu,{ref:this.setCloseupBodyContainerRef,color:"default",direction:"column",display:"flex",height:"100%",width:"100%",children:[(0,f.jsxs)(d.xu,{alignItems:J?"center":void 0,direction:J?"column":void 0,display:J?"flex":void 0,children:[et&&"number"==typeof D&&(0,f.jsx)(d.xu,{"data-test-id":"sponsorship-approval-module",display:"flex",children:(0,f.jsx)(ez.Z,{name:"SafeSuspense_Closeup_SponsorshipApprovalModule",children:(0,f.jsx)(tw,{business_role:U,creatorUsername:z??"",pinId:T,sponsorshipStatus:D})})}),el&&!K&&!j&&(0,f.jsx)(d.xu,{"data-test-id":"PartnerModule",width:"lg"===Y&&J?i:"100%",children:(0,f.jsx)(ez.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,f.jsx)(tS,{borderStyle:s,isStoryPin:K,pinKey:{type:"deprecated",data:m},showPinStats:Q,trendsData:ee?w?.data?.results:null,viewportSize:Y})})})]}),(0,f.jsx)(d.xu,{"data-test-id":"closeup-body",flex:"grow",children:(0,f.jsx)(p.Z,{clientTrackingParams:l,data:h.data,didShortClickThrough:$,goBack:this.handleBackButtonClick,handleCarouselSwipe:this.handleCarouselSwipe,inCommentFeedRedesignExp:!1,isCloseupMaximized:G,isCommentSectionOpen:!C&&X||e,isDeletedStoryPin:!!Z,isStoryPin:K,isVideoPin:g.isVideoPin,isWideVideo:J,onClickThrough:this.executeClickthrough,onCloseupBodyUpdate:this.handleCloseupBodyUpdate,onCommentSectionClick:this.handleIdeaCloseupCommentIconClick,onSaveButtonClick:this.handleSaveClicked,onUpdate:B,outerBodyStyle:s,outerPaddingSize:C?tm.ER:void 0,pin:m,relatedResourceOptions:t,routePush:y,searchQuery:x,shopping:q,shouldShowPartnerModule:el,shouldShowStlCarouselForOwnPin:ei,showPinStats:Q,showRepinOnInitialRender:!u&&v,showTrendsOnPinCloseup:ee,storyPinTaggedProducts:n,trafficSource:k,trendsData:w,viewParameterType:ea?157:void 0,viewportSize:Y,viewType:er})})]})});return(0,f.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:K?{...tI.storyPinGradientStyle}:{}},"data-test-id":"gradient",display:"flex",flex:I?void 0:"grow",id:"gradient",justifyContent:"center",marginBottom:j?0:4,width:I?void 0:"100%",children:(0,f.jsxs)(r.Fragment,{children:[ea&&A&&(0,f.jsx)(tn.Z,{appConfig:{type:"authDesktop",onClickThrough:this.executeClickthrough,onNavigateBack:this.handleBackButtonClick},clientTrackingParams:l,onIdeaPinCloseupCommentClick:()=>{this.handleIdeaCloseupCommentIconClick(!0)},onTogglePanel:this.onToggleIdeaPinCloseupPanel,pin:m,storyPinData:A,variant:"closeup",viewParameterType:157,viewType:3}),(0,f.jsx)(tg.Z,{isStoryPin:K,isWideVideo:J,children:es})]})})}render(){let{abortNoActionPlacementTimeout:e,contextPinIds:t,landingContext:n,pin:i,pinDerivedData:a,topLevelTrafficSource:l,topLevelTrafficSourceDepth:s,trafficSource:o,searchQuery:d,storyPinTaggedProductsResource:c,pinResource:u,viewer:p,orbacActingAs:g,closeupWithinMasonryEnabled:h,peekCloseupEnabled:_,inCommentFooterRedesignExp:y,isCloseupRelatedPinsAboveTheFoldEnabled:x,isCommentThreadExpanded:v,isInRemoveMagnifyingGlassVariant:k,isCloseupMediaViewerOpen:b,isCommentAttachmentSelectorOpen:P,isMediaViewerOpen:S,isPinNoteExpanded:w,isShoppingModuleExpanded:j,setAbortNoActionPlacementTimeout:I,isEligibleForStaticImageIdeaPin:C,setIsCommentAttachmentSelectorOpen:T,setIsCommentThreadExpanded:F,setIsCloseupMediaViewerOpen:L,setIsMediaViewerOpen:A,setIsPinNoteExpanded:K,setIsShoppingModuleExpanded:Z,clientTrackingParams:R,shouldFetchSLURPFields:E,deepLinkBackGoesToBoard:D,hideBackButtonExp:z}=this.props,{backButtonLabelFitInScreen:M,isOverRelatedPins:B,viewportSize:O,didShortClickThrough:V,firstLoadComplete:H}=this.state,{isWideVideo:U}=(0,e2.Z)((0,e7.Z)({pin:i}))||{},N=!h&&tF({isWideVideo:U,viewportSize:O,peekCloseupEnabled:_}),{recommendation_reason:W}=i,G={name:"RelatedModulesResource",options:{additional_fields:E?["pin.is_eligible_for_closeup_one_bar_refinements"]:void 0,pin_id:i.id,context_pin_ids:t,homefeed_source_sig:W&&["NAVBOOST_P2P","NAVBOOST_PFY","INSTANT_PFY_NON_MATERIALIZABLE","P2P","P2P_CLICKTHROUGH","FRESH_TEXT_EMBEDDINGS","INTENTIONAL_DISTRIBUTION_GEMINI_V5"].includes(W.reason)&&W.reason_id,page_size:12,search_query:d,source:o,top_level_source:l,top_level_source_depth:s,is_pdp:!1,landing_context:n}},X=(0,$.Z)({hasPin:!0,hasPinRichMetadata:!!i.rich_metadata,hasPinRichMetadataProducts:!!i.rich_metadata?.products,hasPinRichMetadataArticle:!!i.rich_metadata?.article,hasPinRichMetadataRecipe:!!i.rich_metadata?.recipe,hasPinStoryPinData:!!i.story_pin_data}),q=(0,tu.q6)(p,i.pinner?.id,g),Y=!!i.id&&!q||h,{data:J}=c||{},Q=tm.Gg,ee=tm.u6,et=this.renderBodyContent({isCommentThreadExpanded:v,relatedResourceOptions:G,storyPinTaggedProducts:J,maxWidth:ee,isEligibleForStaticImageIdeaPin:C,clientTrackingParams:R}),en=!z&&(0,f.jsx)(tr.Z,{deepLinkBackGoesToBoard:D,handleScroll:this.handleScroll,isNewOrRes:(0,eJ.Z)(p.createdAt)||(0,eQ.Z)(null,p),onClick:this.handleBackButtonClick,showLabel:!!(M&&!B),showShadow:B,trafficSource:o}),ei=(0,f.jsx)(m.Z,{isVideoPin:a.isVideoPin,pin:i,pinResource:u,topLevelTrafficSource:l,didShortClickThrough:V,firstLoadComplete:H,viewportSize:O,relatedModulesContent:Y?(0,f.jsx)(ek,{clientTrackingParams:R,closeupBody:et,contextPinIds:t,isVideoPin:a.isVideoPin,pinKey:{type:"deprecated",data:i},relatedResourceOptions:G,searchQuery:d,setRelatedPinsHeaderRef:this.setRelatedPinsHeaderRef,topLevelTrafficSource:l,trafficSource:o,viewParameter:X,viewportSize:O}):(0,f.jsx)(r.Fragment,{}),bodyContent:et,onWrapperClick:this.onWrapperClick,backButton:en});return(0,f.jsx)(tL,{abortNoActionPlacementTimeout:e,classProps:this.props,classState:this.state,clientTrackingParams:R,showCloseupContentRight:N,showProductDetailPage:!1,isWideCarousel:!1,paneWidth:Q,maxWidth:ee,descriptionPaneWidth:ee-Q-(h?4:0),handleCarouselSwipe:this.handleCarouselSwipe,handleFocus:this.handleFocus,setResultScrollContainerRef:this.setResultScrollContainerRef,handleScroll:this.handleScroll,handleBackButtonClick:this.handleBackButtonClick,closeupContent:ei,inCommentFooterRedesignExp:y,isEligibleForStaticImageIdeaPin:C,isCloseupRelatedPinsAboveTheFoldEnabled:x,isCommentAttachmentSelectorOpen:P,isCommentThreadExpanded:v,isCloseupMediaViewerOpen:b,isMediaViewerOpen:S,isPinNoteExpanded:w,isShoppingModuleExpanded:j,setIsCommentAttachmentSelectorOpen:T,setIsCommentThreadExpanded:F,setIsCloseupMediaViewerOpen:L,setIsMediaViewerOpen:A,setIsPinNoteExpanded:K,setIsShoppingModuleExpanded:Z,closeupWithinMasonryEnabled:h,peekCloseupEnabled:_,isInRemoveMagnifyingGlassVariant:k,setAbortNoActionPlacementTimeout:I})}}let tK=(0,eC.Z)(function(e){var t;let{logContextEvent:n}=(0,eD.v)(),{pin:i,viewer:a,pinResource:l,pinId:d,showQuickPromote:p,deepLinkBackGoesToBoard:m,goBack:g,routePush:h,trafficSource:_}=e,y=(0,N.ZP)(),x=(0,eh.F)(),{checkExperiment:v}=x,k=(0,tl.Z)(),b=(0,e9.B)(),[P,S]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[I,C]=(0,r.useState)(!1),[T,F]=(0,r.useState)(!1),[L,A]=(0,r.useState)(!1),[K,Z]=(0,r.useState)(!1),[R,E]=(0,r.useState)(!1),D=(0,tx.Z)(),{setMostRecentPinId:z,setMostRecentPinImage:M}=(0,tk.f)(),B=(0,to.Z)({type:"deprecated",data:i}),O=(0,e8.sY)(i.embed?.type)&&"gif"||i.is_eligible_for_pdp&&"productPin"||i.rich_summary?.type_name==="recipe"&&"recipePin"||!!i.story_pin_data_id&&"storyPin"||!!i.videos?.video_list&&"video"||"image",V="pin_closeup_lcp",H=(0,e5.PY)(V),{conversationOpen:U}=(0,ty.Z)(),W=(0,tc.Z)(),$=(0,eA.Z)(),G=(0,s.I0)(),X=(0,e4.E)(),q=(0,o.TH)(),Y=(0,tv.Z)((q?.state||{}).trackingParams,i.trackingParams||i.tracking_params),J=(0,ts.F9)(),[Q,ee]=(0,r.useState)(!1),et=$("quick_promote_on_www"),en=`${et}?pinId=${d}`,{advertiser:ei}=b,ea=$((0,tp.G)(ei)?"createAutomated":"create"),el=`${ti.auO}${ea}?pinId=${d}`,er=(0,e6.Z)({type:"deprecated",data:i}),{getLandingContext:es}=(0,e0.Z)(),eo=(0,tu.lJ)(a,W),{onHandleBackButtonClick:ed}=(0,t_.Z)({logCommerceAuxData:i.promoted_is_lead_ad,deepLinkBackGoesToBoard:m,goBack:g,routePush:h,trafficSource:_,viewer:a,requestContext:b,pinKey:{type:"deprecated",data:i}},n);(0,r.useEffect)(()=>{l.data&&!Q&&p&&ee(!0)},[l.data,Q,p]),(0,r.useEffect)(()=>{H&&(0,e5.ku)({stopwatchName:V,binaryAnnotationName:"pinType",value:O,annotationType:"STRING"})},[H,O]);let eu=!!i,ep=(0,r.useRef)(!1);eu&&X&&!ep.current&&(X.addBinaryAnnotation("pinType",O,"STRING"),ep.current=!0);let em=i.sponsorship?.sponsor?.id,eg=!i.is_repin&&!!em,ey=(0,e_.Z)(em&&eg&&a.isAuth&&"storyPin"===O?{name:"ApiResource",options:{url:`/ads/v4/business_access/businesses/${em}/me/ad_accounts_permissions/`}}:null),ef=a.isAuth&&(t=a.country,!u.includes(t))&&(0,c.Gv)({orbacSubjectId:eo,pinIsRepin:i.is_repin,pinPinnerId:i.pinner?.id,viewerId:a.id,viewerIsPartner:a.isPartner}),{data:ex,isLoaded:ev}=(0,e_.Z)(ef?{name:"ApiResource",options:{url:`/v3/trends/partner/${a.id||""}/trends_for_pin/${i.id}/`,data:{number_terms_to_return:10}}}:null),ek=v("ce_dweb_comment_feed_redesign").anyEnabled,{isCloseupRelatedPinsAboveTheFoldEnabled:eb,closeupWithinMasonryEnabled:eP,peekCloseupEnabled:eI}=(0,eS.Z)(a.isAuth),eC=a.isAuth&&v("closeup_dweb_remove_magnifying_glass").anyEnabled,{shouldFetchSLURPFields:eT}=(0,ec.Z)({pinKey:{type:"deprecated",data:i}}),{isEnabled:eF}=(0,ej.Z)(),eL=!!i.story_pin_data_id&&(!1===i.should_open_in_stream||eb),eK=(0,ew.Z)({closeupWithinMasonryEnabled:eP,pin:i,pinId:d,pinResource:l}),{getMainPinImage:eZ}=(0,e3.Z)({pinKey:{type:"deprecated",data:i},closeupWithinMasonryEnabled:eP});return Q?x.checkExperiment("adv_growth_deprecate_qp_pins").anyEnabled?(window.location.assign(el),(0,f.jsx)(r.Fragment,{})):(0,f.jsx)(o.l_,{to:en}):(0,f.jsx)(tA,{...e,abortNoActionPlacementTimeout:R,clientTrackingParams:Y,closeupWithinMasonryEnabled:eP,conversationOpen:U,dispatch:G,experimentsClient:x,getSterlingURL:$,getStringifiedCommerceAuxData:B,hideBackButtonExp:eF,i18n:y,inCommentFooterRedesignExp:ek,initialState:eK,isCloseupMediaViewerOpen:I,isCloseupRelatedPinsAboveTheFoldEnabled:eb,isCommentAttachmentSelectorOpen:P,isCommentThreadExpanded:w,isEligibleForStaticImageIdeaPin:eL,isInRemoveMagnifyingGlassVariant:eC,isMediaViewerOpen:T,isPinNoteExpanded:L,isShoppingModuleExpanded:K,landingContext:es(),location:q,logContextEvent:n,mainImage:eZ(),onHandleBackButtonClick:ed,orbacActingAs:W,peekCloseupEnabled:eI,pinFormattedLink:er,pwtSurfaceContext:X,requestContext:b,setAbortNoActionPlacementTimeout:E,setIsCloseupMediaViewerOpen:C,setIsCommentAttachmentSelectorOpen:S,setIsCommentThreadExpanded:j,setIsMediaViewerOpen:F,setIsPinNoteExpanded:A,setIsShoppingModuleExpanded:Z,setMostRecentPinId:z,setMostRecentPinImage:M,shouldFetchSLURPFields:eT,toastManager:J,trackInteraction:k,trendsData:{data:ex,isLoaded:!ef||ev},userBusinessRoleResource:ey,verticalNavWidth:D})});function tZ(e){let t=(0,e_.Z)({name:"StoryPinTaggedProductsResource",options:{noCache:!0,id:e.pin.id}});return(0,f.jsx)(tK,{...e,storyPinTaggedProductsResource:t})}},315286:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(667294),a=n(883119),l=n(80887),r=n(785893);function s({accessibilityLabel:e,handleClick:t,icon:n,iconColor:s,iconOnly:o,testId:d,buttonText:c,tabIndex:u,bgColor:p,isActive:m}){let[g,h]=(0,i.useState)(!1),_=(0,i.useRef)(null),{setAbortNoActionPlacementTimeout:y}=(0,l.x4)(),f=()=>{h(e=>!e),t(),y(!0)},x=e=>{_&&e.target instanceof Element&&!_.current?.contains(e.target)&&h(!1)};return(0,i.useEffect)(()=>(window.addEventListener("mousedown",x),()=>{window.removeEventListener("mousedown",x)}),[]),(0,i.useEffect)(()=>{void 0!==m&&h(m)},[m]),(0,r.jsx)(a.xu,{"data-test-id":d||"closeup-action-bar-button",children:(0,r.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,r.jsx)(a.hU,{ref:_,accessibilityLabel:e,bgColor:p,icon:n,iconColor:s||"darkGray",onClick:f,selected:g,size:o?"md":"lg",tabIndex:u}),c&&(0,r.jsx)(a.iP,{onTap:f,rounding:2,children:(0,r.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:c})})]})})}},8938:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(667294),a=n(883119),l=n(10380),r=n(708130),s=n(967629),o=n(537225),d=n(785893);function c({minutes:e}){let t=(0,r.ZP)(),n=e%60,i=Math.floor(e/60),o=n>0?(0,s.nk)(t._('{{ mins }}min', 'closeup.storyPin.basicsLayout.cookTimeUnit', 'Minutes label indicating the cooking time of this Story Pin'),{mins:n}).join(""):"",c=i>0?(0,s.nk)(t._('{{ hours }}hr', 'closeup.storyPin.basicsLayout.cookTimeUnit', 'Hours label indicating the cooking time of this Story Pin'),{hours:i}).join(""):"";return(0,d.jsx)(a.xu,{display:"inlineBlock",marginEnd:1,children:(0,d.jsx)(a.xv,{inline:!0,size:l.n,children:(0,s.nk)(t._('{{ hoursText }} {{ minsText }}', 'closeup.storyPin.basicsLayout.cookTime', 'Combined label for story pin cooktime (ex: "1hr 13min")'),{hoursText:c,minsText:o})})})}function u({servingSize:e}){let t=(0,r.ZP)(),n=(0,o.Z)(t.ngettext('{{servingSize}} serving', '{{servingSize}} servings', e, 'number of servings for a recipe', 'number of servings for a recipe'),{servingSize:e});return(0,d.jsx)(a.xu,{display:"inlineBlock",marginEnd:1,children:(0,d.jsx)(a.xv,{inline:!0,size:l.n,children:(0,s.nk)(t._('{{ servingText }}', 'closeup.storyPin.basicsLayout.servings', 'Combined label for story pin servings (ex: "Servings: 10 servings")'),{servingText:n})})})}function p({difficulty:e}){let t=(0,r.ZP)(),n={1:t._('Easy', 'closeup.storyPin.basicsLayout.difficulty', 'Easy difficulty level'),2:t._('Intermediate', 'closeup.storyPin.basicsLayout.difficulty', 'Intermediate difficulty level'),3:t._('Expert', 'closeup.storyPin.basicsLayout.difficulty', 'Expert difficulty level')},i=e?n[e]:null;if(!i)return null;let o=t._('Difficulty:', 'closeup.storyPin.basicsLayout.difficultyLevelLabel', 'Label indicating the difficulty level of this Story Pin');return(0,d.jsx)(a.xu,{display:"inlineBlock",marginEnd:1,children:(0,d.jsx)(a.xv,{inline:!0,size:l.n,children:(0,s.nk)(t._('{{ label }} {{ difficultyLevel }}', 'closeup.storyPin.basicsLayout.difficulty', 'Combined label for story pin difficulty (ex: "Difficulty: Intermediate")'),{label:o,difficultyLevel:i})})})}function m({keyValueBlocks:e,hasMetadataTemplateType:t}){if(!t)return null;let n=e||[];return(0,d.jsx)(a.xu,{"data-test-id":"categories-metadata",children:(n||[]).map((e,t)=>{let r=`kv-${t}`,s=function(e){let t=e.category_type??e.categoryType,{value:n}=e;if(2===t)return(0,d.jsx)(p,{difficulty:n});let i=parseInt(n,10);return 1===t?(0,d.jsx)(u,{servingSize:i}):0===t&&i?(0,d.jsx)(c,{minutes:i}):null}(e);return s?t<n.length-1?(0,d.jsxs)(i.Fragment,{children:[s,(0,d.jsx)(a.xu,{display:"inlineBlock",marginEnd:1,children:(0,d.jsx)(a.xv,{inline:!0,size:l.n,children:"  "})})]},r):(0,d.jsx)(i.Fragment,{children:s},r):null}).filter(e=>null!=e)})}},350711:function(e,t,n){n.d(t,{R:()=>eU,Z:()=>eN});var i,a,l,r=n("667294"),s=n("581722"),o=n("616550"),d=n("883119");n("167912");var c=n("131548"),u=n("23534"),p=n("657204"),m=n("785893");let g=void 0!==i?i:i=n(427464),h=({children:e,clientTrackingParams:t,pinKey:n,pinImageUrl:i,closeupNavigationType:a})=>{let l=(0,c.Z)(g,n),r=(0,p.Z)(l),{entityId:s}=l,o=l.isEligibleForPdp?r():{};return(0,m.jsx)(u.F,{clientTrackingParams:t,closeupImpressionType:13,closeupNavigationType:a,componentType:85,contextLogData:o,impressionAuxFields:{imageURL:i,clientTrackingParams:t},impressionType:"Pin",loggingId:s,slotIndex:-1,viewData:{pin_id:s},viewType:3,children:({impressionTrackerRef:t})=>(0,m.jsx)(d.xu,{ref:t,"data-test-id":"closeup-visual-container",children:e})})};var _=n("682753"),y=n("8938"),f=n("496211"),x=n("708130"),v=n("967629");function k({mediaAttribution:{author:e,authorUrl:t,ccUrl:n,link:i,mediaType:a,providerName:l}}){let r=(0,x.ZP)(),s=!!(l&&i);if(!e&&!s)return null;let o=s?r._('from {{ provider }}', 'closeup.attribution.imageWithProvider', 'Image source attribution withprovider but no author on pin closeup'):null;return e&&(o="VIDEO"===a?s?r._('Video by {{ author }} on {{ provider }}', 'closeup.attribution.videoWithAuthorProvider', 'Video source attribution on pin closeup'):r._('Video by {{ author }}', 'closeup.attribution.videoWithAuthor', 'Video source attribution on pin closeup when there is an author but no provider'):s?r._('Photo by {{ author }} on {{ provider }}', 'closeup.attribution.photoWithAuthorProvider', 'Photo source attribution on pin closeup'):r._('Photo by {{ author }}', 'closeup.attribution.photoWithAuthor', 'Photo source attribution on pin closeup when there is an author but no providers')),(0,m.jsx)(d.xu,{"data-test-id":"media-attribution",display:"inlineBlock",children:(0,m.jsxs)(d.xv,{color:"default",size:"200",children:[!!o&&(0,m.jsx)(v.r7,{text:(0,v.nk)(o,{author:(0,m.jsx)(d.rU,{display:"inlineBlock",href:t??"",rel:"nofollow",underline:"hover",children:(0,m.jsx)(d.xv,{size:"200",weight:"bold",children:e})},"author"),provider:s?(0,m.jsx)(d.xu,{display:"inlineBlock",marginEnd:1,children:(0,m.jsx)(d.rU,{display:"inlineBlock",href:i??"",rel:"nofollow",underline:"always",children:l},"provider")}):null})}),n&&(0,m.jsx)(d.rU,{href:n,rel:"nofollow",children:r._('(cc)', 'creative commons link text', 'creative commons link text')})]})})}function b({attribution:{authorName:e,authorUrl:t,ccUrl:n,providerName:i,url:a},embed:l}){let r=(0,x.ZP)(),s=!!(i&&a);if(!e&&!s)return null;let o=null;return s?o=e?l?.src&&"gif"!==l.type&&"pinstory"!==l.subtype?r._('Video by {{ author }} on {{ provider }}', 'closeup.attribution.videoWithAuthorProvider', 'Video source attribution on pin closeup'):r._('Photo by {{ author }} on {{ provider }}', 'closeup.attribution.photoWithAuthorProvider', 'Photo source attribution on pin closeup'):r._('from {{ provider }}', 'closeup.attribution.imageWithProvider', 'Image source attribution withprovider but no author on pin closeup'):e&&(o=l?.src&&"gif"!==l.type&&"pinstory"!==l.subtype?r._('Video by {{ author }}', 'closeup.attribution.videoWithAuthor', 'Video source attribution on pin closeup when there is an author but no provider'):r._('Photo by {{ author }}', 'closeup.attribution.photoWithAuthor', 'Photo source attribution on pin closeup when there is an author but no providers')),(0,m.jsx)(d.xu,{"data-test-id":"photo-attribution",display:"inlineBlock",children:(0,m.jsxs)(d.xv,{color:"default",size:"200",children:[!!o&&(0,m.jsx)(v.r7,{text:(0,v.nk)(o,{author:(0,m.jsx)(d.rU,{display:"inlineBlock",href:t??"",rel:"nofollow",underline:"hover",children:(0,m.jsx)(d.xv,{size:"200",weight:"bold",children:e})},"author"),provider:s?(0,m.jsx)(d.xu,{display:"inlineBlock",marginEnd:1,children:(0,m.jsx)(d.rU,{display:"inlineBlock",href:a??"",rel:"nofollow",underline:"always",children:i},"provider")}):null})}),n&&(0,m.jsx)(d.rU,{href:n,rel:"nofollow",children:r._('(cc)', 'creative commons link text', 'creative commons link text')})]})})}let P=void 0!==a?a:a=n(313566),S=e=>{let{isStoryPin:t,pinKey:n,onUpdate:i}=e,a=(0,c.Z)(P,n),l=a.entityId&&(!!a.attribution?.providerUrl&&!!a.attribution.providerName||!!a.attribution?.authorName),r=a.entityId&&(!!a.mediaAttribution?.link&&!!a.mediaAttribution.providerName||!!a.mediaAttribution?.author),s=null;if(l||r){let{closeupUnifiedDescription:e}=a,t=(e||"").trim()?"{{ credit }}":"{{ credit }}";s=a.mediaAttribution?(0,v.nk)(t,{credit:a.mediaAttribution&&(0,m.jsx)(k,{mediaAttribution:{author:a.mediaAttribution.author,authorUrl:a.mediaAttribution.authorUrl,ccUrl:a.mediaAttribution.ccUrl,link:a.mediaAttribution.link,mediaType:a.mediaAttribution.mediaType,providerName:a.mediaAttribution.providerName}},"article-pin")}):(0,v.nk)(t,{credit:a.attribution&&(0,m.jsx)(b,{attribution:{authorName:a.attribution.authorName,authorUrl:a.attribution.authorUrl,ccUrl:a.attribution.ccUrl,providerName:a.attribution.providerName,url:a.attribution.url},embed:a.embed&&{type:a.embed.type,src:a.embed.src,subtype:a.embed.subtype}},"article-pin")})}return(0,m.jsxs)(d.xv,{inline:!0,children:[s,!t&&(0,m.jsx)(f.Z,{onUpdate:i,pinKey:a})]})};var w=n("400556"),j=n("820368");function I({creatorId:e,children:t}){let{data:n}=(0,j.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:e}});return t(n)}var C=n("62927"),T=n("992512"),F=n("608115"),L=n("772866"),A=n("361826"),K=n("391144"),Z=n("983014"),R=n("913736"),E=n("211763"),D=n("31889"),z=n("791776"),M=n("86485"),B=n("551304"),O=n("561162"),V=n("3879"),H=n("673695"),U=n("150608"),N=n("237861"),W=n("228132"),$=n("80887"),G=n("376317");function X({children:e}){let{isCloseupRelatedPinsAboveTheFoldEnabled:t,closeupWithinMasonryEnabled:n,peekCloseupEnabled:i}=(0,$.x4)(),a=8,l=4;return i?(a=0,l=W.O5):n&&(a=void 0,l=void 0),(0,m.jsx)(d.xu,{marginBottom:a,marginTop:l,minHeight:t?void 0:48,children:e})}var q=n("493035"),Y=n("489235");n("817673"),n("608575");var J=n("16244"),Q=n("48100");n("137123");let ee=e=>{try{return decodeURIComponent(e)}catch{return null}};(0,Q.ZP)(e=>{let t=e.toLowerCase().replace(/\.*$/,"");return J.get(t.toLowerCase())});var et=n("52302");let en=(0,et.Z)(()=>n.e("35563").then(n.bind(n,905771)),void 0,"app-www-closeup-duplo-PinRecipeRating"),ei=(0,et.Z)(()=>n.e("32077").then(n.bind(n,57469)),void 0,"app-common-react-components-GroupBoardCloseup-SavedInfo"),ea=(0,r.lazy)(()=>n.e("96615").then(n.bind(n,351760))),el=void 0!==l?l:l=n(716e3);function er({pinKey:e,clientTrackingParams:t,inCommentFeedRedesignExp:n,isStoryPin:i,isCutout:a,isDeletedStoryPin:l,viewParameter:s,trafficSource:u,details:p,viewer:g,onClickThrough:h,onCloseupBodyUpdate:f,orbacActingAs:v,outerPaddingSize:k,viewportSize:b,shouldShowPartnerModule:P,trendsData:j,showTrendsOnPinCloseup:J,showPinStats:Q}){let et=(0,x.ZP)(),{carouselInfo:er}=(0,Z.r)(),es=(0,c.Z)(el,e),{makeDetailsArgs:eo}=(0,C.ZP)(es),{creatorId:ed,showCreatorCard:ec}=eo(!!l),eu=(0,R.Z)({clientTrackingParams:t,pinKey:es,pinId:es.entityId,viewParameter:s,trafficSource:u}),{checkExperiment:ep}=(0,O.F)(),em=(0,F.Z)(es,g),{closeupUnifiedDescription:eg,closeupUserNote:eh,userMentionTags:e_}=es,ey=(0,T.Z)({pinKey:es,orbacActingAs:v,viewer:g}),ef=es.storyPinData?.metadata?.basics?.keyValueBlocks?.map(({categoryType:e,value:t})=>({categoryType:e,value:t}))??[],ex=ef.length>0,ev=(0,A.Z)(eh)||!!es.richMetadata,ek=es.richMetadata?.recipe?.name&&es.richMetadata.recipe.categorizedIngredients&&es.richMetadata.recipe.categorizedIngredients.length>0,{closeupWithinMasonryEnabled:eb,isCloseupRelatedPinsAboveTheFoldEnabled:eP,peekCloseupEnabled:eS}=(0,$.x4)(),ew=(0,N.q6)(g,es.pinner?.entityId,v),ej=ep("closeup_ctx_is_go_linkless_web").anyEnabled,[eI,eC]=(0,r.useState)(!1),eT=(0,o.TH)(),{isAuthenticated:eF}=(0,V.B)(),eL=!eF&&(0,B.am)(eT),eA=!!(es.promoter&&!es.isDownstreamPromotion)&&es.promoter?.entityId===es.nativeCreator?.entityId,{sponsorship:eK,storyPinData:eZ,affiliateLink:eR}=es,eE=!!eR,eD=!!eZ?.hasProductPins||!!eZ?.hasAffiliateProducts,ez=(!!eK?.sponsor||eD)&&!eA&&!eL||eE,eM=a?null:(0,m.jsx)(U.q,{children:({hovered:e,onMouseEnter:a,onMouseLeave:l})=>(0,m.jsx)(z.Z,{clientTrackingParams:t,hovered:e,pinKey:es,trafficSource:u,viewType:3,children:(0,m.jsx)(d.xu,{onMouseEnter:a,onMouseLeave:l,children:(0,m.jsx)(G.Z,{carouselInfo:er,inCommentFeedRedesignExp:n,isLink:!i,onClick:eu,onTitleCheck:eC,pinKey:es})})})}),eB=()=>ec&&(0,m.jsx)(_.Z,{"data-testid":"closeup-metadata-creator",marginTop:eb?(k??W.ER)/2:0,paddingBottom:eb?(k??W.ER)/2:0,paddingLeft:eb?(k??W.ER)/2:0,paddingRight:8,children:(0,m.jsx)(I,{creatorId:ed,children:e=>!!e&&(0,m.jsx)(X,{children:(0,m.jsx)(E.default,{clientTrackingParams:t,componentType:126,impressionType:"User",input:es,isORBACProfileManager:ew,loggingId:ed,officialUser:e,slotIndex:0,viewParameter:s,viewType:3})})})}),{link:eO,trackedLink:eV}=es||{},eH=eV||eO||"",eU=ee(eH)??eH,eN=g.isAuth&&es.originPin?.originPinner?.entityId===g.id,eW=eS?k??W.ER:0;eW=eb?(k??W.ER)/2:eW;let e$=()=>eU&&(!ej||eN||!(es.isGoLinkless&&ej))&&(0,m.jsx)(_.Z,{marginTop:eS?k??W.ER:void 0,paddingBottom:eS?(k??W.ER)/2:void 0,paddingRight:eW,children:(0,m.jsx)(d.xu,{"data-test-id":"visit-site-button",marginTop:eP?void 0:5,children:(0,m.jsx)(D.Z,{clientTrackingParams:t,color:"gray",link:eU,onClickThrough:h,pinKey:es,text:et._('Visit site', 'closeup.defaultMetadata.visitButton', 'Button to visit link on Pin')})})}),eG=()=>(0,m.jsxs)(r.Fragment,{children:[!!(i&&eg&&ev)&&(0,m.jsx)(d.xu,{marginTop:eb?W.O5:8,width:eb?"100%":void 0,children:(0,m.jsx)(K.Z,{descriptionDir:(0,Y.j)(eg),children:(0,m.jsx)(w.Z,{description:eg||"",userMentionTags:e_?.map(e=>({length:e.length,objectId:e.objectId,offset:e.offset,tagType:e.tagType}))})})}),!a&&!i&&eb&&(0,m.jsx)(d.kC,{alignItems:"baseline",direction:"row",justifyContent:"start",children:(0,m.jsx)(d.xu,{marginBottom:eb&&!ek?W.O5:void 0,marginTop:eb?W.O5:void 0,width:eP?"100%":void 0,children:(0,m.jsx)(S,{isStoryPin:i,onUpdate:f,pinKey:es})})}),ez&&eb&&(0,m.jsx)(d.xu,{marginTop:2,children:(0,m.jsx)(q.Z,{hasAffiliateProducts:eD})})]});return(0,m.jsxs)(d.xu,{marginTop:eb?2:void 0,children:[P&&(i||eb)&&(0,m.jsx)(_.Z,{paddingRight:(k??W.ER)/2,children:(0,m.jsx)(d.xu,{"data-test-id":"PartnerModule",width:"100%",children:(0,m.jsx)(M.Z,{name:"SafeSuspense_Closeup_PartnerModule",children:(0,m.jsx)(H.Z,{children:(0,m.jsx)(ea,{borderStyle:L.te,isStoryPin:i,pinKey:es,showPinStats:Q,trendsData:J?j?.data?.results:null,viewportSize:b})})})})}),(0,m.jsxs)(d.xu,{alignItems:eb?"start":void 0,display:eb?"flex":void 0,justifyContent:eb?"between":void 0,children:[(0,m.jsxs)(d.kC.Item,{children:[eb&&eB(),(!eI||!eb)&&(0,m.jsxs)(_.Z,{paddingLeft:eb?(k??W.ER)/2:0,paddingRight:k,children:[(0,m.jsx)(d.xu,{color:"light","data-test-id":"closeup-title",display:"inlineBlock",children:eM}),ez&&eb&&(0,m.jsx)(d.xu,{marginTop:2,children:(0,m.jsx)(q.Z,{hasAffiliateLink:eE,hasAffiliateProducts:eD})})]}),eS&&eB(),(0,m.jsx)(d.xu,{direction:eS?"column":void 0,display:eS?"flex":void 0,height:eS?"100%":void 0,children:(0,m.jsxs)(_.Z,{paddingLeft:eb?(k??W.ER)/2:0,paddingRight:k,children:[ex&&(0,m.jsx)(d.xu,{marginTop:eb?W.O5:4,children:(0,m.jsx)(y.Z,{hasMetadataTemplateType:!!es.storyPinData?.metadata?.templateType,keyValueBlocks:ef})}),!ex&&!!ek&&(0,m.jsx)(d.xu,{marginTop:eb?W.O5:void 0,children:(0,m.jsx)(en,{boldText:!1,fallback:(0,m.jsx)(d.$j,{accessibilityLabel:et._('Loading Pin recipe rating', 'closeupDefaultMetadata.PinRecipeRating.loading.label', 'Spinner indicates pin recipe rating is loading'),show:!0}),graphqlRef:null,isWideViewport:!0,pinId:es.entityId,textSize:"300"})}),!eb&&eG()]})})]}),(0,m.jsx)(d.kC.Item,{flex:"none",children:eb&&e$()})]}),eb&&(0,m.jsx)(_.Z,{paddingLeft:eb?(k??W.ER)/2:0,paddingRight:k,children:eG()}),eS&&e$(),(0,m.jsxs)(r.Fragment,{children:[p,!!em&&!eP&&(0,m.jsx)(d.xu,{marginTop:W.O5,children:(0,m.jsx)(ei,{pinKey:es,showFavoritesInformation:!l&&ey})})]})]})}var es=n("420213"),eo=n("60530"),ed=n("674094"),ec=n("548243"),eu=n("997096"),ep=n("115951"),em=n("386799"),eg=n("812996"),eh=n("704665"),e_=n("958605"),ey=n("580412");let ef=(0,r.lazy)(()=>n.e("99339").then(n.bind(n,549683))),ex=(0,et.Z)(()=>Promise.resolve().then(n.bind(n,211763)),void 0,"app-common-react-components-CreatorCard"),ev=(0,et.Z)(()=>n.e("34966").then(n.bind(n,116025)),void 0,"app-common-react-components-closeup-CloseupBody-CloseupPinNote-CloseupPinNote");function ek({inCommentFeedRedesignExp:e,isCommentSectionOpen:t,isCutout:n,isStoryPin:i,isVideoPin:a,isDeletedStoryPin:l,orbacActingAs:s,orbacSubjectId:c,onCommentSectionClick:u,onCloseupBodyUpdate:p,outerPaddingSize:g=W.g9,pin:h,viewer:y,shouldShowStlCarouselForOwnPin:f,storyPinTaggedProducts:v=[],taggedProducts:k,trafficSource:b,viewType:P,closeupContext:w,isLoadingNewlyCreatedComment:j,viewParameter:L,detailsScrollContainerRef:A,clientTrackingParams:K}){let{makeDetailsArgs:Z}=(0,C.ZP)({type:"deprecated",data:h}),{isShopTheLook:R,showCreatorCard:E,creatorId:D,showCanonicalComments:z}=Z(!!l),O=(0,x.ZP)(),U=(0,F.Z)({type:"deprecated",data:h},y),$=(0,o.TH)(),{isAuthenticated:G}=(0,V.B)(),Y=(0,em.Z)((0,eg.Z)((0,eh.Z)((0,e_.Z)({pin:h})))),J=(k||[]).filter(e=>(function(e){if("pin_tag"===e.type){let{x_percent:t,y_percent:n}=e;if(t>0&&t<=100&&n>0&&n<=100)return!0}return!1})(e)),Q=(0,N.q6)(y,h.pinner?.id,s),{descriptionPaneWidth:ee,closeupWithinMasonryEnabled:et,isCloseupRelatedPinsAboveTheFoldEnabled:en,peekCloseupEnabled:ei}=w,ea=!G&&(0,B.am)($),el=!!(h.promoter&&!h.is_downstream_promotion)&&h.promoter?.id===h.native_creator?.id,{sponsorship:er,story_pin_data:ek,affiliate_link:eb}=h,eP=!!eb,eS=!!ek?.has_product_pins||!!ek?.has_affiliate_products,ew=(!!er||eS)&&!el&&!ea||eP,ej=ee-2*g,eI=!i&&(!((h.rich_summary?.products??[]).length||(h.rich_metadata?.products??[]).length)&&R&&J.length>0||f)&&!a,eC=i&&v&&v.length>0,eT=(0,T.Z)({pinKey:{type:"deprecated",data:h},orbacActingAs:s,viewer:y}),{isEligibleForStaticImageIdeaPin:eF}=(0,eu.Z)(h.should_open_in_stream,h.story_pin_data_id),eL=eF&&v&&v.length>0,eA=h.shuffle_asset?.pin,eK=ei?0:g/2,{paddingLeft:eZ,paddingRight:eR,marginTop:eE,marginBottom:eD}=(()=>{let t={paddingLeft:g/2,paddingRight:g,marginTop:10,marginBottom:6};return e||et?{paddingLeft:e?0:t.paddingLeft,paddingRight:et?8:t.paddingRight,marginTop:0,marginBottom:et?2:0}:ei?{paddingLeft:0,paddingRight:g/2,marginTop:2,marginBottom:2}:t})(),ez=h.favorited_by_me?O._('Remove from favorites', 'closeup.metadataDetails.removeFromFavorites', 'Text for button allowing users to unfavorite a saved Pin'):O._('Add to favorites', 'closeup.metadataDetails.addToFavorites', 'Text for button allowing users to favorite a saved Pin'),eM=[...eI||eC||eL?[(0,m.jsx)(_.Z,{paddingLeft:g/2,paddingRight:g,children:(0,m.jsx)(M.Z,{name:"SafeSuspense_CloseupBody_StlCloseupModule",children:(0,m.jsx)(H.Z,{children:(0,m.jsx)(ef,{closeupImageSignature:h.image_signature??"",isOwnCreatedPin:f,pin:h,pinId:h.id,taggedObjects:eC||eL?v:J,type:eI?"stl":"story",viewParameter:L})})})},"closeupStlModuleMetadataPadding")]:[],...en?[]:[e?(0,m.jsx)(_.Z,{paddingRight:g,children:(0,m.jsx)(ep.Z,{inCommentFeedRedesignExp:e,moduleWidth:W.Gg-W.g9,pinKey:{type:"deprecated",data:h},trafficSource:b,viewParameter:L})}):(0,m.jsx)(ep.Z,{moduleWidth:W.Gg-W.g9,pinKey:{type:"deprecated",data:h},trafficSource:b,viewParameter:L})],...Y?[(0,m.jsx)(_.Z,{paddingLeft:ei?0:g/2,paddingRight:en?g/2:g,children:(0,m.jsx)(ey.Z,{recipeProps:Y})},"closeupRecipeMetadataPadding")]:[],...en&&!l&&eT?[(0,m.jsx)(_.Z,{paddingLeft:et?g/2:0,paddingRight:en?g/2:16,children:(0,m.jsxs)(d.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:et?0:2,marginTop:et?0:2,children:[et?(0,m.jsx)(d.xv,{size:"300",weight:"bold",children:ez}):(0,m.jsx)(d.xv,{weight:"bold",children:ez}),(0,m.jsx)(eo.Z,{board:h.board,favorited:!!h.favorited_by_me,pinId:h.id,section:h.section})]})},"closeupFavoriteBarMetadataPadding")]:[],...eT?[(0,m.jsx)(_.Z,{paddingLeft:e||ei?0:g/2,paddingRight:en?g/2:g,children:(0,m.jsxs)(r.Fragment,{children:[(0,m.jsx)(ed.Z,{show:e}),(0,m.jsx)(ev,{boardId:h.board?.id,isGroupNote:U,pinId:h.id,pinNoteText:h.pin_note?.text})]})},"closeupPinNoteMetadataPadding")]:[]];return(0,m.jsx)(r.Fragment,{children:(0,m.jsxs)(d.kC,{alignItems:"stretch","data-testid":"closeup-metadata-details-flex",direction:"column",flex:"grow",height:ei?"100%":void 0,justifyContent:"start",children:[n||et?null:(0,m.jsxs)(_.Z,{"data-testid":"closeup-metadata-details",paddingLeft:en?eK:void 0,paddingRight:en?g/2:g,children:[(0,m.jsx)(d.kC,{alignItems:"baseline",direction:"row",justifyContent:"start",children:(0,m.jsx)(d.xu,{marginTop:ei?void 0:2,maxWidth:en?void 0:ej,width:en?"100%":void 0,children:(0,m.jsx)(S,{isStoryPin:i,onUpdate:p,pinKey:{type:"deprecated",data:h}})})}),ew&&!et&&(0,m.jsx)(q.Z,{hasAffiliateLink:eP,hasAffiliateProducts:eS})]}),n&&eA?(0,m.jsx)(d.xu,{"data-testid":"closeup-metadata-parent-pin",marginBottom:et?0:2,marginTop:et?0:2,children:(0,m.jsx)(ec.Z,{pinKey:{type:"deprecated",data:eA}})}):null,E&&!n&&!en&&(0,m.jsx)(_.Z,{"data-testid":"closeup-metadata-creator",paddingRight:e?g:g/2,children:(0,m.jsx)(I,{creatorId:D,children:e=>!!e&&(0,m.jsx)(X,{children:(0,m.jsx)(ex,{clientTrackingParams:K,componentType:126,impressionType:"User",input:{type:"deprecated",data:h},isORBACProfileManager:Q,loggingId:D,officialUser:e,slotIndex:0,viewParameter:L,viewType:P})})})}),(0,m.jsx)(r.Fragment,{children:eM.map(e=>(0,m.jsxs)(r.Fragment,{children:[e,et&&(0,m.jsx)(_.Z,{paddingLeft:g/2,paddingRight:g/2,children:(0,m.jsx)(d.xu,{marginBottom:2,marginTop:2,width:"100%",children:(0,m.jsx)(ed.Z,{show:!0,surface:"closeup-metadata-details"})})})]},`detailFragment-${e.key}`))}),!eM.length&&(0,m.jsx)(_.Z,{paddingLeft:g/2,paddingRight:g/2,children:(0,m.jsx)(d.xu,{marginBottom:2,marginTop:2,width:"100%",children:(0,m.jsx)(ed.Z,{show:et,surface:"closeup-metadata-details"})})}),!l&&z&&(0,m.jsx)(M.Z,{name:"CanonicalCard",children:(0,m.jsxs)(_.Z,{paddingLeft:eZ,paddingRight:eR,children:[(0,m.jsx)(ed.Z,{show:e}),(0,m.jsx)(d.iP,{disabled:t||h.comments_disabled,onTap:()=>{u&&u(!t)},children:(0,m.jsx)(d.xu,{marginBottom:eD,marginTop:eE,paddingY:e&&!et?4:0,children:(0,m.jsx)(es.Z,{aggregatedPinId:h.aggregated_pin_data?.id,closeupAttributionId:h.closeup_attribution?.id,closeupAttributionUsername:h.closeup_attribution?.username,commentCount:h.aggregated_pin_data?.comment_count??0,commentsDisabled:h.comments_disabled,inCommentFeedRedesignExp:e,isCommentSectionOpen:t,isLoadingNewCreatedComment:j,isORBACProfileManager:Q,isShopTheLook:R,isVideo:!!h.videos?.video_list,onCommentSectionClick:u,orbacSubjectId:c,photoCount:h.aggregated_pin_data?.did_it_data?.images_count??0,pinId:h.id,pinnerId:h.pinner?.id,scrollContainerRef:A,shouldShowHeading:!ei||(h.aggregated_pin_data?.comment_count??0)>0,storyPinDataId:h.story_pin_data?.id,viewParameter:L})})}),(0,m.jsx)(ed.Z,{show:e})]})})]})})}function eb({maxHeight:e,inCommentFeedRedesignExp:t,pin:n,trafficSource:i,viewParameter:a}){let l=(0,ep.F)(n.id);return l&&0!==l.length?(0,m.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{borderLeft:L.tc}},maxHeight:e,overflow:"scroll",children:(0,m.jsx)(ep.Z,{inCommentFeedRedesignExp:t,moduleWidth:L.LV,pinKey:{type:"deprecated",data:n},trafficSource:i,viewParameter:a})}):null}var eP=n("431190"),eS=n("318258"),ew=n("808992"),ej=n("85172"),eI=n("702622"),eC=n("346776"),eT=n("286502"),eF=n("959474"),eL=n("460515"),eA=n("789839");let eK={__style:{marginBottom:"0",marginTop:"0",maxWidth:W.KP,minWidth:W.Gg}};function eZ({children:e,isWideVideo:t}){let{showCloseupContentRight:n,maxWidth:i,paneWidth:a,peekCloseupEnabled:l,closeupWithinMasonryEnabled:r,viewportSize:s}=(0,$.x4)(),{maxHeight:o}=(0,L.Re)(),c=n||t?i:a;return c=r&&"sm"!==s||l?void 0:c,r?(0,m.jsx)(d.xu,{height:"100%",children:e}):(0,m.jsx)(d.xu,{"data-test-id":"closeup-lego-container",display:"flex",height:"100%",maxHeight:o,maxWidth:c,position:"relative",rounding:8,width:"100%",children:(0,m.jsx)("div",{onClick:e=>{e.stopPropagation()},style:{display:"flex"},children:(0,m.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{cursor:"auto"}},display:"flex",children:(0,m.jsx)(d.xu,{dangerouslySetInlineStyle:t?eK:{},display:"flex",children:e})})})})}var eR=n("66332"),eE=n("596078"),eD=n("746152");let ez=(0,et.Z)(()=>Promise.all([n.e("74466"),n.e("9767")]).then(n.bind(n,465971)),{ssr:!1}),eM=(0,et.Z)(()=>Promise.all([n.e("89317"),n.e("55759")]).then(n.bind(n,981170)),void 0,"CloseupActionBarCommon"),eB=(0,et.Z)(()=>n.e("62220").then(n.bind(n,483493)),void 0,"app-common-react-components-closeup-LeadGen-LeadGenCloseupBodyContent"),eO=(0,et.Z)(()=>n.e("30644").then(n.bind(n,765517)),void 0,"app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer"),eV=(0,r.lazy)(()=>n.e("42950").then(n.bind(n,224863))),eH=({children:e,metadataContainerRef:t,closeupWithinMasonryEnabled:n})=>n?(0,m.jsx)(d.xu,{ref:t,width:"100%",children:e}):(0,m.jsx)(r.Fragment,{children:e});function eU({isWideVideo:e,didShortClickThrough:t,webLinkSurveyState:{webLinkSurveyRef:n,imageContainerRef:i,legoLinkClickthroughAnchorRef:a,maybeLinkRef:l},pin:c,outerBodyStyle:u,inCommentFeedRedesignExp:p,isEligibleForPinReactions:g,isStoryPin:y,trafficSource:f,visualContentContainer:v,isCloseupMaximized:k,data:b,outerPaddingSize:P,isInStream:S,metadataContainerRef:w,onClickThrough:j,viewParameter:I,metadata:T,viewer:F,orbacSubjectId:A,setIsLoadingNewlyCreatedComment:K=()=>{},relatedModulesResource:Z,descriptionContentMaxHeight:R,marginBottom:E=0,isDeletedStoryPin:D,onSaveButtonClick:B,showRepinOnInitialRender:V,goBack:G,onUpdate:X,routePush:q,closeupActionBarMaxWidth:Y,visualContentContainerRef:J,showPDPComments:Q,actionBarContainerRef:ee,closeupActionBar:et}){let{isCloseupRelatedPinsAboveTheFoldEnabled:en,descriptionPaneWidth:ei,viewportSize:ea,clientTrackingParams:el,closeupWithinMasonryEnabled:er,peekCloseupEnabled:es}=(0,$.x4)(),eo=(0,s.v9)(({changeBoardFromToast:e})=>e)||{},ed=(0,x.ZP)(),ec=(0,o.k6)(),{checkExperiment:eu}=(0,O.F)(),ep=(0,r.useRef)(null),em=(0,r.useRef)(),[eg,eh]=(0,r.useState)(0),e_=(0,r.useCallback)(()=>{let e=w.current;e&&eh(t=>{let n=e.offsetWidth;return t!==n?n:t})},[w]);(0,eD.Z)(e_,w),(0,r.useEffect)(()=>{er&&e_()},[e_,er]);let ey=(0,eL.Z)(),{pinner:ef}=c,ex=(0,N.q6)(F,ef?.id,ey),{getShowClickthroughLink:ev}=(0,C.ZP)({type:"deprecated",data:c}),ek=!er&&ev(y),eS=!(ex&&!A)&&(!c.is_eligible_for_pdp||!!Q)&&!c.comments_disabled&&!!c.is_eligible_for_aggregated_comments,ew=!!c.promoted_is_lead_ad&&eu("web_lead_ads_std_beta").anyEnabled,ej=0!==Object.keys(c).length,eT=e||"lg"!==ea,eF=J?.current?.clientHeight||0,eK=eF?Math.max(eF,850-eP.ap):"100%",eU=c.comments_disabled?0:(c.aggregated_pin_data?.comment_count??0)+(c.aggregated_pin_data?.did_it_data?.images_count??0),eN=(0,m.jsx)(eO,{aggregatedPinDataId:c.aggregated_pin_data?.id,closeupAttributionId:c.closeup_attribution?.id,commentCount:eU,disablePhotoCommentSelection:!!c.done_by_me,isEligibleForPinReactions:g,isPDP:c.is_eligible_for_pdp,orbacSubjectId:A,pinId:c.id,privatePin:"secret"===c.privacy,reactionByMe:c.reaction_by_me||0,reactionCounts:c.reaction_counts,setIsLoadingNewlyCreatedComment:K,showCommentComposer:eS,showReactBackground:!er,storyPinDataId:c.story_pin_data_id,viewParameter:I}),{fiftyPercentWidth:eW,fiftyPercentHeight:e$}=(0,L.Re)(),eG=e&&!er?W.KP:void 0;eG=es?eW:eG;let eX=(y||er)&&!es?void 0:R;es&&(eX="sm"===ea?e$:J?.current?.clientHeight);let eq=u;en&&(eq={...u,boxShadow:"unset",border:L.tc,overflow:"hidden"});let eY=er&&P?P:0,[eJ,eQ]=(0,r.useState)(!1);return(0,m.jsx)(eA.ZP.Provider,{value:(0,eA.yq)({closeupBodyWidth:eg,isCollageOverlayOpen:eJ,setIsCollageOverlayOpen:eQ}),children:(0,m.jsxs)(d.xu,{ref:em,height:"100%",marginBottom:E,position:"relative",width:"100%",children:[(0,m.jsx)(eZ,{isWideVideo:e,children:(0,m.jsxs)(d.xu,{display:er?void 0:"flex",position:"relative",children:[!t&&(0,m.jsx)(H.Z,{children:(0,m.jsx)(eV,{ref:n,imageContainerRef:i,legoLinkClickthroughAnchorRef:a,maybeLinkRef:l,pin:{aggregatedPinData:c.aggregated_pin_data&&{isShopTheLook:c.aggregated_pin_data.is_shop_the_look},board:c.board&&{entityId:c.board.id,owner:c.board.owner&&{entityId:c.board.owner.id??""}},entityId:c.id,imageSignature:c.image_signature,isDownstreamPromotion:c.is_downstream_promotion,isPromoted:c.is_promoted,link:c.link,recommendationReason:c.recommendation_reason&&{reason:c.recommendation_reason.reason}}})}),(0,m.jsx)(d.xu,{color:ej?"default":"transparent",dangerouslySetInlineStyle:{__style:{...eq}},"data-test-id":"closeup-body-style",display:"flex",position:"relative",children:(0,m.jsx)(eH,{closeupWithinMasonryEnabled:er,metadataContainerRef:w,children:(0,m.jsxs)(d.kC,{alignItems:"stretch",direction:"column",height:er?"100%":void 0,justifyContent:"start",children:[(0,m.jsxs)(eR.Z,{isStoryPin:y,isWideVideo:e,children:[er&&!eJ&&(0,m.jsx)(d.xu,{alignItems:"center","data-test-id":"closeup-action-bar",display:"flex",justifyContent:"center",overflow:"visible",top:!0,width:"100%",zIndex:new d.Ry(1),children:et}),ej?(0,m.jsx)(r.Fragment,{children:c.promoted_is_lead_ad?(0,m.jsx)(eB,{clientTrackingParams:el,pin:c,data:!!b,goBack:G,onUpdate:X,viewParameter:I,onSaveButtonClick:B,showRepinOnInitialRender:V,actionBarContainerRef:ee,trafficSource:f,onClickThrough:j,isStoryPin:y,descriptionPaneWidth:ei,metadataContainerRef:w,visualContentContainer:v,visualContentContainerHeight:eF,showLeadPinStdBeta:ew}):(0,m.jsxs)(r.Fragment,{children:[(0,m.jsx)(h,{clientTrackingParams:el,closeupNavigationType:(0,eE.Z)(ec,f),pinImageUrl:(c.images&&c.images["236x"]?.url)??"",pinKey:{type:"deprecated",data:c},children:v}),(0,m.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{overflow:es&&"sm"===ea?"scroll":void 0}},"data-test-id":"description-content-container",direction:"column",display:"flex",height:k?0:"100%",maxHeight:eX,maxWidth:eG,minHeight:p&&!eT?"100%":void 0,width:e||er?void 0:ei,children:(er||b)&&(!er||c)?(0,m.jsxs)(r.Fragment,{children:[(0,m.jsxs)(d.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:er?eY/2:es?L.Gd:W.g9,paddingBottom:er?eY:void 0,paddingRight:er?eY/2:void 0}},direction:"column",display:"flex",flex:"grow",maxHeight:p?eK:void 0,children:[!S&&!er&&(0,m.jsx)(M.Z,{name:"SafeSuspense_CloseupBody_CloseupActionBar",children:(0,m.jsx)(eM,{actionBarContainerRef:ep,goBack:G,gridDescription:c.description??"",isDeletedStoryPin:!!D,isEligibleForPinReactions:g,isOnSecretBoard:!1,isStoryPin:y,maxWidth:Y,onEditSubmit:X,onSaveButtonClick:B,outerPaddingSize:P,pin:c,routePush:q,showRepinOnInitialRender:V,viewParameter:I})}),(0,m.jsxs)(d.xu,{ref:er?void 0:w,alignItems:"stretch",direction:"column",display:"flex",flex:"grow",justifyContent:"start",overflow:er?void 0:"auto",children:[(0,m.jsxs)(d.xu,{alignItems:"stretch",dangerouslySetInlineStyle:{__style:{paddingLeft:er?W.ER/2:0,rowGap:er?4*W.O5:void 0}},direction:"column",display:"flex",height:es?"100%":void 0,justifyContent:"start",width:es?"100%":void 0,children:[ek&&(0,m.jsx)(_.Z,{paddingBottom:es?W.ER:void 0,paddingLeft:er?W.ER/2:0,children:(0,m.jsx)(d.xu,{"data-test-id":"maybe-clickthrough-link",direction:"row",display:"flex",children:(0,m.jsx)(U.q,{children:({hovered:e,onMouseEnter:t,onMouseLeave:n})=>(0,m.jsx)(z.Z,{clientTrackingParams:el,hovered:e,pinKey:{type:"deprecated",data:c},trafficSource:f,viewType:3,children:(0,m.jsx)(d.xu,{onMouseEnter:t,onMouseLeave:n,children:(0,m.jsx)(eI.Z,{actionBarHeight:ep.current?.offsetHeight||W.Ie,isStoryPin:y,legoLinkClickthroughAnchorRef:a,onClickThrough:j,pinKey:{type:"deprecated",data:c}})})})})})}),T]}),er&&eS&&eN]})]}),!er&&eS&&(0,m.jsx)(d.Le,{bottom:0,children:eN})]}):(0,m.jsx)(d.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",paddingY:4,children:(0,m.jsx)(d.$j,{accessibilityLabel:ed._('Pin details loading', ' - ', ' -- '),show:!0})})}),es&&"lg"===ea&&(0,m.jsx)(eb,{inCommentFeedRedesignExp:p,maxHeight:J?.current?.clientHeight,pin:c,trafficSource:f,viewParameter:I})]})}):(0,m.jsx)(d.kC,{alignItems:"center",height:300,justifyContent:"center",width:"100%",children:(0,m.jsx)(d.$j,{accessibilityLabel:ed._('Pin loading', ' - ', ' -- '),show:!0})})]}),t&&!c.is_promoted&&Z.data&&Z.data.length>0&&(0,m.jsx)(eC.C,{})]})})})]})}),eo.shouldOpenModal&&eo.newPin&&eo.originalPinId===c.id&&(0,m.jsx)(M.Z,{name:"SafeSuspense_CloseupBody_ChangeBoardModal",children:(0,m.jsx)(ez,{experience:eo.experience,pinKey:{type:"deprecated",data:eo.newPin}})})]})})}function eN({disableRelatedResource:e=!1,relatedResourceOptions:t,inCommentFeedRedesignExp:n,isStoryPin:i,isVideoPin:a,isWideVideo:l,pin:s,searchQuery:o,taggedProducts:d,trafficSource:c,viewParameterType:u,onClickThrough:p,data:g,didShortClickThrough:h,goBack:_,isCloseupMaximized:y=!1,isInStream:f=!1,isDeletedStoryPin:x,onSaveButtonClick:v,onUpdate:k,outerBodyStyle:b,outerPaddingSize:P,routePush:S,showRepinOnInitialRender:w,viewType:I,isCommentSectionOpen:T,onCommentSectionClick:F,onCloseupBodyUpdate:L,shouldShowStlCarouselForOwnPin:A,storyPinTaggedProducts:K,clientTrackingParams:Z,viewportSize:R,shouldShowPartnerModule:E,trendsData:D,showTrendsOnPinCloseup:z,showPinStats:M}){let[B,O]=(0,r.useState)(!1),V=(0,r.useRef)(null),H=(0,j.Z)(e?null:t),U=(0,r.useRef)(null),W=(0,$.x4)(),G=(0,eF.Z)(),X=(0,eT.Z)(),q=!s.is_promoted&&!s.is_downstream_promotion&&!x,Y=!!s.shuffle_asset&&X(),J=(0,eL.Z)(),Q=(0,N.lJ)(G,J),ee=(0,ew.Z)(),et=(0,eS.Z)({metadataContainerRef:U}),en=(0,eP.ZP)(n),{getViewParameter:ei}=(0,C.ZP)({type:"deprecated",data:s}),ea=ei(u),{setClickthroughComponentForSurvey:el,imageContainerRef:es}=ee,eo=(0,r.useMemo)(()=>(0,m.jsx)(eM,{actionBarContainerRef:V,goBack:_,gridDescription:s.description??"",isDeletedStoryPin:!!x,isEligibleForPinReactions:q,isOnSecretBoard:!1,isStoryPin:i,onEditSubmit:k,onSaveButtonClick:v,outerPaddingSize:P,pin:s,routePush:S,showRepinOnInitialRender:w,viewParameter:ea}),[_,x,q,i,v,k,P,s,S,w,ea]),ed=(0,m.jsx)(ej.Z,{isStoryPin:i,isWideVideo:l,pin:s,searchQuery:o,taggedProducts:d,trafficSource:c,viewParameterType:u,visualContentContainerRef:en.visualContentContainerRef,imageContainerRef:es,handleImageClickThrough:()=>p({wasImageClicked:!0}),setClickthroughComponentForSurvey:el,isShortImage:et,onSaveButtonClick:v,showRepinOnInitialRender:w,viewParameter:ea}),ec=(0,m.jsx)(ek,{inCommentFeedRedesignExp:n,isCommentSectionOpen:T,isCutout:Y,isStoryPin:i,isVideoPin:a,isDeletedStoryPin:x,orbacActingAs:J,orbacSubjectId:Q,onCommentSectionClick:F,onCloseupBodyUpdate:L,outerPaddingSize:P,pin:s,viewer:G,shouldShowStlCarouselForOwnPin:A,storyPinTaggedProducts:K,taggedProducts:d,trafficSource:c,viewType:I,closeupContext:W,isLoadingNewlyCreatedComment:B,viewParameter:ea,detailsScrollContainerRef:U.current,clientTrackingParams:Z,reactionCounts:s.reaction_counts}),eu=(0,m.jsx)(er,{pinKey:{type:"deprecated",data:s},clientTrackingParams:Z,inCommentFeedRedesignExp:n,isStoryPin:i,isCutout:Y,isDeletedStoryPin:x,trafficSource:c,details:ec,onClickThrough:p,onCloseupBodyUpdate:L,outerPaddingSize:P,orbacActingAs:J,viewer:G,viewParameter:ea,viewportSize:R,shouldShowPartnerModule:E,trendsData:D,showTrendsOnPinCloseup:z,showPinStats:M});return(0,m.jsx)(eU,{isWideVideo:l,didShortClickThrough:h,webLinkSurveyState:ee,pin:s,outerBodyStyle:b,inCommentFeedRedesignExp:n,isEligibleForPinReactions:q,isStoryPin:i,trafficSource:c,visualContentContainer:ed,isCloseupMaximized:y,data:g,isInStream:f,metadataContainerRef:U,onClickThrough:()=>{p&&p({componentType:129}),ee.setClickthroughComponentForSurvey("legoMaybeLink")},viewParameter:ea,viewType:I,viewer:G,orbacSubjectId:Q,isLoadingNewlyCreatedComment:B,onCommentSectionClick:F,setIsLoadingNewlyCreatedComment:O,relatedModulesResource:H,descriptionContentMaxHeight:en.descriptionContentMaxHeight,metadata:eu,onSaveButtonClick:v,showRepinOnInitialRender:w,goBack:_,onUpdate:k,routePush:S,visualContentContainerRef:en.visualContentContainerRef,actionBarContainerRef:V,outerPaddingSize:P,closeupActionBar:eo})}},60530:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(581722),a=n(821728),l=n(219300),r=n(445029),s=n(80887),o=n(329544),d=n(785893);function c({board:e,favorited:t,pinId:n,section:c}){let u,p;let{logContextEvent:m}=(0,l.v)(),g=(0,i.I0)(),{closeupWithinMasonryEnabled:h}=(0,s.x4)();e&&([u,p]=(0,o.J)(e.url??""));let _=e=>{m({event_type:101,component:13791,element:e?12225:12226,object_id_str:n,view_type:3})};return(0,d.jsx)(a.Z,{favorited:t,isCloseupButton:!0,onFavorite:()=>{_(!0),g((0,r.jB)("BoardResource",{username:p,slug:u,field_set_key:"detailed"})),g((0,r.jB)("BoardSectionResource",{board_slug:u,section_slug:c?.slug,username:p}))},onUnfavorite:()=>{_(!1)},pinId:n,size:h?"sm":24})}},874385:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(883119),a=n(708130),l=n(998940),r=n(785893);function s({digitalMediaType:e,isMobile:t=!1}){let n=(0,a.ZP)(),s={[l.s.TRAINED_ALGORITHMIC_MEDIA]:n._('AI generated', 'closeup.aIGeneratedLabel.label', 'Label for AI Generated images'),[l.s.COMPOSITE_WITH_TRAINED_ALGORITHMIC_MEDIA]:n._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images')};return(0,r.jsxs)(i.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"ai-generated-label",display:"flex",height:t?48:44,justifyContent:"center",rounding:"pill",width:t?"147px":"143px",children:[(0,r.jsx)(i.JO,{accessibilityLabel:n._('AI Generated Label icon', 'closeup.image.aIGeneratedLabelIcon', 'Icon on AI generated Label'),color:"light",icon:"sparkle"}),(0,r.jsx)(i.xu,{paddingX:1}),(0,r.jsx)(i.xv,{color:"light",size:"300",children:s[e]})]})}},496331:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(667294),a=n(883119),l=n(874385),r=n(45663),s=n(786609),o=n(673695),d=n(785893);function c({digitalMediaType:e,shouldMoveAILabel:t,closeupWithinMasonryEnabled:n}){return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(a.xu,{height:`calc(100% - ${t?108:60}px)`}),(0,d.jsx)(a.xu,{display:"flex",justifyContent:"start",maxWidth:"147px",paddingX:n?2:r.Q,children:(0,d.jsx)(o.Z,{children:(0,d.jsx)(s.Z,{children:(0,d.jsx)(l.Z,{digitalMediaType:e})})})})]})}},751203:function(e,t,n){n.d(t,{Z:function(){return p}});var i,a=n(667294);n(167912);var l=n(883119),r=n(791776),s=n(131548),o=n(708130),d=n(561162),c=n(785893);let u=void 0!==i?i:i=n(864541);function p({clientTrackingParams:e,domain:t,link:n,pinKey:i,trafficSource:p,viewType:m=3}){let g;let h=(0,o.ZP)(),[_,y]=(0,a.useState)(!1),f=(0,s.Z)(u,i),{checkExperiment:x}=(0,d.F)(),v=x("closeup_media_viewer").anyEnabled;if(n.startsWith("https://i.pinimg.com")){if(v)return(0,c.jsx)(a.Fragment,{});g=h._('View image', 'closeup.image.domainLinkButton', 'Text indicating where clickthrough will navigate to')}else g=t||h._('Learn more', 'closeup.image.domainLinkButton', 'Text indicating where clickthrough will navigate to');return(0,c.jsx)(l.iP,{onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),onTap:()=>{},children:(0,c.jsx)(r.Z,{clientTrackingParams:e,hovered:_,pinKey:f,trafficSource:p,viewType:m,children:(0,c.jsxs)(l.xu,{alignItems:"center",color:_?"lightWash":"default","data-test-id":"visit-button",display:"flex",height:44,justifyContent:"center",opacity:.9,paddingX:4,rounding:"pill",children:[(0,c.jsx)(l.JO,{accessibilityLabel:h._('Open link icon', 'closeup.image.domainLinkButtonIcon', 'Icon on domain link button'),color:"default",icon:"arrow-up-right"}),(0,c.jsx)(l.xu,{paddingX:1}),(0,c.jsx)(l.xv,{size:"300",weight:"bold",children:g})]})})})}},869140:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(883119),a=n(785893);let l=({onClick:e,href:t,children:n,onNavigation:l})=>(0,a.jsx)(i.xu,{"data-test-id":"image-link",children:(0,a.jsx)(i.Tg,{href:t,onTap:({event:t,dangerouslyDisableOnNavigation:n})=>{n(),e(),l({event:t})},rel:"nofollow",children:n})})},216981:function(e,t,n){n.d(t,{Z:()=>l});var i=n("126052"),a=n("228132");function l({carouselData:e,mainImage:t,maxCloseupImageWidth:n,imageToDisplayWidthRatio:l=1,shouldPadImage:r=!1}){let s=n-a.d2,o=r?s:n,d=Math.floor(o*(e?l:1)/function(e={},t){return Math.min(...[e,...t?.carousel_slots?.map(e=>{var t;return i.Z(e.images)||((t=e.videos?.video_list)?t.V_720P?.url?t.V_720P:t.V_HLSV4?.url?t.V_HLSV4:t.V_HLSV3_MOBILE?.url?t.V_HLSV3_MOBILE:t.V_HLSV3_WEB?.url?t.V_HLSV3_WEB:null:null)}).filter(e=>!!e)||[]].map(({width:e=1,height:t=1})=>e/t))}(t,e));return{width:o,height:d}}},45663:function(e,t,n){n.d(t,{Q:function(){return i},X:function(){return a}});let i=5,a=4},71840:function(e,t,n){n.d(t,{Z:()=>o}),n("167912");var i,a=n("131548"),l=n("205296"),r=n("561162");let s=void 0!==i?i:i=n(207432);function o({carouselInfo:e,disablePinTagButton:t,domain:n,hasMetTrustAndSafetyCheck:i,isEmployee:o,isHovered:d,isORBACProfileManager:c,isScenePin:u,isCollageEnabled:p,navLink:m,pinKey:g,showProductDetailPage:h,showStelaDotsOnScenePin:_}){let y=(0,a.Z)(s,g),f=(0,r.F)(),{access:x,aggregatedPinData:v,storyPinDataId:k}=y,b=!!v?.isShopTheLook,P=u&&d,S=i&&!p&&(b&&!P||u),w=!1,j=!1;d&&!P&&(w=!(j=!!m&&!_&&!p)&&!!n&&!!y.link&&!y.link.startsWith("https://i.pinimg.com")&&!(h&&e)&&!p);let I=!!y?.isGoLinkless&&f.checkExperiment("closeup_ctx_is_go_linkless_web").anyEnabled;j=j&&!I;let C=function({carouselInfo:e,hasMetTrustAndSafetyCheck:t,isORBACProfileManager:n,isScenePin:i,isCollageEnabled:a,isShopTheLook:r,pin:s,showProductDetailPage:o}){let{embed:d,isPromoted:c}=s,u=d&&"gif"===d.type;return!!t&&!i&&!r&&!c&&!u&&!n&&!a&&(o?!e||function({pin:e,carouselData:t}){let{index:n=0,carousel_slots:i=[]}=t,{image_signature:a="",images:r}=i[n];if(a.length>0)return!0;let s=e.imageSpec_564x||e.imageSpec_736x||e.imageSpec_orig||e.imageSpec_474x||e.imageSpec_236x;return s?.url===l.Z({images:r})?.url}({pin:s,carouselData:e.carouselData}):!e)}({carouselInfo:e,hasMetTrustAndSafetyCheck:i,isORBACProfileManager:c,isScenePin:u,isCollageEnabled:p,isShopTheLook:b,pin:y,showProductDetailPage:h}),T=!k&&!!x&&x.includes("tag")&&!t&&!p||c||!1,F=!!e,L=function({isShopTheLook:e,showFlashlightButton:t,showShopButton:n,showStelaDotsOnScenePin:i}){return t&&!i?"flashlight":n?e?"stl":"stela":"flashlight"}({showFlashlightButton:C,showShopButton:S,showStelaDotsOnScenePin:_,isShopTheLook:b});return{showCarouselControls:F,showCloseupShopDomainLinkButton:P,showDebugSignalsFeedbackButton:!!o,showDomainLink:w,showDomainLinkButton:j,showFlashlightButton:C,showPinTagButton:T,showShopButton:S,surfaceType:L}}},682753:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(883119),a=n(228132),l=n(785893);function r({children:e,paddingRight:t,paddingLeft:n,paddingBottom:r,marginTop:s,nodeRef:o}){return(0,l.jsx)(i.xu,{ref:o??void 0,dangerouslySetInlineStyle:{__style:{paddingRight:`${t??a.g9}px`,paddingLeft:n?`${n}px`:void 0,paddingBottom:r?`${r}px`:void 0,marginTop:s?`${s}px`:void 0}},children:e})}},674094:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(883119),a=n(80887),l=n(785893);let r=function(e){let{show:t,surface:n}=e,{closeupWithinMasonryEnabled:r}=(0,a.x4)();return r?(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{borderTop:t?"1px solid #E9E9E9":void 0,opacity:t?1:0}},"data-test-id":`${n}-divider`,width:"100%"}):t&&(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{borderTop:"1px solid #EFEFEF"}}})}},188568:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(667294),a=n(883119),l=n(772866),r=n(708130),s=n(561162),o=n(3879),d=n(80887),c=n(785893);function u({collapsed:e,displayViewState:t,forceTappableHeader:n,headerHeight:u,headerPaddingRight:p,headerPreview:m,heading:g,onClick:h,showArrow:_,surface:y}){let f=(0,r.ZP)(),{checkExperiment:x}=(0,s.F)(),{isAuthenticated:v}=(0,o.B)(),k=v?x("auth_closeup_redesign").anyEnabled:x("unauth_closeup_redesign").anyEnabled,{closeupWithinMasonryEnabled:b,isCloseupRelatedPinsAboveTheFoldEnabled:P,peekCloseupEnabled:S,viewportSize:w}=(0,d.x4)(),j=(0,l.rt)({peekCloseupEnabled:S,viewportSize:w,surface:y});return(0,c.jsx)(i.Fragment,{children:n||null!==t?(0,c.jsx)(a.iP,{disabled:!_,onTap:h,children:(0,c.jsx)(a.xu,{marginBottom:!e&&S?4:void 0,children:(0,c.jsxs)(a.kC,{alignItems:"center",dataTestId:"collapsible-header",direction:"row",flex:"grow",height:u,justifyContent:"between",children:[(0,c.jsx)(a.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:k||b?"300":"400",children:g}),(0,c.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingRight:p}},direction:"row",display:"flex",children:[e&&m,(_||b)&&(P?(0,c.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transform:e?"rotate(0deg)":"rotate(180deg)",transition:P?"all 600ms cubic-bezier(.25,1,.5,1)":void 0}},opacity:_?1:0,children:(0,c.jsx)(a.hU,{accessibilityLabel:f._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),dataTestId:"collapse-button",disabled:!_,icon:"arrow-down",size:"sm"})}):(0,c.jsx)(a.xu,{alignItems:"center","data-test-id":"collapse-button",display:"flex",justifyContent:"center",marginStart:m?-1:0,width:P?32:48,children:(0,c.jsx)(a.JO,{accessibilityLabel:f._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),color:"default",icon:e?"arrow-down":"arrow-up"})}))]})]})})}):(()=>{let e=(0,c.jsx)(a.X6,{accessibilityLevel:2,align:"start",id:"comments-heading",size:j?"300":"400",children:g});return j?(0,c.jsx)(a.xu,{marginBottom:4,children:e}):e})()})}},400556:function(e,t,n){n.d(t,{Z:()=>u});var i=n("883119"),a=n("383195"),l=n("10380"),r=n("304538"),s=n("785893");let o=({description:e,userMentionTags:t})=>(0,s.jsx)(r.Z,{description:e,mentionLinkColor:"link",shouldAdjustOffset:!0,shouldMakeHashtagLinksFromText:!0,textSize:l.n,userMentionTags:t});var d=n("80887");function c({description:e}){let{closeupWithinMasonryEnabled:t,peekCloseupEnabled:n}=(0,d.x4)();return(0,s.jsx)(i.xu,{children:(0,a.Z)({closeupWithinMasonryEnabled:t,peekCloseupEnabled:n,text:e})})}function u({description:e,userMentionTags:t}){let n=e=>e.replace(/\s+/g," "),a=e.split(/\n/)||[],l=({descriptionLine:t,userMentionTags:n})=>{let i=e.indexOf(t);return n.map(e=>e&&"number"==typeof e.offset&&e.offset>=i?{...e,offset:e.offset-i}:null).filter(e=>null!==e)||[]};return a.map((e,a)=>{let r=`description-broken-by-line-breaks-${a}`;if(!t||0===t.length)return(0,s.jsx)(c,{description:e},r);let d=l({descriptionLine:e,userMentionTags:t});return d.length>0?(0,s.jsx)(i.xu,{children:(0,s.jsx)(o,{description:n(e),userMentionTags:d})},r):(0,s.jsx)(c,{description:e},r)})}},548701:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(667294),a=n(883119),l=n(219300),r=n(558919),s=n(708130),o=n(342117),d=n(785893);function c({handlePause:e,handlePlay:t,musicAttributions:n,shouldMute:c,showEndCard:u}){let p=(0,s.ZP)(),{logContextEvent:m}=(0,l.v)(),[g,h]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{!u&&(n?.length||c)&&m({event_type:c?14600:14601,view_type:3,view_parameter:140})},[m,n,c,u]),u||!n?.length&&!c)return null;let _=()=>{t&&t(),h(!1)},y="";if(n?.length===1){let{artist:e="",title:t=""}=n[0];y=e&&t?`${e} - ${t}`:""}let f=(n?.length||0)>=2?(0,d.jsx)(a.xu,{children:(0,d.jsx)(a.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>{e&&e(),h(!0)},children:(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(a.xu,{marginEnd:2,children:(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.closeup.musicicon', 'Artist and song title for Pin music attribution'),color:"inverse",icon:c?"music-off":"music-on",inline:!0,size:12})}),(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:p._('View the playlist', 'web.closeup.musicAttibutionModal.entryPoint', 'Entry point for playlist modal')})]})})}):(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.pin.closeup.musicicon', 'Music icon for Pin music attribution'),color:"inverse",icon:c?"music-off":"music-on",inline:!0,size:12}),(0,d.jsx)(a.xu,{marginStart:2,overflow:"hidden",children:(0,d.jsxs)("span",{className:y.length>=50?"marquee":void 0,style:{display:"inline-block",maxWidth:y.length>=50?"260px":void 0},children:[(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:y}),(0,d.jsx)(o.Z,{unsafeCSS:`
                  .marquee {
                   animation: marquee 10s linear infinite;
                   animation-delay: 2s;
                  }

                  .marquee:hover {
                      animation-play-state: paused;
                  }


                 @keyframes marquee {
                   0% {
                     transform: translateX(0%);
                    }
                  50% {
                    transform: translateX(-100%);
                  }
                  100% {
                    transform: translateX(0%);
                  }
              }
            `})]})})]});return(0,d.jsxs)(i.Fragment,{children:[c?(0,d.jsx)(i.Fragment,{children:(0,d.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,d.jsx)(a.xu,{marginEnd:2,children:(0,d.jsx)(a.JO,{accessibilityLabel:p._('Music icon', 'web.closeup.musicMutedIcon', 'Music muted icon for Pin music attribution'),color:"inverse",icon:"music-off",inline:!0,size:12})}),(0,d.jsx)(a.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:p._('Audio not available in your location', 'web.closeup.musicAttribution', 'Informational message to tell user audio is not available in their location')})]})}):f,g&&(0,d.jsx)(r.ZP,{accessibilityModalLabel:p._('Artist and song title for this Pin', 'web.closeup.musicAttibutionModal', 'Artist and song title for Pin music attribution'),heading:(0,d.jsxs)(a.kC,{justifyContent:"between",children:[(0,d.jsx)(a.X6,{size:"500",children:p._('Playlist for this video', 'web.closeup.musicAttibutionModal.heading', 'Title for music attribution modal')}),(0,d.jsx)(a.hU,{accessibilityLabel:p._('Close modal button', 'web.closeup.musicAttibutionModal.closeButton', 'Close modal button for music attribution modal'),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:_,size:"sm"})]}),onDismiss:_,children:(0,d.jsx)(a.xu,{marginBottom:5,paddingX:5,paddingY:1,children:n?.map(({isrc:e,thumbnail_image_url:t,title:n,artist:i},l)=>d.jsxs(a.xu,{display:"flex",padding:1,children:[d.jsx(a.xu,{color:"darkWash",height:60,rounding:7,width:60,children:d.jsx(a.Ee,{alt:p._('Image of album art', 'web.closeup.musicAttibutionModal.albumArt', 'Alt text for image of album art for associated song'),color:"darkWash",naturalHeight:1,naturalWidth:1,src:t||""})}),d.jsxs(a.xu,{direction:"column",display:"flex",justifyContent:"center",paddingX:2,children:[d.jsx(a.xv,{weight:"bold",children:n??""}),d.jsx(a.xv,{size:"100",children:i??""})]})]},e||`${l}`))})})]})}},754358:function(e,t,n){n.d(t,{Z:()=>th});var i,a,l,r,s,o,d=n("883119"),c=n("785893");let u=({children:e})=>(0,c.jsx)(d.xu,{display:"flex",height:"100%",justifyContent:"center",padding:5,width:"100%",children:e});var p=n("555597"),m=n("708130"),g=n("561162"),h=n("3879"),_=n("278091"),y=n("228132"),f=n("80887");let x=({embedUrl:e,isWideVideo:t,paddingBottom:n="50%",shouldPadImage:i})=>{let a=(0,m.ZP)(),l=(0,h.B)(),r=t?y.KP:y.Gg,{checkExperiment:s}=(0,g.F)(),o=e?.replace("http://","https://");(l.isAuthenticated?s("embed_rewrite_youtube").anyEnabled:s("embed_rewrite_youtube_unauth").anyEnabled)&&o&&o.startsWith("https://www.youtube.com/embed/")&&(o=o.replace("https://www.youtube.com/embed/","https://www.youtube-nocookie.com/embed/"));let x=(0,c.jsx)(f.ZP.Consumer,{children:({showCloseupContentRight:e,closeupWithinMasonryEnabled:s,peekCloseupEnabled:u,viewportSize:m})=>{let g=(0,c.jsx)("div",{style:{height:0,overflow:"hidden",position:"relative",width:"100%",paddingBottom:n,..._.Z({isSideBySide:!t,isPadded:i,isRTL:l.isRTL,closeupWithinMasonryEnabled:s,peekCloseupEnabled:u})?.borderStyle},children:(0,c.jsx)("iframe",{allowFullScreen:!0,id:p.ZP.VIDEO_IFRAME_ID,src:o,style:{border:0,height:"100%",left:0,position:"absolute",top:0,width:"100%"},title:a._('Embedded content', 'Accessible content for the embedded content iframe', 'Accessible content for the embedded content iframe')})});return e&&"lg"===m?(0,c.jsx)(d.xu,{marginBottom:6,marginEnd:t||i?0:6,width:r,children:g}):g}});return i?(0,c.jsx)(u,{children:x}):x};var v=n("667294");n("167912"),n("422578");var k=n("538365"),b=n("674320"),P=n("131548");let S=void 0!==i?i:i=n(235118),w=({contextLogData:e,height:t,isFocused:n,videoList:i,onFocus:a,onUnfocus:l,pinId:r,pinKey:s,width:o})=>{let u=(0,b.Z)(),p=(0,P.Z)(S,s),{V_720P:m,V_HLSV4:g,V_HLSV3_MOBILE:h}=i,{height:_=1,width:y=1,thumbnail:f}=m||g||h||{},x=_/y,w=x;"number"==typeof t&&"number"==typeof o&&(w=t/o),(0,v.useEffect)(()=>{n?a&&a():l&&l()},[n,a,l]),(0,v.useEffect)(()=>{n&&u({component:e.component,event_type:13,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[n,e,u]);let j=(0,v.useCallback)(()=>{u({component:e.component,event_type:3621,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[e,u]);return(0,c.jsx)(d.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,c.jsx)(d.xu,{width:`${100*Math.min(w/x,1)}%`,children:(0,c.jsx)(k.Z,{contextLogData:e,customThumbnail:f,disabled:!n,loop:!0,muted:!1,onPlay:j,pinId:r,pinKey:p,preferMp4:!0,showControls:"hover",variant:"default",video:{mp4:m,hls:g,hlsv3:h}})})})};var j=n("219300"),I=n("927998"),C=n("657204"),T=n("431710"),F=n("536312"),L=n("126052"),A=n("343210");let K=({fit:e,highResOnly:t,lowResOnly:n,onError:i,onLoad:a,slot:l,slotIndex:r})=>{let s=(0,m.ZP)(),{details:o=""}=l,{url:u="",width:p=1,height:g=1}=(0,L.Z)(l.images)||{};return(0,c.jsx)(d.Ee,{alt:(0,A.GH)(o,s,r),fit:e,naturalHeight:g??1,naturalWidth:p??1,onError:i,onLoad:a,src:u??"",srcSet:(0,A.gA)({slot:l,lowResOnly:n,highResOnly:t})})},Z=void 0!==a?a:a=n(54163);function R({carouselData:e,displayHeight:t,displayWidth:n,pinKey:i}){let{logContextEvent:a}=(0,j.v)(),{closeupWithinMasonryEnabled:l,isCloseupMediaViewerOpen:r,pdpCarouselSlotToPaneRatio:s,showProductDetailPage:o,peekCloseupEnabled:u}=(0,f.x4)(),{index:p=0}=e,{pauseAutoplay:m,setCurrentVideo:g}=(0,T.I)(),h=(0,P.Z)(Z,i),{entityId:_}=h,y=(0,v.useRef)(null),x=(0,C.Z)(h),k=h.isEligibleForPdp?x():void 0,b=h.isEligibleForPdp?144:void 0,S=h.isEligibleForPdp?3:void 0,L=(0,I.E)(),A=(0,v.useCallback)(e=>{L&&e>=1&&L.markConstraintComplete("image")},[L]),R=(0,v.useMemo)(()=>({viewParameter:o?144:156,view:3,component:o?14012:179,objectId:_}),[_,o]),E=(0,v.useCallback)(()=>{g({pinId:_,isPromoted:!1})},[g,_]),D=(0,v.useCallback)(()=>{m({pinId:_,isPromoted:!1})},[m,_]);(0,v.useEffect)(()=>{e.carousel_slots?.find(e=>e.videos?.video_list)&&a({event_type:120,view_type:R.view,view_parameter:R.viewParameter,component:R.component,object_id_str:R.objectId})},[a,e.carousel_slots,R]);let z=y.current&&u;return(0,c.jsx)(d.xu,{ref:y,height:l?"100%":void 0,children:!u||z?(0,c.jsx)(F.Z,{containerRef:y.current,contextLogData:k,gap:1===s?0:4,height:t,id:_,index:p,responsiveSizing:l,slideWidth:n,view:S,viewParameter:b,widthRatio:s,children:e.carousel_slots?.map((i,a)=>{let o,u;return i.videos?.video_list?(o=c.jsx(w,{contextLogData:R,height:t,isFocused:p===a,onFocus:E,onUnfocus:D,pinId:_,pinKey:h,videoList:i.videos.video_list,width:n*s}),u=i.videos.id):(o=c.jsx(d.xu,{dangerouslySetInlineStyle:{__style:{viewTransitionName:r||a!==e?.index?void 0:`pin-closeup-${_}`}},height:"inherit",width:"inherit",children:c.jsx(K,{fit:"contain",onLoad:()=>A(a),slot:i,slotIndex:a})}),u=i.image_signature),c.jsx(d.zd,{height:"100%",wash:1!==s,width:l?"inherit":void 0,children:o},`${_}-${u||a}`)})||[]}):null})}var E=n("216981"),D=n("772866"),z=n("172119"),M=n("181072");let B=({children:e,containerWidth:t,isCloseupMediaViewerOpen:n,isCloseupMediaViewerEnabled:i,pinId:a})=>{let{isCloseupRelatedPinsAboveTheFoldEnabled:l}=(0,f.x4)(),{fiftyPercentWidth:r}=(0,D.Re)();return i||l?(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{viewTransitionName:n?void 0:`pin-closeup-${a}`}},height:"100%",maxWidth:r,overflow:"hidden",rounding:l?void 0:4,width:t,children:e}):(0,c.jsx)(d.zd,{wash:!0,children:e})};function O({containerWidth:e,dominantColor:t,imageWithPreview:n,pinId:i,fit:a}){let l=(0,I.E)(),r=(0,v.useCallback)(()=>{l&&l.markConstraintComplete("image")},[l]),{isCloseupMediaViewerEnabled:s}=(0,z.Z)({isShufflePin:!1}),{isCloseupMediaViewerOpen:o,closeupWithinMasonryEnabled:u,isCloseupRelatedPinsAboveTheFoldEnabled:p}=(0,f.x4)();return(0,c.jsx)(B,{containerWidth:u?"100%":e,isCloseupMediaViewerEnabled:!!s,isCloseupMediaViewerOpen:o,pinId:i,children:(0,c.jsx)(d.Ee,{alt:n.previewImage?.alt??"",color:t,fetchPriority:"high",fit:p?a:void 0,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,role:"img",src:n.previewImage?.src??"",children:""!==n.mainImage.src&&(0,c.jsx)(d.xu,{"data-test-id":"closeup-image-main",height:"100%",overflow:"hidden",width:"100%",children:(0,c.jsx)(M.Z,{_fixCompletedOnLoad:u,alt:n.mainImage.alt,color:t,fetchPriority:"high",fit:a,naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth,onLoad:r,src:n.mainImage.src})})})})}var V=n("616550"),H=n("496331"),U=n("45663"),N=n("751203");let W=({children:e,imageWidth:t,name:n})=>(0,c.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...t?{display:"flex",justifyContent:"center",justifySelf:"center",width:t}:{},pointerEvents:"none"}},"data-test-id":`experimental-closeup-image-overlay-layer-${n}`,left:!0,position:"absolute",right:!0,top:!0,children:e});var $=n("983014"),G=n("735276"),X=n("86485"),q=n("786609"),Y=n("673695"),J=n("959474"),Q=n("479830");let ee=({carouselData:e,containerWidth:t,slotWidth:n})=>{let{index:i,carousel_slots:a}=e||{},l=Math.floor(n);return void 0===i||!a||i>=a.length-1?0:t-l};function et({carouselData:e,carouselSlotToPaneRatio:t,children:n,disableAnimations:i=!1,displayWidth:a,hide:l}){let r=(0,v.useCallback)(()=>ee({carouselData:e,containerWidth:a,slotWidth:a*t}),[e,a,t]),[s,o]=(0,v.useState)(r()),[u,p]=(0,v.useState)(i),[m,g]=(0,v.useState)(),h=(0,v.useCallback)(()=>{o(r())},[r]),_=()=>{p(!0)},y=()=>{p(!1)};return(0,v.useEffect)(()=>{let e=!0;return i||(y(),g(t=>(clearTimeout(t),setTimeout(()=>{e&&(h(),l||_())},500)))),()=>{e=!1}},[e?.index,i,h,l]),(0,v.useEffect)(()=>()=>clearTimeout(m),[m]),(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{marginRight:s,transition:i?void 0:"opacity 500ms, visibility 500ms ease-in-out",visibility:u?"visible":"hidden"}},"data-test-id":"animated-fab",opacity:u?1:0,children:n})}var en=n("759425"),ei=n("6278");let ea=(0,v.lazy)(()=>n.e("12780").then(n.bind(n,743288))),el=(0,v.lazy)(()=>n.e("12780").then(n.bind(n,233503))),er=(0,v.lazy)(()=>n.e("8149").then(n.bind(n,622982))),es=(0,v.lazy)(()=>n.e("74993").then(n.bind(n,822915))),eo=(0,v.lazy)(()=>n.e("90980").then(n.bind(n,220840))),ed=(0,v.lazy)(()=>n.e("81568").then(n.bind(n,226441))),ec=(0,v.lazy)(()=>n.e("51339").then(n.bind(n,622678))),eu=(e,t,n,i)=>i?n*e/i:t,ep=({animateShopButton:e,carouselInfo:t,displayHeight:n,displayWidth:i,domain:a,handleMediaButtonClick:l,hasStelaResults:r,isCloseupRelatedPinsAboveTheFoldEnabled:s=!1,isHovered:o,link:u,mediaViewerExpandButtonRef:p,navigationWrapper:m,onShopButtonAnimationComplete:h,onStelaDotAnimationComplete:_,pin:y,searchQuery:x,showAnimatedExploreCta:k,showCarouselControls:P,showCarouselEllipsis:S,showCloseupShopDomainLinkButton:w,showDebugSignalsFeedbackButton:j,showDomainLink:I,showDomainLinkButton:C,showFlashlightButton:T,showProductDetailPage:F,showPinTagButton:L,showShopButton:A,showStelaDotsOnScenePin:K,stelaDotAnimationType:Z,surfaceType:R,trafficSource:E})=>{let{clientTrackingParams:D,pdpCarouselSlotToPaneRatio:M}=(0,f.x4)(),{mainImage:B}=(0,$.r)(),{checkExperiment:O}=(0,g.F)(),{closeupWithinMasonryEnabled:ee}=(0,f.x4)(),ep=(0,b.Z)(),em=(0,V.k6)(),eg=(0,J.Z)(),{isCornerButtonEnabled:eh}=(0,z.Z)({isShufflePin:!!y?.shuffle}),e_=!y.is_eligible_for_pdp&&T,ey=y.visual_objects,ef=O("web_pin_level_landing_feed").anyEnabled,ex=e_&&O("web_stela_dots_on_flashlight").anyEnabled,ev=y&&y.origin_pinner&&eg.isAuth&&eg.id===y.origin_pinner.id||!(y?.is_go_linkless&&O("closeup_ctx_is_go_linkless_web").anyEnabled),ek=(0,ei.zX)(y.digital_media_source_type)&&O("closeup_ctx_ai_metadata_label_web").anyEnabled,eb=r&&ex,eP=void 0!==ey&&eb&&O("web_remove_stela").anyEnabled,eS=(C||w)&&ev,ew=eS&&u.startsWith("https://i.pinimg.com")&&"control"===O("closeup_media_viewer").group,ej=w||eb&&o,eI=(0,G.Z)({pinKey:{type:"deprecated",data:y},surfaceType:"stl"===R?"stela":R,topLevelTrafficSource:E}),eC=ef?(0,Q.Z)({surfaceType:"stl"===R?"stela":R,pinId:y.id,isProductPage:!1,trafficSource:E}):eI,eT=({event:e})=>{["flashlight","stela"].includes(R)&&ep({event_type:101,component:128,element:234,view_type:3,aux_data:{image_signature:y.image_signature}}),e?.stopPropagation(),eC&&null!=R?em.push(eC):em.push((0,Q.Z)({pinId:y.id,isProductPage:!1,surfaceType:R}))},eF=ee?U.X:U.Q,eL=eu(n,i,B.width,B.height),eA=!K&&k;return(0,c.jsxs)(v.Fragment,{children:[I&&(0,c.jsx)(W,{name:"domain-link",children:(0,c.jsxs)(d.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.JO,{accessibilityLabel:"",color:"inverse",icon:"arrow-up-right",size:16})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.xv,{color:"inverse",weight:"bold",children:a})})]})}),P&&t&&(0,c.jsxs)(W,{name:"carousel-controls",children:[(0,c.jsx)(X.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselSliders",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(el,{backNode:F?(0,c.jsx)(en.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"back",showFab:o}):void 0,carouselData:{carouselSlots:t.carouselData.carousel_slots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:t.carouselData.id??"",index:t.carouselData.index},carouselIndex:t.carouselData&&t.carouselData.index,componentType:t.componentType,forwardNode:F?(0,c.jsx)(en.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"forward",showFab:o}):void 0,handleCarouselSwipe:t.handleCarouselSwipe,pinKey:{type:"deprecated",data:y},viewParameter:t.viewParameter,viewType:t.viewType})})}),(0,c.jsx)(d.xu,{alignItems:"end",bottom:!0,display:"flex",height:405,justifyContent:"center",left:!0,padding:eF,position:"absolute",right:!0,children:!C&&S&&(0,c.jsx)(X.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselEllipsis",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(q.Z,{children:(0,c.jsx)(ea,{carouselData:{carouselSlots:t.carouselData.carousel_slots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:t.carouselData.id??"",index:t.carouselData.index},carouselIndex:t.carouselData&&t.carouselData.index,componentType:t.componentType,handleCarouselSwipe:t.handleCarouselSwipe,isCloseup:!0,pinKey:{type:"deprecated",data:y},variant:"default",viewParameter:t.viewParameter,viewType:t.viewType})})})})})]}),(K||eb&&!eP)&&(0,c.jsx)(W,{imageWidth:ee?eL:void 0,name:"stela-container",children:(0,c.jsx)(X.Z,{name:"SafeSuspense_CloseupImageOverlay_StelaContainerWrapper",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(eo,{alwaysShow:ej,disableSelected:!0,enablePointerEvents:r&&"inOut"===Z||ej,height:n,isFlashlightPin:eb,onStelaDotAnimationComplete:_,pinKey:{type:"deprecated",data:y},searchQuery:x,stelaDotAnimationType:Z,trafficSource:E,width:ee?eL:i})})})}),(A&&R||eA)&&(0,c.jsxs)(W,{name:"shop-button",children:[(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 60px)"}}}),(0,c.jsx)(d.Le,{bottom:12,children:(0,c.jsx)(d.xu,{display:"flex",justifyContent:"end",paddingX:eF,children:(0,c.jsx)(X.Z,{name:"SafeSuspense_CloseupImageOverlay_ShopButton",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(q.Z,{children:eA?(0,c.jsx)(et,{carouselData:t?.carouselData,carouselSlotToPaneRatio:M,disableAnimations:!0,displayWidth:i,hide:!s&&(!T||!!t&&0!==t.carouselData.index),children:(0,c.jsx)(ed,{actionUrl:eC,animateOnRender:!0,animateShopButton:e,dataTestId:"shop-button",id:y.id,imageSignature:y.image_signature,onAnimationComplete:h,onButtonClick:eT,showAnimatedExploreCta:k,surfaceType:R})}):(0,c.jsx)(ed,{actionUrl:eC,animateOnRender:!0,animateShopButton:e,dataTestId:"shop-button",id:y.id,imageSignature:y.image_signature,onAnimationComplete:h,onButtonClick:eT,showAnimatedExploreCta:k,surfaceType:R})})})})})})]}),eh&&(0,c.jsxs)(W,{name:"media-viewer-button",children:[(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 116px)"}}}),(0,c.jsx)(d.Le,{bottom:72,children:(0,c.jsx)(d.xu,{display:"flex",justifyContent:"end",paddingX:eF,children:(0,c.jsx)(et,{carouselData:t?.carouselData,carouselSlotToPaneRatio:M,disableAnimations:!!s||!!(e_&&R),displayWidth:i,hide:!s&&!!t&&t.carouselData?.index!==0,children:(0,c.jsx)(X.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(q.Z,{children:(0,c.jsx)(d.xu,{ref:p,children:(0,c.jsx)(ed,{animateOnRender:!1,animateShopButton:e,dataTestId:"media-viewer-button",id:y.id,imageSignature:y.image_signature,onAnimationComplete:h,onButtonClick:l,surfaceType:"media-viewer"})})})})})})})})]}),j&&(0,c.jsxs)(W,{name:"debug-signals-feedback",children:[(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 115px)"}}}),(0,c.jsx)(d.Le,{bottom:12,children:(0,c.jsx)(d.xu,{display:"flex",justifyContent:"end",paddingX:eF,children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(ec,{pinKey:{type:"deprecated",data:y}})})})})]}),!K&&!k&&(0,c.jsxs)(W,{name:"flashlight-button",children:[(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 60px)"}}}),(0,c.jsx)(d.Le,{bottom:16,children:(0,c.jsx)(d.xu,{display:"flex",justifyContent:"end",paddingX:eF,children:e_&&R?(0,c.jsx)(X.Z,{name:"SafeSuspense_CloseupImageOverlay_FlashlightButton",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(q.Z,{children:(0,c.jsx)(ed,{actionUrl:T?eC:void 0,animateOnRender:!0,animateShopButton:e,dataTestId:"shop-button",id:y.id,imageSignature:y.image_signature,onAnimationComplete:h,onButtonClick:eT,surfaceType:R})})})}):(0,c.jsx)(et,{carouselData:t?.carouselData,carouselSlotToPaneRatio:M,disableAnimations:!!s,displayWidth:i,hide:!s&&(!T||!!t&&0!==t.carouselData.index),children:(0,c.jsx)(X.Z,{name:"SafeSuspense_CloseupImageOverlay_FlashlightButton",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(q.Z,{children:(0,c.jsx)(er,{actionUrl:T?eC:void 0,closeupImageHovered:!C&&o,pinId:y.id,variant:"default"})})})})})})})]}),y.digital_media_source_type&&ek&&(0,c.jsx)(W,{name:"ai-generated-label",children:(0,c.jsx)(H.Z,{closeupWithinMasonryEnabled:ee,digitalMediaType:y.digital_media_source_type,shouldMoveAILabel:ew&&o})}),eS&&(0,c.jsxs)(W,{name:"domain-link-button",children:[(0,c.jsx)(d.xu,{height:"calc(100% - 60px)"}),(0,c.jsx)(d.Le,{bottom:12,children:(0,c.jsx)(d.xu,{display:"flex",justifyContent:"start",maxWidth:"calc(100% - 88px)",paddingX:eF,children:(0,c.jsx)(X.Z,{name:"SafeSuspense_DomainLinkButtonWrapper_DomainLinkButton",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(q.Z,{children:m((0,c.jsx)(N.Z,{clientTrackingParams:D,domain:a,link:u,pinKey:{type:"deprecated",data:y},trafficSource:E}))})})})})})]}),L&&(0,c.jsx)(W,{name:"tag-button",children:(0,c.jsx)(X.Z,{name:"SafeSuspense_CloseupImageOverlay_CloseupTagButton",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(q.Z,{children:(0,c.jsx)(es,{pin:y})})})})})]})};var em=n("869140"),eg=n("71840"),eh=n("828495");let e_=void 0!==l?l:l=n(874466),ey=(e,t)=>{let n=400*t,i=Math.max(e.width/n,e.height/n);if(i>1)return createImageBitmap(e,{resizeQuality:"high",resizeHeight:e.height/i,resizeWidth:e.width/i});{let t=1/i;return createImageBitmap(e,{resizeQuality:"high",resizeHeight:e.height*t,resizeWidth:e.width*t})}},ef=(e,t,n,i)=>{let a=1.5*i,l=20*i;e.fillStyle="#D9D9D9";for(let i=l/2;i<t;i+=l)for(let t=l/2;t<n;t+=l)e.beginPath(),e.arc(t,i,a,0,2*Math.PI,!0),e.fill()},ex=(e,t,n)=>{e.sort((e,t)=>t.kind-e.kind).forEach(e=>{t.beginPath(),e.points.forEach((i,a)=>{let l=e.points[(a+1)%e.points.length],r=i.x+n,s=i.y+n;if(0===a)t.moveTo(r,s);else{let e=(r+(l.x+n))/2,i=(s+(l.y+n))/2;t.quadraticCurveTo(r,s,e,i)}}),t.closePath(),t.stroke()})},ev=async(e,t,i)=>{let a=(0,eh.Z)(e_,e);if(!a.url)return;let l=t.getContext("2d");ef(l,t.height,t.width,i);let[r,s]=await Promise.allSettled([n.e("10859").then(n.bind(n,288638)),fetch(a.url)]);if("fulfilled"!==r.status||"fulfilled"!==s.status)return;let[o]=await Promise.allSettled([s.value.blob(),r.value.initLibrary()]);if("fulfilled"!==o.status)return;let d=await createImageBitmap(o.value),{ContourTracer:c}=r.value,u=new c().trace(d),p=.07*Math.max(d.width,d.height),m=p/2,g=document.createElement("canvas");g.width=d.width+2*m+11,g.height=d.height+2*m+11;let h=g.getContext("2d");h.clearRect(0,0,g.width,g.height),h.strokeStyle="white",h.lineWidth=p,h.shadowColor="rgba(0, 0, 0, 0.7)",h.shadowBlur=5,h.shadowOffsetX=0,h.shadowOffsetY=.5,h.clearRect(0,0,t.width,t.height),ex(u,h,m+5.5),h.shadowColor="transparent",ex(u,h,m+5.5);let _=await createImageBitmap(g),y=document.createElement("canvas");y.width=_.width,y.height=_.height;let f=y.getContext("2d");f.drawImage(_,0,0),f.drawImage(d,m+5.5,m+5.5);let x=await createImageBitmap(y),v=await ey(x,i),k=(t.width-v.width)/2,b=(t.height-v.height)/2;l.drawImage(v,k,b)},ek=void 0!==r?r:r=n(783072),eb=({pinKey:e,maxWidth:t})=>{let n=(0,P.Z)(ek,e),i=(0,v.useRef)(null),a=(0,v.useRef)(!1),l="undefined"!=typeof window?window.devicePixelRatio:2,r=506*l;if(!a.current&&i.current){a.current=!0;let{shuffleAsset:e}=n,t=i.current,r=e?.cutoutImages;if(!r)return null;ev(r,t,l)}return(0,c.jsx)("canvas",{ref:i,height:r,style:{height:506,width:506,maxWidth:t},width:r})};var eP=n("353063"),eS=n("544593"),ew=n("224706"),ej=n("286502"),eI=n("182367"),eC=n("544358"),eT=n("69103"),eF=n("522282"),eL=n("417573"),eA=n("746152"),eK=n("1916");let eZ=(0,n("52302").Z)(()=>Promise.all([n.e("74924"),n.e("63390"),n.e("73879"),n.e("45303"),n.e("71309")]).then(n.bind(n,972989)),void 0,"app-common-react-components-closeup-CloseupShuffle-CloseupShuffle");function eR({onClick:e,isHovered:t,pin:n,searchQuery:i,shouldPadImage:a,trafficSource:l,viewParameter:r,isORBACProfileManager:s,handleCollageOverlayToggle:o,handleMediaButtonClick:u}){let p,m;let{stelaDotAnimationType:g,onStelaDotAnimationComplete:y,animateShopButton:x,onShopButtonAnimationComplete:k,originalImageUrl:b,imageSignature:P,link:S,hasStelaResults:w,isScenePin:j,showStelaDotsOnScenePin:I,disablePinTagButton:T,pdpCarouselSlotToPaneRatio:F,showProductDetailPage:L,maxCloseupImageWidth:A,imageWithPreview:K,showAnimatedExploreCta:Z}=(0,eS.Z)({isHovered:t,pinKey:{type:"deprecated",data:n}}),z=(0,J.Z)(),{mainImage:M,carouselInfo:B}=(0,$.r)(),V=(0,eI.Z)(),H=(0,ej.Z)(),U=(0,v.useRef)(null),N=(0,v.useRef)(null),{domain:W,shuffle:G,shuffle_asset:X}=n,q=!!B?.carouselData,{closeupWithinMasonryEnabled:Y,isCloseupRelatedPinsAboveTheFoldEnabled:Q,peekCloseupEnabled:ee,clientTrackingParams:et,showCloseupContentRight:en,viewportSize:ei}=(0,f.x4)(),{isRTL:ea}=(0,h.B)(),{borderStyle:el}=(0,_.Z)({isSideBySide:en,isPadded:a,isRTL:ea,closeupWithinMasonryEnabled:Y,peekCloseupEnabled:ee}),{height:er,width:es}=(0,E.Z)({carouselData:B?.carouselData,mainImage:M,maxCloseupImageWidth:A,shouldPadImage:a,imageToDisplayWidthRatio:F,closeupWithinMasonryEnabled:Y}),[eo,ed]=(0,v.useState)({width:es,height:er}),ec=(0,v.useCallback)(()=>{let e=es>er?er/es:1,t=U.current;if(!t)return;let n=t.offsetWidth*e;ed(e=>{let i={height:t.offsetHeight||n,width:t.offsetWidth};return e.height!==i.height||e.width!==i.width?i:e})},[er,es]);(0,eA.Z)(ec,U);let eu=!!G&&(V().isShuffleRendererEnabled||V().isCollageEnabled),eh=!!X&&H(),e_=(0,eC.Z)({isHiddenPin:n.is_hidden,isUnsafePin:n.is_unsafe}),{currentDomain:ey}=(0,eP.Wp)({carouselData:n.carousel_data&&{carouselSlots:n.carousel_data.carousel_slots&&n.carousel_data.carousel_slots.map(e=>({domain:e.domain,link:e.link})),index:n.carousel_data?.index},domain:n.domain}),ef=ey||W,ex={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0};if(B&&B.carouselData&&B.carouselData.id){let{carousel_slots:e=[],id:t,index:n=0}=B.carouselData;p=e[n]&&e[n].link,ex.carousel_slot_id=e[n]&&e[n].id,ex.carousel_data_id=t,ex.carousel_slot_index=n,ef=e[n]&&e[n].domain||ef}let ev=(0,C.Z)({type:"deprecated",data:n})();ev&&(ex.commerce_data=ev);let ek=p||S||b||"",{dominant_color:eR}=n,eE=(0,eF.Z)({href:{pathname:ek,state:{trackingParams:et}},target:"blank",clientTrackingParams:et,externalData:{auxData:ex,pin:n&&{attributionSourceId:n.attribution_source_id,board:n.board&&{url:n.board.url},campaignId:n.campaign_id,entityId:n.id,isDownstreamPromotion:n.is_downstream_promotion,isPromoted:n.is_promoted,pinner:n.pinner&&{username:n.pinner.username},pinPromotionId:n.pin_promotion_id,promoter:n.promoter&&{entityId:n.promoter.id},storyPinDataId:n.story_pin_data_id,trackingParams:n.tracking_params,advertiserId:n.advertiser_id}}}),eD=(0,c.jsx)(O,{containerWidth:es,dominantColor:Q?D.yc:eR||"",fit:"contain",imageWithPreview:K,pinId:n.id}),ez=eD;q&&(ez=(0,c.jsx)(R,{carouselData:B.carouselData,displayHeight:Q?eo?.height:er,displayWidth:Q?eo?.width:es,pinKey:{type:"deprecated",data:n}})),eu&&(ez=(0,c.jsx)(eZ,{clientTrackingParams:et,fallback:eD,handleCollageOverlayToggle:o,naturalHeight:K.naturalHeight,naturalWidth:K.naturalWidth,pinId:n.id,shuffleId:G?.id,children:eD}));let{maxHeight:eM,fiftyPercentWidth:eB,fiftyPercentHeight:eO}=(0,D.Re)(),{maxHeight:eV}=(0,ew.Z)({pinKey:{type:"deprecated",data:n}});eh&&(ez=(0,c.jsx)(eb,{maxWidth:eB,pinKey:{type:"deprecated",data:n}},n.id));let{showCarouselControls:eH,showCloseupShopDomainLinkButton:eU,showDebugSignalsFeedbackButton:eN,showDomainLink:eW,showDomainLinkButton:e$,showFlashlightButton:eG,showPinTagButton:eX,showShopButton:eq,surfaceType:eY}=(0,eg.Z)({carouselInfo:B,disablePinTagButton:T,domain:ef||"",isEmployee:z.isAuth&&!!z.isEmployee,isHovered:t,isScenePin:j,isCollageEnabled:eu||eh,hasMetTrustAndSafetyCheck:e_,navLink:ek,pinKey:{type:"deprecated",data:n},showProductDetailPage:L,showStelaDotsOnScenePin:I,isORBACProfileManager:s}),eJ=es,eQ=er;return eh?(eQ=506,eJ=506):Y&&(eQ=eo.height,eJ=eo.width),Q&&(Y?m=eV:ee&&(m="sm"===ei?eO:eM)),(0,c.jsx)(eK.V,{children:(0,c.jsxs)(d.xu,{ref:U,alignSelf:Y?"center":void 0,dangerouslySetInlineStyle:{__style:{aspectRatio:Q?`${es}/${er}`:void 0,backgroundColor:Q?D.yc:void 0}},"data-test-id":"closeup-body-image-container",height:Y?void 0:eQ,maxHeight:Q?m:void 0,maxWidth:eB,position:"relative",width:Q?"100%":eJ,children:[(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{...Y?{}:el}},"data-test-id":"closeup-image",height:Q?"100%":void 0,overflow:"hidden",width:Q?"100%":void 0,children:ez}),(0,c.jsx)(ep,{animateShopButton:x,carouselInfo:B,displayHeight:eQ,displayWidth:eJ,domain:ef??W??"",handleMediaButtonClick:u,hasStelaResults:w,imageSignature:P,isCloseupRelatedPinsAboveTheFoldEnabled:Q,isHovered:t,link:ek,mediaViewerExpandButtonRef:N,navigationWrapper:t=>(0,c.jsx)(em.Z,{href:ek,onClick:e,onNavigation:eE,children:t}),onShopButtonAnimationComplete:k,onStelaDotAnimationComplete:y,pin:n,searchQuery:i,showAnimatedExploreCta:Z,showCarouselControls:eH,showCarouselEllipsis:!L,showCloseupShopDomainLinkButton:eU,showDebugSignalsFeedbackButton:eN,showDomainLink:eW,showDomainLinkButton:e$,showFlashlightButton:eG,showPinTagButton:eX,showProductDetailPage:L,showShopButton:eq,showStelaDotsOnScenePin:I,stelaDotAnimationType:g,surfaceType:eY,trafficSource:l,viewParameter:r}),N&&(0,c.jsx)(d.mh,{zIndex:eL.lI,children:(0,c.jsx)(eT.default,{anchor:N.current,experienceIds:[506692],flyoutSize:"md",idealDirection:"up",placementId:12,showCaret:!0,textWeight:"normal"})})]})})}var eE=n("548701"),eD=n("100715"),ez=n("870912"),eM=n("282290"),eB=n("482678"),eO=n("119195"),eV=n("764385"),eH=n("236256"),eU=n("818194"),eN=n("430732");let eW=(e,t)=>e?13799:0===t?227:228,e$=({pages:e,viewType:t,viewParameter:n,pinId:i})=>{let{clearSeekTime:a}=(0,eO.RC)(),{setIdeaPinActivePage:l}=(0,eN.Ut)(),[r,s]=(0,v.useState)(0),[o,d]=(0,v.useState)(!0),[c,u]=(0,v.useState)(!0),[p,m]=(0,v.useState)(!1),[g,_]=(0,v.useState)(null),{isCloseupRelatedPinsAboveTheFoldEnabled:y}=(0,f.x4)(),x=(0,b.Z)(),k=e[r],P=(0,eM.g)(),S=(0,I.E)(),w=(0,v.useRef)(null),{blocks:[j]=[null]}=(0,eD.Z)({storyPinBlocks:k?.blocks||[],blocksToRender:[eB.h8.VIDEO]}),{seekTimes:C}=(0,eO.Hx)(),T=C&&C[i],F=j?.type===eB.h8.VIDEO&&j?.video,L=(0,h.B)().locale.toLowerCase(),A=F&&(F?.video_list?.V_720P?.captions_urls||F?.video_list?.V_HLSV3_MOBILE?.captions_urls)||{},K=L&&A[L]||Object.values(A)[0]||"",Z=()=>{S&&(S.addBinaryAnnotation("page.current.index",r,"I16"),S.addBinaryAnnotation("page.count",e.length,"I16"),S.addBinaryAnnotation("view.type",t,"I32"),S.addBinaryAnnotation("view.parameter",n,"I32"))},R=(0,v.useCallback)(i=>{S&&S.abort("startNewPwt"),P&&(P.abort("startNewPwt"),P.start(),P.addBinaryAnnotation("page.current.index",i,"I16"),P.addBinaryAnnotation("page.count",e.length,"I16"),P.addBinaryAnnotation("view.type",t,"I32"),P.addBinaryAnnotation("view.parameter",n,"I32"))},[e.length,S,P,n,t]),E=(0,v.useCallback)(e=>{e&&e instanceof eV.B7&&(e.clear(),e=null)},[]),D=(0,v.useCallback)(t=>{E(w.current),!F&&e.length>1&&(w.current=new eV.B7(e=>{_({currentTime:e<1?e:1,duration:1})},()=>{t<e.length-1?(E(w.current),M(t+1)):(m(!0),d(!1))},ez.oN))},[e]),z=(0,v.useCallback)(e=>{_({currentTime:0,duration:1}),D(e)},[D]);(0,eH.Z)(()=>(y&&Z(),z(r),()=>{w.current&&w.current instanceof eV.B7&&w.current.clear()}));let M=(0,v.useCallback)(e=>{o||d(!0),p&&m(!1),z(e),e!==r&&a(),s(e),l(e),R(e)},[r,a,z,o,l,p,R]);(0,v.useEffect)(()=>{if(p&&m(!1),w.current&&T){let e=w.current;e.pause(),e.remaining=ez.oN-T*eU.gJ,_({currentTime:T/ez.P6,duration:1})}},[T]);let B=()=>{d(!1),w.current&&w.current.pause(),x({event_type:9324,view_type:t,view_parameter:n,component:eW(p,r),object_id_str:i,aux_data:{story_pin_page_id:r}})},O=()=>{if(d(!0),w.current){let e=w.current;T&&T>0&&a(),e.resume()}else g||z(r);m(!1),x({event_type:9323,view_type:t,view_parameter:n,component:eW(p,r),object_id_str:i,aux_data:{story_pin_page_id:r}})},V=()=>{r<e.length-1&&(M(r+1),x({event_type:101,view_type:t,view_parameter:n,component:eW(p,r),element:12261,object_id_str:i}))};return{activePageIndex:r,captions:K,currentPage:k,handleMute:()=>{u(e=>!e)},handlePageChange:M,handlePause:B,handlePausePlay:()=>{p||(o?B():O())},handlePlay:O,handleUpdateVideoInfo:e=>{_({currentTime:e?.currentTime??0,duration:e?.duration??1})},handleVideoEnd:t=>{t===e.length-1&&(m(!0),d(!1),l(0)),t===r&&V()},handleVideoScrubbingNewPage:e=>{p&&m(!1),z(e),s(e),l(e),R(e)},handleWatchAgain:()=>{M(0)},isActive:o,isSeeking:!!T,mute:c,progressInfo:g,setMute:u,showEndCard:p}};var eG=n("717798"),eX=n("178458"),eq=n("274256"),eY=n("820368"),eJ=n("170914"),eQ=n("729674"),e0=n("517534"),e1=n("760186"),e2=n("620793");let e8={width:508,height:640},e3={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",paddingTop:"30px",top:0};function e6({onClick:e,isHovered:t,pin:n,searchQuery:i,shouldPadImage:a,trafficSource:l,viewParameter:r,isORBACProfileManager:s,handleMediaButtonClick:o}){let u;let{stelaDotAnimationType:p,onStelaDotAnimationComplete:m,animateShopButton:g,onShopButtonAnimationComplete:y,originalImageUrl:x,imageSignature:k,link:b,hasStelaResults:P,isScenePin:S,showStelaDotsOnScenePin:w,disablePinTagButton:j,maxCloseupImageWidth:I,imageWithPreview:T,showAnimatedExploreCta:F}=(0,eS.Z)({pinKey:{type:"deprecated",data:n},isHovered:t}),L=(0,J.Z)(),{closeupWithinMasonryEnabled:A,isCloseupRelatedPinsAboveTheFoldEnabled:K,peekCloseupEnabled:Z,viewportSize:R,clientTrackingParams:z,showCloseupContentRight:M}=(0,f.x4)(),{isRTL:B}=(0,h.B)(),V=(0,v.useRef)(null),{maxHeight:H,fiftyPercentHeight:U,fiftyPercentWidth:N}=(0,D.Re)(),{maxHeight:W}=(0,ew.Z)({pinKey:{type:"deprecated",data:n}}),{borderStyle:G}=(0,_.Z)({isSideBySide:M,isPadded:a,isRTL:B,closeupWithinMasonryEnabled:A,peekCloseupEnabled:Z}),{borderStyle:q}=(0,_.Z)({isSideBySide:M,isPadded:a,isRTL:B,closeupWithinMasonryEnabled:A,peekCloseupEnabled:Z}),Q=(0,eC.Z)({isHiddenPin:n.is_hidden,isUnsafePin:n.is_unsafe}),{mainImage:ee}=(0,$.r)(),{domain:et="",id:en,dominant_color:ei,story_pin_data:ea,native_creator:el}=n,er={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0},es=(0,C.Z)({type:"deprecated",data:n})();es&&(er.commerce_data=es);let eo=b||x||"",{data:ed=[],isLoaded:ec}=(0,eY.Z)({name:"StoryPinTaggedProductsResource",options:{id:n.id},noCache:!0}),{pages:eu=[]}=ea||{},eh=[5,6,2],e_=eu.filter(e=>{let t=e?.layout;return void 0!==t&&!eh.includes(t)}),{activePageIndex:ey,captions:ef,currentPage:ex,handleMute:ev,handlePageChange:ek,handlePause:eb,handlePausePlay:eP,handlePlay:ej,handleUpdateVideoInfo:eI,handleVideoEnd:eT,handleVideoScrubbingNewPage:eL,handleWatchAgain:eA,isActive:eK,isSeeking:eZ,mute:eR,progressInfo:ez,showEndCard:eM}=e$({pages:e_,viewType:3,viewParameter:r,pinId:en}),{blocks:eO}=(0,eD.Z)({storyPinBlocks:ex?.blocks||[],blocksToRender:[eB.h8.COMMENT_REPLY_STICKER,eB.h8.GENERIC_STICKER,eB.h8.HEADING,eB.h8.MENTION_STICKER,eB.h8.PARAGRAPH,eB.h8.PRODUCT_STICKER,eB.h8.VTO_MAKEUP_STICKER]}),{background_color:eV}=ex?.style||{},{blocks:[eH]=[null]}=(0,eD.Z)({storyPinBlocks:ex?.blocks||[],blocksToRender:[eB.h8.IMAGE,eB.h8.VIDEO]}),eU=eH?.type===eB.h8.VIDEO||e_.length>1,eN=(0,eF.Z)({href:{pathname:eo,state:{trackingParams:z}},target:"blank",clientTrackingParams:z,externalData:{auxData:er,pin:n&&{attributionSourceId:n.attribution_source_id,board:n.board&&{url:n.board.url},campaignId:n.campaign_id,entityId:n.id,isDownstreamPromotion:n.is_downstream_promotion,isPromoted:n.is_promoted,pinner:n.pinner&&{username:n.pinner.username},pinPromotionId:n.pin_promotion_id,promoter:n.promoter&&{entityId:n.promoter.id},storyPinDataId:n.story_pin_data_id,trackingParams:n.tracking_params,advertiserId:n.advertiser_id}}}),{fontsLoaded:eW,mediaDataReceived:e6}=(0,e1.tq)({hasPin:!!n,pages:eu}),{showCloseupShopDomainLinkButton:e7,showDebugSignalsFeedbackButton:e4,showDomainLink:e5,showDomainLinkButton:e9,showFlashlightButton:te,showPinTagButton:tt,showShopButton:tn,surfaceType:ti}=(0,eg.Z)({disablePinTagButton:j,domain:et,hasMetTrustAndSafetyCheck:Q,isEmployee:L.isAuth&&!!L.isEmployee,isHovered:t,isScenePin:S,navLink:eo,pinKey:{type:"deprecated",data:n},showStelaDotsOnScenePin:w,isORBACProfileManager:s}),{height:ta,width:tl}=(0,E.Z)({mainImage:ee,maxCloseupImageWidth:I,shouldPadImage:a,closeupWithinMasonryEnabled:A}),tr=tl/ta;return n.story_pin_data?.is_deleted?(0,c.jsx)(eQ.Z,{color:"secondary",height:e8.height,rounding:4,width:e8.width}):(Z&&(u="sm"===R?U:H),(0,c.jsx)(d.xu,{alignSelf:A?"center":void 0,dangerouslySetInlineStyle:{__style:{...G,aspectRatio:A?`${tl} / ${ta}`:void 0,background:A?D.yc:eV||"#fff"}},"data-test-id":"closeup-body-image-container",height:A?void 0:ta,maxHeight:A?W:u,maxWidth:N,position:"relative",width:A?"100%":tl,children:ex?(0,c.jsxs)(v.Fragment,{children:[!K&&(0,c.jsxs)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...G}},"data-test-id":"closeup-image",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:[!e6&&(0,c.jsx)(O,{dominantColor:ei||"",imageWithPreview:T,pinId:en}),eH&&(0,c.jsx)(eX.Z,{activePageIndex:ey,block:eH,borderStyle:q,fontsLoaded:eW,isActive:!0,muteVideos:!0,onEnded:eT,onUpdateVideoInfo:eI,ownerId:el?.id??"",pageAspectRatio:tr,pageHeight:ta,pageIndex:0,pageWidth:tl,pin:n,pinId:en,pinKey:{type:"deprecated",data:n},stillLoading:!e6})]}),!eU&&(0,c.jsx)(ep,{animateShopButton:g,displayHeight:ta,displayWidth:tl,domain:et,handleMediaButtonClick:o,hasStelaResults:P,imageSignature:k,isHovered:t,link:eo,mediaViewerExpandButtonRef:V,navigationWrapper:t=>(0,c.jsx)(em.Z,{href:eo,onClick:e,onNavigation:eN,children:t}),onShopButtonAnimationComplete:y,onStelaDotAnimationComplete:m,pin:n,searchQuery:i,showAnimatedExploreCta:F,showCloseupShopDomainLinkButton:e7,showDebugSignalsFeedbackButton:e4,showDomainLink:e5,showDomainLinkButton:e9,showFlashlightButton:te,showPinTagButton:tt,showShopButton:tn,showStelaDotsOnScenePin:w,stelaDotAnimationType:p,surfaceType:ti,trafficSource:l,viewParameter:r}),K&&eU&&(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...e2.Ul,flexDirection:"column-reverse"}},display:"flex",height:e2.hy,paddingX:6,position:"absolute",width:"100%",zIndex:eB.Gf,children:(0,c.jsx)(e0.Z,{activePageIndex:ey,captionsUrl:ef,handleMute:ev,handlePause:eb,handlePausePlay:eP,handlePlay:ej,handleVideoScrubbingNewPage:eL,handleWatchAgain:eA,inMilliseconds:!0,isMuted:eR,isPanelOpen:!0,isPlaying:eK,isStoryPin:!0,onPageSelect:e=>ek(e),pageCount:e_.length,pages:e_,pinId:en,progressInfo:ez,showEndCard:eM,showVideoControls:!0,viewParameter:156})}),(0,c.jsx)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...e3}},"data-test-id":"music-attribution",display:"flex",justifyContent:"center",overflow:"hidden",paddingY:5,position:"absolute",width:"100%",zIndex:eB.Gf,children:(0,c.jsx)(eE.Z,{handlePause:eb,handlePlay:ej,musicAttributions:ex?.music_attributions,shouldMute:ex?.should_mute,showEndCard:eM})})]}),!K&&ec&&eO.map((e,t)=>{let i=(ed||[]).find(t=>[t.id,t.cacheable_id].includes(e.pin_id));return(0,c.jsx)(eX.Z,{block:e,borderStyle:q,disableProductStickers:!0,fontsLoaded:eW,isActive:!1,muteVideos:!0,ownerId:el?.id??"",pageAspectRatio:tr,pageHeight:ta,pageIndex:0,pageWidth:tl,pin:n,pinId:en,pinKey:null!=i?{type:"deprecated",data:i}:null,stillLoading:!e6},`${ex.id??""}-${e.type??""}-${t}`)}),K&&(0,c.jsxs)(d.iP,{disabled:!eU||eM,fullHeight:!0,onTap:eP,children:[(0,c.jsx)(eq.Z,{activePageIndex:ey,clientTrackingParams:z,customEndCard:!0,fontsLoaded:eW,isActive:eK,muteVideos:eR,onEnded:eT,onUpdateVideoInfo:eI,ownerId:n.native_creator?.id??"",page:ex,pageAspectRatio:tr,pageHeight:ta,pageIndex:ey,pageWidth:tl,pin:n,pinId:en,productPins:ed,shouldLogTimeSpent:!0,stillLoading:!e6,videoPinProgress:ez,viewParameter:r,viewType:3}),!eM&&!eZ&&(0,c.jsx)(eJ.Z,{playing:eK})]}),K&&eM&&n.native_creator&&(0,c.jsx)(X.Z,{name:"SIIPMediaContainer_VideoEndCard",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(d.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:eB.s5,children:(0,c.jsx)(eG.default,{clientTrackingParams:n.trackingParams||n.tracking_params,imageSrc:n.image_url??"",pinDescription:n.description??"",pinId:n.id,rounded:!1,watchAgain:eA})})})})]}):ex?null:(0,c.jsx)(O,{dominantColor:A?D.yc:ei||"",fit:"contain",imageWithPreview:T,pinId:en})}))}var e7=n("997096"),e4=n("935415");let e5=e=>{let{isHovered:t,onImageClick:n,pin:i,searchQuery:a,shouldPadImage:l,trafficSource:r,viewParameter:s,isORBACProfileManager:o,handleCollageOverlayToggle:d,handleMediaButtonClick:p}=e,m=(0,C.Z)({type:"deprecated",data:i}),g=i.is_eligible_for_pdp?m():void 0,h=(0,ej.Z)(),_=i?.shuffle_asset&&h(),{isEligibleForStaticImageIdeaPin:y}=(0,e7.Z)(i.should_open_in_stream,i.story_pin_data_id),{clientTrackingParams:x}=(0,f.x4)(),v=(0,c.jsx)(e4.Z,{auxData:g,clientTrackingParams:x,component:85,viewParameter:s,children:y&&!_?(0,c.jsx)(e6,{handleMediaButtonClick:p,isHovered:t,isORBACProfileManager:o,onClick:n,pin:i,searchQuery:a,shouldPadImage:l,trafficSource:r,viewParameter:s}):(0,c.jsx)(eR,{handleCollageOverlayToggle:d,handleMediaButtonClick:p,isHovered:t,isORBACProfileManager:o,onClick:n,pin:i,searchQuery:a,shouldPadImage:l,trafficSource:r,viewParameter:s})});return l?(0,c.jsx)(u,{children:v}):v};var e9=n("379774"),te=n("952246"),tt=n("618704");function tn(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ti=void 0!==s?s:s=n(865637);class ta extends v.Component{constructor(...e){super(...e),tn(this,"handleVisibilityChanged",e=>{let{pinId:t,isPromoted:n,setCurrentVideo:i,pauseAutoplay:a,videosAutoplaying:l,videoStartTime:r}=this.props,s=(0,tt.Z)(t,l);e&&!s?i({pinId:t,isPromoted:!!n,currentTime:r}):!e&&s&&a({pinId:t,isPromoted:!!n,currentTime:this.currentVideoCurrentTime})}),tn(this,"handleVideoTimeChange",e=>{let{pinId:t,videosAutoplaying:n}=this.props;(0,tt.Z)(t,n)&&(this.currentVideoCurrentTime=e.time)})}componentDidUpdate(e){let{appInFocus:t}=e,{appInFocus:n,pauseAutoplay:i,pinId:a,isPromoted:l,setCurrentVideo:r,videosAutoplaying:s}=this.props,o=(0,tt.Z)(a,s),d=(0,te.Z)(a,s);this.currentVideoCurrentTime=d??this.currentVideoCurrentTime,n!==t&&!n&&o?(this.pausedDueToBrowserOutOfFocus=!0,i({pinId:a,isPromoted:!!l,currentTime:this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&n&&(this.pausedDueToBrowserOutOfFocus=!1,r({pinId:a,isPromoted:!!l,currentTime:this.currentVideoCurrentTime}))}componentWillUnmount(){let{pinId:e,isPromoted:t,pauseAutoplay:n}=this.props;n({pinId:e,isPromoted:!!t,currentTime:this.currentVideoCurrentTime})}render(){let{pauseAutoplay:e,pin:t,setCurrentVideo:n,videoStartTime:i,videosAutoplaying:a,...l}=this.props;return(0,c.jsx)(e9.i,{onVisibilityChanged:this.handleVisibilityChanged,trackFullVisible:!1,...l,children:(0,c.jsx)(k.Z,{...l,onTimeChange:this.handleVideoTimeChange,pinKey:t})})}}function tl(e){let{pinId:t,pinKey:n,isPromoted:i}=e,a=(0,P.Z)(ti,n),{appUI:{appInFocus:l,videosAutoplaying:r},pauseAutoplay:s,setCurrentVideo:o}=(0,T.I)(),{organicVideosAutoplaying:d,promotedVideosAutoplaying:u}=r,p=i?u[t]:d[t];return(0,c.jsx)(ta,{...e,appInFocus:l,pauseAutoplay:s,pin:a,setCurrentVideo:o,videosAutoplaying:r,videoStartTime:p?p.currentTime:null})}var tr=n("980570"),ts=n("3915"),to=n("789839"),td=n("992295");let tc=(0,v.lazy)(()=>n.e("74993").then(n.bind(n,822915))),tu=({children:e,name:t})=>(0,c.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":`experimental-closeup-image-overlay-layer-${t}`,left:!0,position:"absolute",right:!0,top:!0,children:e}),tp=void 0!==o?o:o=n(739806),tm=({closeupIsFirstPageInHistoryStack:e,customThumbnail:t,imageContainerRef:n,isWideVideo:i,pin:a,pinKey:l,shouldPadImage:r,flyoutShareProps:s,video:o,isORBACProfileManager:p})=>{let m=(0,P.Z)(tp,l),g=!!a.promoter&&!a.is_downstream_promotion,h=g&&!a.is_eligible_for_web_closeup,{access:_,should_mute:x}=a||{},v=!!_&&_.includes("tag")||p,{closeupWithinMasonryEnabled:k}=(0,f.x4)(),{closeupBodyWidth:b}=(0,to.K4)(),{fiftyPercentWidth:S}=(0,D.Re)(),{maxHeight:w}=(0,ew.Z)({pinKey:m}),j=Math.max((b??1)/("number"==typeof w?w:1),(o.hls?.width??o?.mp4?.width??0)/(o.hls?.height??o?.mp4?.height??0)),I=k?b:y.Gg-y.d2,C="undefined"!=typeof window&&0===ts.ZP.getItem(tr._e),T=(0,c.jsxs)(td.Z,{isVideo:!0,isWideVideo:i,shouldPadImage:r,styleOverrides:r&&!k?{maxWidth:{maxWidth:I},minWidth:{minWidth:I},height:{},borderRadius:16}:{},variant:"default",children:[(0,c.jsx)(d.xu,{ref:n,"data-test-id":"closeup-video-with-visibility",maxHeight:w,maxWidth:S,width:"100%",children:(0,c.jsx)(tl,{aspectRatio:k?j:void 0,autoplay:!C,customThumbnail:t,flyoutShareProps:s,isPromoted:g,loop:h,muted:x||e,objectFit:k?"contain":void 0,pinId:a.id,pinKey:m,shouldMute:x,variant:"default",video:o})}),v&&(0,c.jsx)(tu,{name:"tag-button",children:(0,c.jsx)(X.Z,{name:"SafeSuspense_VideoContent_CloseupTagButton",children:(0,c.jsx)(Y.Z,{children:(0,c.jsx)(q.Z,{children:(0,c.jsx)(tc,{pin:a})})})})})]});return r?(0,c.jsx)(u,{children:T}):T};var tg=n("791776");let th=e=>{let{clientTrackingParams:t,closeupIsFirstPageInHistoryStack:n,imageContainerRef:i,flyoutShareProps:a,isWideVideo:l,pin:r,shouldPadImage:s,searchQuery:o,trafficSource:d,isORBACProfileManager:u,isHovered:p,handleCollageOverlayToggle:m,onImageClick:g,viewParameter:h,handleMediaButtonClick:_}=e,{video:y,imgSrc:f,isEmbeddedVideo:v}=(0,$.r)();if(y)return(0,c.jsx)(tm,{closeupIsFirstPageInHistoryStack:n,customThumbnail:f,flyoutShareProps:a,imageContainerRef:i,isORBACProfileManager:u,isWideVideo:l,pin:r,pinKey:{type:"deprecated",data:r},shouldPadImage:s,video:y});if(v){let e="50%",t=r.attribution&&(r.attribution.author_name||r.attribution.url)?r.attribution.provider_name:null;return"soundcloud"===t?e="30%":"vin"===t&&(e="100%"),(0,c.jsx)(x,{embedUrl:r.embed?.src,isWideVideo:l,paddingBottom:e,shouldPadImage:s})}return(0,c.jsx)(tg.Z,{clientTrackingParams:t,hovered:p,pinKey:{type:"deprecated",data:r},viewType:3,children:(0,c.jsx)(e5,{handleCollageOverlayToggle:m,handleMediaButtonClick:_,isHovered:p,isORBACProfileManager:u,onImageClick:g,pin:r,searchQuery:o,shouldPadImage:s,trafficSource:d,viewParameter:h})})}},85172:function(e,t,n){n.d(t,{Z:()=>L});var i=n("667294"),a=n("883119"),l=n("62927"),r=n("548701"),s=n("754358"),o=n("772866"),d=n("224706"),c=n("172119"),u=n("973935"),p=n("983014"),m=n("674320"),g=n("86485"),h=n("69103"),_=n("170217"),y=n("3879"),f=n("673695"),x=n("482678"),v=n("150608"),k=n("959474"),b=n("460515"),P=n("237861"),S=n("789839"),w=n("278091"),j=n("80887"),I=n("417573"),C=n("785893");let T=(0,i.lazy)(()=>n.e("4565").then(n.bind(n,460773))),F=(0,i.lazy)(()=>Promise.all([n.e("74924"),n.e("73879"),n.e("45303"),n.e("6241")]).then(n.bind(n,816491)));function L({handleImageClickThrough:e,imageContainerRef:t,isShortImage:n,isStoryPin:L,isWideVideo:A,onSaveButtonClick:K,pin:Z,searchQuery:R,setClickthroughComponentForSurvey:E,showRepinOnInitialRender:D,trafficSource:z,viewParameter:M,viewParameterType:B,visualContentContainerRef:O={current:null}}){let[V,H]=(0,i.useState)(!1),{setIsCollageOverlayOpen:U}=(0,S.K4)(),{previous:N}=(0,_.Hv)(),W=(0,j.x4)(),$=(0,b.Z)(),G=(0,y.B)(),X=(0,p.r)(),q=(0,k.Z)(),{getViewParameter:Y}=(0,l.ZP)({type:"deprecated",data:Z}),J=(0,i.useCallback)(e=>{if(!document.startViewTransition){e();return}document.startViewTransition(()=>{(0,u.flushSync)(e)})},[]),Q=(0,m.Z)(),ee=0===N.length,{carouselInfo:et,imgSrc:en,mainImage:ei,video:ea}=X,{isCornerButtonEnabled:el,isCloseupMediaViewerEnabled:er}=(0,c.Z)({isShufflePin:!!Z?.shuffle}),es=()=>{H(e=>!e)},eo=()=>{H(!1)},ed=()=>{U(e=>!e)},ec=e=>({gridDescription:Z.description,imageSrc:e,isFlyoutOpen:V,onFlyoutDismiss:eo,onToggleFlyout:es,pinId:Z.id}),{clientTrackingParams:eu,showCloseupContentRight:ep,paneWidth:em,isCloseupRelatedPinsAboveTheFoldEnabled:eg,closeupWithinMasonryEnabled:eh,peekCloseupEnabled:e_,setIsCloseupMediaViewerOpen:ey}=W,{fiftyPercentWidth:ef}=(0,o.Re)(),{maxHeight:ex}=(0,d.Z)({pinKey:{type:"deprecated",data:Z}});if(L)return null;let{domain:ev,music_attributions:ek,pinner:eb,should_mute:eP}=Z,eS=!!ev&&!!Z.link&&!Z.link.startsWith("https://i.pinimg.com"),{width:ew}=ei,ej=(0,l.NE)({closePanelWidth:em,isShortImage:n,carouselInfo:et,isWideVideo:A,naturalWidth:ew,showCloseupContentRight:ep}),{borderStyle:eI,borderRadiusNumeric:eC}=(0,w.Z)({isSideBySide:ep,isPadded:ej,isRTL:G.isRTL,closeupWithinMasonryEnabled:eh,peekCloseupEnabled:e_}),eT=()=>{Q({aux_data:{image_signature:Z.image_signature},component:128,event_type:101,element:el?15864:15865,view_type:3}),J(()=>{ey(!0)})},eF=(0,P.q6)(q,eb?.id,$);return(0,C.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{height:e_?"100%":void 0,display:e_?"flex":"block"}},"data-test-id":"visual-content-container",children:[(0,C.jsx)(v.q,{children:({hovered:n,onMouseEnter:i,onMouseLeave:l})=>(0,C.jsxs)(a.xu,{ref:O,alignSelf:e_?"center":void 0,dangerouslySetInlineStyle:{__style:{...eI}},direction:eh?"column":void 0,display:"flex",justifyContent:"center",maxHeight:ex,maxWidth:ef,onMouseEnter:i,onMouseLeave:l,position:"relative",width:A||eg?"100%":em,children:[ea&&ek?.length!==0&&(0,C.jsx)(a.xu,{alignItems:"center","data-test-id":"music-attribution",display:"flex",justifyContent:"center",marginTop:6,overflow:"hidden",paddingY:8,position:"absolute",top:!0,width:em,zIndex:x.Ls,children:(0,C.jsx)(r.Z,{musicAttributions:ek,shouldMute:!!eP})}),(0,C.jsx)(s.Z,{clientTrackingParams:eu,closeupIsFirstPageInHistoryStack:ee,flyoutShareProps:ec(en),handleCollageOverlayToggle:ed,handleMediaButtonClick:eT,imageContainerRef:t,isHovered:n,isORBACProfileManager:eF,isWideVideo:A,onImageClick:()=>{e&&e(),E("imageContainer")},pin:Z,searchQuery:R,shouldPadImage:!eg&&ej,showDomainLink:eS,trafficSource:z,viewParameter:Y(B)}),Z&&Z.showFeedback&&(0,C.jsx)(f.Z,{children:(0,C.jsx)(T,{pin:Z})})]})}),(0,C.jsx)(a.mh,{zIndex:I.lI,children:(0,C.jsx)(h.default,{anchor:O.current,experienceIds:[506204],flyoutSize:"md",forceDirection:!eh,idealDirection:eh?"right":"down",placementId:12,showCaret:!0,textWeight:"normal"})}),er&&(0,C.jsx)(g.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewer",children:(0,C.jsx)(f.Z,{children:(0,C.jsx)(F,{onClose:({isExitButton:e,isClick:t})=>{Q({aux_data:{image_signature:Z.image_signature},component:128,event_type:t?101:97,element:e?15867:15866,view_type:3}),J(()=>{ey(!1)})},onImageClick:()=>{e&&e()},onSaveButtonClick:K,pin:Z,rounding:eh?16:eC,showRepinOnInitialRender:D,trafficSource:z,viewParameter:M})})})]})}},62927:function(e,t,n){n.d(t,{NE:function(){return g},ZP:function(){return _},nU:function(){return m}});var i,a=n(667294);n(167912);var l=n(353063),r=n(286502),s=n(131548),o=n(870912),d=n(297706),c=n(561162),u=n(449703),p=n(6278);function m({domain:e,hasLinkDomainOfficialUser:t,hasLinkUserWebsiteOfficialUser:n,hasNativeCreator:i,hasThirdPartyPinOwner:a,isPromoted:l,pinnerDomainUrl:r,pinnerDomainVerified:s}){return(n||t||a||s&&r===e)&&!l||!!i}function g({carouselInfo:e,closePanelWidth:t,isWideVideo:n,isShortImage:i,naturalWidth:a,showCloseupContentRight:l}){return!n&&!!l&&(!!i||!e&&a<t)}let h=void 0!==i?i:i=n(796557);function _(e){let t=(0,s.Z)(h,e),n=(0,r.Z)(),i=(0,c.F)(),g=!!t.shuffleAsset&&n(),{currentDomain:_}=(0,l.Wp)({carouselData:t.carouselData&&{carouselSlots:t.carouselData.carouselSlots&&t.carouselData.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:t.carouselData?.index},domain:t.domain}),y=!!t?.isGoLinkless&&i.checkExperiment("closeup_ctx_is_go_linkless_web").anyEnabled,f=!!t.link&&t.link.startsWith("https://i.pinimg.com"),x=(0,a.useCallback)(e=>!y&&(e&&!f?!!t.link:!t.isEligibleForPdp&&!!(0,o._S)(_)&&!g&&!f),[_,t.isEligibleForPdp,t.link,g,y,f]),v=(0,d.Z)({hasPin:!!t,hasPinRichMetadata:!!t.richMetadata,hasPinRichMetadataProducts:!!t.richMetadata?.products,hasPinRichMetadataArticle:!!t.richMetadata?.article,hasPinRichMetadataRecipe:!!t.richMetadata?.recipe,hasPinStoryPinData:!!t.storyPinData}),k=(0,a.useCallback)(e=>e||v,[v]),b=!!t.nativeCreator,P=!!t.originPinner,S=!!t.thirdPartyPinOwner,w=!!t.linkUserWebsite?.officialUser,j=!!t.linkDomain,I=!!t.linkDomain?.officialUser,C=!!t.creatorClass,T=t.pinner;T=b?t.nativeCreator:j?t.linkDomain.officialUser:t.originPinner||t.pinner;let{pinCreditLink:F,pinCredit:L}=(0,p.Xe)({hasLinkDomain:j,hasNativeCreator:b,hasOriginPinner:P,pinDomain:t.domain,sourceUserUsername:T?.username??null,sourceUserFullName:T?.fullName??null}),A=!!T,K=!!F&&!!L,Z=!!t.closeupAttribution;return{getShowClickthroughLink:x,getViewParameter:k,makeDetailsArgs:(0,a.useCallback)(e=>({isShopTheLook:!!t.aggregatedPinData?.isShopTheLook,showCreatorCard:m({domain:t.domain??"",hasLinkDomainOfficialUser:I,hasLinkUserWebsiteOfficialUser:w,hasNativeCreator:b,hasThirdPartyPinOwner:S,isPromoted:!!t.isPromoted,pinnerDomainUrl:t.pinner?.domainUrl??"",pinnerDomainVerified:!!t.pinner?.domainVerified})||!Z&&A&&K,creatorId:t.closeupAttribution?.entityId??T?.entityId??null,showCanonicalComments:!!t.isEligibleForAggregatedComments,showReactions:(0,u.J6)({board:t.board?.isCollaborative||t.board?.collaboratedByMe?{isCollaborative:t.board.isCollaborative??null,collaboratedByMe:t.board.collaboratedByMe??null}:null,videos:t.videos?.entityId?{entityId:t.videos.entityId}:null,isDownstreamPromotion:t.isDownstreamPromotion,isPromoted:t.isPromoted,storyPinDataId:t.storyPinDataId},e),isCreatorClassPin:C}),[C,I,w,b,S,Z,K,A,t.aggregatedPinData?.isShopTheLook,t.board?.collaboratedByMe,t.board?.isCollaborative,t.closeupAttribution?.entityId,t.domain,t.isDownstreamPromotion,t.isEligibleForAggregatedComments,t.isPromoted,t.pinner?.domainUrl,t.pinner?.domainVerified,t.storyPinDataId,t.videos?.entityId,T?.entityId])}}},431190:function(e,t,n){n.d(t,{ZP:function(){return s},ap:function(){return l}});var i=n(667294),a=n(80887);let l=n(391374).cI+16,r=`calc(100vh - ${l}px)`;function s(e,t=100){let{isCommentThreadExpanded:n,isPinNoteExpanded:o,isProductDetailsExpanded:d,isShoppingModuleExpanded:c}=(0,a.x4)(),[u,p]=(0,i.useState)(r),m=(0,i.useRef)(null),g=`calc(${t??"100"}vh - ${l}px)`,h=(0,i.useRef)(g),_=n||o||d||c,y=m.current?.clientHeight||0;return(0,i.useEffect)(()=>{if(!window)return;let n=window.innerHeight-l;y>n*t/100&&(h.current=y.toString());let i=n>y?h.current:y,a=y||i;_&&n>y+170&&(a=y>850?y:n<850+.3*window.innerHeight?`calc(70vh - ${l}px`:850),p(e?a:i)},[t,e,_,y]),{descriptionContentMaxHeight:u,visualContentContainerRef:m}}},992512:function(e,t,n){n.d(t,{Z:function(){return o}}),n(167912);var i,a=n(717671),l=n(131548),r=n(237861);let s=void 0!==i?i:i=n(104637);function o({pinKey:e,orbacActingAs:t,viewer:n}){let i=(0,l.Z)(s,e),o=!!i.pinner?.entityId&&(0,r.D3)(n,i.pinner.entityId,t),d=!!(i.board?.collaboratedByMe||i.board?.owner?.entityId)&&(0,a.Z)(i.board.collaboratedByMe,i.board.owner?.entityId,n);return o||d}},608115:function(e,t,n){n.d(t,{Z:function(){return s}}),n(167912);var i,a=n(717671),l=n(131548);let r=void 0!==i?i:i=n(328230);function s(e,t){let n=(0,l.Z)(r,e);return(0,a.Z)(n.board?.collaboratedByMe,n.board?.owner?.entityId,t)&&!!n.board?.isCollaborative}},318258:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(667294),a=n(216981),l=n(983014),r=n(236256),s=n(228132),o=n(80887);let d=100+s.Ie;function c({metadataContainerRef:e}){let[t,n]=(0,i.useState)(!1),s=(0,o.x4)(),c=(0,l.r)();return(0,r.Z)(()=>{e.current&&function({metadataHeight:e,closeupContext:t,visualData:n}){let{pdpCarouselSlotToPaneRatio:i,paneWidth:l,closeupWithinMasonryEnabled:r}=t,{mainImage:s,carouselInfo:o}=n;return e>(0,a.Z)({carouselData:o?.carouselData,mainImage:s,maxCloseupImageWidth:l,imageToDisplayWidthRatio:i,closeupWithinMasonryEnabled:r}).height}({metadataHeight:e.current.getBoundingClientRect().height+d,closeupContext:s,visualData:c})&&n(!0)}),t}},808992:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(667294);function a(){let[e,t]=(0,i.useState)(""),n=(0,i.useRef)(null),a=(0,i.useRef)(null),l=(0,i.useRef)(null),r=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let t=()=>{e&&n.current&&n.current.handleEgSurveyClick(e)};return window.addEventListener("focus",t),()=>window.removeEventListener("focus",t)},[e]),{clickthroughComponentForSurvey:e,setClickthroughComponentForSurvey:t,webLinkSurveyRef:n,imageContainerRef:a,legoLinkClickthroughAnchorRef:l,maybeLinkRef:r}}},260327:function(e,t,n){n.d(t,{l6:()=>U,ZP:()=>W});var i=n("667294"),a=n("581722"),l=n("616550"),r=n("954543"),s=n("798953"),o=n("170217"),d=n("3879"),c=n("137123"),u=n("959474"),p=n("353556"),m=n("757892");function g(e){let{previous:t}=(0,o.Hv)(),n=0===t.length,{children:i}=e,r=(0,l.TH)(),g=(0,u.Z)(),h=(0,a.I0)(),{isBot:_}=(0,d.B)(),{dropdownOpen:y}=(0,p.Z)(),f=(0,m.AF)(),x=!!f[e.pinId]&&(f[e.pinId].saved||!!f[e.pinId].savedInfo),v=f[e.pinId]||e.pinResource.data||{},k=e.pinResource.data?.story_pin_data?.pages?.[0]?.blocks?.[0]?.video,b=v?.story_pin_data?.pages?.[0]?.blocks?.[0];k&&b&&!b?.video&&((v?.story_pin_data?.pages?.[0]?.blocks?.[0]).video=k);let P="inbox"===(0,c.mB)(r.search).tab;return i({isLandingPage:n,isLimitedLogin:!!g.isAuth&&g.isLimitedLogin,didRepin:x,openInbox:y,pin:v,shouldShowInbox:P,updateExperienceForPlacement:e=>{h((0,s.pz)([e],_))}})}var h=n("253087"),_=n("201070"),y=n("495334"),f=n("839513"),x=n("544358"),v=n("861025"),k=n("176970"),b=n("785893");class P extends i.PureComponent{componentDidMount(){let{experience:e}=this.props;if(e&&500500===e.experience_id){let{experience_id:t,placement_id:n}=e;this.props.experienceClient.viewExperience(n,t)}}componentDidUpdate(e){let t=e.experience,n=this.props.experience;if(n&&!t){let{experience_id:e,placement_id:t}=n;this.props.experienceClient.viewExperience(t,e)}}render(){return this.props.children}}function S(e){let t=(0,v.Z)(),{experience:n}=(0,k.Z)(1000075);return(0,b.jsx)(P,{...e,experience:n,experienceClient:t})}var w=n("870912"),j=n("297706"),I=n("561162"),C=n("460515"),T=n("237861"),F=n("491633");let L=({pathname:e})=>/^\/pin\/[\w-]+\/activity\/tried\/?$/.test(e),A=e=>!!e&&((0,F.C)(e)||L(e)),K=e=>e.map(e=>A(e.location)).find(e=>!0===e)??!1;var Z=n("510678"),R=n("49315");function E(e,t=!1){let n=e||window.location.href;(0,Z.Z)(`/login?next=${t?(0,R.Z)(n,{type:"signup"}):encodeURIComponent(n)}`)}var D=n("419446"),z=n("420025"),M=n("644319"),B=n("320288");let O=(0,n("52302").Z)(()=>n.e("8479").then(n.bind(n,351586)),void 0,"app-common-react-components-StatusPin-StatusPinCloseup"),V=({id:e,story_pin_data:t,videos:n})=>(e&&n?.id&&n.video_list?[n.video_list.V_720P,n.video_list.V_HLSV4,n.video_list.V_HLSV3_MOBILE]:[]).some(e=>e&&e.thumbnail&&e.url&&!!e.width&&!!e.height)||((t?.pages?.[0]||{}).blocks??[]).some(e=>!!e.video),H=e=>({isVideoPin:!!e&&V(e)});function U({checkExperiment:e,clientTrackingParams:t,currentHistoryStack:n,history:a,location:l,params:r,pinResource:s,requestContext:o,searchPinCloseupViewed:d,showQuickPromote:u,showRepin:p,viewer:m,CloseupComponent:_,...x}){let v=s.data,k=s.isLoaded,P=(0,i.useRef)(null),w=k&&v&&v.pinner&&m.isAuth&&m.username===v.pinner.username&&k&&v&&"extension"===v.method,{trafficSource:I,topLevelTrafficSource:C,topLevelTrafficSourceDepth:T,contextPinIds:L}=(0,h.Z)(n,m.isAuth);T>1&&"pin"!==I&&(0,B.nP)("p2p.traffic_source.client",{sampleRate:.1,tags:{trafficSource:I,topLevelTrafficSource:C,topLevelTrafficSourceDepth:T}});let A=(0,F._)(n),Z=(0,c.mB)(l.search);(0,i.useEffect)(()=>{P!==v&&function({history:e,isBot:t,location:n,viewerId:i,viewerIsAuth:a}){!t&&i&&"undefined"!=typeof window&&(0,D.U)(window.location,i,!1,a,t=>e.replace(t,n.state))}({history:a,isBot:o.isBot,location:l,viewerId:m.id||"",viewerIsAuth:m.isAuth}),P.current=v},[a,l,P,v,o.isBot,m.id,m.isAuth]),(0,i.useEffect)(()=>()=>{A&&v?.id&&d(v.id,A)},[v?.id,A,d]);let R=(0,i.useMemo)(()=>({viewType:3,viewParameter:(0,j.Z)({hasPin:!!v,hasPinRichMetadata:!!v?.rich_metadata,hasPinRichMetadataProducts:!!v?.rich_metadata?.products,hasPinRichMetadataArticle:!!v?.rich_metadata?.article,hasPinRichMetadataRecipe:!!v?.rich_metadata?.recipe,hasPinStoryPinData:!!v?.story_pin_data})}),[v]);return(0,b.jsx)(y.Q,{value:{featuredCommentId:r.comment_id||""},children:(0,b.jsx)(f.f,{children:(0,b.jsx)(z.v,{value:R,children:(0,b.jsx)(S,{children:(0,b.jsx)(g,{pinId:r.id||"",pinResource:s,children:({isLandingPage:e,isLimitedLogin:l,didRepin:o,openInbox:d,pin:c,shouldShowInbox:g,updateExperienceForPlacement:h})=>(0,b.jsx)(i.Fragment,{children:(0,b.jsx)(_,{clientTrackingParams:t,contextPinIds:L,conversation_id:Z.conversation_id,deepLinkBackGoesToBoard:w,didRepin:o,emailId:Z.e_t,forceSendFeedback:Z.fsf,goBack:function({boardUrl:e,currentHistoryStack:t,history:n,isFromExtension:i=!1,hasViewerPartner:a}){return()=>{if(!K(t)&&!i){a?n.push("/homefeed/"):n.push("/");return}if(i&&1===t.length){n.push(e??"");return}n.goBack()}}({boardUrl:v?.board?.url,currentHistoryStack:n,history:a,isFromExtension:!!w,hasViewerPartner:!!m.partner}),isLandingPage:e,isLimitedLogin:l,messageId:Z.message,onLoginClick:E,openInbox:d,pin:c,pinDerivedData:H(c),pinId:r.id??"",pinResource:s,routePush:a.push,searchQuery:A,senderId:Z.sender,shouldShowInbox:g,showQuickPromote:u,showRepinOnInitialRender:p,topLevelTrafficSource:C,topLevelTrafficSourceDepth:T,trafficSource:I,updateExperienceForPlacement:h,viewer:m,...x})})})})})})})}function N(e){let{pinResource:t}=e,n=t.data,{is_hidden:i,is_unsafe:a}=n||{},l=n?.story_pin_data?.has_product_pins,s=(0,x.Z)({isHiddenPin:i,isUnsafePin:a}),o=r.$y;return s&&l&&(o=r.z8),(0,b.jsx)(U,{...e,CloseupComponent:o})}function W(e){let t=(0,a.I0)(),n=(0,u.Z)(),r=(0,l.UO)(),s=(0,o.aX)(),c={...e,history:(0,l.k6)(),location:(0,l.TH)(),params:r,requestContext:(0,d.B)(),searchPinCloseupViewed:(e,n)=>t((0,M.Y4)(e,n)),viewer:n},{checkExperiment:p}=(0,I.F)();return(0,b.jsx)(_.Z,{orbacSubjectId:(0,T.lJ)(n,(0,C.Z)()),pinId:r.id||"",children:({pinResource:e})=>{let t=e&&e.data;return t&&(0,w._J)(t.video_status)?(0,b.jsx)(O,{pinKey:{type:"deprecated",data:t},...c}):(0,i.createElement)(N,{...c,key:r.id,checkExperiment:p,currentHistoryStack:s,pinResource:e})}})}},714833:function(e,t,n){n.d(t,{Z:function(){return k}});var i=n(667294),a=n(883119),l=n(772866),r=n(346776),s=n(962520),o=n(160394),d=n(997096),c=n(115951),u=n(112393),p=n(297706),m=n(927998),g=n(236256),h=n(959474),_=n(80887),y=n(837484),f=n(746152),x=n(320288),v=n(785893);function k({pin:e,pinResource:t,topLevelTrafficSource:n,didShortClickThrough:k,firstLoadComplete:b,relatedModulesContent:P,onWrapperClick:S,beforeBodyContent:w,afterBodyContent:j,isVideoPin:I,bodyContent:C,backButton:T}){let F=(0,m.E)(),{isCloseupRelatedPinsAboveTheFoldEnabled:L,isInRemoveMagnifyingGlassVariant:A,closeupWithinMasonryEnabled:K,peekCloseupEnabled:Z,viewportSize:R}=(0,_.x4)(),E=(0,h.Z)(),{closeupRelatedPinsAboveTheFoldExperimentGroup:D}=(0,s.Z)(E.isAuth),{error:z}=t,{story_pin_data_id:M}=e||{},[B,O]=(0,i.useState)(K||!I);(0,i.useEffect)(()=>{let e=B?void 0:setTimeout(()=>O(!0),K?0:1e3);return()=>clearTimeout(e)},[K,B]);let{isEligibleForStaticImageIdeaPin:V}=(0,d.Z)(e.should_open_in_stream,e.story_pin_data_id),{isEnabled:H}=(0,o.Z)(),U=(0,i.useRef)(null),N=(0,i.useRef)(null),[W,$]=(0,i.useState)(void 0),G=u.yF+u.oX,X=Math.floor((W??1)/G),q=G*X-u.oX,Y=(0,i.useCallback)(()=>{U.current&&N.current&&$(window.innerWidth)},[]);(0,f.Z)(()=>{D&&window&&(0,x.nP)("web.closeup.closeup_redesign.handleResize",{sampleRate:.1,tags:{closeupRelatedPinsAboveTheFoldExperimentGroup:D,isStoryPin:!!M,isVideoPin:I,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}),Z&&Y()},U),(0,g.Z)(()=>{D&&window&&(0,x.nP)("web.closeup.closeup_redesign.initialRender",{sampleRate:.1,tags:{closeupRelatedPinsAboveTheFoldExperimentGroup:D,isStoryPin:!!M,isVideoPin:I,windowHeight:window.innerHeight,windowWidth:window.innerWidth}})}),(0,i.useEffect)(()=>{Z&&Y()},[Y,Z]);let{maxWidth:J}=(0,l.Re)();if(Object.keys(e).length,z)return(0,v.jsx)(y.Z,{});let Q=!!M&&!V,ee=!e.is_promoted,et=B&&P,en=(0,p.Z)({hasPin:!!e,hasPinRichMetadata:!!e?.rich_metadata,hasPinRichMetadataProducts:!!e?.rich_metadata?.products,hasPinRichMetadataArticle:!!e?.rich_metadata?.article,hasPinRichMetadataRecipe:!!e?.rich_metadata?.recipe,hasPinStoryPinData:!!e?.story_pin_data}),ei=(0,v.jsx)("div",{ref:N,className:"Closeup Module","data-test-id":b?"closeup-data-loaded":"",onClick:e=>{!A&&(Q||S(e),F&&F?.abort("closefakemodal"))},role:"presentation",style:{cursor:A?void 0:"zoom-out",display:"flex",width:"100%",maxWidth:J,margin:Z?"0 auto":void 0,marginTop:L?void 0:"16px"},children:(0,v.jsxs)(a.kC,{alignItems:"stretch",direction:"row",flex:"grow",justifyContent:"center",children:[Z?(0,v.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{flexDirection:"column"}},display:"flex",marginTop:5,children:[T,w]}):(0,v.jsx)(i.Fragment,{children:w}),C,j,k&&!ee&&(0,v.jsx)(r.C,{})]})},"closeup-content");return(0,v.jsx)(a.xu,{ref:U,width:"100%",children:(0,v.jsxs)(a.kC,{direction:K?"row":"column",justifyContent:"center",children:[!K&&ei,K&&(0,v.jsxs)(a.kC,{alignItems:"center",direction:"column",children:[T,w]}),(0,v.jsx)(a.kC.Item,{flex:"grow",children:(0,v.jsxs)(a.xu,{alignItems:"stretch",dangerouslySetInlineStyle:{__style:{paddingRight:K&&!H?"80px":void 0}},direction:"column",display:"flex",justifyContent:"center",paddingX:K&&!H?0:4,width:"100%",children:[Z&&q&&"lg"!==R&&(0,v.jsx)(a.kC.Item,{alignSelf:"center",children:(0,v.jsx)(c.Z,{moduleWidth:q,pinKey:{type:"deprecated",data:e},trafficSource:n,viewParameter:en})}),et]})})]})})}},423107:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(883119),a=n(810831),l=n(708130),r=n(785893);function s(){let e=(0,l.ZP)();return(0,r.jsxs)(i.xu,{paddingY:16,children:[(0,r.jsxs)(i.kC,{alignItems:"center",direction:"column",gap:4,children:[(0,r.jsx)(i.xv,{align:"center",size:"500",weight:"bold",children:e._('You\'ve reached the end', 'closeup.filteredFeed.enfOfFeed.title', 'message to let users know they have reached the end of the filtered feed in closeup')}),(0,r.jsx)(i.xv,{align:"center",children:e._('Try removing a few filters to help us show more results.', 'closeup.filteredFeed.enfOfFeed.actionOne', 'message to let users know they can remove filters to see more results')})]}),(0,r.jsx)(a.Z,{})]})}},667542:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(883119),a=n(810831),l=n(708130),r=n(785893);function s(){let e=(0,l.ZP)();return(0,r.jsx)(i.xu,{paddingY:16,children:(0,r.jsxs)(i.kC,{alignItems:"center",direction:"column",gap:4,children:[(0,r.jsx)(i.xv,{align:"center",size:"500",weight:"bold",children:e._('No results found', 'closeup.filteredFeed.noResultsFound.title', 'message to let users know there are no results found for the selected filters in closeup')}),(0,r.jsx)(i.xv,{align:"center",children:e._('Try removing a few filters to help us show more results.', 'closeup.filteredFeed.noResultsFound.actionOne', 'message to let users know they can remove filters to see more results')}),(0,r.jsx)(a.Z,{})]})})}},161668:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i=n(667294),a=n(616550),l=n(883119),r=n(772866),s=n(219300),o=n(708130),d=n(597015),c=n(890847),u=n(673695),p=n(965),m=n(819536),g=n(236256),h=n(80887),_=n(811924),y=n(300312),f=n(785893);let x=(0,i.lazy)(()=>Promise.all([n.e("22244"),n.e("33509"),n.e("18854")]).then(n.bind(n,474126)));function v({children:e}){return(0,f.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{padding:"0 2px"}},children:e})}function k({filter:e,story:t,viewParameter:n}){let k=(0,o.ZP)(),[b,P]=(0,i.useState)(!1),{logContextEvent:S}=(0,s.v)(),w=(0,a.k6)(),{closeupWithinMasonryEnabled:j,peekCloseupEnabled:I}=(0,h.x4)(),C="skin_tone"===e?13863:13864,T="skin_tone"===e?13803:14935,F="skin_tone"===e?10418:13358,{custom_properties:L,objects:A,title:K}=t;(0,g.Z)(()=>{S({element:F,event_type:13,component:C,view_type:3,view_parameter:n,aux_data:{story_type:C}})});let Z=(0,c.ZP)(e,L)||[],{format:R=""}=K,[E]=A||[],{title:D=""}=E||{},{format:z=""}=D||{},M=e=>{if(z){S({element:F,view_type:3,view_parameter:n,event_type:101,component:T,aux_data:{entered_query:z,filter_value:e,story_type:C}});let t=(0,p.Z)({query:z,rs:m.i.TYPED||"",scope:"pins",filters:e});w.push(t)}};return(0,f.jsxs)(i.Fragment,{children:[j?(0,f.jsxs)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{border:r.tc,gap:"12px"}},direction:"column",display:"flex",justifyContent:"center",padding:4,rounding:6,children:[R&&(0,f.jsx)(l.kC,{gap:{row:2,column:2},maxWidth:"100%",wrap:!0,children:(0,f.jsx)(l.X6,{accessibilityLevel:2,align:"start",id:"inclusive-filters-heading",size:"400",children:R})}),(0,f.jsx)(l.kC,{gap:{row:2,column:2},justifyContent:"center",wrap:!0,children:Z&&"skin_tone"===e?Z.map(({term:t,display:n},i)=>(0,f.jsx)(l.Fm,{color:y.W[i],onClick:()=>M((0,d.Z)(t,e)),selected:!1,size:"lg",text:n},t)):z&&Z.map(({term:e})=>(0,f.jsx)(v,{children:(0,f.jsx)(_.Z,{filterId:Number((0,d.Z)(e)),filterOption:null,onClickApplyFilters:()=>M(e),query:z,viewParameter:n,viewType:3})},e))})]}):(0,f.jsx)(l.xu,{margin:I?void 0:7,marginBottom:I?7:void 0,marginTop:I?2:void 0,children:(0,f.jsxs)(l.kC,{alignItems:"center",direction:"column",gap:{row:0,column:3},children:[(0,f.jsxs)(l.xu,{alignItems:"center",display:"flex",marginStart:8,children:[R&&(0,f.jsx)(l.xv,{overflow:"normal",weight:"bold",children:R}),"hair_pattern"===e&&(0,f.jsx)(l.xu,{marginStart:1,children:(0,f.jsx)(l.hU,{accessibilityLabel:k._('Learn more', 'HairPatternFilters.infoIconButton', 'Icon button to expand the educational component about hair pattern filters'),"data-test-id":e,icon:"info-circle",iconColor:"darkGray",onClick:()=>P(!0),padding:1})})]}),(0,f.jsx)(l.kC,{flex:"none",gap:{row:1,column:0},children:Z&&"skin_tone"===e?Z.map(({term:t,display:n},i)=>(0,f.jsx)(v,{children:(0,f.jsx)(l.Fm,{color:y.W[i],onClick:()=>M((0,d.Z)(t,e)),selected:!1,size:"lg",text:n})},t)):z&&Z.map(({term:e})=>(0,f.jsx)(v,{children:(0,f.jsx)(_.Z,{filterId:Number((0,d.Z)(e)),filterOption:null,onClickApplyFilters:()=>M(e),query:z,viewParameter:n,viewType:3})},e))})]})}),b&&(0,f.jsx)(u.Z,{children:(0,f.jsx)(x,{onDismiss:()=>P(!1)})})]})}},548243:function(e,t,n){n.d(t,{Z:function(){return _}});var i,a=n(667294);n(422578);var l=n(883119),r=n(463996),s=n(131548),o=n(272083),d=n(708130),c=n(967629),u=n(541418),p=n(78979),m=n(785893);let g=void 0!==i?i:i=n(197096),h=({children:e,disabled:t,href:n})=>t?e:(0,m.jsx)(l.Tg,{href:n,children:e}),_=({disabled:e=!1,pinKey:t,varient:n="default"})=>{let i;let[_,y]=(0,a.useState)(0),f=(0,s.Z)(g,t),x=(0,d.ZP)(),v=f?.images,k=f?.isEligibleForPdp,b=f?.richSummary?.products?.[0],P=b?.offerSummary,S=b?.shippingInfo,w=f?.title||f?.richSummary&&f?.richSummary.displayName||f?.gridTitle||f?.pinner?.fullName;return(0,m.jsx)(h,{disabled:e,href:`/pin/${f?.entityId}`,children:(0,m.jsxs)(l.kC,{alignItems:"center",gap:{row:4,column:0},children:[(0,m.jsx)(l.zd,{height:"slim"===n?100:120,rounding:2,width:"slim"===n?72:86.4,children:(0,m.jsx)(l.Ee,{alt:x._('cutout Pin image', 'shuffleCutoutOverlay.cutoutPinImage', 'Pin image a cutout originates from'),fit:"cover",naturalHeight:v?.height??0,naturalWidth:v?.width??0,src:v?.url??""})}),(0,m.jsx)(l.kC.Item,{flex:"grow",children:(0,m.jsxs)(l.kC,{direction:"column",gap:2,children:[k?(0,m.jsxs)(l.kC,{alignItems:"center",children:[(0,m.jsx)(r.Z,{productDetails:{maxPrice:P?.maxPrice,minPrice:P?.minPrice,price:P?.price,standardPrice:P?.standardPrice},type:"slim"===n?"mobileHeading":"cutout"}),P?.price===P?.standardPrice?(0,m.jsx)(u.Z,{customStyles:{color:"dark",size:"slim"===n?"300":"200"},freeShippingPrice:S?.freeShippingPrice,freeShippingValue:S?.freeShippingValue,showPrevDot:!0}):null]}):null,w?(0,m.jsx)(l.xv,{ref:e=>{e&&!_&&y((0,p.xW)(e))},lineClamp:2,size:"400",children:w}):null,!k&&f.description?(0,m.jsx)(l.xv,{lineClamp:_>1?1:2,children:f.description}):null,(0,m.jsxs)(l.kC,{alignItems:"center",gap:1,children:[(0,m.jsx)(l.xv,{size:"slim"===n?"300":"200",children:f.pinner?.fullName??f.richSummary?.siteName}),f.pinner?.isVerifiedMerchant?(0,m.jsx)(l.JO,{accessibilityLabel:x._('check-circle icon', 'shuffleCutoutOverlay.checkCircleIcon', 'Icon that shows verified'),color:"info",icon:"check-circle",size:14}):null]}),w||f.description?null:(0,m.jsx)(l.xv,{lineClamp:2,size:"200",children:(i=f?.pinner?.followerCount??0,(0,c.nk)(x.ngettext('{{ followerCount }} follower', '{{ followerCount }} followers', i, 'cutoutParentPin.follwers', 'Number of followers a pinner has. Example: "1 follower", followerCount: number of follwers'),{followerCount:(0,m.jsx)(o.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:i},f.entityId)}))})]})})]})})}},496211:function(e,t,n){n.d(t,{Z:()=>Z});var i,a,l=n("667294");n("167912");var r=n("883119"),s=n("400556"),o=n("391144"),d=n("10380"),c=n("304538"),u=n("131548"),p=n("708130"),m=n("967629"),g=n("386799"),h=n("812996"),_=n("704665"),y=n("958605"),f=n("605046"),x=n("737787"),v=n("570630"),k=n("105161"),b=n("80887"),P=n("780445"),S=n("986885"),w=n("489235"),j=n("785893");let I=e=>e.replace(/\s+/g," "),C=void 0!==i?i:i=n(653984);class T extends l.Component{componentDidMount(){let{onUpdate:e}=this.props;e?.()}componentDidUpdate(e){if(e.showMore!==this.props.showMore){let{onUpdate:e}=this.props;e?.()}}render(){let{isArticle:e,pin:t,tutorialDescription:n,showMore:i,onToggle:a,i18n:l,closeupWithinMasonryEnabled:u,peekCloseupEnabled:p}=this.props,{carouselData:b,closeupUnifiedDescription:C,userMentionTags:T,storyPinData:F}=t,L=(C||"").trim();if(b){let e=b.carouselSlots??[],t=b.index??0;e[t]&&e[t].details&&(L=e[t].details)}let A=L&&n&&n.trim()===L,K=L?I(L):"";(K=!i&&K&&K.length?(0,k.ZP)(K,e?195:200):K)&&T&&(K=(0,j.jsx)(c.Z,{description:K,mentionLinkColor:"shopping",shouldAdjustOffset:!0,userMentionTags:T.map(e=>({length:e.length,objectId:e.objectId,offset:e.offset,tagType:e.tagType}))}));let Z=L&&L.length>(e?195:200),R=null,E=(0,g.Z)((0,h.Z)((0,_.Z)((0,y.Z)(this.props)))),D=F?.metadata?.basics;if(D){let e;let{keyValueBlocks:n,listBlocks:i}=D;t&&t.domain&&t.link&&(e={domain:t.domain,url:t.link});let a=[];e?.domain&&(a=[...a,e.domain]);let r=(n||[]).map(e=>(0,P.Z)(e.categoryType,e.value,l)).filter(e=>""!==e);r.length>0&&(a=[...a,...r]),(i??[]).forEach(({heading:e,blocks:t})=>{e&&(a=[...a,e]),(t??[]).forEach(({blocks:e})=>{(e??[]).forEach(({text:e})=>{e&&(a=[...a,e])})})}),R=(0,S.Z)(a)}else if(E){let{pin:e}=this.props,{prepTime:t,cookTime:n,totalTime:i,servingSummary:a,serves:l}=E.recipe,s=i||n||t;if(n&&t){let e=n.h||0,i=n.m||0;s={h:e+(t.h||0),m:i+(t.m||0)}}let o=s?(0,v.Z)((0,x.X)(s),this.props.i18n):null,c=e.richMetadata?.recipe?.aggregateRating?.reviewCount;a&&(R=l?(0,j.jsxs)(r.xv,{inline:!0,size:d.n,children:[l," ",this.props.i18n._('servings', 'closeup.CardSourceDescriptionText.servesLabel', 'Label for servings')]},"recipe"):(0,j.jsx)(r.xv,{inline:!0,size:"200",children:a},"recipe")),o&&(R=R?(0,m.nk)("{{ timeLabel }}  {{ description }}",{timeLabel:o,description:R}):o),"number"==typeof c&&c>0&&(R=R?(0,m.nk)(this.props.i18n._('{{ reviewCount }} reviews \xB7 {{ description }}', 'number of reviews on a recipe and the description', 'number of reviews on a recipe and the description'),{reviewCount:c,description:R}):c);let u=e.richMetadata?.recipe?.aggregateRating?.ratingValue,p=Number(u);Number.isNaN(p)&&(p=0),p>=.25&&(R=R?(0,m.nk)("{{ ratings }} {{ description }}",{ratings:(0,j.jsx)(f.Z,{max_rating:e.richMetadata?.recipe?.aggregateRating?.bestRating,rating:u},u),description:R}):(0,j.jsx)(f.Z,{max_rating:e.richMetadata?.recipe?.aggregateRating?.bestRating,rating:u},u))}if(!K||A)return null;let z=4;return u?z=0:p&&(z=2),L?(0,j.jsx)(r.xu,{marginBottom:u?0:4,marginTop:z,children:(0,j.jsx)(o.Z,{descriptionDir:(0,w.j)(L),children:(0,j.jsx)(s.Z,{description:L||"",userMentionTags:T||[]})})}):(0,j.jsxs)("span",{children:[(0,j.jsx)(r.xv,{color:u?"subtle":void 0,inline:!0,size:"200",children:(0,j.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{display:"inline"}},"data-test-id":"description",position:"relative",children:R?(0,m.nk)("{{ recipeInfo }}  {{ description }}",{recipeInfo:R,description:K}):K})}),Z&&!i&&(0,j.jsx)(r.xu,{"data-test-id":"more-button",display:"inlineBlock",marginStart:1,children:(0,j.jsx)(r.iP,{fullWidth:!1,onTap:a,children:(0,j.jsx)(r.xv,{inline:!0,size:"200",weight:"bold",children:this.props.i18n._('More', ' - ', ' -- ')})})})]})}}let F=function(e){let t=(0,p.ZP)(),{pinKey:n}=e,i=(0,u.Z)(C,n),{closeupWithinMasonryEnabled:a,peekCloseupEnabled:l}=(0,b.x4)();return(0,j.jsx)(T,{...e,closeupWithinMasonryEnabled:a,i18n:t,peekCloseupEnabled:l,pin:i})},L=(e,t)=>e.length>300?e:e.length+t.length+3>300?`${e} ${t}...`:`${e} ${t}`,A=e=>e.split(" ").map(e=>e.trim()).reduce(L,""),K=void 0!==a?a:a=n(910230);function Z(e){let[t,n]=(0,l.useState)(!1),{pinKey:i,onUpdate:a}=e,r=(0,u.Z)(K,i);if(!r.entityId)return null;let s=!!r.aggregatedPinData,o=!!r.description,d=!!r.richMetadata?.recipe,c=!!r.richMetadata?.article,p=r.richMetadata?.article?.description,m=!!r.richMetadata?.tutorial,g=r.richMetadata?.tutorial?.description??"",h=c&&!d&&!m;return(0,j.jsx)(l.Fragment,{children:(0,j.jsx)("span",{className:"richPinInformation","data-test-id":"richPinInformation-description",children:o||s?(0,j.jsx)(F,{isArticle:h,onToggle:()=>n(!0),onUpdate:a,pinKey:r,showMore:t,tutorialDescription:g}):h&&p&&(0,j.jsx)("span",{className:"richPinArticleSummary",style:{fontSize:"16px",marginBottom:12},children:A(p)})})})}},391144:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(667294),a=n(633301),l=n(883119),r=n(10380),s=n(708130),o=n(342117),d=n(80887),c=n(78979),u=n(489235),p=n(785893);let m=e=>e?"200":r.n;function g({isDarkMode:e,onPress:t,testID:n,label:i,peekCloseupEnabled:a,withShadow:s}){return(0,p.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{background:e?"black":"white"}},"data-test-id":n,display:"inlineBlock",position:"relative",children:[s&&(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{background:e?"linear-gradient(90deg, rgba(0, 0, 0, 0) 0%, black 100%)":"linear-gradient(90deg, rgba(255, 255, 255, 0) 0%, white 100%)",right:"100%"}},height:"100%",position:"absolute",width:"48px"}),(0,p.jsx)(l.iP,{fullWidth:!1,onTap:t,children:(0,p.jsxs)(l.xv,{size:a?"200":r.n,weight:"bold",children:["...",i]})})]})}function h({children:e,isDarkMode:t,descriptionDir:n}){let r=(0,i.useRef)(null),[h,_]=(0,i.useState)(0),[y,f]=(0,i.useState)(0),[x,v]=(0,i.useState)(!0),[k,b]=(0,i.useState)(!1),[P,S]=(0,i.useState)(!1),[w,j]=(0,i.useState)(!1),I=(0,s.ZP)(),{closeupWithinMasonryEnabled:C,isCloseupRelatedPinsAboveTheFoldEnabled:T,peekCloseupEnabled:F}=(0,d.x4)(),L=T?1:3,A=T?600:0;(0,i.useEffect)(()=>{if(r.current&&x){let e;let t=(0,c.xW)(r.current),n=(e=r.current).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth;b(()=>!!n&&(r.current&&(r.current.style.webkitLineClamp="unset",f(r.current?.scrollHeight??0),r.current.style.webkitLineClamp=L.toString()),!0)),v(!1),j(t>=L&&n),_(r.current?.clientHeight)}},[x,v,L,h,y,k]);let K=`${h}px`,Z=`${h+y}px`,R=`
    .TruncatedDescription-enter{
      max-height: ${K};
    }
    .TruncatedDescription-enter-active {
      max-height: ${Z};
      transition: max-height ${A}ms cubic-bezier(.25,1,.5,1);
    }
    .TruncatedDescription-enter-done {
      max-height: ${Z};
    }
    .TruncatedDescription-exit {
      max-height: ${Z};
    }
    .TruncatedDescription-exit-active {
      max-height: ${K};
      transition: max-height ${A}ms cubic-bezier(.25,1,.5,1);
    }
    .TruncatedDescription-exit-done {
      max-height: ${K};
    }
    [data-test-id="truncated-description"] div[role=button] {
      outline-offset: -2px;
      outline-width: 2px;
    }
  `,E=e=>S(e),D=e=>{let n=e?I._('more', 'storyPin.previewText.more', 'Story pin preview more text truncation'):I._('less', 'storyPin.previewText.less', 'Story pin preview less text truncation');return(0,p.jsx)(g,{isDarkMode:t,label:n,onPress:()=>E(e),peekCloseupEnabled:F,testID:`${e?"more":"less"}-description-container`,withShadow:e&&T})},z=(0,i.useRef)(null);return(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(o.Z,{unsafeCSS:R}),(0,p.jsx)(a.Z,{classNames:"TruncatedDescription",in:P,nodeRef:z,onEnter:()=>b(!1),onExited:()=>b(!0),timeout:A,children:(0,p.jsx)(l.xu,{ref:z,"data-test-id":"truncated-description",flex:"grow",overflow:T?"hidden":"visible",position:"relative",width:C?"100%":void 0,children:(0,p.jsx)(u.Z,{dir:n,children:(0,p.jsxs)(l.xv,{ref:r,align:"ltr"===n?"forceLeft":void 0,lineClamp:x||k?L:0,size:m(F),children:[e,w?(0,p.jsxs)(i.Fragment,{children:[P&&D(!1),(0,p.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{transition:T?"opacity 200ms ease-in-out":void 0,visibility:k?"visible":"hidden"}},opacity:k?1:0,position:"absolute",right:!0,children:D(!0)})]}):null]})})})})]})}},361826:function(e,t,n){n.d(t,{Z:function(){return i}});function i(e){return!!e&&e?.replaceAll(" ","").length>0}},840960:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(785893);let a={cursor:"auto"},l=e=>{e.stopPropagation()};function r({className:e,children:t}){return(0,i.jsx)("div",{className:e,onClick:l,role:"presentation",style:a,children:t})}},980374:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(667294),a=n(376829),l=n(320288);class r extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="handleKeyDown",n=e=>{let{onClose:t,goToNext:n,goToPrevious:i}=this.props,r=e.keyCode||e.code;e.ctrlKey||e.metaKey||["input","select","button","textarea"].includes(((document.activeElement||{}).tagName||"").toLowerCase())||document.activeElement&&document.activeElement.isContentEditable||(r===a.Z.LEFT?(e.preventDefault(),e.stopPropagation(),i&&i(),(0,l.nP)("web_keydown_left")):r===a.Z.RIGHT?(e.preventDefault(),e.stopPropagation(),n&&n(),(0,l.nP)("web_keydown_right")):r===a.Z.ESCAPE&&(e.preventDefault(),e.stopPropagation(),t()))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}let s=r},353063:function(e,t,n){n.d(t,{kC:()=>S,ZP:()=>j,Wp:()=>b});var i,a=n("667294");n("422578");var l=n("883119"),r=n("772866"),s=n("708130"),o=n("744469"),d=n("785893");let c=(e,t)=>(0,o.Z)(t._('Visit {{domain}}', 'Accessible label for clickthrough link button', 'Accessible label for clickthrough link button'),{domain:e}),u=({domain:e,fontSize:t="200",fullWidth:n=!0,textNode:i})=>{let a=c(e,(0,s.ZP)());return(0,d.jsx)(l.xu,{color:"secondary","data-test-id":"link-icon-with-domain-styles-wrapper",padding:2,rounding:2,width:n?"100%":void 0,children:(0,d.jsx)(l.st,{children:(0,d.jsxs)(l.xu,{alignItems:"center","data-test-id":"link-icon-with-domain-styles",display:"flex",justifyContent:"start",padding:1,children:[(0,d.jsx)(l.xu,{paddingX:1,children:(0,d.jsx)(l.JO,{accessibilityLabel:a,color:"default",icon:"arrow-up-right",inline:!0,size:15})}),(0,d.jsx)(l.xu,{paddingX:1,children:i||(0,d.jsx)(l.xv,{inline:!0,size:t,weight:"bold",children:(0,r.ff)(e)})})]})})})};var p=n("48813"),m=n("558792"),g=n("131548"),h=n("290241"),_=n("522282"),y=n("561162"),f=n("959474"),x=n("417573"),v=n("391374");let k=({children:e,clientTrackingParams:t,isPulsarDisplayed:n,onCompleteClick:i,zIndex:r,onClick:s,to:o,pin:c})=>{let u=(0,a.useRef)(null),p=(0,_.Z)({href:{pathname:o??"",state:{trackingParams:t}},clientTrackingParams:t,target:"blank",externalData:{pin:c&&{attributionSourceId:c.attributionSourceId,board:c.board&&{url:c.board.url},campaignId:c.campaignId,entityId:c.entityId,isDownstreamPromotion:c.isDownstreamPromotion,isPromoted:c.isPromoted,pinner:c.pinner&&{username:c.pinner.username},pinPromotionId:c.pinPromotionId,promoter:c.promoter&&{entityId:c.promoter.entityId},storyPinDataId:c.storyPinDataId,trackingParams:c.trackingParams,advertiserId:c.advertiserId}}});return(0,d.jsx)(m.Z,{anchor:".PinActionBar .website.pinActionBarButton, .linkModuleActionButton",anchorElementRef:u.current,isHidden:!n,onCompleteClick:i,zIndex:r,children:(0,d.jsx)(l.Tg,{ref:u,fullWidth:!1,href:o??"",onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),s?.(e),p({event:e})},rel:"nofollow",children:(0,d.jsx)("div",{className:"linkModuleActionButton",children:e})})})},b=({carouselData:e,domain:t})=>{let n="",i=t||"";if(e){let{carouselSlots:t=[]}=e,a=e.index??0;t&&t[a]&&(n=t[a].link||"",i=t[a].domain||i)}return{carouselLink:n,currentDomain:i}},P=({actionBarHeight:e,children:t,setPulsarVisibility:n})=>{let{checkExperiment:i}=(0,y.F)(),{isAuth:a}=(0,f.Z)(),r=i(a?"web_intersection_observer_migration_auth":"web_intersection_observer_migration_unauth").anyEnabled,s=()=>({rootMargin:`-${e+v.hu}px 0px 0px 0px`,threshold:.75}),o=e=>{n(e.slice(-1)[0].isIntersecting)};return r?(0,d.jsx)(h.Z,{onVisibilityChange:o,options:s(),children:e=>(0,d.jsx)(l.xu,{ref:e,children:t})}):(0,d.jsx)(p.Z,{onVisibilityChange:o,options:s(),children:t})},S=e=>{let t=(0,s.ZP)(),{clientTrackingParams:a,children:r,isPulsarDisplayed:o,onClickThrough:c,pinKey:p,showDomainInLink:m,zIndex:h}=e,_=(0,g.Z)(void 0!==i?i:i=n(292289),p);if(!(_.link&&!_.link.startsWith("https://i.pinimg.com")))return null;let y=t._('Visit', 'Default pin link button text', 'Default pin link button text');!_.linkDomain||_.richMetadata?.recipe?.fromAggregatedData?y=_.link&&!_.link.startsWith("https://i.pinimg.com")?t._('Visit', 'Generalized pin link button text', 'Generalized pin link button text'):t._('Open', 'Button text for pin without link to view media', 'Button text for pin without link to view media'):_.richMetadata?.products&&_.richMetadata.products.length>0?y=t._('Visit', 'Buyable pin link button text', 'Buyable pin link button text'):_.richMetadata?.tutorial?.name?y=t._('Visit', 'Make pin link button text', 'Make pin link button text'):_.richMetadata?.recipe?.name?y=t._('Make it', 'Recipe pin link button text', 'Recipe pin link button text'):_.richMetadata?.article?.name?y=t._('Read it', 'Article pin link button text', 'Article pin link button text'):_.link&&_.link.startsWith("https://i.pinimg.com")&&(y=t._('Open', 'Button text for pin without link to view media', 'Button text for pin without link to view media'));let{carouselLink:f,currentDomain:x}=b({carouselData:_.carouselData&&{carouselSlots:_.carouselData.carouselSlots&&_.carouselData.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:_.carouselData?.index},domain:_.domain});return(0,d.jsx)(k,{clientTrackingParams:a,isPulsarDisplayed:o,onClick:c,onCompleteClick:c,pin:_,to:f||_.link||_.imageSpec_orig?.url||"",zIndex:h,children:r||(m?(0,d.jsx)(u,{domain:x}):(0,d.jsx)(l.zx,{fullWidth:!0,size:"md",text:y}))})},w=({actionBarHeight:e,...t})=>{let[n,i]=(0,a.useState)(!0);return(0,d.jsx)(l.xu,{width:"100%",children:(0,d.jsx)(P,{actionBarHeight:e||0,setPulsarVisibility:i,children:(0,d.jsx)(l.xu,{display:"inlineBlock",children:(0,d.jsx)(S,{isPulsarDisplayed:n,zIndex:x.qW,...t})})})})},j=e=>(0,d.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,d.jsx)(l.xu,{children:(0,d.jsx)(w,{...e})})})},702622:function(e,t,n){n.d(t,{Z:function(){return h}});var i,a=n(667294);n(167912);var l=n(883119),r=n(772866),s=n(353063),o=n(10380),d=n(69103),c=n(131548),u=n(870912),p=n(80887),m=n(785893);let g=void 0!==i?i:i=n(130643);function h({actionBarHeight:e,isStoryPin:t,legoLinkClickthroughAnchorRef:n,onClickThrough:i,pinKey:h}){let _=(0,a.useRef)(null),{closeupWithinMasonryEnabled:y,peekCloseupEnabled:f,clientTrackingParams:x}=(0,p.x4)(),v=(0,c.Z)(g,h),{currentDomain:k}=(0,s.Wp)({carouselData:v.carouselData&&{carouselSlots:v.carouselData.carouselSlots&&v.carouselData.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:v.carouselData?.index},domain:v.domain});return(0,m.jsxs)(a.Fragment,{children:[(0,m.jsxs)(l.xu,{display:"inlineBlock",marginTop:!y&&(0,u._S)(k)?f?2:6:0,position:"relative",width:"100%",children:[(0,m.jsx)(s.ZP,{actionBarHeight:e,clientTrackingParams:x,onClickThrough:i,pinKey:v,showDomainInLink:!0,children:(0,m.jsx)(l.xu,{ref:_,dangerouslySetInlineStyle:{__style:{textDecoration:"underline"}},children:(0,m.jsx)(l.xv,{size:f?"200":o.n,children:(0,r.ff)(k)})})}),t&&(0,m.jsx)(d.default,{anchor:_.current,experienceIds:[504729],flyoutSize:"md",placementId:1000167,showCaret:!0,textAlign:"center",textWeight:"normal"})]}),(0,m.jsx)(l.xu,{ref:n,marginEnd:y?0:-7,marginStart:y?0:6,width:4})]})}},544593:function(e,t,n){n.d(t,{Z:()=>S});var i,a=n("667294");n("167912");var l=n("852935"),r=n("286502"),s=n("182367"),o=n("983014"),d=n("544358"),c=n("131548"),u=n("708130"),p=n("561162"),m=n("331749"),g=n("959474"),h=n("460515"),_=n("237861"),y=n("80887"),f=n("320288");let x=void 0!==i?i:i=n(612658),v=e=>{let t=new Image;t.loading="lazy",t.src=e;let{complete:n}=t;return t.src="",n},k=["736x","564x","474x","236x"],b=new RegExp(/\/(\d+x|originals)\//),P=e=>{for(let t of k){let n=e.replace(b,`/${t}/`);if(v(n))return(0,f.nP)("web.closeup.cached_preview_image.found",{tags:{resolution:t}}),n}return(0,f.nP)("web.closeup.cached_preview_image.not_found"),null};function S({isHovered:e,pinKey:t}){let n=(0,u.ZP)(),i=(0,g.Z)(),{checkExperiment:f}=(0,p.F)(),v=(0,h.Z)(),{mainImage:k,carouselInfo:b,previewImage:S,isGif:w,imgSrc:j}=(0,o.r)(),I=(0,s.Z)(),C=(0,r.Z)(),T=(0,c.Z)(x,t),F=(0,m.Z)(),{aggregatedPinData:L,altText:A,autoAltText:K,isEligibleForPdp:Z,isEligibleForRelatedProducts:R,isHidden:E,isUnsafe:D,pinner:z,richMetadata:M,visualObjects:B,trackedLink:O,link:V,method:H,shuffle:U,shuffleAsset:N}=T,W=(B??[]).some(e=>e.isStela),$=!Z&&b?.carouselData,G=!!L?.isShopTheLook,X=!!U&&I().isCollageEnabled,q=!!N&&C(),Y=!!R&&!G&&!Z&&!$&&!(X||q),J=(0,d.Z)({isHiddenPin:E,isUnsafePin:D}),Q=Y&&f("web_remove_stela").anyEnabled,ee=!Q&&J&&Y&&W,et=void 0!==B&&!Y&&f("web_animate_cta").anyEnabled||Q,en=(0,_.nl)(i,v)&&f("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,[ei,ea]=(0,a.useState)("inOut"),[el,er]=(0,a.useState)(!0),es=(0,a.useCallback)(()=>{er(!1)},[er]);(0,a.useEffect)(()=>{el&&e&&ea("none")},[el,e,es,ea,ee]);let eo=T.imageSpec_orig?.url,ed=b?.carouselData?function(e){let{carousel_slots:t,index:n}=e;return t&&void 0!==n&&(t[n]||{}).image_signature?t[n].image_signature:null}(b.carouselData):T.imageSignature,ec=O||V,eu="catalog_bulk_create"===H||M?.products,ep=ec&&eu?decodeURIComponent(ec):ec,em=(0,_.Ms)(i,v)===z?.username&&en,{paneWidth:eg,pdpCarouselSlotToPaneRatio:eh,showProductDetailPage:e_}=(0,y.x4)(),{height:ey,width:ef}=k,ex={naturalWidth:ef,naturalHeight:ey,alt:(0,l.Z)({altText:A,autoAltText:K,i18n:n}),src:w?j:!F&&j?.startsWith("https://i.pinimg.com/")?P(j)||S?.url||"":S?.url||""},ev={naturalHeight:ex.naturalHeight,naturalWidth:ex.naturalWidth,mainImage:{alt:ex.alt,src:w?ex.src:j},...!w&&{previewImage:{alt:"",src:w?"":ex.src}}};return{animateShopButton:el,disablePinTagButton:em,hasStelaResults:W,imageProps:ex,imageSignature:ed,imageWithPreview:ev,isScenePin:Y,link:ep,maxCloseupImageWidth:eg,onShopButtonAnimationComplete:es,onStelaDotAnimationComplete:()=>ea("none"),originalImageUrl:eo,pdpCarouselSlotToPaneRatio:eh,showAnimatedExploreCta:et,showProductDetailPage:e_,showStelaDotsOnScenePin:ee,stelaDotAnimationType:ei}}},201070:function(e,t,n){n.d(t,{Z:()=>_});var i=n("667294"),a=n("4960"),l=n("219300"),r=n("297706"),s=n("927998"),o=n("820368"),d=n("657204"),c=n("55077"),u=n("959474"),p=n("52681");let m=({segment:e})=>p.GL.get(e)??new Set,g=({segment:e})=>{let t=m({segment:e});return new Set([...p.hO].filter(e=>!t.has(e)))},h=()=>{let e=(0,c.HG)(),{isAuth:t}=(0,u.Z)(),n=t&&e,i=(0,s.E)();return i?e=>{"DEFAULT"!==e&&i.setSegment(e),n&&g({segment:e}).forEach(e=>{i.removeConstraint(e)})}:null};function _(e){let{logContextEvent:t}=(0,l.v)(),n=(0,s.E)(),c=h(),u=(0,o.Z)({name:"PinResource",options:(0,a.Z)(e.pinId,e.orbacSubjectId,e.addFields)}),p=u.data,m=(0,d.Z)(null!=p?{type:"deprecated",data:p}:null);return(0,i.useEffect)(()=>{if(p){let e=(0,r.Z)({hasPin:!!p,hasPinRichMetadata:!!p.rich_metadata,hasPinRichMetadataProducts:!!p.rich_metadata?.products,hasPinRichMetadataArticle:!!p.rich_metadata?.article,hasPinRichMetadataRecipe:!!p.rich_metadata?.recipe,hasPinStoryPinData:!!p.story_pin_data});t({event_type:7408,view_parameter:e,object_id_str:p.id,view_type:3,view_data:{pin_id:p.id,closeup_rich_types:p.shopping_flags||[]},aux_data:{...m()}}),p.aggregated_pin_data&&(p.aggregated_pin_data.is_shop_the_look||p.aggregated_pin_data.is_stela)&&t({event_type:7579,view_parameter:e,object_id_str:p.id,view_type:3,aux_data:{commerce_data:JSON.stringify({pin_is_shop_the_look:p.aggregated_pin_data.is_shop_the_look,pin_is_stela:p.aggregated_pin_data.is_stela})}}),n&&n.markConstraintComplete("resource"),c&&c(p.is_eligible_for_pdp?p.is_eligible_for_pdp_plus?"product_detail_page_plus":"product_detail_page":p.story_pin_data_id?"story_pin":"DEFAULT")}},[p,m]),e.children({pinResource:u})}},724784:function(e,t,n){n.d(t,{Z:function(){return i}});function i(e,t){switch(t.type){case"gallerySelect":return{shopping:t.select};case"pinLoaded":{let n=e.myTry?{}:{myTry:{isDoneByMe:t.pin.done_by_me}};return{pin:t.pin,...n,firstLoadComplete:!0}}case"tryChange":return{myTry:{isDoneByMe:t.isDoneByMe}};default:throw"impossible"}}},346776:function(e,t,n){n.d(t,{C:function(){return m}});var i=n(667294),a=n(883119),l=n(708130),r=n(228132),s=n(417573),o=n(391374),d=n(785893);function c(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let u=o.hu+r.Ie+76;class p extends i.Component{constructor(...e){super(...e),c(this,"state",{showRelatedPinsUpsellFlyout:!1}),c(this,"componentDidMount",()=>{this.handleDidShortClickThrough(),window.addEventListener("scroll",this.hideFlyout)}),c(this,"componentWillUnmount",()=>{window.removeEventListener("scroll",this.hideFlyout)}),c(this,"hideFlyout",()=>{this.setState({showRelatedPinsUpsellFlyout:!1})}),c(this,"handleDidShortClickThrough",()=>{this.scrollToAnchor(),window.setTimeout(()=>{this.setState({showRelatedPinsUpsellFlyout:!0})},100)}),c(this,"scrollToAnchor",()=>{this.anchorRef&&(this.anchorRef.scrollIntoView(!0),window.scrollBy(0,-u))}),c(this,"setAnchorRef",e=>{this.anchorRef=e}),c(this,"render",()=>(0,d.jsx)(a.xu,{ref:this.setAnchorRef,"data-test-id":"short-clickthrough-upsell",children:this.state.showRelatedPinsUpsellFlyout&&(0,d.jsx)(a.xu,{column:12,position:"absolute",top:!0,zIndex:new a.Ry(s.lJ),children:(0,d.jsx)(a.Li,{anchor:this.anchorRef,idealDirection:"up",message:this.props.i18n._('Not into this Pin? See more ideas below', 'Shows in a flyout message to upsell related pins to users', 'Shows in a flyout message to upsell related pins to users'),onDismiss:this.hideFlyout})})}))}}let m=function(e){let t=(0,l.ZP)();return(0,d.jsx)(p,{...e,i18n:t})}},717798:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var i=n(883119),a=n(315286),l=n(916178),r=n(674320),s=n(708130),o=n(482678),d=n(236256),c=n(785893);let u=({clientTrackingParams:e,watchAgain:t,imageSrc:n,pinDescription:u,pinId:p,rounded:m=!0})=>{let g=(0,s.ZP)(),h=(0,r.Z)();(0,d.Z)(()=>{h({event_type:120,view_type:3,component:13799})});let _=()=>{t()};return(0,c.jsx)(i.xu,{alignItems:"center",bottom:!0,color:"dark","data-test-id":"story-pin-end-card",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,opacity:.9,padding:4,position:"absolute",right:!0,rounding:m?o.yR:0,top:!0,width:"100%",children:(0,c.jsx)(i.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",width:"100%",children:(0,c.jsxs)(i.kC,{alignContent:"start",direction:"column",gap:{row:0,column:8},justifyContent:"start",children:[(0,c.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,c.jsx)(l.default,{buttonText:g._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),clientTrackingParams:e,imageSrc:n,pinDescription:u,pinId:p,shownWithinMasonry:!0})}),(0,c.jsxs)(i.kC,{alignItems:"center",children:[(0,c.jsx)(a.Z,{accessibilityLabel:g._('Replay button', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page'),handleClick:_,icon:"refresh",iconColor:"white",testId:"closeup-replay-button"}),(0,c.jsx)(i.xu,{children:(0,c.jsx)(i.iP,{onTap:_,rounding:2,children:(0,c.jsx)(i.X6,{color:"light",overflow:"normal",size:"400",children:g._('Replay', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page')})})})]})]})})})}},200366:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(667294),a=n(883119),l=n(772866),r=n(224706),s=n(538365),o=n(219300),d=n(708130),c=n(207706),u=n(789839),p=n(80887),m=n(785893);class g extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="startAudiblePlayTime",n=this.props.muted?null:new Date,(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidUpdate(e){e.muted!==this.props.muted&&(this.startAudiblePlayTime=this.props.muted?null:new Date)}componentWillUnmount(){let{musicRecordingId:e,muted:t,pinId:n,video:i}=this.props;if(e&&!t&&this.startAudiblePlayTime&&Date.now()-this.startAudiblePlayTime.getTime()>=2e3){let{hlsv3:t,mp4:a}=(0,c.ZP)({vEXP3:i.video_list?.V_EXP3,vEXP4:i.video_list?.V_EXP4,vEXP5:i.video_list?.V_EXP5,vEXP6:i.video_list?.V_EXP6,vEXP7:i.video_list?.V_EXP7,v720P:i.video_list?.V_720P,vHLSV3MOBILE:i.video_list?.V_HLSV3_MOBILE})||{},l=(a||t)?.duration||0;this.props.logContextEvent({event_type:8999,object_id_str:e,aux_data:{pin_id:n,story_pin_music_duration:l}})}}render(){let{activePageIndex:e,aspectRatio:t,blockHeight:n,blockWidth:i,closeupBodyWidth:l,closeupStoryPinViewability:r,closeupWithinMasonryEnabled:o,customEndCard:d,isCloseupRelatedPinsAboveTheFoldEnabled:u,isPlaying:p,muted:g,onEnded:h,onUpdateVideoInfo:_,pageIndex:y,pin:f,pinId:x,roundCorners:v=!0,maxHeight:k,video:b,videoThumbnailStartTime:P}=this.props,{hlsv3:S,mp4:w}=(0,c.ZP)({vEXP3:b.video_list?.V_EXP3,vEXP4:b.video_list?.V_EXP4,vEXP5:b.video_list?.V_EXP5,vEXP6:b.video_list?.V_EXP6,vEXP7:b.video_list?.V_EXP7,v720P:b.video_list?.V_720P,vHLSV3MOBILE:b.video_list?.V_HLSV3_MOBILE})??{},j=w||S;if(!j)return null;let{height:I,thumbnail:C,width:T}=j,F=t??(T??1)/(I??1),L={height:"100%",left:"0",top:"0",width:"100%"},A=o&&l?(l??i)/(Number(k)??n):i/n;if(!o&&Math.abs(A-F)>.01){if(A<F){let e=100*F/A;L.width=`${e}%`,L.left=`-${(e-100)/2}%`}else if(A>F){let e=100*A/F;L.height=`${e}%`,L.top=`-${(e-100)/2}%`}}let K="number"==typeof e&&y<=e+3;return(0,m.jsx)(a.xu,{height:u?"100%":n,overflow:"hidden",position:"relative",width:u?"100%":i,children:(0,m.jsx)(a.xu,{height:"100%",position:"absolute",width:"100%",children:K||p||P?(0,m.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:L},position:"absolute",children:(0,m.jsx)(s.Z,{aspectRatio:o?A:t,autoplay:p,closeupStoryPinViewability:r,contextLogData:{component:0===y?227:228,element:10957,objectId:x,story_pin_page_id:y,view:3,viewParameter:157},customEndCard:d,customThumbnail:C,isPromoted:!1,loop:!1,muted:g,objectFit:w?o?"contain":"cover":void 0,onEnded:()=>{h&&h(y)},onTimeChange:({time:e})=>{_&&"number"==typeof j.duration&&j.duration>0&&_({currentTime:e,duration:j.duration/1e3})},pinId:x,pinKey:null===f?null:{type:"deprecated",data:f},preferMp4:!!w,roundingOverride:v?null:0,showControls:u?"hover":"never",variant:"storyPin",video:{id:b.id,hlsv3:S,mp4:w},videoThumbnailStartTime:P})}):(0,m.jsx)(a.Ee,{alt:this.props.i18n._('Video cover image', 'closeup.storyPin.videoCover', 'cover image displayed for a video'),fit:"cover",naturalHeight:I??1,naturalWidth:T??1,src:C??""})})})}}function h(e){let{logContextEvent:t}=(0,o.v)(),{pin:n}=e,i=(0,d.ZP)(),{closeupWithinMasonryEnabled:a,isCloseupRelatedPinsAboveTheFoldEnabled:s}=(0,p.x4)(),{closeupBodyWidth:c}=(0,u.K4)(),{maxHeight:h}=(0,l.Re)(),{maxHeight:_}=(0,r.Z)({pinKey:null===n?null:{type:"deprecated",data:n}});return(0,m.jsx)(g,{...e,closeupBodyWidth:c,closeupWithinMasonryEnabled:a,i18n:i,isCloseupRelatedPinsAboveTheFoldEnabled:s,logContextEvent:t,maxHeight:a?_:h})}},178458:function(e,t,n){n.d(t,{Z:()=>G}),n("167912");var i,a,l=n("883119"),r=n("772866"),s=n("616550"),o=n("219300"),d=n("820368"),c=n("551603"),u=n("785893");let p=({block:{block_style:{height:e=0,width:t=0,x_coord:n=0,y_coord:i=0,rotation:a=0}={},original_comment_id:p},pageAspectRatio:m,scaleFactor:g})=>{let{logContextEvent:h}=(0,o.v)(),_=r._B/m,y=t*r._B*g/100,f=n*r._B*g/100,x=(0,s.k6)(),{data:v}=(0,d.Z)({name:"AggregatedCommentResource",options:{commentId:p,field_set_key:"comment_reply_sticker"}});return(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:f,top:i*_*g/100,transform:`rotate(${a}deg)`}},display:"flex",height:e*_*g/100,margin:-1,padding:1,position:"absolute",rounding:2,width:y,zIndex:c.B5,children:(0,u.jsx)(l.iP,{onTap:()=>{h({event_type:102,view_type:1,component:227,element:12541,aux_data:{comment_id:p}}),v?.pin_id&&x.push(`/pin/${v.pin_id}/comments/${p||""}`)},rounding:"pill"})})};var m=n("181072"),g=n("270187");function h({src:e,fallbackSrc:t,...n}){let i=(0,g.Z)(e);return(0,u.jsx)(m.Z,{...n,src:i?e:t})}var _=n("581722");function y({isUseCache:e,signature:t}){return(0,_.v9)(({pinbuilder:n})=>{let{storyPinItemBlocks:i}=n;if(!e)return null;for(let e of Object.keys(i))if(i[e].media?.signatureEdited===t||i[e].media?.signature===t)return i[e];return null})}var f=n("667294"),x=n("186541"),v=n("748837"),k=n("558919"),b=n("708130"),P=n("253525");let S=({aggregatedCommentId:e,onDismiss:t})=>{let n=(0,b.ZP)(),i=(0,v.Z)(),a=(0,x.Z)(),[r,s]=(0,f.useState)(""),o=(0,u.jsx)(l.kC,{justifyContent:"end",children:(0,u.jsx)(l.zx,{color:"red",disabled:!r,onClick:()=>{(async()=>{await a({fromUnifiedComment:!0,objectType:P.o.aggregatedComment,objectId:e,tags:"[]",text:r})})(),t()},text:n._('Post', 'ideapin.questionsticker.replymodal.postbutton', 'Post reply to creator Q&A question')})});return(0,u.jsx)(k.ZP,{accessibilityModalLabel:"reply to creator Q and A question",align:"start",footer:o,heading:n._('Reply', 'ideapin.questionsticker.replymodal', 'Reply to creator Q&A question'),onDismiss:t,children:(0,u.jsx)(l.xu,{paddingX:8,paddingY:1,children:(0,u.jsx)(l.Kx,{id:"ideaPinQuestionStickerReplyModalTextArea",onChange:({value:e})=>{s(e)},placeholder:i?n._('Your reply will show up as a public comment on this Pin.', 'pin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'):n._('Your reply will show up as a public comment on this Idea Pin.', 'ideapin.questionsticker.replymodal.placeholder', 'Placeholder for creator Q&A reply textarea'),value:r})})})};var w=n("971634"),j=n("131548"),I=n("967629"),C=n("482678"),T=n("311963");let F=void 0!==i?i:i=n(261549);function L({block:e,elementType:t,onFlyoutOpen:n,pageAspectRatio:i,pageIndex:a,pinKey:p,scaleFactor:m,tooltipElementType:g,videoPinProgress:h}){let{logContextEvent:_}=(0,o.v)(),[y,x]=(0,f.useState)(!1),[v,k]=(0,f.useState)(!1),P=(0,f.useRef)(null),L=(0,s.k6)(),A=(0,b.ZP)(),K=(0,j.Z)(F,p),{block_style:{height:Z=0,width:R=0,x_coord:E=0,y_coord:D=0,rotation:z=0}={},end_time:M,error_message:B,interactive_sticker_type:O=null,is_removed:V,is_valid:H,start_time:U,sticker_data:N,type:W}=e,$=K?.entityId,{board_id:G,question_comment_id:X}=N||{},{image_small_url:q,full_name:Y,username:J=""}=e.user??{},Q=null,ee=H&&5===O&&!!G,et=H&&7===O&&!!X,en=(0,d.Z)(G&&ee?{name:"BoardResource",options:{field_set_key:"tagged_board_preview",board_id:G}}:null),{is_collaborative:ei,pin_count:ea,url:el}=en.data||{};W===C.h8.PRODUCT_STICKER?Q=$?`/pin/${$}/`:"/":W===C.h8.MENTION_STICKER?Q=`/${J}/`:ee&&(Q=en.isLoaded?`${el}`:null);let er=r._B/i,es=R*r._B*m/100,eo=E*r._B*m/100,{currentTime:ed}=h||{},ec=!(0,T.Z)({currentTime:ed,endTime:M,startTime:U}),eu=()=>{_({event_type:123,component:228,element:g,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:a}}),x(!1)},ep=({event:e})=>{_({event_type:120,component:228,element:g,view_type:3,view_parameter:157,aux_data:{error_message:!H&&B?B:null,story_pin_page_id:a}}),x(!0),n&&(e.stopPropagation(),n())};(0,f.useEffect)(()=>(document.addEventListener("scroll",()=>{x(!1)}),()=>document.removeEventListener("scroll",()=>{x(!1)})),[]);let em=()=>[5].includes(O)?H?en.isLoaded?(0,u.jsxs)(f.Fragment,{children:[(0,u.jsxs)(l.xu,{flex:"grow",paddingX:2,children:[(0,u.jsx)(l.xv,{lineClamp:1,size:"100",weight:"bold",children:ei?A._('Explore this group board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when group board tag flyout showing'):A._('Explore this board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when board tag flyout showing')}),(0,u.jsx)(l.xv,{size:"100",children:(!!ea||0===ea)&&(0,I.nk)(A.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', ea, 'closeup.StoryPin.stickerBlock.boardSticker.boardLabel', 'Caption when board tag flyout that showing number of Pins on board'),{pinCount:ea})})]}),(0,u.jsx)(l.xu,{flex:"none",children:(0,u.jsx)(l.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]}):(0,u.jsxs)(l.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,u.jsx)(l.xu,{marginEnd:1,paddingX:2,children:(0,u.jsx)(l.xv,{color:"subtle",lineClamp:1,size:"100",children:A._('Loading board...', 'closeup.StoryPin.stickerBlock.boardSticker.loadingText', 'Label explaining board sticker still loading')})}),(0,u.jsx)(l.$j,{accessibilityLabel:A._('Board is loading', 'closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText', 'Accessibility label for board loading spinner'),show:!0,size:"sm"})]}):(0,u.jsx)(l.xu,{paddingX:2,paddingY:2,children:(0,u.jsx)(l.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:B})}):(0,u.jsx)(l.xu,{paddingX:2,paddingY:2,children:(0,u.jsx)(l.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:A._('Sticker not supported yet', 'closeup.StoryPin.stickerBlock.genericStickerError', 'Label explaining this sticker has not been implemented yet')})}),eg=()=>{let e=null;switch(W){case C.h8.PRODUCT_STICKER:let{gridTitle:t,imageSpec_236x:n,richSummary:i,description:a}=K||{},{displayName:r,products:s}=i||{},o=((s||[])[0]||{}).offerSummary||{},{price:d,maxPrice:c}=o||{},p=!!o&&(!!d||!!c),m=r||t||a;e=(0,u.jsxs)(f.Fragment,{children:[(0,u.jsx)(l.xu,{flex:"none",children:(0,u.jsx)(l.zd,{height:40,rounding:3,wash:!0,width:40,children:(0,u.jsx)(l.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:n?.url||""})})}),(0,u.jsx)(l.xu,{flex:"grow",paddingX:2,children:p?(0,u.jsxs)(l.kC,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,u.jsx)(l.xv,{color:"shopping",lineClamp:1,size:"100",weight:"bold",children:d}),(0,u.jsx)(l.xv,{lineClamp:1,size:"100",children:m})]}):(0,u.jsx)(l.xv,{lineClamp:1,size:"100",children:m})}),(0,u.jsx)(l.xu,{flex:"none",children:(0,u.jsx)(l.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case C.h8.MENTION_STICKER:e=(0,u.jsxs)(f.Fragment,{children:[(0,u.jsx)(l.xu,{flex:"none",children:(0,u.jsx)(w.qE,{name:Y??"",size:"sm",src:q??void 0})}),(0,u.jsx)(l.xu,{flex:"grow",paddingX:2,children:(0,u.jsx)(l.xv,{lineClamp:1,size:"200",weight:"bold",children:Y})}),(0,u.jsx)(l.xu,{flex:"none",children:(0,u.jsx)(l.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case C.h8.GENERIC_STICKER:e=em();break;case C.h8.VTO_MAKEUP_STICKER:e=(0,u.jsx)(l.xv,{size:"300",weight:"bold",children:A._('Try this sticker on your phone!', 'closeup.storyPin.vtoMakeupSticker', 'Caption when @vitural-try-on-makeup tag is tapped for Web')})}return(0,u.jsx)(l.xu,{alignItems:"center","data-test-id":W,display:"flex",justifyContent:"center",padding:W===C.h8.PRODUCT_STICKER?1:3,width:"100%",children:V?(0,u.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:A._('Tag removed!', 'closeup.storyPin.stickerBlock', 'Caption when the tag is removed')}):e})};return(0,u.jsx)(f.Fragment,{children:ec?null:(0,u.jsxs)(l.xu,{ref:P,dangerouslySetInlineStyle:{__style:{left:eo,top:D*er*m/100,transform:`rotate(${z}deg)`}},"data-test-id":(W||"")+"_container",display:"flex",height:Z*er*m/100+2*r.Xw,margin:-1,padding:1,position:"absolute",rounding:2,width:es+2*r.Xw,zIndex:c.B5,children:[(0,u.jsx)(l.iP,{disabled:ec,onTap:y?eu:({event:e})=>{ec||(_({event_type:101,component:228,element:t,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:a}}),et?k(!0):ep({event:e}))},rounding:"pill"}),y&&(0,u.jsx)(l.mh,{zIndex:r.tD,children:(0,u.jsx)(l.J2,{_deprecatedShowCaret:!0,anchor:P.current,idealDirection:"up",onDismiss:eu,positionRelativeToAnchor:!1,size:V?"flexible":"sm",children:V?eg():(0,u.jsx)(l.iP,{fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),V||(_({event_type:101,component:228,element:g,object_id_str:$,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:a}}),Q?L.push(Q):eu())},children:eg()})})}),!!X&&v&&(0,u.jsx)(S,{aggregatedCommentId:X,onDismiss:()=>{k(!1)}})]})})}var A=n("760186"),K=n("155184"),Z=n("78979"),R=n("656319");function E({block:e,fontsLoaded:t,pageAspectRatio:n,scaleFactor:i,thumbnail:a}){let{block_style:r,style:s=C.Cc,text:o}=e,{alignment:d,font:c,font_size:p,highlight_color:m,vertical_alignment:g=C.Cc.vertical_alignment}=s,{hex_color:h=C.Cc.hex_color}=s??{},[_,y]=(0,f.useState)(0),[x,v]=(0,f.useState)([]),k=c||C.Cc.font,{name:b,default_size:P,letter_spacing:S,line_height:w}=k,j=(0,R.Z)(k),I=Math.round(100*(r?.width||100))/1e4,T=Math.round(100*(r?.height||100))/1e4,F=Math.round(100*(r?.x_coord||0))/1e4,L=Math.round(100*(r?.y_coord||0))/1e4;(0,f.useEffect)(()=>{if(t){let e=(0,Z.KV)({text:o,boxHeight:K.U*T,boxWidth:K.q8*I,font:j,startFontSize:Math.floor(p||P||24)});v(e.lines),y(e.fontSize)}},[t,o]);let E=_*i,D=m?(0,C.pE)(E,w):{x:0,y:0},z=I*K.q8*i+2*D.x,M=T*K.U*i+2*D.y,B=F*K.q8*i-D.x,O=a?`${100*L}%`:L*(K.q8/n)*i-D.y;return(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:B,top:O}},display:"flex",height:M,position:"absolute",width:z,children:(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:(0,A.RK)({alignment:d,verticalAlignment:g})},children:(0,u.jsx)(l.xu,{display:"inlineBlock",maxWidth:"100%",children:(0,u.jsx)("p",{style:(0,A.BN)({fontSize:E,hexColor:h,letterSpacing:S,lineHeight:w,name:b}),children:x.map((e,t)=>(0,u.jsx)("span",{style:(0,A.xm)({fontSize:E,hasText:e.text.length>0,highlightColor:m||null,lineHeight:w}),children:t===x.length-1?e.text:(0,u.jsxs)(f.Fragment,{children:[e.text," ",(0,u.jsx)("br",{})]})},`paragraphLine-${t}-${(o??"").substr(0,9)}`))})})})})}var D=n("200366"),z=n("959474");function M({ownerId:e}){let t=(0,b.ZP)(),n=(0,z.Z)(),i=n.isAuth&&n.id===e;return(0,u.jsxs)(l.xu,{alignItems:"center",color:"tertiary",direction:"column",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[(0,u.jsx)(l.xv,{color:"inverse",children:i?t._('Your video is processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that their video is still processing'):t._('This video is still processing!', 'closeup.storyPin.videoPlaceholder', 'Let user know that this video is still processing')}),(0,u.jsx)(l.xv,{color:"inverse",children:t._('Check back in a few minutes.', 'closeup.storyPin.videoPlaceholder', 'Let user know to come back in a couple of minutes to view the video')})]})}var B=n("342117"),O=n("927998"),V=n("282290"),H=n("80887"),U=n("52681");function N({block:e,borderStyle:t,isActive:n,pinId:i,pwtTrackImageLoad:a,thumbnail:s}){let o;let d=(0,b.ZP)(),{closeupWithinMasonryEnabled:c,isCloseupRelatedPinsAboveTheFoldEnabled:p,isCloseupMediaViewerOpen:g,peekCloseupEnabled:_,viewportSize:f}=(0,H.x4)(),{maxHeight:x,fiftyPercentHeight:v,fiftyPercentWidth:k}=(0,r.Re)(),P=x;_&&"sm"===f&&(P=v);let S=e.image?.images?.["750x"]||e.image?.images?.["474x"],w=y({isUseCache:!0,signature:e.image_signature});if(!S&&!w)return null;o=s?"cover":c?"contain":"none";let j=`
    img {
      max-height: ${P};
      max-width: ${k};
      ${p&&"object-fit: contain"}
    }
  `;return(0,u.jsxs)(l.xu,{alignItems:_?"center":void 0,dangerouslySetInlineStyle:{__style:{...t,viewTransitionName:g?void 0:`pin-closeup-${i}`,display:_?"grid":"block"}},height:"inherit",overflow:"hidden",width:"inherit",children:[(0,u.jsx)(B.Z,{unsafeCSS:j}),w?(0,u.jsx)(h,{alt:d._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),color:S?.dominant_color??"",fallbackSrc:w.media?.src??"",fit:o,isActive:n,naturalHeight:S?.height??1,naturalWidth:S?.width??1,onLoad:a,src:S?.url??""}):(0,u.jsx)(m.Z,{alt:d._('Story pin image', 'closeup.storypin.renderer', 'Alt text for story pin image'),color:S?.dominant_color??"",fit:o,isActive:n,naturalHeight:S?.height??1,naturalWidth:S?.width??1,onLoad:a,src:S?.url??""})]})}function W({activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:i,isActive:a,isSplitLayout:s=!1,musicRecordingId:o,muted:d,onEnded:c,onUpdateVideoInfo:p,ownerId:m,pageAspectRatio:g,pageDimensions:h,pageIndex:_,pin:f,pinId:x,scaleFactor:v,stillLoading:k,videoThumbnailStartTime:b,thumbnail:P=!1}){let{block_style:{height:S=100,width:w=100,x_coord:j=0,y_coord:I=0}={},video:C}=t,{closeupWithinMasonryEnabled:T}=(0,H.x4)(),F=r._B/g,{height:L,width:A}=h,K=w*r._B*v/100,Z=S*F*v/100,R=w<100?Math.min(Math.max(100,w)-Math.abs(j),w):Math.min(Math.max(w-Math.abs(j),0),100),E=S<100?Math.min(Math.max(100,S)-Math.abs(I),S):Math.min(Math.max(S-Math.abs(I),0),100),z=T?"100%":E*F*v/100,B=T?"100%":R*r._B*v/100,O=Math.max(I,0)*F*v/100,V=Math.max(j,0)*r._B*v/100,U=y({isUseCache:!C,signature:t.video_signature});if(k)return null;let{media:N}=U||{},{duration:W,src:$}=N||{},G=!!$&&!!W;return C||G?!!(C?.video_list?.V_HLSV3_MOBILE||C?.video_list?.V_720P||G)&&(0,u.jsx)(l.xu,{height:s?"50%":"100%",overflow:"hidden",position:"relative",children:(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:V,top:O}},height:P?L:z,overflow:"hidden",position:"absolute",width:P?A:B,children:(0,u.jsx)(D.Z,{activePageIndex:e,aspectRatio:g,blockHeight:P?L:Z,blockWidth:P?A:K,closeupStoryPinViewability:n,customEndCard:i,isPlaying:a,musicRecordingId:o,muted:d,onEnded:c,onUpdateVideoInfo:p,pageIndex:_,pin:f,pinId:x,roundCorners:Z>=L&&K>=A,video:C||{video_list:{V_EXP7:{duration:W?1e3*W:0,url:$}}},videoThumbnailStartTime:b})})}):(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{left:V,top:O}},height:z,position:"absolute",width:B,children:(0,u.jsx)(M,{ownerId:m})})}let $=void 0!==a?a:a=n(529802);function G({activePageIndex:e,block:t,borderStyle:n,closeupStoryPinViewability:i,customEndCard:a,disableProductStickers:s,fontsLoaded:o,isActive:d,isSplitLayout:c=!1,musicRecordingId:m,muteVideos:g,onEnded:h,onFlyoutOpen:_,onUpdateVideoInfo:y,ownerId:f,pageAspectRatio:x,pageHeight:v,pageIndex:k,pageWidth:b,pin:P,pinId:S,previewOnly:w,pinKey:I,stillLoading:T=!1,thumbnail:F=!1,transform:A,videoPinProgress:K,videoThumbnailStartTime:Z}){let R=(0,j.Z)($,I),{block_style:{height:D=100,width:z=100,x_coord:M=0,y_coord:B=0}={},interactive_sticker_type:H=null}=t,G=(0,V.g)(),X=(0,O.E)();if(0===D||0===z)return null;let q=b/r._B;switch(t.type){case C.h8.PARAGRAPH:case C.h8.HEADING:return(0,u.jsx)(E,{block:t,fontsLoaded:o,pageAspectRatio:x,scaleFactor:q,thumbnail:F});case C.h8.VIDEO:return(0,u.jsx)(W,{activePageIndex:e,block:t,closeupStoryPinViewability:i,customEndCard:a,isActive:d,isSplitLayout:c,musicRecordingId:m,muted:g,onEnded:h,onUpdateVideoInfo:y,ownerId:f,pageAspectRatio:x,pageDimensions:{height:v,width:b},pageIndex:k,pin:P,pinId:S,scaleFactor:q,stillLoading:T,thumbnail:F,videoThumbnailStartTime:Z});case C.h8.IMAGE:let{scaleX:Y=1,scaleY:J=1}=A||{};return(0,u.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{height:`${D}%`,left:`${M*Y}%`,top:`${B*J}%`,width:`${z}%`}},overflow:"hidden",position:"absolute",children:(0,u.jsx)(N,{block:t,borderStyle:n,isActive:d,pinId:S,pwtTrackImageLoad:()=>{G&&d&&(G.addBinaryAnnotation("pin.id",S,"STRING"),G.addBinaryAnnotation("video",!1,"BOOL"),G.stop()),X&&d&&(X.addBinaryAnnotation("pin.id",S,"STRING"),X.addBinaryAnnotation("video",!1,"BOOL"),X.removeConstraint(U._z),X.markConstraintComplete(U.pM))},thumbnail:F})});case C.h8.MENTION_STICKER:return!w&&(0,u.jsx)(L,{block:{...t},elementType:12120,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:k,pinKey:null,scaleFactor:q,tooltipElementType:12121,videoPinProgress:K});case C.h8.GENERIC_STICKER:return!w&&(e=>{let t=5===H;return(0,u.jsx)(L,{block:{...e},elementType:t?12827:12858,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:k,pinKey:null,scaleFactor:q,tooltipElementType:t?12828:12859,videoPinProgress:K})})(t);case C.h8.PRODUCT_STICKER:return!w&&!s&&(0,u.jsx)(L,{block:{...t},elementType:12223,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:k,pinKey:R,scaleFactor:q,tooltipElementType:12224,videoPinProgress:K});case C.h8.VTO_MAKEUP_STICKER:return!w&&(0,u.jsx)(L,{block:{...t},elementType:12561,onFlyoutOpen:_,pageAspectRatio:x,pageIndex:k,pinKey:null,scaleFactor:q,tooltipElementType:12561,videoPinProgress:K});case C.h8.COMMENT_REPLY_STICKER:return t.type===C.h8.COMMENT_REPLY_STICKER&&!w&&(0,u.jsx)(p,{block:t,pageAspectRatio:x,scaleFactor:q});default:return null}}},274256:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(883119),a=n(772866),l=n(178458),r=n(100715),s=n(482678),o=n(935415),d=n(80887),c=n(785893);function u({activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:n,customEndCard:u,fontsLoaded:p,isActive:m,isPreview:g,muteVideos:h,onEnded:_,onFlyoutOpen:y,onUpdateVideoInfo:f,ownerId:x,page:v,pageAspectRatio:k,pageHeight:b,pageIndex:P,pageWidth:S,pin:w,pinId:j,productPins:I,shouldLogTimeSpent:C=!0,stillLoading:T=!1,videoPinProgress:F,viewParameter:L,viewType:A}){let{closeupWithinMasonryEnabled:K}=(0,d.x4)(),{background_color:Z}=v.style||{},{nonRenderableBlocks:R,blocks:E}=(0,r.Z)({storyPinBlocks:v.blocks??[]}),D=!!E.find(e=>e.type===s.h8.VIDEO),z=!!E.find(e=>!!e.video&&e.type===s.h8.VIDEO&&e.video_signature),M=R.find(e=>e.type===s.h8.MUSIC),B=M?.type==="story_pin_music_block"?M.provider_recording_id:void 0,O=()=>(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:K?a.yc:Z||"#fff"}},height:"100%",children:!g&&E.filter(e=>!D||z||e.type===s.h8.VIDEO).map((t,i)=>{let a=(I||[]).find(e=>[e.id,e.cacheable_id].includes(t.pin_id));return(0,c.jsx)(l.Z,{activePageIndex:e,block:t,closeupStoryPinViewability:n,customEndCard:u,disableProductStickers:!0,fontsLoaded:p,isActive:m,isSplitLayout:3===v.layout,musicRecordingId:B,muteVideos:h,onEnded:_,onFlyoutOpen:y,onUpdateVideoInfo:f,ownerId:x,pageAspectRatio:k,pageHeight:b,pageIndex:P,pageWidth:S,pin:w,pinId:j,pinKey:null!=a?{type:"deprecated",data:a}:null,stillLoading:T,videoPinProgress:F},`${v.id??""}-${t.type??""}-${i}`)})});return C?(0,c.jsx)(o.Z,{auxData:{story_pin_page_id:P},clientTrackingParams:t,component:0===P?227:228,shouldUseGrandparentId:!0,view:A,viewParameter:L,children:O()}):O()}},100715:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(482678);let a=[i.h8.COMMENT_REPLY_STICKER,i.h8.GENERIC_STICKER,i.h8.HEADING,i.h8.IMAGE,i.h8.MENTION_STICKER,i.h8.PARAGRAPH,i.h8.PRODUCT_STICKER,i.h8.VIDEO,i.h8.VTO_MAKEUP_STICKER];function l({storyPinBlocks:e=[],blocksToRender:t=a}){let n=[],l=[],r=[];return e.forEach(e=>{t.includes(e.type)?e.type===i.h8.PARAGRAPH||e.type===i.h8.HEADING?l.push(e):r.push(e):n.push(e)}),r.push(...l),{nonRenderableBlocks:n,textBlocks:l,blocks:r}}},983014:function(e,t,n){n.d(t,{A:function(){return p},r:function(){return c}});var i,a=n(667294);n(167912);var l=n(486188),r=n(131548),s=n(870912),o=n(785893);let{Provider:d,useHook:c}=(0,l.Z)("PageHeader"),u=void 0!==i?i:i=n(944443),p=({children:e,pinKey:t,overrideValue:n={}})=>{let i=(0,r.Z)(u,t),l=i?.videos,c=i?.embed,p=(0,a.useMemo)(()=>l?.videoList?.v720P?.url?{duration:l.videoList.v720P.duration||void 0,height:l.videoList.v720P.height||void 0,thumbnail:l.videoList.v720P.thumbnail||void 0,url:l.videoList.v720P.url||void 0,width:l.videoList.v720P.width||void 0,captions_urls:l.videoList.v720P.captionsUrls||void 0}:void 0,[l?.videoList?.v720P?.duration,l?.videoList?.v720P?.height,l?.videoList?.v720P?.thumbnail,l?.videoList?.v720P?.url,l?.videoList?.v720P?.width,l?.videoList?.v720P?.captionsUrls]),m=(0,a.useMemo)(()=>l?.videoList?.vHLSV4?.url?{duration:l.videoList.vHLSV4.duration||void 0,height:l.videoList.vHLSV4.height||void 0,thumbnail:l.videoList.vHLSV4.thumbnail||void 0,url:l.videoList.vHLSV4.url||void 0,width:l.videoList.vHLSV4.width||void 0}:void 0,[l?.videoList?.vHLSV4?.duration,l?.videoList?.vHLSV4?.height,l?.videoList?.vHLSV4?.thumbnail,l?.videoList?.vHLSV4?.url,l?.videoList?.vHLSV4?.width]),g=(0,a.useMemo)(()=>l?.videoList?.vHLSV3MOBILE?.url?{duration:l.videoList.vHLSV3MOBILE.duration||void 0,height:l.videoList.vHLSV3MOBILE.height||void 0,thumbnail:l.videoList.vHLSV3MOBILE.thumbnail||void 0,url:l.videoList.vHLSV3MOBILE.url||void 0,width:l.videoList.vHLSV3MOBILE.width||void 0}:void 0,[l?.videoList?.vHLSV3MOBILE?.duration,l?.videoList?.vHLSV3MOBILE?.height,l?.videoList?.vHLSV3MOBILE?.thumbnail,l?.videoList?.vHLSV3MOBILE?.url,l?.videoList?.vHLSV3MOBILE?.width]),h=(0,a.useMemo)(()=>{let e=p||m||g;return l?.entityId&&e?{id:l.entityId,hasVideo:e,mp4:p||void 0,hls:m||void 0,hlsv3:g||void 0}:null},[m,g,p,l?.entityId]),_=c?.src,y=c?.subtype==="pinstory",f=(0,s.sY)(c?.type),x=i?.imageSpec_564x||i?.imageSpec_736x||i?.imageSpec_orig||i?.imageSpec_474x||i?.imageSpec_236x,v=i?.imageSpec_1200x||i?.imageSpec_orig||i?.imageSpec_736x||i?.imageSpec_564x||i?.imageSpec_474x||i?.imageSpec_236x,k=i?.imageSpec_236x,b=(0,a.useMemo)(()=>{let e={mainImage:{height:x?.height??1,url:x?.url??"",width:x?.width??1},previewImage:k?.url?{height:k.height??1,url:k.url??"",width:k.width??1}:null,...n};return{embed:c,isEmbeddedVideo:!!_&&!f&&!y,video:h,imgSrc:f&&c?.src?c.src:e.mainImage.url,isGif:f,mediaViewerImage:{height:v?.height??1,url:v?.url??"",width:v?.width??1},...e}},[c,_,f,y,x,n,k?.height,k?.url,k?.width,v,h]);return(0,o.jsx)(d,{value:b,children:e})}},115951:function(e,t,n){n.d(t,{F:function(){return A},Z:function(){return Z}});var i,a,l,r,s=n(667294);n(167912);var o=n(883119),d=n(674094),c=n(772866),u=n(735276),p=n(855018),m=n(131548),g=n(93569),h=n(23534),_=n(561162),y=n(820368),f=n(55077),x=n(331749),v=n(959474),k=n(240091),b=n(220004),P=n(228132),S=n(80887),w=n(974241),j=n(52302),I=n(785893);let C=(0,j.Z)(()=>Promise.resolve().then(n.bind(n,238159)),void 0,"app-packages-StructuredFeed-ModuleReps-CarouselModule-CarouselModule"),T=void 0!==i?i:i=n(954129),F=void 0!==a?a:a=n(676079),L=void 0!==l?l:l=n(616683);function A(e){let t=(0,v.Z)(),n=t&&t.isAuth,i=(0,f.HG)(),a=(0,k.Z)(),l=(0,g.Z)({strategy:a?"GRAPHQL":"LEGACY",query:L,variables:{pinId:e,isDesktop:i},options:{fetchPolicy:"store-or-network"},transformGraphQL:e=>e.v3GetStelaShoppingCarouselQuery,useGetLegacyData:({pinId:e})=>{let t=n?`/v3/visual_search/stela/pins/${e}/module/`:`/v3/seo/stela/pins/${e}/module/`;return(0,y.Z)({name:"ApiResource",options:{url:t,data:{fields:(0,w.Z)()}}})}}),r=(0,m.Z)(F,l);return r?r.data:null}let K=({children:e,id:t,inCommentFeedRedesignExp:i,isCloseupRelatedPinsAboveTheFoldEnabled:a,storyRef:l,viewParameter:s})=>{let d=void 0!==r?r:r=n(981913),{contentIds:c,displayOptions:u,slot:p,storyId:g,storyType:_,trackingParams:y}=(0,m.Z)(d,l),f=u?.contentDisplay?.componentType,x=(0,h.Z)({clientTrackingParams:y,componentType:f,contextLogData:{story_id:g,story_type:_,content_ids:c},impressionType:"Story",loggingId:g,slotIndex:p||0,viewParameter:s,viewType:3});return(0,I.jsx)(o.xu,{ref:x,marginBottom:i?4:0,marginTop:a?4:i?4:8,children:e},t)};function Z({inCommentFeedRedesignExp:e,moduleWidth:t,pinKey:n,trafficSource:i,viewParameter:a}){let{checkExperiment:l}=(0,_.F)(),r=(0,k.Z)(),{closeupWithinMasonryEnabled:g,isCloseupRelatedPinsAboveTheFoldEnabled:h,peekCloseupEnabled:y,viewportSize:f}=(0,S.x4)(),v=(0,m.Z)(T,n),w=(0,s.useRef)(null),[j,F]=(0,s.useState)(t),L=A(v.entityId),Z=L?.[0];((0,x.Z)()?s.useEffect:s.useLayoutEffect)(()=>{w.current&&F(w.current?.offsetWidth)},[L]);let R=r?null:function(e){let t=e?(0,p.G5)(e):null;return t&&"LegacyData"===t.kind?t.singularLegacyData:null}(Z),E=l("web_stl_landing_page",{dangerouslySkipActivation:!0}).anyEnabled,D=(0,u.Z)({pinKey:v,requestParams:Z?.action?.requestParams??"",surfaceType:"stl",topLevelTrafficSource:i}),z=()=>{l("web_stl_landing_page")};if(!L||L&&0===L.length)return null;let M=e?3:4;y&&"lg"===f&&(M=void 0);let B=(()=>{if(!g&&!(y&&"lg"===f))return{};let e={paddingLeft:`${c.Gd}px`,paddingBottom:`${c.Gd}px`};return g?{...e,border:c.tc}:e})(),O=y&&"lg"===f;return(0,I.jsxs)(s.Fragment,{children:[(0,I.jsx)(d.Z,{show:!!L&&e}),(0,I.jsx)(o.kC,{alignItems:"center",direction:"column",justifyContent:"center",width:t,children:(0,I.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:B},rounding:g?6:0,width:t,children:!!L&&L.length>0&&L.map(t=>{if(null==t)return null;let n=t.displayOptions?.displayViewState??void 0,{action:i,containerType:l,storyId:r}=t;if(139!==l)return null;{let l=t.title?.format||"",s=E&&i?.url?i.url:D;return(0,I.jsx)(K,{id:r,inCommentFeedRedesignExp:e,isCloseupRelatedPinsAboveTheFoldEnabled:h,storyRef:t,viewParameter:a,children:(0,I.jsx)(b.Z,{collapseByDefault:!1,displayViewState:h?null:n,forceTappableHeader:!h,headerPaddingRight:P.g9,heading:l,surface:"ShoppingGridSmallCarousel",children:(0,I.jsx)(o.xu,{ref:w,marginTop:M,children:(0,I.jsx)(C,{addContentRight:(0,I.jsx)(o.xu,{width:P.g9}),allowHover:!0,dangerouslySetActionUrl:s,disableHeader:!0,fadeCarouselEdges:!g,gutterWidth:h?c.Gd:8,handleActionButtonClick:z,inCommentFeedRedesignExp:e,itemWidth:g?175:void 0,itemWidthHeightRatio:1,productTagParentPinId:v.entityId,saveButtonOptions:{type:"classic"},story:R,storyKey:t,styleOverrides:{buttonSizeOverride:"lg",carouselContainerMarginBottom:g?0:void 0,flexDirection:O?"column":"row",justifyContent:"start",navigationFabSize:32,showPagination:g},surface:"ShoppingGridSmallCarousel",view:3,viewParameter:a,width:j})})})},r)}})})})]})}},253087:function(e,t,n){n.d(t,{Z:function(){return d},_:function(){return o}});var i=n(551304),a=n(137123);let l=/^\/pin\/(.*[^\/])\/$/,r={"/":"feed_home","/homefeed":"feed_home","/pin/:id":"pin","/pin/:id/comments":"pin","/pin/:id/activity/tried":"pin","/pin/:id/activity/comments":"pin","/pin/:id/visual-search":"flashlight","/discover/article/:id":"explore_article","/discover/article/:title/:id":"explore_article","/topics/:interest":"feed_interest","/categories/:interest":"feed_category","/news_hub/:id":"notifications","/explore/:interest":"seo_auth","/interest/:id":"seo_auth","/search/:scope":"search","/following":"feed_following","/:username/pins":"user_pins","/:username/tried":"user_tries","/:username/:slug":"board","/:username/:slug/edit":"board","/:username/:slug/invite":"board","/:username/:slug/:section_slug":"board","/story_feed":"shop_feed"},s=e=>e&&e.search?(0,a.mB)(e.search).q??"":"",o=e=>{let t=[...e].reverse().find(({location:e})=>e&&!(0,i.L6)(e));return t&&t.location&&(0,i.X$)(t.location)?s(t.location):""};function d(e,t){let n=["pin"],i=[],s=1,o="unknown",d="unknown",c=!0;for(let t=e.length-1;t>0;t-=1){let i=function(e,t){if(t<=0)return"unknown";let n=e[t-1],i=n?.match?.path||"",l=["stela","stl"].includes((0,a.mB)(n?.location?.search).surfaceType??"");return i&&"/pin/:id/visual-search"===i&&l?"shop_feed":i?r[i]||"unknown":"feed_home"}(e,t);n.splice(0,0,i),c&&("pin"===(o=i)?s+=1:c=!1)}for(let t=e.length-2;t>=0;t-=1){let n=(e[t]?.location?.pathname||"").match(l);if(n&&2===n.length)i.splice(0,0,n[1].split("/")[0]);else break}return 1===n.length?(d="deep_linking",o="deep_linking"):(d=n[n.length-2],"pin"===o&&(o="deep_linking")),"seo_auth"!==d||t||(d="seo_unauth"),"seo_auth"!==o||t||(o="seo_unauth"),("search"===d||"search"===o)&&e.length>=s+1&&"/search/buyable_pins/"===(e[e.length-s-1]?.location?.pathname||"")&&(o="shop_feed","search"===d&&(d="shop_feed")),{trafficSource:d,topLevelTrafficSource:o,topLevelTrafficSourceDepth:s,contextPinIds:i}}},4960:function(e,t,n){n.d(t,{Z:function(){return i}});let i=(e,t,n)=>({id:e,field_set_key:"auth_web_main_pin",add_fields:n?n.join(","):void 0,client_tracking_params:void 0,noCache:!0,fetch_visual_search_objects:!0,...t?{orbac_subject_id:t}:Object.freeze({})})},224706:function(e,t,n){n.d(t,{Z:function(){return d}}),n(422578);var i,a=n(353063),l=n(131548),r=n(331749),s=n(80887);let o=void 0!==i?i:i=n(287960);function d({pinKey:e}){let t;let{closeupWithinMasonryEnabled:n}=(0,s.x4)(),i=(0,r.Z)(),d=(0,l.Z)(o,e);if(!n)return{maxHeight:void 0};let c=d?.richMetadata?.products?.[0],u=c?.offerSummary,p=u?.price||u?.standardPrice,m=d?.linkDomain?.officialUser?.firstName,g=!!d?.closeupAttribution?.firstName||m,h=d?.linkUserWebsite?.officialUser?.firstName,_=decodeURIComponent(d?.trackedLink||d?.link||""),{currentDomain:y}=(0,a.Wp)({carouselData:d?.carouselData&&{carouselSlots:d?.carouselData.carouselSlots&&d?.carouselData.carouselSlots.map(e=>({domain:e.domain,link:e.link})),index:d?.carouselData?.index},domain:d?.domain}),f=y.split(".")[0],x=0,v=0;return(t=84+(p?18:0),x+=(d?.closeupUnifiedTitle?23:0)+(g?40:0),v+=(h||m||f)&&_?64:0,t+=Math.max(x,v),i)?{maxHeight:`calc(100vh - 80px - ${t}px)`}:{maxHeight:window.innerHeight-80-t}}},286502:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(561162),a=n(3879),l=n(55077);let r=()=>{let{checkExperiment:e}=(0,i.F)(),{isAuthenticated:t}=(0,a.B)(),n=(0,l.HG)();return()=>t&&n&&e("auth_dweb_cutout_closeup").anyEnabled}},172119:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(616550),a=n(561162),l=n(3879),r=n(55077),s=n(491633);let o=({isShufflePin:e})=>{let{isAuthenticated:t}=(0,l.B)(),n=(0,r.HG)(),o=(0,s.C)((0,i.TH)()),{checkExperiment:d}=(0,a.F)();return(()=>{let i=!1,a=d("closeup_media_viewer").group;return t&&n&&o&&!e&&(i="enabled_corner_button"===a||a.startsWith("employee")),{isCloseupMediaViewerEnabled:i,isCornerButtonEnabled:i}})()}},927657:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(667294),a=n(772866),l=n(115951),r=n(890847),s=n(80887);function o(e,t){let n=(0,l.F)(e),{closeupWithinMasonryEnabled:o}=(0,s.x4)(),d=(t.data||[]).filter(e=>["SKIN_TONE_FILTER_QUERIES","hair_pattern_filter_queries"].includes(e?.story_type)).find(e=>(0,r.HM)(e?.story_type)),c=(0,i.useMemo)(()=>({...a.ne}),[]),u=(0,i.useMemo)(()=>({...a.tV}),[]),p=(0,i.useMemo)(()=>({...a.MB}),[]),m=[c];return(n&&n.length>0&&m.push(u),d&&m.push(p),o)?{closeupMasonryModules:m,skinToneModule:d}:{closeupMasonryModules:[],skinToneModule:void 0}}},962520:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(561162),a=n(3879),l=n(55077);function r(e){let{isAuthenticated:t,isRTL:n}=(0,a.B)(),r=(0,l.HG)(),{checkExperiment:s}=(0,i.F)(),o="";return e&&t&&r&&!n?o=s("closeup_auth_related_pins_above_fold_2024_dweb").group:e||t||!r||n||(o=s("closeup_unauth_related_pins_above_fold_2024_dweb").group),{isCloseupRelatedPinsAboveTheFoldEnabled:!!o&&"control"!==o,closeupWithinMasonryEnabled:"enabled_side_by_side"===o,peekCloseupEnabled:"enabled_peek"===o,closeupRelatedPinsAboveTheFoldExperimentGroup:o}}},182367:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(561162),a=n(3879),l=n(55077);let r=()=>{let{isAuthenticated:e}=(0,a.B)(),t=(0,l.HG)(),{checkExperiment:n}=(0,i.F)();return()=>{let i=!1;return{isShuffleRendererEnabled:i=e?t?n("auth_dweb_shuffle_renderer_closeup_v2").anyEnabled:n("auth_mweb_shuffle_renderer_closeup").anyEnabled:n("unauth_web_shuffle_renderer_closeup").anyEnabled,isCollageEnabled:i&&e&&t&&n("auth_web_collage_closeup").anyEnabled}}}},475869:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(899142),a=n(831949),l=n(249278);let r=e=>{let t={...e.pin,...e.pinResource.data},n=(0,i.Z)({carouselData:t.carousel_data,images:t.images,product:(t.rich_metadata||t.rich_summary)?.products?.[0]});return{availableWidthForContentOnRight:!1,backButtonLabelFitInScreen:null,closeupBodyContainerHeight:0,closeupContainerHeight:0,firstLoadComplete:!1,didLongClickThrough:!1,didPinClickThrough:!1,didShortClickThrough:!1,didMountAfterSavePlacement:!1,hideBackButton:!1,isCloseupMaximized:!1,isCommentSectionOpen:!0,isOverRelatedPins:null,isRelatedInterestsBannerDismissed:!1,intervalId:null,landOnCurrentPage:!1,loginModalOptions:null,modalOpen:!1,myTry:e.pin?{isDoneByMe:!!e.pin.done_by_me}:null,newshubCloseupCapBackButtonCount:0,passScrollThreshold:!1,pin:t,pinId:e.pinId,quickPromoteModalTriggered:!1,relatedPinsUpsellShown:!1,showBackButton:!0,showProductDetailPage:!!t.is_eligible_for_pdp,shopping:{catalogId:-1,variantId:void 0},viewportSize:"lg",visualState:{carouselData:n&&{...n,index:e.pin.carousel_data?.index||0},mainImage:e.mainImage,previewImage:(0,l.Yf)(t.images?.["236x"])},v1DeprecationModalDismissed:!1}};function s(e){let{closeupWithinMasonryEnabled:t,pin:n,pinId:i,pinResource:l}=e,{getMainPinImage:s}=(0,a.Z)({pinKey:{type:"deprecated",data:n},closeupWithinMasonryEnabled:t});return r({pin:n,pinId:i,pinResource:l,mainImage:s()})}},459892:function(e,t,n){n.d(t,{Z:function(){return d}}),n(167912);var i,a=n(131548),l=n(561162),r=n(55077),s=n(959474);let o=void 0!==i?i:i=n(478641);function d({pinKey:e}){let{checkExperiment:t}=(0,l.F)(),n=(0,r.HG)(),i=(0,a.Z)(o,e),d=(0,s.Z)();if(!n||!d.isAuth)return{shouldFetchSLURPFields:!1,isInCloseupShoppingRefinementsExp:!1};let c=t("web_closeup_shopping_refinements_auth",{dangerouslySkipActivation:!0}).group;return{shouldFetchSLURPFields:!!c,isInCloseupShoppingRefinementsExp:!0===i.isEligibleForCloseupOneBarRefinements&&!1===i.isPromoted&&"enabled"===c}}},160394:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(561162);function a(){let{checkExperiment:e}=(0,i.F)();return{isEnabled:e("dweb_closeup_remove_back_button").anyEnabled}}},658045:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(62927);let a=(0,n(108293).Z)(12,(e,t)=>({pin_id:e.pinId,email_id:e.emailId,did_long_clickthrough:t.didLongClickThrough||!1,did_pin_clickthrough:t.didPinClickThrough||!1,did_repin:t.didRepin||!1,is_own_or_group_pin:t.is_own_or_group_pin||!1,login_page_type:t.loginPageType||"unknown",scroll_to_threshold:t.scrollToThreshold,pin_image_signature:t.pin_image_signature,is_creator_card_shown:!!(0,i.nU)({domain:e.pin.domain??"",hasLinkDomainOfficialUser:!!e.pin.link_domain?.official_user,hasLinkUserWebsiteOfficialUser:!!e.pin.link_user_website?.official_user,hasNativeCreator:!!e.pin.native_creator,hasThirdPartyPinOwner:!!e.pin.third_party_pin_owner,isPromoted:!!e.pin.is_promoted,pinnerDomainUrl:e.pin.pinner?.domain_url??"",pinnerDomainVerified:!!e.pin.pinner?.domain_verified}),creator_username:e.pin?.closeup_attribution?.full_name}))},10380:function(e,t,n){n.d(t,{n:function(){return i}});let i="300"},383195:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(883119),a=n(785893);let l=/^(?!.*#.*#)#[\p{L}\p{N}_]\S*$/gu;function r({closeupWithinMasonryEnabled:e=!1,peekCloseupEnabled:t=!1,text:n}){let r=t?"200":"300";return n.split(new RegExp(/(#\S*)/)).map((t,n)=>{let s=`${n}-${t}`;return t.match(l)?(0,a.jsx)(i.xv,{color:"link",inline:!0,size:r,children:(0,a.jsx)(i.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},s):(0,a.jsx)(i.xv,{color:e?"subtle":void 0,inline:!0,size:r,children:t},s)})}},913736:function(e,t,n){n.d(t,{Z:function(){return d}}),n(167912);var i,a=n(219300),l=n(131548),r=n(870912),s=n(657204);let o=void 0!==i?i:i=n(459908),d=function({clientTrackingParams:e,pinKey:t,pinId:n,viewParameter:i,trafficSource:d}){let{logContextEvent:c}=(0,a.v)(),u=(0,l.Z)(o,t),p=(0,s.Z)(u);return()=>{let t=p();c({event_type:12,object_id_str:n,view_type:3,component:85,view_parameter:i,clientTrackingParams:e,aux_data:{...t}}),c({event_type:8948,clientTrackingParams:e,view_type:3,view_parameter:i,component:85,object_id_str:n,aux_data:{click_type:"clickthrough",closeup_navigation_type:d&&(0,r.sV)(d)?"deeplink":"click",...t}})}}},304538:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(667294),a=n(883119),l=n(383195),r=n(219300),s=n(80887),o=n(785893);let d=e=>e.replace(/\s+/g," "),c=e=>null!=e&&e>-1,u=(e,t)=>{let n=t.substr(0,e);return(e??0)-(n.length-d(n).length)},p=({color:e,mention:t,tagObjectId:n,tagType:i,textSize:l})=>{let{logContextEvent:s}=(0,r.v)();return(0,o.jsx)(a.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),s({event_type:101,element:11915,aux_data:{tag_id:n,tag_type:i}})},underline:"none",children:(0,o.jsx)(a.xv,{color:e,inline:!0,overflow:"normal",size:l,weight:"bold",children:t},t)},n)},m=({description:e,mentionLinkColor:t,shouldAdjustOffset:n,shouldMakeHashtagLinksFromText:r,textSize:d,userMentionTags:m})=>{let{closeupWithinMasonryEnabled:g,peekCloseupEnabled:h}=(0,s.x4)();if(0===m.length)return(0,o.jsx)(i.Fragment,{children:e});let _=0,y=[];return[...m].map(t=>n?{...t,offset:u(t.offset??0,e)}:t).sort((e,t)=>(e.offset??0)-(t.offset??0)).filter(e=>c(e.offset)&&c(e.length)).forEach(n=>{let i=n.offset??0,a=n.length??0,l=e.substr(_,i-_),r=e.substr(i,a);y.push(l),y.push((0,o.jsx)(p,{color:t,mention:r,tagObjectId:n.objectId,tagType:n.tagType,textSize:d})),_=i+a}),y.push(e.substr(_)),(r?y.flatMap(e=>"string"!=typeof e?e:(0,l.Z)({closeupWithinMasonryEnabled:g,peekCloseupEnabled:h,text:e})):y).reduce((e,t)=>(0,o.jsxs)(a.xv,{inline:!0,size:d,children:[e,t]}),null)}},804167:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(694623);async function a(e,t){let n=async()=>{let e={name:t._('Quick Saves', 'quickSave.defaultBoardName', 'Name of the auto-created board for quicksave experience saves.'),layout:"quick_saves",privacy:"public",return_existing:!0,aux_data:{source:"unauth_quick_save"}};return i.Z.create("BoardResource",e).callCreate()},{resource_response:{data:a}}=await n(),l=async t=>i.Z.create("RepinResource",{board_id:t,description:e.description||"",is_removable:e.promotedIsRemovable??void 0,link:e.link,pin_id:e.entityId||"",title:e.title||""}).callCreate({showError:!1});return await l(a.id),a}},735276:function(e,t,n){n.d(t,{Z:function(){return u}}),n(167912);var i,a=n(131548),l=n(13596),r=n(561162),s=n(116766),o=n(843075),d=n(866652);let c=void 0!==i?i:i=n(654593);function u({pinKey:e,requestParams:t,surfaceType:n,topLevelTrafficSource:i}){let u=(0,a.Z)(c,e),{checkExperiment:p}=(0,r.F)(),m=p("web_cutouts",{dangerouslySkipActivation:!0}).anyEnabled,g=(u.visualObjects||[]).filter(e=>e.isStela),{getNormalizedPinImage:h}=(0,l.Z)({pinKey:u,maxWidth:s.RZ}),{height:_,width:y}=h(),f="";if(g.length>0){let[e]=g,{x:a,y:l,w:r,h:s}=e,c=e&&(0,o.Z)({cropArea:{x:a,y:l,w:r,h:s},scaledWidth:y,scaledHeight:_});f=c&&(0,d.Z)({cropArea:c,cropSource:m?9:4,surfaceType:n,requestParams:t,title:e.label,trafficSource:i})}else f=(0,d.Z)({surfaceType:n});return`/pin/${u.entityId}/visual-search/${f}`}},965456:function(e,t,n){n.d(t,{Z:()=>j});var i=n("667294"),a=n("883119"),l=n("84071"),r=n("219300"),s=n("708130"),o=n("927998"),d=n("991342"),c=n("220004"),u=n("80887"),p=n("494086"),m=n("785893");let g=e=>0===e?0:2,h=({children:e,dangerouslySetInlineStyle:t,marginTop:n})=>(0,m.jsx)(a.xu,{dangerouslySetInlineStyle:t,"data-test-id":"structured-description",marginTop:n,children:e}),_=({content:e,order:t,type:n})=>{if(!e)return null;let i=n===p.X.HEADER,l=[p.X.HEADER,p.X.BOLD].includes(n),r=t>0&&i?4:g(t);return(0,m.jsx)(h,{marginTop:r,children:(0,m.jsx)(a.xv,{size:"200",weight:l?"bold":"normal",children:e})})},y=({content:e,order:t})=>e?(0,m.jsx)(h,{marginTop:g(t),children:e}):null,f=({content:e,order:t})=>Array.isArray(e)&&0!==e.length?(0,m.jsx)(h,{marginTop:g(t),children:e.map(e=>(0,m.jsxs)(a.xu,{direction:"row",display:"flex",marginStart:1,marginTop:1,children:[(0,m.jsx)(a.xv,{inline:!0,size:"200",weight:"bold",children:""}),(0,m.jsx)(a.xu,{marginStart:1,children:(0,m.jsx)(a.xv,{size:"200",children:e})})]},e))}):null,x=({accessibilityLabel:e,content:t,order:n})=>t&&"object"==typeof t?(0,m.jsx)(h,{dangerouslySetInlineStyle:{__style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},marginTop:g(n),children:(0,m.jsx)(a.iA,{accessibilityLabel:e,children:(0,m.jsx)(a.iA.Body,{children:Object.entries(t).map(([e,t],n)=>(0,m.jsxs)(a.iA.Row,{children:[(0,m.jsx)(a.iA.Cell,{children:(0,m.jsx)(a.xv,{size:"100",weight:"bold",children:e})}),(0,m.jsx)(a.iA.Cell,{children:(0,m.jsx)(a.xv,{size:"100",children:String(t)})})]},n))})})}):null,v=({accessibilityLabel:e,content:t,order:n})=>{if(!Array.isArray(t)||t.length<2)return null;let i=t[0],l=t.slice(1);return(0,m.jsx)(h,{dangerouslySetInlineStyle:{__style:{borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd"}},marginTop:g(n),children:(0,m.jsxs)(a.iA,{accessibilityLabel:e,children:[(0,m.jsx)(a.iA.Header,{children:(0,m.jsx)(a.iA.Row,{children:i.map((e,t)=>(0,m.jsx)(a.iA.HeaderCell,{children:(0,m.jsx)(a.xv,{size:"100",weight:"bold",children:e})},t))})}),(0,m.jsx)(a.iA.Body,{children:l.map((e,t)=>(0,m.jsx)(a.iA.Row,{children:e.map((e,t)=>(0,m.jsx)(a.iA.Cell,{children:(0,m.jsx)(a.xv,{size:"100",children:e})},t))},t))})]})})},k=e=>{let t=(0,s.ZP)();switch(e.type){case p.X.POINTS:return(0,m.jsx)(f,{...e});case p.X.SPECS:return(0,m.jsx)(x,{accessibilityLabel:t._('Specification view of description', 'webapp.app.www-unified.components.structuredDescription.StructuredDescription.StructuredSpecs', 'Content represented in specification format'),...e});case p.X.TABLE:return(0,m.jsx)(v,{accessibilityLabel:t._('Table view of description', 'webapp.app.www-unified.components.structuredDescription.StructuredDescription.StructuredTable', 'Content represented in table format'),...e});case p.X.ELEMENT:return(0,m.jsx)(y,{...e});default:return(0,m.jsx)(_,{...e})}};function b({descriptions:e,onLoad:t}){return((0,i.useEffect)(()=>{"function"==typeof t&&t()},[t]),0===e.length)?null:e.map(({content:e,type:t},n)=>(0,m.jsx)(k,{content:e,order:n,type:t},n))}let P=({children:e,inMwebPdpCommentsExp:t,paddingY:n,closeupWithinMasonryEnabled:a})=>(0,m.jsx)(i.Fragment,{children:a?(0,m.jsx)(i.Fragment,{children:e}):(0,m.jsx)(l.Z,{inMwebPdpCommentsExp:t,paddingY:n,topBorder:!0,children:e})}),S=({inCommentFeedRedesignExp:e,inMwebPdpCommentsExp:t,onOpen:n,onToggle:l,structuredDescription:r,type:g})=>{let h=(0,s.ZP)(),_=(0,o.E)(),y=(0,i.useCallback)(()=>{_&&_.markConstraintComplete("description")},[_]),f=(0,i.useRef)(null),[x,v]=(0,i.useState)(!1),{closeupWithinMasonryEnabled:k}=(0,u.x4)();(0,i.useEffect)(()=>{let e;(f.current&&((e=f.current).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)||r.length>1)&&v(!0)},[f,r]);let P="expandable"===g&&r[0].type===p.X.PARAGRAPH,S=P?(0,m.jsx)(a.xv,{ref:f,lineClamp:1,size:"200",children:r[0].content}):null,w=e?8:1,j=h._('Product Details', 'productDetails.accordionHeader.text', 'text in tap area to open product description accordion panel');return k||x||!S?k?(0,m.jsx)(c.Z,{heading:j,children:(0,m.jsx)(a.xu,{paddingY:P?0:w,children:(0,m.jsx)(b,{descriptions:r,onLoad:y})})}):(0,m.jsx)(d.Z,{arrowDirection:"expandable"===g?"arrow-down":"arrow-forward",content:(0,m.jsx)(a.xu,{paddingY:P?0:w,children:(0,m.jsx)(b,{descriptions:r,onLoad:y})}),header:j,inCommentFeedRedesignExp:e,inMwebPdpCommentsExp:t,onOpen:n,onToggle:l,previewContent:S,previewContentHeight:P?20:0,shouldToggleOnBodyTap:!0}):(0,m.jsx)(i.Fragment,{children:(0,m.jsxs)(a.kC,{direction:"column",gap:e?3:0,children:[(0,m.jsx)(a.xu,{paddingY:e?0:1,children:(0,m.jsx)(a.xv,{size:"300",weight:"bold",children:j})}),(0,m.jsx)(a.xu,{marginBottom:e?0:1,marginEnd:6,children:S})]})})},w=({isOpen:e,onOpen:t,structuredDescription:n})=>{let[l,r]=(0,i.useState)(!1),d=(0,s.ZP)(),c=(0,i.useRef)(null),p=(0,o.E)(),{closeupWithinMasonryEnabled:g}=(0,u.x4)(),h=(0,i.useCallback)(()=>{p&&c.current&&p.markConstraintComplete("description")},[p]),_=l&&!e,y=e?d._('See less', 'productDescription.productDescriptionPreview.cta', 'CTA label for collapsing the description'):d._('See more', 'productDescription.productDescriptionPreview.cta', 'CTA label for expanding the description');return(0,i.useLayoutEffect)(()=>{!(!c.current||Number.isNaN(c.current.offsetHeight)||150>Number(c.current.offsetHeight))&&(l||r(!0))},[l,c.current?.offsetHeight]),(0,m.jsxs)(a.xu,{"data-test-id":"product-description-preview",display:c.current?"block":"visuallyHidden",paddingY:1,children:[(0,m.jsx)(a.xv,{size:g?"400":"300",weight:"bold",children:d._('Product Details', 'productDescription.productDescriptionPreview.header', 'header for the product description')}),(0,m.jsxs)(a.xu,{marginBottom:_?0:2,marginTop:2,position:"relative",children:[(0,m.jsx)(a.xu,{ref:c,height:_?150:"auto",overflow:_?"hidden":"visible",children:(0,m.jsx)(b,{descriptions:n,onLoad:h})}),l&&(0,m.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0), #ffffff)",transition:"opacity 200ms ease"}},height:150,opacity:_?1:0,position:"absolute",width:"100%"})]}),l&&(0,m.jsx)(a.iP,{onTap:t,children:(0,m.jsx)(a.xv,{size:"200",weight:"bold",children:y})})]})};function j(e){let{commerceData:t,inCommentFeedRedesignExp:n,inMwebPdpCommentsExp:a,structuredDescription:l,type:s="accordion",viewParameter:o}=e,{setIsProductDetailsExpanded:d,closeupWithinMasonryEnabled:c}=(0,u.x4)(),{logContextEvent:g}=(0,r.v)(),[h,_]=(0,i.useState)(!1);(0,i.useEffect)(()=>{g({event_type:120,component:13597,view_type:3,view_parameter:o,aux_data:{...t}})},[]);let y=()=>{_(!h),g({event_type:101,component:13597,view_type:3,element:h?13278:13277,view_parameter:o,aux_data:{...t}}),g({event_type:101,component:13597,view_type:3,element:10492,view_parameter:o,aux_data:{...t}})};if(0===l.length)return null;let f="expandable"===s&&l[0].type===p.X.PARAGRAPH;return"preview"===s?(0,m.jsx)(w,{...e,isOpen:h,onOpen:y}):(0,m.jsx)(P,{closeupWithinMasonryEnabled:c,inMwebPdpCommentsExp:a,paddingY:f?n?4:3:0,children:(0,m.jsx)(S,{...e,onOpen:y,onToggle:e=>{d&&d(e)}})})}},84071:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(883119),a=n(112393),l=n(80887),r=n(858716),s=n(290674),o=n(785893);function d({children:e,inMwebPdpCommentsExp:t,paddingY:n,topBorder:d,marginBottom:c,marginEnd:u}){let{closeupWithinMasonryEnabled:p}=(0,l.x4)();return(0,o.jsxs)(i.xu,{children:[t?(0,o.jsx)(s.Z,{marginStart:a.D6+r.xh}):null,(0,o.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{borderTop:!d||t||p?void 0:"1px solid #efefef"}},"data-test-id":"product-metadata-border",marginBottom:c,marginEnd:u,paddingY:n,width:"100%",children:e})]})}},463996:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(883119),a=n(553594),l=n(708130),r=n(80887),s=n(785893);function o({colorOverride:e,isSoldOut:t,isStale:n,productDetails:o,showSalesPrice:d,type:c}){let{isCloseupRelatedPinsAboveTheFoldEnabled:u,peekCloseupEnabled:p}=(0,r.x4)(),{maxPrice:m,minPrice:g,price:h,standardPrice:_}=o,y=!!h&&!!_&&h!==_,f="100";"heading"!==c||p?"mobileHeading"===c?f="300":("cutout"===c||p)&&(f="200"):f="400";let x="bold";u&&(x="normal");let v=(0,l.ZP)(),k=v._('See price on site', 'product.price.stale', 'Product is stale'),b=v._('Sold out', 'product.price.soldOut', 'Product is sold out');return n?(0,s.jsx)(i.xv,{color:"subtle",size:f,weight:x,children:k}):(0,s.jsxs)(i.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:[t&&(0,s.jsx)(i.xu,{"data-test-id":"product-sold-out-text",marginEnd:2,children:(0,s.jsx)(i.xv,{color:"subtle",size:f,weight:x,children:b})}),(!!h||!!g||!!m)&&(0,s.jsx)(i.xv,{color:e||(y?"shopping":"default"),size:f,weight:x,children:(0,s.jsx)("span",{children:(0,a.Z)({maxPrice:m,minPrice:g,price:h})})}),y&&!d&&(0,s.jsx)(i.xu,{marginStart:1,children:(0,s.jsx)(i.xv,{color:"cutout"===c?"dark":"subtle",size:f,weight:["heading","mobileHeading"].includes(c)?"normal":"bold",children:(0,s.jsx)("span",{style:{textDecoration:"line-through"},children:_})})})]})}},804906:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(883119),a=n(541418),l=n(80887),r=n(895321),s=n(990637),o=n(785893);function d({count:e,countType:t,countFormat:n,hideSeparationDot:d,bracket:c,ratingValue:u,unauthPdp:p,shippingInfo:m}){let{closeupWithinMasonryEnabled:g,isCloseupRelatedPinsAboveTheFoldEnabled:h,peekCloseupEnabled:_}=(0,l.x4)();return(0,o.jsxs)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{columnGap:g?4:void 0,rowGap:8}},display:"flex",marginTop:h?0:1,wrap:!0,children:[(0,o.jsx)(r.Z,{bracket:c,count:e,countFormat:n,countType:t,rating:u,textSize:_?"200":"300",unauthPdp:p}),(0,o.jsx)(i.xu,{marginStart:!g&&(0,s.Z)({count:e,rating:u})&&d?2:0,children:(0,o.jsx)(a.Z,{customStyles:{color:"default",size:_?"200":"300"},freeShippingPrice:m?.freeShippingPrice,freeShippingValue:m?.freeShippingValue,showPrevDot:(0,s.Z)({count:e,rating:u})&&!d})})]})}},184189:function(e,t,n){n.d(t,{Z:()=>P});var i=n("667294"),a=n("883119"),l=n("172119"),r=n("581722"),s=n("219300"),o=n("708130"),d=n("379774"),c=n("550391"),u=n("220334"),p=n("785893");function m({currentlySelectedIndex:e,index:t,onSelect:n,pinId:m,isDarkMode:g=!1,isSelectOnHover:h,size:_,thumbnail:y,mediaType:f="image",viewParameter:x}){let{logContextEvent:v}=(0,s.v)(),k=(0,r.I0)(),b=(0,o.ZP)(),[P,S]=(0,i.useState)(!1),{isCloseupMediaViewerEnabled:w}=(0,l.Z)({isShufflePin:!1}),j=(0,i.useCallback)(e=>{"video"===f&&e&&!P&&(S(!0),v({event_type:13,component:13596,element:12831,view_type:3,view_parameter:x}))},[v,f,x,P]),I=(0,d.Z)({onVisibilityChanged:j}),C=()=>{k((0,u.yR)(m,t)),n(t)},T=e===t||!e&&0===t;return(0,p.jsx)(a.xu,{ref:I,marginBottom:4,children:(0,p.jsx)(a.iP,{onMouseEnter:({event:e})=>{e.preventDefault(),e.stopPropagation(),h&&C()},onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),h||C()},rounding:w?4:void 0,children:(0,p.jsx)(c.Z,{isDarkMode:g,outlined:T,rounding:w?4:void 0,children:(0,p.jsxs)(a.xu,{position:"relative",children:[(0,p.jsx)(a.zd,{height:_,wash:!0,width:_,children:(0,p.jsx)(a.Ee,{alt:"",color:"#efefef",fit:"cover",naturalHeight:1,naturalWidth:1,src:y})}),"video"===f&&(0,p.jsx)(a.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,p.jsx)(a.JO,{accessibilityLabel:b._('Secondary Carousel Video Icon', 'secondaryCarousel.carouselItem.videoIndicatorIcon', 'accessibility label on secondary carousel item'),color:"light",icon:"play",size:20})})]})})})})}var g=n("342117"),h=n("205296"),_=n("178616"),y=n("45389"),f=n("80887"),x=n("115435"),v=n("458199");let k={md:120,sm:52},b=`
  .ProductCarousel-InnerScrollContainer {
    -ms-overflow-style: none;
    overflow-x: hidden;
    overflow-y: auto;
  }
  .ProductCarousel-InnerScrollContainer::-webkit-scrollbar {
    display: none;
  }
`;function P({carouselSlots:e,commerceData:t={},isSelectOnHover:n,onImageSelect:r,pinId:o,selectedIndex:d,size:c,surfaceType:u,viewParameter:P}){let S;let{logContextEvent:w}=(0,s.v)(),{isCloseupMediaViewerEnabled:j}=(0,l.Z)({isShufflePin:!1}),[I,C]=(0,i.useState)(),[T,F]=(0,i.useState)(0),[L,A]=(0,i.useState)(),[K,Z]=(0,i.useState)(),[R,E]=(0,i.useState)(),[D,z]=(0,i.useState)(!1),[M,B]=(0,i.useState)(e.length>=4),[O,V]=(0,i.useState)(!1),H=(0,v.t)(),{closeupWithinMasonryEnabled:U,peekCloseupEnabled:N}=(0,f.x4)(),W=(0,i.useRef)(null),$=(0,i.useRef)(),G=k[c],X=j&&"media-viewer"===u;(0,i.useEffect)(()=>{w({event_type:120,component:13596,view_type:3,view_parameter:P,aux_data:{pin_id:o,...t}})},[]),(0,i.useEffect)(()=>{if(!I&&W.current){let e=W.current.getBoundingClientRect();F(Math.floor(e.top)),A(Math.floor(e.bottom)),E(Math.floor(e.top)),Z(Math.floor(e.bottom))}},[W.current,I]),(0,i.useEffect)(()=>{if(W.current){let{height:e,top:t,bottom:n}=W.current.getBoundingClientRect();F(Math.floor(t)),A(Math.floor(n)),C(Math.floor(e))}},[e.length]),(0,i.useEffect)(()=>{!I&&W.current&&C(Math.floor(W.current.getBoundingClientRect().height))},[W.current]),(0,i.useEffect)(()=>{T&&R&&K&&L&&e.length>=4&&(T<R?z(!0):z(!1),L>=490+H+20?B(!0):B(!1))},[T,L,R,K]);let q=()=>{O||(V(!0),w({event_type:110,component:13596,view_type:3,view_parameter:P,aux_data:{pin_id:o,...t}}))},Y=(0,i.useRef)(q);(0,i.useEffect)(()=>{Y.current=q});let J=$.current;(0,i.useEffect)(()=>{let e=(0,y.Z)(()=>{if(W.current){let e=W.current.getBoundingClientRect();F(Math.floor(e.top)),A(Math.floor(e.bottom)),Y.current()}},16);return J?.addEventListener("scroll",e),()=>{J?.removeEventListener("scroll",e)}},[J]);let Q=(e,n)=>{r&&(w({event_type:101,component:13596,element:"image"===n?11922:12831,view_type:3,view_parameter:P,aux_data:{...t}}),r(e))},ee=e=>{0!==e&&(S&&S.cancel(),W.current&&$.current&&((S=(0,_.Z)($.current,0,e,{easingFunction:"ease-in-out",extendToEdgeDistanceY:50,scrollSpeedPxPerMs:.8,onAnimationComplete:()=>{S=null}})).start(),q()))};return(0,p.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{marginTop:`${20+(N?-12:0)+(U?12:0)}px`}},overflow:"hidden",position:"relative",children:[(0,p.jsx)(g.Z,{unsafeCSS:b}),(0,p.jsx)("div",{ref:$,className:"ProductCarousel-InnerScrollContainer",id:"InnerScrollContainer",style:{maxHeight:490,cursor:"default"},children:(0,p.jsx)("div",{"aria-hidden":"true",onClick:e=>{e.preventDefault(),e.stopPropagation()},style:{cursor:"default"},children:(0,p.jsx)(a.xu,{ref:W,alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginBottom:1,marginEnd:U?0:6,marginTop:1,position:"relative",width:G+4,children:e.map((e,t)=>{let{images:i,videos:a}=e,{thumbnail:l,mediaType:r}=a?{thumbnail:a.cover_image_url,mediaType:"video"}:{thumbnail:h.Z({images:i,resolutionPreferences:["564x","736x","236x"]})?.url,mediaType:"image"};return(0,p.jsx)(m,{currentlySelectedIndex:d,index:t,isDarkMode:X,isSelectOnHover:n,mediaType:r,onSelect:()=>{Q(t,r)},pinId:o,size:G,thumbnail:l||"",viewParameter:P},`carousel-item-${e.image_signature||""}-${t}`)})})})}),!!I&&e.length>3&&(0,p.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},height:I>490?494:I+4,overflow:"hidden",position:"absolute",top:!0,width:"100%",children:[D&&(0,p.jsx)(x.Z,{direction:"up",isDarkMode:X,onScroll:e=>{e.preventDefault(),e.stopPropagation(),ee(-100)},size:c}),M&&(0,p.jsx)(x.Z,{direction:"down",isDarkMode:X,onScroll:e=>{e.preventDefault(),e.stopPropagation(),ee(100)},size:c})]})]})}},31889:function(e,t,n){n.d(t,{Z:function(){return m}});var i,a=n(667294);n(167912);var l=n(883119),r=n(791776),s=n(131548),o=n(522282),d=n(150608),c=n(80887),u=n(785893);let p=void 0!==i?i:i=n(163046);function m({clientTrackingParams:e,color:t,link:n,onClickThrough:i,onLoad:m,pinKey:g,text:h}){let _=(0,s.Z)(p,g),{peekCloseupEnabled:y}=(0,c.x4)(),f=(0,o.Z)({href:{pathname:n,state:{trackingParams:e}},clientTrackingParams:e,externalData:{pin:_&&{attributionSourceId:_.attributionSourceId,board:_.board&&{url:_.board.url},campaignId:_.campaignId,entityId:_.entityId,isDownstreamPromotion:_.isDownstreamPromotion,isPromoted:_.isPromoted,pinner:_.pinner&&{username:_.pinner.username},pinPromotionId:_.pinPromotionId,promoter:_.promoter&&{entityId:_.promoter.entityId},storyPinDataId:_.storyPinDataId,trackingParams:_.trackingParams,advertiserId:_.advertiserId}}});return(0,a.useEffect)(()=>{"function"==typeof m&&m()},[m]),(0,u.jsx)(d.q,{children:({hovered:a})=>(0,u.jsx)(r.Z,{clientTrackingParams:e,hovered:a,pinKey:_,viewType:3,children:(0,u.jsx)(l.ZP,{color:t,fullWidth:y,href:n,onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),i({componentType:194}),f({event:e})},rel:"nofollow",size:"lg",text:h})})})}},574386:function(e,t,n){n.d(t,{i:function(){return i},j:function(){return a}});let i=2,a=236},916178:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var i=n(667294),a=n(616550),l=n(816592),r=n(137123),s=n(785893);function o({buttonText:e,clientTrackingParams:t,imageSrc:n,pinDescription:o,pinId:d,shownWithinMasonry:c}){let u=(0,a.TH)(),[p,m]=(0,i.useState)(!!(0,r.mB)(u.search).share);return(0,s.jsx)(l.default,{buttonText:e,controllerOptions:{flyoutDisplayOptions:{showCaret:!0,shownWithinMasonry:c},isFlyoutOpen:p,loggingOptions:{component:228,element:10942,viewParameter:157,viewType:3},onFlyoutDismiss:()=>m(!1),onToggleFlyout:()=>m(!p),sendObject:{type:"pin",description:o,id:d,imageUrl:n,url:`/pin/${d}/`,clientTrackingParams:t}},iconColor:"white"})}},816592:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var i=n(883119),a=n(315286),l=n(708130),r=n(531545),s=n(785893);function o({controllerOptions:e,iconColor:t,iconOnly:n,buttonText:o,tabIndex:d=0,closeupWithinMasonryEnabled:c=!1}){let u=(0,l.ZP)(),p=new i.Ry(5);return(0,s.jsx)(r.Z,{...e,children:({handleSendShareFlyoutButtonClick:e})=>(0,s.jsx)(i.u,{inline:!0,text:u._('Share', 'Closeup.SharePin.Icon', 'Icon for sharing the current pin'),zIndex:p,children:(0,s.jsx)(a.Z,{accessibilityLabel:u._('Send', 'Accessible label for button to send this pin', 'Accessible label for button to send this pin'),bgColor:c?"white":void 0,buttonText:o,handleClick:()=>e(),icon:"share",iconColor:t,iconOnly:n,tabIndex:d,testId:"closeup-share-button"})})})}},220426:function(e,t,n){n.d(t,{N:function(){return d},d:function(){return o}});var i=n(667294),a=n(242339),l=n(486188),r=n(785893);let{Provider:s,useHook:o}=(0,l.Z)("Flag"),d=({children:e})=>{let[t,n]=(0,i.useState)(),[l,o]=(0,i.useState)(a.Zw.REPORT),[d,c]=(0,i.useState)(a.qb.STARTED),[u,p]=(0,i.useState)(),[m,g]=(0,i.useState)(),h=(0,i.useMemo)(()=>({flagReason:m,flow:l,status:d,selectedReason:u,modalTitle:t,setFlagReason:g,setFlow:o,setModalTitle:n,setStatus:c,setSelectedReason:p}),[t,l,d,u,m]);return(0,r.jsx)(s,{value:h,children:e})}},242339:function(e,t,n){n.d(t,{Vm:function(){return l},Zw:function(){return i},qb:function(){return a}});let i={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},a={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},l={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},538365:function(e,t,n){n.d(t,{Z:()=>N});var i,a,l=n("667294");n("422578");var r=n("883119"),s=n("772866"),o=n("224706"),d=n("816592"),c=n("219300"),u=n("445294"),p=n("131548"),m=n("708130"),g=n("80887"),h=n("320288"),_=n("785893");function y(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let f={__style:{backgroundColor:"#000"}},x=void 0!==i?i:i=n(741789);class v extends l.PureComponent{constructor(...e){super(...e),y(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.props.onRestartVideo?.({event:e}),(0,h.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"restart",variant:"enabled_send_first"}})}),y(this,"handleShareVideo",()=>{let{clientTrackingParams:e,onToggleFlyout:t,isFlyoutOpen:n,pinId:i,requireAuth:a,logContextEvent:l}=this.props;if(n&&(0,h.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}}),l({event_type:101,component:179,object_id_str:i,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e}),a){a();return}t&&t()}),y(this,"handleExternalSend",()=>{(0,h.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}})}),y(this,"renderReplayButton",()=>(0,_.jsx)(r.iP,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),onTap:this.handleRestartVideo,rounding:2,children:(0,_.jsxs)(r.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,_.jsx)(r.xu,{marginEnd:3,children:(0,_.jsx)(r.JO,{accessibilityLabel:this.props.i18n._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"inverse",icon:"refresh",size:18})}),(0,_.jsx)(r.X6,{color:"light",overflow:"normal",size:"400",children:this.props.i18n._('Watch again', 'Clickable label when pressed restarts the video', 'Clickable label when pressed restarts the video')})]})})),y(this,"renderShareButton",()=>{let{clientTrackingParams:e,gridDescription:t,imageSrc:n,isFlyoutOpen:i,onFlyoutDismiss:a,pinId:l}=this.props;return(0,_.jsx)(r.iP,{accessibilityLabel:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),onTap:this.handleShareVideo,rounding:2,children:(0,_.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:[(0,_.jsx)(d.default,{controllerOptions:{flyoutDisplayOptions:{shownWithinMasonry:!0},loggingOptions:{component:179,element:72,onExternalSend:this.handleExternalSend,viewType:3},isFlyoutOpen:i,onFlyoutDismiss:a,onToggleFlyout:()=>{},sendObject:{type:"pin",description:t,id:l,imageUrl:n,url:`/pin/${l}/`,clientTrackingParams:e}},iconColor:"white",iconOnly:!0,tabIndex:-1}),(0,_.jsx)(r.xu,{children:(0,_.jsx)(r.X6,{color:"light",overflow:"normal",size:"400",children:this.props.i18n._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished')})})]})})})}componentDidMount(){let{clientTrackingParams:e,pinId:t,logContextEvent:n}=this.props;(0,h.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"land",variant:"enabled_send_first"}}),n({event_type:13,component:179,object_id_str:t,view_type:3,view_parameter:156,element:11731,clientTrackingParams:e})}render(){let{backgroundImage:e,naturalHeight:t,naturalWidth:n,maxHeight:i,maxWidth:a,pinTitle:l}=this.props;return(0,_.jsx)(r.xu,{maxHeight:i,maxWidth:a,children:(0,_.jsxs)(r.Ee,{alt:l||"",naturalHeight:t,naturalWidth:n,src:e,children:[(0,_.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:f,left:!0,position:"absolute",right:!0,top:!0}),(0,_.jsx)(r.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,maxHeight:i,maxWidth:a,position:"absolute",top:!0,width:"100%",children:(0,_.jsxs)(r.xu,{position:"absolute",children:[(0,_.jsx)(r.xu,{children:this.renderShareButton()}),(0,_.jsx)(r.xu,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}function k(e){let t;let{pinKey:n}=e,i=(0,p.Z)(x,n),{logContextEvent:a}=(0,c.v)(),l=(0,m.ZP)(),r=(0,u.Z)(),{closeupWithinMasonryEnabled:d,peekCloseupEnabled:h,viewportSize:y}=(0,g.x4)(),{maxHeight:f,fiftyPercentHeight:k,fiftyPercentWidth:b}=(0,s.Re)(),{maxHeight:P}=(0,o.Z)({pinKey:i});return h?t="sm"===y?k:f:d&&(t=P),(0,_.jsx)(v,{...e,closeupWithinMasonryEnabled:d,i18n:l,logContextEvent:a,maxHeight:t,maxWidth:b,requireAuth:r})}let b=({backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:i,pinTitle:a})=>{let l=(0,m.ZP)(),{isCloseupRelatedPinsAboveTheFoldEnabled:s}=(0,g.x4)();return(0,_.jsx)(r.xu,{"data-test-id":"video-end-card",height:s?"100%":void 0,width:s?"100%":void 0,children:(0,_.jsxs)(r.Ee,{alt:a||"",fit:s?"contain":void 0,naturalHeight:s?1:t,naturalWidth:s?1:n,src:e,children:[(0,_.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:f,left:!0,opacity:.8,position:"absolute",right:!0,top:!0}),(0,_.jsx)(r.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,_.jsx)(r.xu,{children:(0,_.jsx)(r.iP,{onTap:i,rounding:2,children:(0,_.jsxs)(r.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,_.jsx)(r.hU,{accessibilityLabel:l._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video'),icon:"refresh",iconColor:"white",size:"md"}),(0,_.jsx)(r.X6,{color:"light",overflow:"normal",size:"400",children:l._('Replay', 'closeupVideo.endCard.ReplayButton', 'Button when pressed restarts the video')})]})})})})]})})};var P=n("11602"),S=n("561162"),w=n("927998"),j=n("282290"),I=n("739336"),C=n("3879"),T=n("170914"),F=n("517534"),L=n("482678"),A=n("119195"),K=n("639161"),Z=n("55077"),R=n("818194"),E=n("431710"),D=n("52681"),z=n("620793"),M=n("184407");function B(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let O=void 0!==a?a:a=n(646583),V=e=>!!e&&e.endsWith(".gif"),H=(e,t)=>{t({currentTime:e?.currentTime??0,duration:e?.duration??1})};class U extends l.Component{constructor(...e){super(...e),B(this,"state",{controls:"always"===this.props.showControls&&!this.props.disabled,fullscreen:!1,playing:!(0,P.G6)(this.props.requestContext.userAgent.browserName)&&!!this.props.autoplay&&!this.props.disabled,ready:!1,seeking:!1,showEndCard:!1,volume:this.props.muted||this.props.shouldMute?0:1,videoStartTime:this.props.videoStartTime||0}),B(this,"setVideoPwtLoadingStop",(e=!1)=>{if(!I.Z)return;let{storyPinStepStopwatch:t,pinId:n,pwtSurfaceContext:i}=this.props;t&&(e||t.addAnnotation("video.startup.end"),t.addBinaryAnnotation("pin.id",n,"STRING"),t.addBinaryAnnotation("video",!0,"BOOL"),t.addBinaryAnnotation("preload",e,"BOOL"),t.addSubspan({name:"perceived_video_load",endTime:I.Z.now()}),t.stop()),i&&(e||i.addAnnotation("video.startup.end"),i.addBinaryAnnotation("pin.id",n,"STRING"),i.addBinaryAnnotation("video",!0,"BOOL"),i.markConstraintComplete(D._z),i.addSubspan("perceived_video_load",null,I.Z.now()),"story_pin"===i.getMetricId().segment&&i.removeConstraint(D.pM))}),B(this,"componentDidMount",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:l}=n&&i||a||{},r=(0,z.j4)(e||l);r?.ready===4&&(this.setState({ready:!0}),this.props.autoplay&&this.setVideoPwtLoadingStop(!0))}),B(this,"componentDidUpdate",(e,t)=>{this.props.videoStartTime&&this.props.videoStartTime!==e.videoStartTime&&this.setState({videoStartTime:this.props.videoStartTime}),!1===e.isPlaying&&this.props.isPlaying&&this.setState({playing:!0,controls:"never"!==this.props.showControls}),e.isPlaying&&!1===this.props.isPlaying&&this.setState({playing:!1}),e.autoplay!==this.props.autoplay&&(this.setState({playing:!!this.props.autoplay}),this.props.autoplay&&this.state.ready&&this.setVideoPwtLoadingStop(!0)),e.muted!==this.props.muted&&this.setState({volume:this.props.muted?0:1}),"never"===this.props.showControls&&t.controls&&this.setState({controls:!1}),(t.controls||t.playing)&&this.props.disabled&&this.setState({playing:!1,controls:!1}),!t.playing&&this.state.playing&&this.props.onPlay&&this.props.onPlay()}),B(this,"handleTouch",()=>{let{seeking:e}=this.state,{disabled:t}=this.props;e||t||this.setState(e=>({playing:!e.playing}))}),B(this,"handleShowControls",()=>this.setState({controls:!0})),B(this,"handleHideControls",()=>this.setState({controls:!1})),B(this,"handleReady",()=>{let{ready:e,playing:t}=this.state,{autoplay:n,disabled:i}=this.props;n&&!e&&this.setVideoPwtLoadingStop(),this.setState({ready:!0}),(0,P.G6)(this.props.requestContext.userAgent.browserName)&&!t&&n&&!i&&this.setState({playing:!0})}),B(this,"handleEnded",({event:e})=>{let{customThumbnail:t,customEndCard:n,pinId:i,setCurrentVideo:a,loop:l,onEnded:r}=this.props;e.stopPropagation(),!l&&(this.setState({playing:!1}),V(t)||n||(this.setState({showEndCard:!0,videoStartTime:0}),a({pinId:i,isPromoted:!1,currentTime:0})),this.state.fullscreen&&this.exitFullscreen()),r&&r()}),B(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),B(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),B(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{e.stopPropagation(),this.setState({fullscreen:t})}),B(this,"handlePlayheadDown",()=>{this.setState({seeking:!0})}),B(this,"handlePlayheadUp",()=>{setTimeout(()=>{this.setState({seeking:!1})},500)}),B(this,"handleRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),B(this,"handleShareRestartVideo",({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})}),B(this,"handleVolumeChange",({event:e,volume:t})=>{let{shouldMute:n}=this.props;e.stopPropagation(),n||this.setState({volume:t})}),B(this,"exitFullscreen",()=>{let{document:e}=window;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}),B(this,"requestFullscreen",()=>{let{customThumbnail:e,video:t,preferMp4:n}=this.props,{mp4:i}=t,a=t.hlsv3||t.hls||null,{thumbnail:l}=n&&i||a||{},r=(0,z.j4)(e||l);r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen?r.webkitRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen&&r.msRequestFullscreen()}),B(this,"renderCloseupVideoEndCard",(e,t,n,i)=>{let a={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleShareRestartVideo},l={backgroundImage:e,naturalHeight:t,naturalWidth:n,onRestartVideo:this.handleRestartVideo},{clientTrackingParams:r,flyoutShareProps:s}=this.props,o={clientTrackingParams:r,gridDescription:s?s.gridDescription:"",imageSrc:s?s.imageSrc:"",isFlyoutOpen:!!s&&s.isFlyoutOpen,onFlyoutDismiss:s?s.onFlyoutDismiss:()=>{},onToggleFlyout:s?s.onToggleFlyout:()=>{},pinId:s?s.pinId:"",pinKey:this.props.pin};return i?(0,_.jsx)(b,{...l}):(0,_.jsx)(k,{...o,...a})})}render(){let e;let{aspectRatio:t,autoplay:n,closeupStoryPinViewability:i,contextLogData:a={component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156},customThumbnail:l,isPromoted:o,loop:d,objectFit:c,preferMp4:u,preload:p,requestContext:m,roundingOverride:g,showControls:h,variant:y,video:f,captions:x,isDesktop:v,videoThumbnailStartTime:k,pin:b,pinId:S,setProgressInfo:w,progressInfo:j,setPanelOpen:I,panelOpen:C,setMute:A,isMuted:K,isCloseupRelatedPinsAboveTheFoldEnabled:Z,closeupWithinMasonryEnabled:E,maxHeight:D,maxWidth:B,onTimeChange:O,startLevelHlsExpGroup:V,seekTime:U}=this.props;a.is_closeup_video=!0;let{controls:N,fullscreen:W,playing:$,showEndCard:G,volume:X,videoStartTime:q}=this.state,Y=f.hlsv3||f.hls||null;if(!Y&&!f.mp4)return null;let{mp4:J}=f,Q=u&&J&&J.url||Y&&[{type:"video/m3u8",src:Y.url}]||void 0,{height:ee,thumbnail:et,width:en}=u&&J||Y||{},ei=l||et;return e=null!=g?g:"default"===y?0:"storyPin"===y?L.yR:2,(0,_.jsxs)(r.zd,{height:E?"inherit":void 0,rounding:Z?void 0:e,wash:!0,width:E?"inherit":void 0,willChangeTransform:!((0,P.G6)(m.userAgent.browserName)&&W),children:[G?this.renderCloseupVideoEndCard(ei??"",ee??1,en??1,o):(0,_.jsxs)(r.iP,{accessibilityLabel:this.props.i18n._('Pause or play video', 'pin.closeup.video.tap', 'tap area to pause or play video'),onMouseEnter:"hover"===h?this.handleShowControls:void 0,onMouseLeave:"hover"===h?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:2,children:[Z&&(0,_.jsx)(T.Z,{playing:$,zIndexValue:99}),(0,_.jsx)(M.ZP,{aspectRatio:t??(en??1)/(ee??1),backgroundColor:Z?s.yc:"black",captions:x,closeupStoryPinViewability:i,contextLogData:{...a,video_id:this.props.video.id},hlsConfig:{startLevel:V?-1:z.VS},isAutoPlay:!!n,loop:d,objectFit:c,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:"storyPin"===y?O:({time:e})=>{H&&"number"==typeof J?.duration&&J.duration>0&&w&&H({currentTime:e,duration:J.duration/R.gJ},w)},onVolumeChange:this.handleVolumeChange,pin:b,pinKey:b,playing:$,poster:ei,preferMp4:u,preload:p,seekTime:U,src:Q,video:u&&J||Y||{},videoStartTime:q||k,volume:X})]}),(0,_.jsx)(r.xu,{onMouseEnter:"hover"===h?this.handleShowControls:void 0,onMouseLeave:"hover"===h?this.handleHideControls:void 0,children:"storyPin"!==y&&(0,_.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...z.Ul,flexDirection:"column-reverse"}},display:"flex",height:z.hy,maxHeight:D,maxWidth:B,paddingX:6,position:"absolute",width:Z?"100%":"calc(100% - 4px)",zIndex:L.Gf,children:(0,_.jsx)(F.Z,{activePageIndex:0,captionsUrl:x,handleMute:()=>{this.setState({volume:K?1:0}),A(!K)},handlePanelChange:()=>{I&&I(!C),C&&v&&this.requestFullscreen()},handlePause:()=>{this.setState({playing:!1})},handlePausePlay:()=>{this.setState({playing:!$})},handlePlay:()=>{this.setState({playing:!0})},handleWatchAgain:this.handleRestartVideo,inMilliseconds:!1,isMuted:K,isPanelOpen:C,isPlaying:$,isStoryPin:!1,pageCount:1,pages:[],pinId:S,progressInfo:j,showEndCard:G,showVideoControls:N,viewParameter:156})})})]})}}function N(e){let{pinKey:t,pinId:n,isPromoted:i,video:a,muted:r}=e,d=(0,p.Z)(O,t),c=(0,m.ZP)(),u=(0,C.B)(),h=(0,j.g)(),y=(0,w.E)(),{seekTimes:f}=(0,A.Hx)(),{clientTrackingParams:x,closeupWithinMasonryEnabled:v,isCloseupRelatedPinsAboveTheFoldEnabled:k}=(0,g.x4)(),{maxWidth:b}=(0,s.Re)(),{appUI:P,setCurrentVideo:I}=(0,E.I)(),{videosAutoplaying:T}=P,{organicVideosAutoplaying:F,promotedVideosAutoplaying:L}=T,R=u.locale.toLowerCase(),D=(a.mp4?.captions_urls||a.hlsv3?.captions_urls)??{},z=R&&D[R]||Object.values(D)[0]||"",{checkExperiment:M}=(0,S.F)(),B=(0,Z.HG)(),V=M("web_hls_start_up_level").anyEnabled,H=i?L[n]:F[n],N=parseInt((0,K.Z)().t||0,10),[W,$]=(0,l.useState)(H?.currentTime||0),[G,X]=(0,l.useState)(null),[q,Y]=(0,l.useState)(!0),[J,Q]=(0,l.useState)(r),{maxHeight:ee}=(0,o.Z)({pinKey:d});return(0,l.useEffect)(()=>{let e=W;N>0&&(e=N),f[n]&&(e=f[n]),$(e)},[f,n,N,W]),(0,_.jsx)(U,{...e,captions:String(z)||"",clientTrackingParams:x,closeupWithinMasonryEnabled:v,i18n:c,isCloseupRelatedPinsAboveTheFoldEnabled:k,isDesktop:B,isMuted:J,isPlaying:!H||!H.paused,maxHeight:ee,maxWidth:b,panelOpen:q,pin:d,progressInfo:G,pwtSurfaceContext:y,requestContext:u,seekTime:f[n],setCurrentVideo:I,setMute:Q,setPanelOpen:Y,setProgressInfo:X,startLevelHlsExpGroup:V,storyPinStepStopwatch:h,videoStartTime:W})}B(U,"defaultProps",{loop:!1,showControls:"hover"})},116766:function(e,t,n){n.d(t,{I6:function(){return a},Nv:function(){return i},RZ:function(){return l},ZG:function(){return o},b9:function(){return s},mV:function(){return d},s0:function(){return r}});let i=44,a=24,l=446,r=.05,s=36,o=20,d=16},198803:function(e,t,n){n.d(t,{Z:function(){return a}});let i=new Set([90,88,89,91,101,92,131]);function a(e){return i.has(e)}},445470:function(e,t,n){n.d(t,{v:function(){return i}});let i=new Set(["BUBBLE_ONE_COL","related_query_shop_upsell_closeup"])},18928:function(e,t,n){n.d(t,{Z:()=>r});var i=n("445470");let a=new Set([92]),l=new Set([154]);function r(e){let t=[];return e.forEach(e=>{if("story"===e.type?a.has(e.container_type)||l.has(e.container_type)||i.v.has(e.story_type):1){let n=t[t.length-1];Array.isArray(n)?n.push(e):t.push([e])}else t.push(e)}),t}},899142:function(e,t,n){n.d(t,{Z:()=>a});let i=["236x","474x","564x","736x"];function a({carouselData:e,images:t,product:n,shouldUnifyImageSizes:a}){return n?.additional_images?.length?function(e,t,n,a,l){let r=[...e?[{images:e}]:[],...(t??[]).map(({canonical_images:e,image_signature:t})=>({images:e||void 0,image_signature:t||void 0}))];return{carousel_slots:a?function(e){function t(e,{imageKey:t,height:n,width:i}){return e.images&&e.images[t]&&(e={...e,images:{...e.images,[t]:{...e.images[t],height:n,width:i}}}),e}let n=i.map(function(t){let n=Math.min(...e.map(e=>e.images&&e.images[t]&&e.images[t].height||1/0)),i=Math.min(...e.map(e=>e.images&&e.images[t]&&e.images[t].width||1/0));return{imageKey:t,height:n,width:i}});return e.map(e=>n.reduce(t,e))}(r):r,index:n||0,id:l}}(t,n.additional_images,e?.index,a,n.id):e||void 0}},126052:function(e,t,n){n.d(t,{Z:function(){return i}});function i(e){return e?[e["736x"],e["564x"],e["474x"],e["236x"]].find(e=>e?.url)??null:null}},544358:function(e,t,n){n.d(t,{Z:function(){return i}});function i({isHiddenPin:e,isUnsafePin:t}){return!e&&!t}},26445:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(883119),a=n(971634),l=n(708130),r=n(785893);let s=({isQuestion:e,name:t,size:n,src:s})=>{let o=(0,l.ZP)();return(0,r.jsxs)(i.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,r.jsx)(a.qE,{name:t,size:n,src:s}),e&&(0,r.jsxs)(i.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,r.jsx)(i.xu,{position:"absolute",children:(0,r.jsx)(i.JO,{accessibilityLabel:o._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"dark",icon:"speech"})}),(0,r.jsx)(i.xu,{position:"absolute",children:(0,r.jsx)(i.JO,{accessibilityLabel:o._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"light",icon:"question-mark",size:8})})]})]})}},227891:function(e,t,n){n.d(t,{f:function(){return s},v:function(){return o}});var i=n(667294),a=n(486188),l=n(785893);let{Provider:r,useHook:s}=(0,a.Z)("CommentMedia");function o({children:e}){let[t,n]=(0,i.useState)({height:150,width:150}),[a,s]=(0,i.useState)(null),[o,d]=(0,i.useState)(""),c=()=>{s(null),d("")},u=(0,i.useCallback)(()=>c(),[]),p=(0,i.useMemo)(()=>({mediaDimensions:t,mediaUrl:o,photoFile:a,removeSelectedPhoto:u,setMediaDimensions:n,setMediaUrl:d,setPhotoFile:s}),[t,a,o,u]);return(0,l.jsx)(r,{value:p,children:e})}},441863:function(e,t,n){n.d(t,{Z:()=>er});var i=n("883119"),a=n("667294"),l=n("581722"),r=n("473727"),s=n("29944"),o=n("186541"),d=n("220426"),c=n("26445"),u=n("708130"),p=n("785893");let m=({color:e,isMarkedHelpful:t})=>{let n=(0,u.ZP)();return(0,p.jsx)(i.JO,{accessibilityLabel:n._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful'),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var g=n("215198"),h=n("747454"),_=n("971634");let y={helpfulStyle:{backgroundImage:`url(${g})`},lovedStyle:{backgroundImage:`url(${h})`}},f=({response:e})=>{let t=14===e.reaction_type,n=1===e.reaction_type,a=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,p.jsxs)(i.kC,{alignItems:"center",children:[(0,p.jsx)(i.Tg,{href:`/${e.user.username}/`,children:(0,p.jsxs)(i.kC,{alignItems:"center",children:[(0,p.jsx)(i.xu,{maxWidth:40,children:(0,p.jsx)(_.qE,{accessibilityLabel:"",name:a,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,p.jsx)(i.xu,{marginStart:2,maxWidth:80,children:(0,p.jsx)(i.xv,{color:"inverse",size:"100",weight:"bold",children:a})})]})}),(0,p.jsxs)(i.xu,{alignContent:"end",display:"flex",padding:2,children:[n&&(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:y.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),t&&(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:y.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var x=n("820368"),v=n("959474"),k=n("460515"),b=n("237861");let P=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],S=({commentId:e,isMarkedHelpfulByMe:t,isLovedByMe:n,isTry:l})=>{let r=(0,v.Z)(),s=(0,k.Z)(),o=(0,x.Z)({name:"ApiResource",options:{url:l?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:P}}),d=(0,b.lJ)(r,s)||r.id,c=o.data;(n||t)&&c&&(c=c.filter(e=>e.user.id!==d),c=[{id:e,reaction_type:n?1:14,user:{first_name:(0,b.Fk)(r,s),full_name:(0,b.Fk)(r,s),id:d,image_medium_url:(0,b.gJ)(r,s),is_private_profile:!!r.isAuth&&!!r.isPrivateProfile,username:(0,b.Ms)(r,s)}},...c]);let u=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let{current:e}=u,t=()=>{o.isFetching||(o.isAtEnd?e?.removeEventListener("scroll",t):o.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[o]),(0,p.jsx)(i.xu,{ref:u,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:c?.map(e=>p.jsx(i.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:p.jsx(f,{response:e})},e.id))})};var w=n("673695"),j=n("417573");let I=(0,a.lazy)(()=>n.e("44178").then(n.bind(n,504063))),C=({commentId:e,dismissReactionList:t,helpfulCount:n,isMarkedHelpfulByMe:l,isLovedByMe:r,isReactionListOpen:s,isTry:o,lovedCount:d,onReactionCountHover:c,onToggleHelpful:m,onToggleLove:_})=>{let y=(0,u.ZP)(),f=(0,a.useRef)(),[x,v]=(0,a.useState)(!1),k=!1,b=(d||0)+(n||0);l&&r&&(b-=1);let P=e=>()=>{v(e)},C=()=>{k=!0,c()},T=()=>{k=!1,setTimeout(()=>{k||t()},1e3)},F=(0,p.jsx)(i.xu,{"data-test-id":"comment-reaction-container-entry-point",children:x?(0,p.jsx)(i.iP,{onMouseDown:P(!1),onMouseLeave:P(!1),children:(0,p.jsx)(w.Z,{children:(0,p.jsx)(I,{setHelpful:m(!0),setLoved:_(!0)})})}):(0,p.jsx)(i.iP,{onMouseEnter:P(!0),children:(0,p.jsx)(i.JO,{accessibilityLabel:y._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"subtle",icon:"heart-outline",size:16})})});return(0,p.jsxs)(i.kC,{alignItems:"center",gap:{row:1,column:0},children:[l||r?(0,p.jsx)(i.iP,{onMouseDown:()=>{m(!1)(),_(!1)()},children:(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${r?h:g})`}},"data-test-id":r?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:16,width:16})}):F,b>0&&(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(i.iP,{onMouseEnter:C,onMouseLeave:T,children:(0,p.jsx)(i.xu,{ref:f,"data-test-id":"comment-reaction-container-reaction-count",children:(0,p.jsx)(i.xv,{color:"subtle",inline:!0,size:"200",weight:"bold",children:b})})}),s&&(0,p.jsx)(i.mh,{zIndex:j.lI,children:(0,p.jsx)(i.J2,{anchor:f.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,children:(0,p.jsx)(i.iP,{onMouseEnter:C,onMouseLeave:T,children:(0,p.jsx)(S,{commentId:e,isLovedByMe:r,isMarkedHelpfulByMe:l,isTry:o})})})})]})]})};var T=n("407553"),F=n("953656"),L=n("566561"),A=n("846826"),K=n("348324"),Z=n("561162");function R(e){let{comment:t,commentTags:n,handlePhotoTap:l,isDesktop:r,photoCommentingEnabled:s,previewPhoto:o,taggedUsers:d}=e,{checkExperiment:c}=(0,Z.F)(),u=r&&c("ce_dweb_photo_comment_viewer").anyEnabled,[m,g]=(0,a.useState)(!1),{user:{username:h}}=t,_="text"in t?t.text:t.details,y=`${h} ${_}`,{height:f,url:x,width:v}=o||{},k=f??A.T0,b=v??A.Uf,P=x??"";return(0,p.jsxs)(i.xu,{children:[(0,p.jsx)(K.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:d,tags:n,text:y}),s?(0,p.jsx)(i.xu,{marginTop:1,children:(0,p.jsx)(A.ZP,{canEnlargePhoto:u,isSelectedPhoto:!1,previewPhoto:o})}):(0,p.jsx)(i.xu,{height:150,marginBottom:r?4:2,marginTop:1,width:150,children:(0,p.jsx)(i.iP,{disabled:!r||!u,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onTap:l,children:(0,p.jsx)(i.zd,{rounding:2,wash:!0,children:(0,p.jsx)(i.Ee,{alt:P,color:"#efefef",naturalHeight:k,naturalWidth:b,src:P,children:(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{cursor:u?"zoom-in":void 0,backgroundColor:`rgba(17, 17, 17, ${m?.4:0})`}},height:"100%",width:"100%"})},P)})})})]})}var E=n("967629"),D=n("400996"),z=n("522291");function M(e){let{shouldPreviewNewReply:t,featuredCommentId:n,parentId:r,parentType:s,isDesktop:o,isLoading:d,isReadOnly:c,openOverflowMenu:m,replyingToCommentId:g,toggleHelpful:h,toggleLike:_,toggleReplyComposer:y,isORBACProfileManager:f,isVideo:x,storyPinDataId:v,pinId:k,closeupAttributionId:b,aggregatedPinDataId:P,closeupAttributionUsername:S,pinnerId:w,reactionListCommentId:j,showReactionListForComment:I,viewParameter:C}=e,T=(0,u.ZP)(),F=(0,D.lV)(),L=(0,l.v9)(({feeds:e})=>{let n=e[`${z.Z.AGGREGATED_COMMENT_REPLIES}:${r}`]||[],i=e[`${z.Z.AGGREGATED_COMMENTS}:${r}`]||[];return n.concat(i).reduceRight((e,{id:n})=>{let i=F[n];return i?t?[i,...e]:[...e,i]:e},[])}),[A,K]=(0,a.useState)(1),Z=A===L.length;return(0,p.jsxs)(a.Fragment,{children:[L.length>1&&(0,p.jsx)(i.iP,{onTap:()=>{K(Z?0:L.length)},children:(0,p.jsxs)(i.xu,{marginBottom:4,children:[(0,p.jsx)(i.xu,{display:"inlineBlock",marginEnd:2,children:(0,p.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:""})}),(0,p.jsx)(i.xv,{color:"subtle",inline:!0,size:"100",weight:"bold",children:Z?T._('Hide replies', 'comment.button.hideReplies', 'hide comment replies'):(0,E.nk)(T.ngettext('View {{ commentCount }} reply', 'View {{ commentCount }} replies', L.length, 'comment.button.showReplies', 'show comment replies'),{commentCount:L.length})})]})}),(0,p.jsx)(er,{aggregatedPinDataId:P,closeupAttributionId:b,closeupAttributionUsername:S,comments:L.slice(0,A),commentsDisabled:!1,featuredCommentId:n,gapSize:2,isDesktop:o,isLoading:d,isORBACProfileManager:f,isReadOnly:c,isVideo:x,openOverflowMenu:m,parentId:r,parentType:s,pinId:k,pinnerId:w,reactionListCommentId:j,replyingToCommentId:g,showReactionListForComment:I,storyPinDataId:v,toggleHelpful:h,toggleLike:_,toggleReplyComposer:y,userAvatarSize:"sm",viewParameter:C})]})}var B=n("219300"),O=n("543123"),V=n("249043"),H=n("363696"),U=n("620811"),N=n("3879"),W=n("854166"),$=n("465683"),G=n("253525"),X=n("80887"),q=n("881160"),Y=n("778240"),J=n("165278"),Q=n("663978"),ee=n("52302");let et=(0,a.lazy)(()=>n.e("55026").then(n.bind(n,273128))),en=(0,ee.Z)(()=>n.e("73842").then(n.bind(n,571059)),void 0,"app-packages-comment-CommentOverflowPopover"),ei=(0,a.lazy)(()=>n.e("39508").then(n.bind(n,880769)));function ea(e){let t;let{aggregatedPinDataId:n,shouldPreviewNewReply:g,closeupAttributionId:h,closeupAttributionUsername:_,comment:y,featuredCommentId:f,isDesktop:x,isReadOnly:P,isVideo:S,openOverflowMenu:j,toggleReplyComposer:I,parentId:A,parentType:z=G.o.pin,pinId:ee,storyPinDataId:ea,replyingToCommentId:el,showReactionListForComment:er,toggleHelpful:es,toggleLike:eo,userAvatarSize:ed,isORBACProfileManager:ec,pinnerId:eu,reactionListCommentId:ep,viewParameter:em}=e,{user:{id:eg,first_name:eh,id:e_,image_medium_url:ey,username:ef},id:ex,image_signatures:ev,is_translatable:ek,comment_count:eb,helpful_count:eP,tags:eS=[]}=y,[ew,ej]=(0,a.useState)(!1),eI=ew&&y.translatedText||y.text,eC=!ek||""===y.translatedText,eT=!1,eF=0,eL=!1,eA=!!y.marked_helpful_by_me,eK=[y.user],eZ="",eR=new Date;"aggregatedcomment"===y.type?(eT=y.highlighted_by_pin_owner,eF=y.reaction_counts[1],eL=y.reaction_by_me>0,eK.push(...y.tagged_users),eZ=`${ef} ${eI??""}`,eR=new Date(y.created_at)):(eF=y.like_count,eL=y.liked_by_me,t=y.images[0]||{},eZ=`${ef} ${y.details}`,eR=new Date(y.done_at));let eE=t?.["150x150"],eD=t?.originals,ez=(0,u.ZP)(),eM=(0,v.Z)(),{setIsMediaViewerOpen:eB,clientTrackingParams:eO}=(0,X.x4)(),{logContextEvent:eV}=(0,B.v)(),{country:eH,countryFromIp:eU,isBot:eN}=(0,N.B)(),{checkExperiment:eW}=(0,Z.F)(),{showToast:e$}=(0,$.F9)(),eG=(0,l.I0)(),eX=(0,a.useRef)(),eq=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(eH),{COUNTRY_CODES:eY}=Y.a0.india||{},eJ=eU&&eY&&eY.includes(eU),eQ=!P||eJ||eq,e0=1===y.comment_tag,e1=(0,k.Z)(),e2=(0,b.lJ)(eM,e1),{nativeEngagementsHiddenForUser:e8}=(0,q.G)(),{aggregatedCommentsHiddenForUser:e3,translateAggregatedComment:e6,updateAggregatedComment:e7}=(0,D.nf)(),e4=(0,o.Z)(),e5="userdiditdata"===y.type,e9=(0,H.Z)(),te=e5&&x&&eW("ce_dweb_photo_comments").anyEnabled,tt=ek&&eW("dweb_comment_translations").anyEnabled,tn=te?eD:eE,ti=[{offset:0,length:ef.length,color:"darkGray"},...eS.map(e=>({...e,offset:(e.offset||0)+ef.length+1,color:"shopping"}))],ta={SHOW_TRANSLATION:ez._('Show translation', 'comment.translateButton.showTranslation', 'text for translation button when translation is available'),TRANSLATING:ez._('Translating...', 'comment.translateButton.translating', 'text for translation button while translating'),SHOW_ORIGINAL:ez._('Show original', 'comment.translateButton.showOriginal', 'text for translation button after translating')},tl=(0,a.useRef)(ta.SHOW_TRANSLATION),[tr,ts]=(0,s.Z)(),[to,td]=(0,a.useState)(!1),[tc,tu]=(0,a.useState)(!1),[tp,tm]=(0,a.useState)(!1),[tg,th]=(0,a.useState)(!1),[t_,ty]=(0,a.useState)(!1),[tf,tx]=(0,a.useState)(!1),[tv,tk]=(0,a.useState)(!1),[tb,tP]=(0,a.useState)(T.A9.NONE),tS=e=>()=>{tu(e)};(0,a.useEffect)(()=>{tt&&eV({event_type:10416,view_type:3,view_parameter:em,component:"pin"===z?13696:13697})},[eV,z,tt,em]),(0,a.useEffect)(()=>{eb>0&&!eN&&eG((0,W.U)("aggregatedcomment"===y.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:ex,redux_normalize_feed:!0}}))},[y.type,ex]);let tw=z.toLowerCase()===G.o.aggregatedComment.toLowerCase()||z.toLowerCase()===G.n.didIt.toLowerCase(),tj=y.user.first_name||"",tI=async({contentMarkdown:e,force:t,tags:n})=>{let i,a;th(!0);let l=y.id;if(tw&&(i=z.toLowerCase()===G.n.didIt,l=A,a=y.id),l)try{await e4({force:t,fromUnifiedComment:!0,objectType:e5||i?G.o.didIt:G.o.aggregatedComment,objectId:l,orbacSubjectId:e2,tags:n,text:e,replyToCommentId:a})}catch(t){let e=(0,O.Z)(t,"code");if([U.ky,U.LJ].includes(e??0)&&x)return tP(e===U.ky?T.A9.WARNING:T.A9.BLOCK),th(!1),!1}return I&&I(void 0),th(!1),!0},tC=async({contentMarkdown:e,force:t,tags:n})=>{tm(!0);try{te?await eG((0,J.IU)({id:y.id,details:e,pinId:ee??"",image_signatures:ev??[]})):await e7({commentId:y.id,force:t,orbacSubjectId:e2,tags:n,text:e})}catch(e){if([U.ky,U.LJ].includes((0,O.Z)(e,"code")??0)&&x)return tP(e.code===U.ky?T.A9.WARNING:T.A9.BLOCK),tm(!1),!1}return tu(!1),tm(!1),!0},tT=e=>()=>{td(e),tk(e),e||eV({component:14349,event_type:9408})},tF=()=>{tP(T.A9.NONE)},tL=e=>{e?ts():tr(),eB(!e),ty(!e)},tA=()=>{ew||y.translatedText||e6(y.id),ew||tl.current!==ta.SHOW_TRANSLATION?ew&&tl.current===ta.SHOW_ORIGINAL&&eV({event_type:10418,view_type:3,view_parameter:em,component:"pin"===z?13696:13697}):eV({event_type:10417,view_type:3,view_parameter:em,component:"pin"===z?13696:13697}),ej(!ew)};(0,a.useEffect)(()=>{ew&&eC&&(ej(!ew),e$(({hideToast:e})=>(0,p.jsx)(V.ZP,{onHide:e,text:ez._('Error - couldn\'t translate', 'comment.couldNotTranslate.toast', 'error toast that shows after unsuccessful translation'),type:"error"})))},[ew,eC]),ew?tl.current=y.translatedText?ta.SHOW_ORIGINAL:ta.TRANSLATING:tl.current=ta.SHOW_TRANSLATION;let tK=x?128:110,tZ=y.media?.sticker?.image_url&&(0,p.jsx)(i.xu,{height:tK,marginBottom:x?1:0,marginTop:1,width:tK,children:(0,p.jsx)(i.Ee,{alt:y.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:y.media?.sticker?.image_url??""})});return(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(i.$j,{accessibilityLabel:"Loading comment",show:tp}),!tc&&!tp&&(0,p.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,p.jsx)(i.xu,{marginEnd:2,children:(0,p.jsx)(r.rU,{to:`/${ef}/`,children:(0,p.jsx)(c.Z,{isQuestion:e0,name:eh||ef||"",size:ed,src:ey??""})})}),(0,p.jsxs)(i.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,p.jsxs)(i.kC,{justifyContent:"between",children:[(0,p.jsx)(i.kC.Item,{minWidth:0,children:(0,p.jsxs)(i.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[e5?(0,p.jsx)(R,{comment:y,commentTags:ti,handlePhotoTap:()=>tL(t_),isDesktop:x,photoCommentingEnabled:te,previewPhoto:tn,taggedUsers:eK}):(0,p.jsx)(K.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:eK,tags:ti,text:eZ}),tZ,tt&&(0,p.jsx)(i.xu,{marginBottom:2,marginTop:2,children:(0,p.jsx)(i.iP,{onTap:()=>tA(),children:(0,p.jsx)(i.xv,{color:"subtle",size:"300",weight:"bold",children:tl.current})})})]})}),f===ex&&(0,p.jsx)(i.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eT&&(0,p.jsx)(i.xu,{marginBottom:3,marginTop:4,children:(0,p.jsx)(i.xv,{size:"100",children:(0,E.nk)(ez._('Highlighted by @{{ closeupAttributionUsername }}', 'comment.highlighted.label', 'label on comment that has been highlighted by the Pin creator'),{closeupAttributionUsername:_})})}),eQ&&(0,p.jsxs)(i.xu,{alignItems:"center",display:"flex",height:x?25:"100%",justifyContent:"between",position:"relative",children:[(0,p.jsxs)(i.kC,{alignItems:"center",gap:{row:5,column:0},children:[!P&&(0,p.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,p.jsx)(i.xv,{color:"subtle",size:"200",children:e9(eR,!0)})}),!P&&(0,p.jsx)(i.xu,{"data-test-id":"comment-reply-button-container",children:(0,p.jsx)(i.iP,{onTap:()=>{I&&I(y,A,z)},children:(0,p.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:ez._('Reply', 'comment.button.reply', 'entry point to reply to comment')})})}),!P&&(x?(0,p.jsx)(C,{commentId:ex,dismissReactionList:()=>{er(void 0)},helpfulCount:eP,isLovedByMe:eL,isMarkedHelpfulByMe:eA,isReactionListOpen:ep===ex,isTry:e5,lovedCount:eF,onReactionCountHover:()=>{er(ex),eV({event_type:9906,component:"pin"===z?13696:13697,view_type:3,view_parameter:em})},onToggleHelpful:e=>()=>{eA!==e&&es(ex,!e,e5)()},onToggleLove:e=>()=>{eL!==e&&eo(ex,!e,e5)()}}):(0,p.jsxs)(i.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,p.jsx)(i.hU,{accessibilityLabel:ez._('Like', 'comment.button.like', 'like or unlike comment'),icon:"heart",iconColor:eL?"red":"gray",onClick:eo(ex,eL,e5),size:"xs"}),eF>0&&(0,p.jsx)(i.xu,{"data-test-id":"love-count-container",children:(0,p.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:eF})})]})),!(eM.id===e_&&e0)&&(0,p.jsx)(i.xu,{ref:eX,"data-test-id":"comment-more-options",children:(0,p.jsx)(i.hU,{accessibilityLabel:ez._('More', 'comment.button.more', 'see more options for comment'),icon:"ellipsis",iconColor:"gray",onClick:()=>{x?td(!to):j&&j(y,{showIndiaLawReporting:!!eJ,showNetzDGReporting:!!eq})},size:"xs"})})]}),!P&&!ec&&!x&&(0,p.jsx)(i.xu,{marginStart:6,children:(0,p.jsx)(i.iP,{fullWidth:!1,onTap:es(ex,eA,e5),children:(0,p.jsxs)(i.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,p.jsx)(m,{color:"subtle",isMarkedHelpful:eA}),(0,p.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:ez._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful')}),eP>0&&(0,p.jsx)(i.xu,{"data-test-id":"helpful-count-container",children:(0,p.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:eP})})]})})})]})]})]}),x&&(0,p.jsxs)(a.Fragment,{children:[tc&&(0,p.jsx)(i.xu,{marginTop:3,children:(0,p.jsx)(F.Z,{clientTrackingParams:eO,commentWarningModalState:tb,dismissCommentWarningModal:tF,initialTags:y.tags,initialText:"aggregatedcomment"===y.type?y.text:y.details,isEditing:!0,objectType:G.o.aggregatedComment,onAddItem:tC,onCancelItem:tS(!1),postedPhoto:te&&tc?eD:eE,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:em})}),el===ex&&(0,p.jsx)(i.xu,{marginStart:tw?0:12,marginTop:3,children:(0,p.jsx)(F.Z,{commentWarningModalState:tb,dismissCommentWarningModal:tF,initialTags:tw?[{offset:0,object_id:eg,length:tj.length,tag_type:1}]:[],initialText:tw?`${tj} `:"",isReplying:!0,objectType:G.o.aggregatedComment,onAddItem:tI,onCancelItem:()=>{I&&I()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:em})})]}),(eb>0||tg)&&(0,p.jsx)(i.xu,{marginStart:12,marginTop:4,children:(0,p.jsx)(M,{aggregatedPinDataId:n,closeupAttributionId:h,closeupAttributionUsername:_,featuredCommentId:f,isDesktop:x,isLoading:tg,isORBACProfileManager:ec,isReadOnly:P,isVideo:S,openOverflowMenu:j,parentId:ex,parentType:y.type,pinId:ee,pinnerId:eu,reactionListCommentId:ep,replyingToCommentId:el,shouldPreviewNewReply:g,showReactionListForComment:er,storyPinDataId:ea,toggleHelpful:es,toggleLike:eo,toggleReplyComposer:I,viewParameter:em})}),x&&eQ&&(0,p.jsx)(en,{aggregatedPinDataId:n,anchor:eX.current,closeupAttributionId:h,comment:y,dismiss:e=>{td(!1),e||eV({component:14349,event_type:10128})},isOpen:to,isReply:tw,onEdit:tS(!0),onShowBlockUserModal:tT(!0),parentId:A,pinId:ee,pinnerId:eu,showIndiaLawReporting:!!eJ,showNetzDGReporting:eq}),tf&&(0,p.jsx)(w.Z,{children:(0,p.jsx)(d.N,{children:(0,p.jsx)(ei,{aggregatedPinDataId:n,didItDataId:ex,onClose:e=>()=>{tx(!e)},pinId:ee??"",username:ef,users:[y.user]})})}),tv&&(0,p.jsx)(w.Z,{children:(0,p.jsx)(et,{firstName:eh??"",onBlockUser:()=>{eG((0,Q.Ge)({id:eg,orbacSubjectId:e2,blockSource:"comment",blockContext:ex,logContextEvent:eV})),e3(eg),e8(eg),eV({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eM.isAuth?eM.id:null}}),eV({component:14349,event_type:9407}),tk(!1),e$(({hideToast:e})=>(0,p.jsx)(V.ZP,{onHide:e,text:(0,E.nk)(ez._('You\'ve blocked {{ username }}', 'comment.blockAuthor.toast', 'confirmation toast that shows after user blocks comment author'),{username:ef}).join("")}))},onClearModal:tT(!1)})}),!!eD&&t_&&(0,p.jsx)(L.Z,{onDismiss:()=>tL(t_),photo:eD})]})}var el=n("23534");function er(e){let t;let{aggregatedPinDataId:n,shouldPreviewNewReply:a,comments:l,commentsDisabled:r,commentsScrollContainerRef:s,featuredCommentId:o,gapSize:d=6,inCommentFeedRedesignExp:c,isDesktop:m,isLoaded:g=!1,isLoading:h=!1,isReadOnly:_,openOverflowMenu:y,toggleReplyComposer:f,parentId:x,parentType:k,replyingToCommentId:b,toggleHelpful:P,toggleLike:S,userAvatarSize:w,isORBACProfileManager:j,isVideo:I,storyPinDataId:C,pinId:F,closeupAttributionId:L,closeupAttributionUsername:A,pinnerId:K,showReactionListForComment:Z,reactionListCommentId:R,viewParameter:E}=e,D=(0,u.ZP)(),z=(0,v.Z)(),{closeupWithinMasonryEnabled:M,isCloseupRelatedPinsAboveTheFoldEnabled:B}=(0,X.x4)(),O=m&&c?(0,T.mz)(D):D._('No comments yet! Add one to start the conversation.', 'commentThread.emptyState.message', 'comment thread empty state message');return(z.isAuth||m||(O=D._('No comments yet!', 'commentThread.emptyState.unauthMessage', 'comment thread empty state message in LOP')),t=C?"story":I?"video":"pin",r)?(0,p.jsx)(i.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",marginTop:M?2:void 0,width:"100%",children:(0,p.jsx)(i.xv,{align:m?"start":"center",color:"subtle",children:D._('Comments are turned off for this Pin', 'commentThread.disabledState.message', 'Comments are turned off or disabled for this pin')})}):l.length>0?(0,p.jsxs)(i.xu,{ref:s,dangerouslySetInlineStyle:{__style:{gap:`${4*d}px 0`,scrollbarGutter:M?"stable":void 0,paddingTop:M?"8px":void 0}},"data-test-id":"aggregated-comment-list",direction:"column",display:"flex",maxHeight:M?722:"100%",overflow:M?"auto":void 0,width:"100%",children:[l.map((e,l)=>(0,p.jsx)(el.F,{componentType:"pin"===k?13696:13697,impressionAuxFields:{commentId:e.id,pinId:F,pinOwnerUserId:L,pinType:t,parentId:x,parentType:k,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:l,viewType:m?3:98,children:({impressionTrackerRef:t})=>(0,p.jsx)(i.xu,{ref:t,"data-test-id":"commentThread-comment",children:(0,p.jsx)(ea,{aggregatedPinDataId:n,closeupAttributionId:L,closeupAttributionUsername:A,comment:e,featuredCommentId:o,isDesktop:m,isORBACProfileManager:j,isReadOnly:_,isVideo:I,openOverflowMenu:y,parentId:x,parentType:k,pinId:F,pinnerId:K,reactionListCommentId:R,replyingToCommentId:b,shouldPreviewNewReply:a,showReactionListForComment:Z,storyPinDataId:C,toggleHelpful:P,toggleLike:S,toggleReplyComposer:f,userAvatarSize:w,viewParameter:E})})},e.id)),h&&(0,p.jsx)(i.$j,{accessibilityLabel:D._('Comments loading', ' - ', ' -- '),show:h})]}):(0,p.jsxs)(i.xu,{alignSelf:"center",width:"100%",children:[(0,p.jsx)(i.$j,{accessibilityLabel:D._('Comments loading', ' - ', ' -- '),show:h}),g&&!B&&(0,p.jsx)(i.xv,{align:m?"start":"center",color:"subtle",children:O})]})}},953656:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(667294),a=n(227891),l=n(789234),r=n(785893);let s=(0,i.lazy)(()=>Promise.all([n.e("99610"),n.e("7268")]).then(n.bind(n,402793)));function o(e){return(0,r.jsx)(a.v,{children:(0,r.jsx)(l.Z,{fallback:null,children:(0,r.jsx)(s,{...e})})})}},566561:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(883119),a=n(980374),l=n(558919),r=n(708130),s=n(785893);function o({onDismiss:e,photo:t}){let n=(0,r.ZP)(),{height:o,url:d,width:c}=t,u=Math.min(o??936,936),p="100vh",m=n._('Close media viewer', 'comments.photo.mediaViewer.close', 'Close media viewer overlay');return(0,s.jsxs)(i.mh,{zIndex:l.b7,children:[(0,s.jsx)(i.iP,{mouseCursor:"zoomOut",onTap:e,children:(0,s.jsxs)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},"data-test-id":"comment-media-viewer",display:"flex",height:p,justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,width:"100%",children:[(0,s.jsx)(i.xu,{left:!0,padding:5,position:"absolute",top:!0,children:(0,s.jsx)(i.hU,{accessibilityLabel:m,icon:"cancel",iconColor:"white",onClick:e,padding:3,size:"lg"})}),(0,s.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 84px"}},height:p,maxHeight:u,width:c,children:(0,s.jsx)(i.Ee,{alt:d??"",fit:"contain",naturalHeight:o??1,naturalWidth:c??1,src:d??""},d)})]})}),(0,s.jsx)(a.Z,{onClose:e})]})}},846826:function(e,t,n){n.d(t,{T0:function(){return u},Uf:function(){return p},ZP:function(){return m}});var i=n(667294),a=n(883119),l=n(29944),r=n(566561),s=n(708130),o=n(3879),d=n(80887),c=n(785893);let u=150,p=346;function m({canEnlargePhoto:e,isSelectedPhoto:t,previewPhoto:n,removeSelectedPhoto:m}){let g=(0,s.ZP)(),{isRTL:h}=(0,o.B)(),{setIsMediaViewerOpen:_}=(0,d.x4)(),[y,f]=(0,l.Z)(),[x,v]=(0,i.useState)(!1),[k,b]=(0,i.useState)(!1),P=n?.height??u,S=n?.url??"",w=n?.width??p,j=Math.min(p/w,u/P),I=g._('Remove photo', 'photoCommentPreview.removePhoto', 'Icon to remove the selected photo from the comment composer'),C=g._('Photo', 'photoCommentPreview.previewPhoto', 'Photo previewed as part of a comment'),T=e=>{e?f():y(),_(!e),v(!e)};return(0,c.jsxs)(a.xu,{height:j*P,marginTop:t?3:0,position:"relative",width:j*w,children:[(0,c.jsx)(a.iP,{disabled:!e,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onTap:()=>T(x),children:(0,c.jsx)(a.zd,{rounding:2,children:(0,c.jsx)(a.Ee,{alt:C,color:"#efefef",naturalHeight:P,naturalWidth:w,onLoad:()=>{t&&URL.revokeObjectURL(S)},src:S,children:e&&(0,c.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{cursor:"zoom-in",backgroundColor:`rgba(17, 17, 17, ${k?.4:0})`}},height:"100%",width:"100%"})},C)})}),t&&(0,c.jsx)(a.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",left:h,marginEnd:-3,marginTop:-3,position:"absolute",right:!h,top:!0,width:24,children:(0,c.jsx)(a.hU,{accessibilityLabel:I,bgColor:"lightGray",icon:"cancel",onClick:m,size:"xs"})}),x&&(0,c.jsx)(r.Z,{onDismiss:()=>T(x),photo:n})]})}},577442:function(e,t,n){n.d(t,{HI:function(){return r},f8:function(){return o},hm:function(){return s},sH:function(){return l}});var i=n(883119),a=n(785893);let l=({children:e})=>(0,a.jsx)(i.xu,{bottom:!0,left:!0,padding:4,position:"absolute",right:!0,children:e}),r=({children:e})=>(0,a.jsx)(i.xu,{padding:2,children:e}),s=({children:e})=>(0,a.jsx)(i.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:e}),o=({children:e})=>(0,a.jsx)(i.xu,{left:!0,padding:4,position:"absolute",right:!0,top:!0,children:e})},297530:function(e,t,n){n.d(t,{Ec:function(){return d},IA:function(){return _},LX:function(){return c},Mf:function(){return h},SF:function(){return s},_e:function(){return o},h_:function(){return b},l0:function(){return r},ml:function(){return l},pQ:function(){return k},q4:function(){return a},zn:function(){return i}});let i=e=>["feed_card_default","feed_card_video"].includes(e),a=2/3,l=2/3,r=1/3,s="36px",o="28px",d=.4,c=.65,u={0:"start",1:"center",2:"end"},p={web:{0:"16",1:"20",2:"24"},mweb:{0:"12",1:"16",2:"18",3:"20"}},m={1:"italics",0:"normal"},g={1:"bold",0:"normal"},h=({color:e,font_style:t,font_weight:n,horizontal_alignment:i,size:a},l)=>({color:e,fontStyle:m[t??0],fontWeight:g[n??1],horizontalAlignment:u[i??0],fontSize:p[l][a??0]+"px"}),_=e=>e<=280?1.25:e>280&&e<=540?.75:e>540&&e<1024?c:d,y={1:"default",2:"subtle",3:"success",4:"error",5:"warning",6:"inverse",7:"dark",8:"light",9:"shopping"},f=y[8],x={1:"red",2:"gray",3:"transparent",4:"blue"},v=x[2],k=e=>{if(e){if(e.button_style&&e.button_style in x)return x[e.button_style];if(e.button_background_color){if("#e60023"===e.button_background_color.toLowerCase())return x[1];if("#0074e8"===e.button_background_color.toLowerCase())return x[4]}}return v},b=(e,t)=>{if(e){if(e.title_text_customization?.color&&(e.title_text_customization.color=e.title_text_customization.color.toLowerCase()),e.title_text_customization?.text_color&&e.title_text_customization?.text_color in y)return y[e.title_text_customization?.text_color];if(e.title_text_customization?.color){if("#111111"===e.title_text_customization.color||"#000000"===e.title_text_customization.color)return y[7];if("#ffffff"===e.title_text_customization.color)return y[8]}}return t?"white"===t?y[8]:y[7]:f}},204728:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(537347),a=n.n(i),l=n(320288);function r(e){if("undefined"==typeof window||!document.head)return(0,l.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"window undefined"}}),Promise.reject(Error("Window is undefined or no head on the document. Unable to load fonts"));let{head:t}=document,n=[];return e.forEach(e=>{e.styles.forEach(i=>{let l=document.querySelector(`#${e.fontFamily??""}-${i.name}`);l||((l=document.createElement("style")).setAttribute("id",`${e.fontFamily??""}-${i.name}`),t.appendChild(l),e.format&&i.fontUrl&&l&&l.sheet&&l.sheet.insertRule(`
            @font-face {
              font-family: "${e.fontFamily??""}";
              font-style: "${i.fontStyle}";
              font-weight: "${i.fontWeight}";
              src: url("${i.fontUrl}") format("${e.format}");
            }
          `,0),n.push(new(a())(e.fontFamily,{style:i.fontStyle,weight:i.fontWeight}).load()))})}),Promise.all(n).then(()=>{Promise.resolve()}).catch(e=>{(0,l.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"unsuccessful load"}}),Promise.reject(e)})}},35988:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(667294),a=n(219300),l=n(639161),r=n(959474),s=n(379774),o=n(785893);function d(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c=(0,l.Z)()&&(0,l.Z)().debug_impression_log,u={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061}};function p(e){class t extends i.Component{constructor(...e){super(...e),d(this,"currentNs",()=>1e6*Date.now()),d(this,"startTime",0),d(this,"debugPinImpressions",c&&"Pin"===this.props.impressionType&&this.props.viewer.isAuth&&this.props.viewer.isEmployee),d(this,"handleVisibilityChanged",e=>{let{componentType:t,contextLogData:n,impressionAuxFields:i,impressionType:a,loggingId:l,slotIndex:r,viewParameter:s,viewType:o,viewData:d,logContextEvent:c}=this.props;if(e)this.startTime=this.currentNs(),this.debugPinImpressions&&console.log(r+" started timer");else{let e=u[a],p=e.idType,m=this.currentNs(),g={endTime:m,[p]:l,slotIndex:r,time:this.startTime,renderDuration:m-this.startTime,...i};c({event_type:e.eventType,component:t,event_data:{[e.impressionType]:[g]},view_type:o,view_parameter:s,view_data:d,aux_data:{...n}}),this.debugPinImpressions&&console.log(r+" logged for "+(m-this.startTime)/1e9+"s")}})}render(){return(0,o.jsx)(s.i,{onVisibilityChanged:this.handleVisibilityChanged,...this.props,children:(0,o.jsx)(e,{...this.props})})}}return function(e){let{logContextEvent:n}=(0,a.v)(),i=(0,r.Z)();return(0,o.jsx)(t,{...e,logContextEvent:n,viewer:i})}}},597015:function(e,t,n){n.d(t,{Z:function(){return i}});function i(e,t){let n=e.split(t?",":":");return n.length>0?t?n[0]:n[1]:""}},890847:function(e,t,n){n.d(t,{HM:function(){return o},ZP:function(){return c},oV:function(){return d}});let i="filter_queries",a="skin_tone",l="hair_pattern",r=`${a.toUpperCase()}_${i.toUpperCase()}`,s=`${l}_${i}`,o=e=>e.startsWith(r)||e.startsWith(s),d=e=>o(e)&&e===r?a:l;function c(e,t){return"skin_tone"===e?t.skin_tone_filter_list.options:t.hair_pattern_filter_list}},840857:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(193733),a=n(137123);let l=(e=()=>{})=>{let t=(0,a.mB)(window.location.search),{invite_code:n}=t;if(!n){e(t);return}let l=encodeURIComponent(encodeURIComponent(n));(0,i.Z)({url:"/v3/invite_code/attribution/land/",method:"POST",data:{invite_code:l}})}},419446:function(e,t,n){n.d(t,{U:function(){return y}});var i=n(320288);let a="nic_v3",l=`${a}=1a`,r=`${a}=1b`,s=[l,r],o=["invite_code","invite","board_invite_code","sender"],d=e=>!!o.find(t=>e.includes(t)),c=e=>!!s.find(t=>e.includes(t)),u=e=>e.pathname.includes("/pin/")&&!d(e.search)&&!c(e.search),p=e=>e.includes("sender"),m=e=>!d(e)&&!p(e)&&e.includes(a),g=(e,t,n)=>{let i=e.search?"&":"?";return e.pathname+e.search+(i+(n?r:l)+t)},h=(e,t,n=!1,l)=>{if(!u(e))return;let r=n?"mweb":"web";if(!t){(0,i.nP)(`${r}.${a}.social_tracking_pin_non_invite.insert.no_encrypted_id`);return}(0,i.nP)(`${r}.${a}.social_tracking_pin_non_invite.insert.attempt`);try{let s=g(e,t,n||!1);(0,i.nP)(`${r}.${a}.social_tracking_pin_non_invite.insert.success`),l(s)}catch{(0,i.nP)(`${r}.${a}.social_tracking_pin_non_invite.insert.caught_exception`)}},_=(e,t,n=!1,i)=>h(e,"",n,i),y=(e,t,n,l,r)=>{let s=n?"mweb":"web";(0,i.nP)(`${s}.${a}.social_tracking_pin_non_invite.attempt`);try{!n&&l&&u(e)?((0,i.nP)(`${s}.${a}.social_tracking_pin_non_invite.search_string_eligible`),_(e,t,n,r)):m(e.search)&&(0,i.nP)(`${s}.${a}.social_tracking_pin_non_invite.search_string_land`)}catch{(0,i.nP)(`${s}.${a}.social_tracking_pin_non_invite.caught_exception`)}}},296327:function(e,t,n){async function i(e){return new Promise((t,n)=>{let i=document.createElement("img");i.onerror=()=>n(Error(`Image failed to load with src ${e}`)),i.onload=()=>t(!0),i.src=e})}async function a(e){try{let t=await fetch(e,{method:"HEAD"}),n=(await t.blob()).type.startsWith("image/");{let t=await i(e);return n&&t}}catch(e){return!1}}n.d(t,{Z:function(){return a}})},922184:function(e,t,n){n.d(t,{T:function(){return i},Z:function(){return l}});let{Provider:i,useHook:a}=(0,n(486188).Z)("NotificationContext"),l=a},386799:function(e,t,n){n.d(t,{Z:function(){return i}});let i=e=>{if(!e)return null;let{categorizedIngredients:t}=e.recipe;return t&&t.length>0?{...e,categorizedIngredients:t}:null}},812996:function(e,t,n){n.d(t,{Z:()=>a,f:()=>i});let i=e=>{let{h:t,m:n}=e||{},i={hours:t||0,minutes:n||0};return void 0===t&&void 0===n?null:{h:t,m:n,time:i,isoDuration:function({hours:e,minutes:t}){return`PT${e}H${t}`}(i)}},a=e=>{if(!e)return null;let{richMetadata:t}=e,{recipe:n}=t;return n&&n.name?{...e,recipe:{name:n.name,categorizedIngredients:n.categorized_ingredients,diets:n.diets,fromAggregatedData:n.from_aggregated_data,prepTime:i(n.cook_times?.prep),cookTime:i(n.cook_times?.cook),totalTime:i(n.cook_times?.total),servingSummary:n.servings_summary?.summary,serves:n.servings_summary?.serves}}:null}},719725:function(e,t,n){n.d(t,{Z:()=>o});let i=e=>{if(!e)return null;let{embed:t}=e.pin,{type:n,src:i,subtype:a}=t||{};return i?{...e,embed:{type:n,src:i,subtype:a}}:null};var a=n("565525");let l=e=>{if(!e)return null;let{videos:t}=e.pin,{id:n,video_list:i={}}=t||{},{V_720P:l,V_HLSV4:r,V_HLSV3_MOBILE:s}=i,o=(0,a.V3)(r),d=(0,a.V3)(s),c=(0,a.V3)(l),u=c||o||d;return n&&u?{...e,video:{id:n,hasVideo:u,mp4:c||void 0,hls:o||void 0,hlsv3:d||void 0}}:null};var r=n("958605");let s=e=>{let{hlsv3:t,hls:n}=e,i=t||n;return!!(i&&(i.width??0)>(i.height??0))},o=e=>{if(!e)return null;let{video:t}=l((0,r.Z)(e))||{},{embed:n}=i((0,r.Z)(e))||{},a=!!(t&&s(t))||!!(n&&n.src&&"pinstory"!==n.subtype&&"gif"!==n.type);return{...e,isWideVideo:a}}},831949:function(e,t,n){n.d(t,{Z:function(){return s}});var i,a=n(667294);n(167912);var l=n(131548);let r=void 0!==i?i:i=n(103498);function s({pinKey:e,closeupWithinMasonryEnabled:t}){let n=(0,l.Z)(r,e),i=n?.imageSpec_564x||n?.imageSpec_736x||n?.imageSpec_orig||n?.imageSpec_474x||n?.imageSpec_236x,s=n?.imageSpec_736x||n?.imageSpec_orig||n?.imageSpec_564x||n?.imageSpec_474x||n?.imageSpec_236x,o=t?s:i;return{getMainPinImage:(0,a.useCallback)(()=>({url:o?.url||"",height:o?.height||1,width:o?.width||1}),[o?.height,o?.url,o?.width])}}},13596:function(e,t,n){n.d(t,{Z:()=>s});var i,a=n("667294");n("167912");var l=n("131548");let r=void 0!==i?i:i=n(126087);function s({pinKey:e,maxWidth:t}){let n=(0,l.Z)(r,e),i=n?.imageSpec_564x||n?.imageSpec_736x||n?.imageSpec_orig||n?.imageSpec_474x||n?.imageSpec_236x,s=i?.width||1,o=i?.height||1,d=i?.url||"",c=function(e,t,n=564){return e>n&&(t*=n/e,e=n),{width:e,height:t}}(s,o,t);return{getNormalizedPinImage:(0,a.useCallback)(()=>({width:c.width,height:c.height,url:d}),[c.height,c.width,d])}}},961971:function(e,t,n){n.d(t,{Z:function(){return s}}),n(167912);var i,a=n(131548),l=n(311258);let r=void 0!==i?i:i=n(70973),s=e=>{let t=(0,a.Z)(r,e),n=(0,l.Z)(t);if(!t?.entityId)return null;let{trackedLink:i,link:s,method:o}=t,d=i||s;return d&&("catalog_bulk_create"===o||n)?decodeURIComponent(d):d}},311258:function(e,t,n){n.d(t,{Z:function(){return r}}),n(167912);var i,a=n(131548);let l=void 0!==i?i:i=n(12118),r=e=>{let t=(0,a.Z)(l,e);if(!t?.richMetadata)return!1;let{products:n}=t.richMetadata??{};return!!Array.isArray(n)&&n.some(e=>!!e&&e.name)}},153102:function(e,t,n){n.d(t,{NC:function(){return l},Rc:function(){return s},WK:function(){return d},X9:function(){return a},b9:function(){return i},f9:function(){return o},gu:function(){return r}});let i="pin-builder-font-faces",a="system-font-faces",l="pin-builder-education-font-faces",r="licensed",s="system",o="brand",d=4},541418:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(883119),a=n(708130),l=n(967629),r=n(554846),s=n(785893);function o(){return (0, a.ZP)()._('Free shipping', 'closeup.product.shipping', 'product shipping info')}function d({freeShippingPrice:e}){let t=(0,a.ZP)();return(0,l.nk)(t._('Free shipping with {{ shippingPrice }}+', 'closeup.product.shipping', 'product shipping info'),{shippingPrice:e}).join("")}function c({customStyles:e,showPrevDot:t,freeShippingPrice:n,freeShippingValue:a}){let l;let c=t?[""]:[],{color:u="subtle",size:p="200"}=e||{};return Number.isFinite(a)?(0===a?l=(0,s.jsx)(o,{}):n&&(l=(0,s.jsx)(d,{freeShippingPrice:n})),l&&c.push((0,s.jsx)(i.kC,{direction:"row",children:l})),0===c.length)?null:(0,s.jsx)(i.xv,{color:u,size:p,children:(0,s.jsx)(r.Z,{color:u,items:c})}):null}},451308:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(667294),a=n(883119),l=n(561162),r=n(927998),s=n(117576),o=n(785893);function d(e){let t=(0,r.E)(),n=s.Z()?.isAuthenticated,{checkExperiment:d}=(0,l.F)(),c=d(n?"web_use_intersection_observer_for_getboundingclientrect_auth":"web_use_intersection_observer_for_getboundingclientrect_unauth").anyEnabled;return(0,i.useEffect)(()=>{let n=document.getElementById(e.containerId),i=async(e,t)=>{let n,i;if(c){let a=new Promise(t=>{let n=new IntersectionObserver(([e])=>{n.disconnect(),t(e.boundingClientRect)});n.observe(e)}),l=new Promise(e=>{let n=new IntersectionObserver(([t])=>{n.disconnect(),e(t.boundingClientRect)});n.observe(t)});[n,i]=await Promise.all([a,l])}else n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return!!n&&!!i&&n.top>=i.top&&n.left>=i.left&&n.bottom<=i.bottom&&n.right<=i.right};if(null==n)t?.removeConstraint("thumbnailsLoaded");else{let e=Array.from(n.querySelectorAll("*")).filter(e=>"IMG"===e.tagName&&i(e,n)),a=e.length,l=()=>{a-=1};e.forEach(e=>{e.onload=l(),0===a&&t?.markConstraintComplete("thumbnailsLoaded")})}},[c,e.containerId,t]),(0,o.jsx)(a.xu,{id:"imageContainerPerf",children:e.children})}},181072:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(667294),a=n(231299),l=n(785893);let r=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,n)=>{let a=(0,i.useRef)(null),l=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(e!==a.current||n&&n!==l.current){a.current=e;let n=r(e);n?.complete&&t()}l.current=n},[e,t,n])};function o({alt:e,children:t,color:n,elementTiming:i,fetchPriority:r,isActive:o=!1,naturalHeight:d,naturalWidth:c,onLoad:u,src:p,fit:m="none",srcSet:g,...h}){return s(p,u,o),(0,l.jsx)(a.Z,{...h,alt:e,color:n,elementTiming:i,fetchPriority:r,fit:m,naturalHeight:d,naturalWidth:c,onLoad:u,src:p,srcSet:g,children:t})}},238124:function(e,t,n){n.d(t,{ku:()=>T,Jx:()=>j,PY:()=>C});var i=n("411914"),a=n("602096"),l=n("235518"),r=n("644818"),s=n("974938"),o=n("426486"),d=n("661966");let c=()=>(0,d.PJ)().reduce((e,{identifier:t,loadTime:n,renderTime:i})=>e[`${t}_loadTime`]?e[`${t}_dupe_loadTime`]?{...e,[`${t}_dupe_loadTime`]:n,[`${t}_dupe_renderTime`]:i}:e:{...e,[`${t}_loadTime`]:n,[`${t}_renderTime`]:i},Object.freeze({}));var u=n("139091"),p=n("349611"),m=n("101585");let g=e=>{let t=(0,m.y0)();return e.reduce((e,{name:n,match:i})=>t.filter(e=>i(e)).slice(0,2).reduce((e,t,i)=>({...e,...(0,r.jh)(`${n}${i?"_dupe1":""}_`,(0,u.Z)(t))}),e),Object.freeze({}))},h=e=>{if("pin_closeup"===e){let e=(0,p.Z)();return g([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}return{}};var _=n("41367"),y=n("191282"),f=n("67561"),x=n("573083"),v=n("16428"),k=n("217677"),b=n("739336");let P=(0,i.XV)("LightStopwatch"),S=()=>{let e=[],t=null;return window.PerformanceObserver&&(t=(0,v.Z)({entryTypes:["resource"]},t=>{(e=e.concat(t.getEntries())).length>1e3&&(e=e.slice(-1e3))})),{get:()=>e,disconnect:()=>{t&&t.disconnect()}}},w={},j=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:n,name:i,pwtStaticContext:d})=>{let u=S(),p=(0,x.Z)(d.fullPath),m=!0,g={...p?{pagePath:{value:p,type:"STRING"}}:{}};(0,a.A9)(`TIMING.${i}`,{tags:{isAuth:d.isAuthenticated}});let v={type:"stopwatch",name:i,navigationType:"initial_app_load",isAuthenticated:d.isAuthenticated,surface:""},j={abort:p=>{if(!m){(0,a.H)("duplicate_abort_action",{action:i});return}m=!1;let x=(0,k.Z)(),P=(0,o.Z)(),S=u.get(),w={reason:p,type:"ABORT",traceId:(0,k.Z)(),startTime:0,endTime:b.Z?.now()||0,spans:[{name:"network_resources",id:x,startTime:0,endTime:b.Z?.now()||0,annotationMap:{},binaryAnnotationMap:{},parentId:null},...S.map(e=>(0,f.Z)((0,_.p)(e,[]),x)).filter(Boolean)],annotationMap:{...(0,r.jh)("resource_",n?h(n):{}),...(0,r.jh)("element_",c()),...(0,r.jh)("mark_",t&&t.length?(0,r.Hd)((0,l.gQ)(),t):{}),...(0,r.jh)("browser_",P?(0,r.D3)(P):{})},binaryAnnotationMap:(0,s.ng)({annotateExperiments:e,metricId:v,pwtStaticContext:d,performanceResourceTimings:S,binaryAnnotations:g,type:"ABORT"})};(0,y.Z)({metricId:v,pwtStaticContext:d,result:w,isAuth:d.isAuthenticated})},error:(e,t)=>{let n={...t,action:i};if(!m){(0,a.H)("duplicate_error_action",n);return}e&&(0,a.H)(e,n),u&&u.disconnect(),m=!1},stop:p=>{if(!m){(0,a.H)("duplicate_stop_action",{action:i});return}m=!1,u.disconnect();let x=(0,k.Z)(),b=(0,o.Z)(),P=u.get(),S={type:"COMPLETE",traceId:(0,k.Z)(),startTime:0,endTime:p,spans:[{name:"network_resources",id:x,startTime:0,endTime:p,annotationMap:{},binaryAnnotationMap:{},parentId:null},...P.map(e=>(0,f.Z)((0,_.p)(e,[]),x)).filter(Boolean)],annotationMap:{...(0,r.jh)("resource_",n?h(n):{}),...(0,r.jh)("element_",c()),...(0,r.jh)("mark_",t&&t.length?(0,r.Hd)((0,l.gQ)(),t):{}),...(0,r.jh)("browser_",b?(0,r.D3)(b):{})},binaryAnnotationMap:(0,s.ng)({annotateExperiments:e,metricId:v,pwtStaticContext:d,performanceResourceTimings:P,binaryAnnotations:g,type:"COMPLETE"})};(0,y.Z)({metricId:v,pwtStaticContext:d,result:S,isAuth:d.isAuthenticated})},addBinaryAnnotation:(e,t,n)=>{P(`adding binary annotation {${e}: ${String(t)}}`),g={...g,[e]:{value:t,type:n}}}};return w[i]=j,j},I=e=>w[e],C=e=>!!I(e),T=({stopwatchName:e,binaryAnnotationName:t,value:n,annotationType:i})=>{let a=I(e);a&&a.addBinaryAnnotation(t,n,i)}},282290:function(e,t,n){n.d(t,{T:function(){return l},g:function(){return r}});let{Provider:i,useHook:a}=(0,n(420932).Z)({name:"story_pin_step",sampleRate:1}),l=i,r=a},573083:function(e,t,n){n.d(t,{Z:function(){return i}});function i(e){let t=e.split("?")[0]??"";if(!t.startsWith("/pin/"))return null;let n=t.split("/")[3];return n?"feedback"===n||"sent"===n?n:null:"default"}},349611:function(e,t,n){n.d(t,{Z:function(){return a},f:function(){return i}});let i="closeupImage",a=()=>{if(!document.querySelector)return null;let e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}},580412:function(e,t,n){n.d(t,{Z:()=>m});var i=n("667294"),a=n("883119"),l=n("10380"),r=n("708130"),s=n("537225"),o=n("785893");function d({category:e,ingredients:t,textSize:n="300"}){return(0,o.jsxs)(a.xu,{children:[e&&(0,o.jsx)(a.xu,{children:(0,o.jsx)(a.xv,{size:n,weight:"bold",children:e})}),(0,o.jsx)("ul",{children:t.map((e,t)=>(0,o.jsx)("li",{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",children:(0,o.jsx)(a.xu,{marginTop:1,children:(0,o.jsxs)(a.xv,{size:n,children:[" ",e.amt||null," ",e.name]})})},t))})]})}var c=n("110172"),u=n("220004"),p=n("80887");function m({recipeProps:e,marginOverrides:t}){var n;let m=(0,r.ZP)(),{image:g,name:h,categorizedIngredients:_}=e.recipe,{isCloseupRelatedPinsAboveTheFoldEnabled:y,peekCloseupEnabled:f}=(0,p.x4)(),x=0;if(_&&_.length){let e=[];_.forEach(t=>(x+=t.ingredients.length,e.push(t.ingredients)))}let v=f?(n=x,(0,s.Z)(m.ngettext('{{ count }} Ingredient', '{{ count }} Ingredients', n, 'closeup.recipePin.heading.ingredientCount', 'Ingredient count on a Pin. count: number of ingredients'),{count:n.toString()})):m._('Ingredients', 'Ingredients title and count in closeup recipe description', 'Ingredients title and count in closeup recipe description');return(0,o.jsx)(a.xu,{marginBottom:y?2:void 0,marginTop:y?2:8,children:(0,o.jsxs)(c.Z,{itemScope:!0,itemType:"https://schema.org/Recipe",children:[(0,o.jsx)("meta",{content:h,itemProp:"name"}),(0,o.jsx)("meta",{content:g,itemProp:"image"}),(0,o.jsx)(u.Z,{heading:v,children:(0,o.jsx)(a.xu,{marginTop:y?void 0:4,children:_.map(({category:e,ingredients:n},r)=>{let s=`ingredient-${r}`;return(0,o.jsx)(i.Fragment,{children:(0,o.jsx)(a.xu,{marginBottom:t?.ingredientMarginBottom||4,children:(0,o.jsx)(d,{category:e,ingredients:n,textSize:y?"200":l.n})})},s)})})})]})})}},84870:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(967629);function a({m:e,h:t,rm:n,rh:l},r,s=!1){return e&&(!t||l<=0)?s?(0,i.nk)(r._('{{mins}}min', 'closeup.makeRecipeTimeText.minutes', 'number showing the minutes to complete a recipe'),{mins:n.toString()}):(0,i.nk)(r.ngettext('{{mins}} minute', '{{mins}} minutes', n, 'number showing the minutes to complete a recipe', 'number showing the minutes to complete a recipe'),{mins:n.toString()}):t?s?(0,i.nk)(r._('{{hrs}}hr {{mins}}min', 'closeup.makeRecipeTimeText.hours', 'hrs: number showing the hours to complete a recipe, mins: number showing the minutes to complete a recipe'),{hrs:t.toString(),mins:e.toString()}):(0,i.nk)(r.ngettext('{{hrs}} hour', '{{hrs}} hours', l, 'number showing the hours to complete a recipe', 'number showing the hours to complete a recipe'),{hrs:l.toString()}):null}},570630:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(272083),a=n(967629),l=n(785893);function r({m:e,h:t,rm:n,rh:r},s){return e&&(!t||r<=0)?(0,a.nk)(s._('{{mins}}min', 'closeup.makeRecipeText.minutesLabel', 'Minutes label for Rich Pin Recipe'),{mins:(0,l.jsx)(i.Z,{maximumFractionDigits:2,value:n},"recipe-minutes")}):t?(0,a.nk)(s._('{{hrs}}hr', 'closeup.makeRecipeText.hoursLabel', 'Hours label for Rich Pin Recipe'),{hrs:(0,l.jsx)(i.Z,{maximumFractionDigits:2,value:r},"recipe-hours")}):null}},634855:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(967629);function a(e,t){return e<60?(0,i.nk)(t._('{{mins}}min', 'recipe.minutes', 'recipe in minutes. mins: recipe duration in minutes'),{mins:e}):(0,i.nk)(t._('{{hrs}}h {{mins}} min', 'recipe.time', 'recipe time. mins: recipe duration in minutes. hrs: recipe duration in hours'),{mins:e%60,hrs:Math.floor(e/60)})}},110172:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(785893);let a=e=>{let t=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return(0,i.jsx)("div",{"data-test-id":"rich-pin-information",...t,children:e.children||null})}},565525:function(e,t,n){n.d(t,{Gj:function(){return l},QO:function(){return d},V3:function(){return s},ah:function(){return r},cO:function(){return m},dn:function(){return u},fP:function(){return p},zP:function(){return o}});var i=n(557108),a=n(202732);let l="https://schema.org/FollowAction",r="https://schema.org/LikeAction",s=e=>{let{thumbnail:t,url:n,width:i,height:a,duration:l}=e||{};return t&&n&&i&&a&&{thumbnail:t,url:n,width:i,height:a,duration:l}||void 0},o=({isEligible:e,hasName:t,hasAggregateRating:n,hasOffers:i})=>{(0,a.My)("closeup_main_pin.leaf_snippet.is_product",{isEligible:e,hasName:t,hasAggregateRating:n,hasOffers:i})},d=(e,{userName:t,fullName:n})=>{let i=t||"";return{"@type":"Person",name:n||i,url:e+"/"+i}},c=e=>(0,i.o)(e||"").trim();function u(e,t,n,i,a,l){n=n.trim();let r=(t=t.trim())||l||n||i;if(!e||!e.metatags)return{title:r,description:n||t||a};let{description:s=""}=e.metatags;return{title:r,description:c(s)||t||a}}let p=(e,t,n)=>{let i=t;return n?{fallbackTitle:i="recipe"===e?n._('Pinterest Recipe', 'pin.closeup.leafsnippet.recipe', 'Default recipe title and description for crawlers'):"howto"===e?n._('Pinterest How To', 'pin.closeup.leafsnippet.howto', 'Default how to title and description for crawlers'):"video"===e?n._('Pinterest Video', 'pin.closeup.leafsnippet.video', 'Default video title and description for crawlers'):"product"===e?n._('Pinterest Product', 'pin.closeup.leafsnippet.product', 'Default product title and description for crawlers'):n._('Pin page', 'pin.closeup.leafsnippet.pin', 'Default pin title and description for crawlers'),fallbackDescription:i}:{fallbackTitle:i,fallbackDescription:i}},m=e=>{if(!e)return;let t=!!e.ratingCount||!!e.reviewCount,{ratingValue:n}=e;if(!t||!n||Number.isNaN(parseFloat(n)))return;let i=e.ratingCount||e.reviewCount;return{"@type":"AggregateRating",ratingValue:e.ratingValue,ratingCount:i,bestRating:5,worstRating:1}}},178616:function(e,t,n){n.d(t,{Z:()=>s});var i=n("777679");function a({scrollPosition:e,containerSize:t,contentSize:n,intendedDistance:i,extendToEdgeDistance:a=0}){let l=n-t,r=i;return r=Math.max(r=Math.min(r,l-e),-e),i>0&&l-(e+r)<=a?r=l-e:i<0&&e+r<=a&&(r=-e),r}let l={easingFunction:"ease-in-out",extendToEdgeDistanceX:0,extendToEdgeDistanceY:0,scrollSpeedPxPerMs:1.2,minScrollDuration:200},r={linear:e=>e,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:-1+(4-2*e)*e};function s(e,t,n,o={}){let d={...l,...o},{scrollLeft:c,scrollTop:u,scrollWidth:p,scrollHeight:m,clientWidth:g,clientHeight:h}=e,_=a({scrollPosition:c,containerSize:g,contentSize:p,intendedDistance:t,extendToEdgeDistance:d.extendToEdgeDistanceX}),y=a({scrollPosition:u,containerSize:h,contentSize:m,intendedDistance:n,extendToEdgeDistance:d.extendToEdgeDistanceY}),f=Math.max(Math.abs(Math.floor(_/d.scrollSpeedPxPerMs)),Math.abs(Math.floor(y/d.scrollSpeedPxPerMs)));d.minScrollDuration&&(f=Math.max(f,d.minScrollDuration));let x=r[d.easingFunction]||r["ease-in-out"];return(0,i.Z)({window,duration:f,run:t=>{e.scrollLeft=c+_*x(t),e.scrollTop=u+y*x(t),1===t&&d.onAnimationComplete&&setTimeout(d.onAnimationComplete,0)}})}},270756:function(e,t,n){n.d(t,{GZ:function(){return i},OE:function(){return a},zX:function(){return l}});let i=246,a=197,l=236},436910:function(e,t,n){n.d(t,{Z:()=>ek});var i=n("667294"),a=n("616550"),l=n("883119"),r=n("548701"),s=n("772866"),o=n("274256"),d=n("581722"),c=n("708130"),u=n("522282"),p=n("379774"),m=n("757892"),g=n("785893");let h=e=>{let t=(0,c.ZP)(),{sourceUrl:n,clientTrackingParams:i,linkText:a,displayUrl:r,image:s,pageId:o,canonicalUrl:p,pinId:h,onTouch:_,onClickThrough:y,isLoading:f}=e,x={story_pin_page_id:o,story_pin_data_id:(0,d.v9)(t=>e.pinId&&t.pins?.[e.pinId]?.story_pin_data_id),src_url:n,canonical_url:p},v=()=>{y&&y({auxData:x})},k=(0,g.jsxs)(l.xu,{alignItems:"center",borderStyle:"sm",display:"flex",overflow:"hidden",rounding:2,children:[(0,g.jsx)(l.xu,{alignItems:"center",color:f||s&&s.url?void 0:"secondary",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid lightGray"}},display:"flex",flex:"none",height:80,justifyContent:"center",minWidth:80,width:80,children:f?(0,g.jsx)(l.$j,{accessibilityLabel:t._('Loading website', 'a11y for loading spinner', 'a11y for loading spinner'),show:!0}):s&&s.url?(0,g.jsx)(l.Ee,{alt:a,fit:"cover",naturalHeight:s.height??1,naturalWidth:s.width??1,src:s.url}):(0,g.jsx)(l.JO,{accessibilityLabel:t._('Default link block icon', 'Icon for default link blocks without an image', 'Icon for default link blocks without an image'),color:"subtle",icon:"link",size:35})}),(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}},flex:"grow",overflow:"hidden",paddingX:5,children:[(0,g.jsx)(l.xv,{lineClamp:1,weight:"bold",children:a}),(0,g.jsx)(l.xv,{color:"shopping",size:"200",children:r})]})]}),b=(0,m.S6)()(h),P=(0,u.Z)({href:{pathname:n,state:{trackingParams:i}},target:"blank",clientTrackingParams:i,externalData:b?{pin:b&&{attributionSourceId:b.attribution_source_id,board:b.board&&{url:b.board.url},campaignId:b.campaign_id,entityId:b.id,isDownstreamPromotion:b.is_downstream_promotion,isPromoted:b.is_promoted,pinner:b.pinner&&{username:b.pinner.username},pinPromotionId:b.pin_promotion_id,promoter:b.promoter&&{entityId:b.promoter.id},storyPinDataId:b.story_pin_data_id,trackingParams:b.tracking_params,advertiserId:b.advertiser_id}}:void 0});return _?(0,g.jsx)(l.iP,{onTap:_,rounding:2,children:k}):(0,g.jsx)(l.Tg,{href:n,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),v(),P({event:e})},rel:"nofollow",rounding:2,target:"blank",children:k})},_=e=>(0,g.jsx)(p.i,{...e,children:(0,g.jsx)(h,{...e})});var y=n("219300"),f=n("482678");let x=(0,n("52302").Z)(()=>Promise.all([n.e("90562"),n.e("15564")]).then(n.bind(n,402971)),void 0,"app-common-react-components-Activities-Utils-Linkify"),v=({block:e,clientTrackingParams:t,pageId:n,pinId:i,onClickThrough:a})=>{let{logContextEvent:r}=(0,y.v)();switch(e.type){case f.h8.LINK:let{canonical_url:s,image:o,normalized_url:d,src_url:c,text:u=""}=e,p=o?.images?.["345x"];if(o&&c&&d&&s)return(0,g.jsx)(l.xu,{marginTop:5,children:(0,g.jsx)(_,{canonicalUrl:s,clientTrackingParams:t,displayUrl:d,image:p,linkText:u,onClickThrough:a,onVisibilityChanged:e=>{e&&r({event_type:120,view_type:3,view_parameter:157,component:228,element:11157,object_id_str:i,aux_data:{story_pin_page_id:n,srcUrl:c,canonicalUrl:s}})},pageId:n,pinId:i,sourceUrl:c})});return null;case f.h8.HEADING:{let{text:t=""}=e;return(0,g.jsx)(l.xu,{marginBottom:4,paddingX:2,children:(0,g.jsx)(l.X6,{accessibilityLevel:2,overflow:"normal",size:"500",children:t})})}case f.h8.PARAGRAPH:{let{text:t=""}=e;return(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},paddingX:2,children:(0,g.jsx)(l.xv,{children:(0,g.jsxs)(x,{children:[" ",t," "]})})})}default:return null}};var k=n("342117");let b=`
@media (min-height: 0) {
  .StoryPinText {
    padding: 15px;
  }
  .StoryPinText span {
    font-size: 12px;
  }
  .StoryPinText h2 {
    font-size: 18px;
  }
}

@media (min-height: 600px) {
  .StoryPinText {
    padding: 2.5vh;
  }
  .StoryPinText span {
    font-size: 2vh;
  }
  .StoryPinText h2 {
    font-size: 3vh;
  }
}

@media (min-height: 800px) {
  .StoryPinText {
    padding: 20px;
  }
  .StoryPinText span {
    font-size: 16px;
  }
  .StoryPinText h2 {
    font-size: 24px;
  }
}
`,P=e=>{let{blocks:t,clientTrackingParams:n,pageId:a,pinId:l,onClickThrough:r}=e;return(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(k.Z,{unsafeCSS:b}),(0,g.jsx)("div",{className:"StoryPinText",children:t.filter(e=>e).map((e,t)=>(0,g.jsx)(v,{block:e,clientTrackingParams:n,onClickThrough:r,pageId:a,pinId:l},t))})]})};var S=n("200366");let w=s._B*f.ap,j=`
.StoryPinTextDrawer {
  background: #fff;
  border-top-left-radius: 32px;
  border-top-right-radius: 32px;
  bottom: 0;
  box-shadow: rgba(0, 0, 0, 0.1) 0 1px 20px 0;
  box-sizing: border-box;

  height: auto;
  max-height: 15%;
  opacity: 0.625;
  position: absolute;
  transition: max-height 0.15s ease-in, opacity 0.15s ease-in;
  width: 100%;
}

.StoryPinTextDrawer:hover {
  max-height: 70%;
  opacity: 1;
  overflow: scroll;
}
`;function I(e){let t=(0,c.ZP)(),{activePageIndex:n,clientTrackingParams:a,hideText:r,isActive:o,isCoverPage:d,muteVideos:u,onClickThrough:p,page:{image_adjusted:m,image:h,blocks:_,video:y,id:f},pageIndex:x,pageWidth:v,pin:b,pinId:I}=e,{images:C={}}=m||h||{},T=C["750x"],{video_list:F={}}=y||{},L=F.V_HLSV3_MOBILE||F.V_720P;if(!T&&!L)return null;let A=v/s._B;return(0,g.jsxs)(i.Fragment,{children:[!!y&&!!L&&(0,g.jsx)(S.Z,{activePageIndex:n,blockHeight:w*A,blockWidth:s._B*A,isPlaying:o,muted:u,pageIndex:x,pin:b,pinId:I,video:y}),T&&!L&&(0,g.jsx)(l.Ee,{alt:function(e){let t="";for(let n of e.blocks??[])[1,0].includes(n.block_type)&&(t=n.text?n.text:"");return t??""}(e.page)||t._('Story pin image', 'Alt text for story pin image', 'Alt text for story pin image'),fit:d?"cover":"contain",naturalHeight:T.height??1,naturalWidth:T.width??1,src:T.url??""}),_&&_.length>0&&!r&&(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(k.Z,{unsafeCSS:j}),(0,g.jsx)("div",{className:"StoryPinTextDrawer",children:(0,g.jsx)(P,{blocks:_,clientTrackingParams:a,onClickThrough:p,pageId:f,pinId:I})})]})]})}let C=e=>{let{page:{image_adjusted:t,blocks:n}}=e,{images:a={}}=t||{},r=a["750x"];if(!r)return null;let{width:s,height:o}=r;return(0,g.jsx)(i.Fragment,{children:r&&(0,g.jsx)(l.Ee,{alt:(n??[]).map(e=>e.text||"").join(),fit:"contain",naturalHeight:o??1,naturalWidth:s??1,src:r.url??""})})};var T=n("204728"),F=n("170217"),L=n("820368"),A=n("4141"),K=n("935415"),Z=n("228132"),R=n("458199");function E({children:e,clientTrackingParams:t,closeupStoryPinViewability:n,pin:i,productPins:a,viewParameter:l,viewType:r}){let{previous:s,forward:d}=(0,F.Hv)(),c=0===s.length&&0===d.length,u=(0,R.t)();return(0,g.jsx)(A.o,{closeupPaneWidth:Z.Gg,headerHeight:u,isLandingPage:c,loadFonts:T.Z,productPins:a,renderStoryPinMediaLayout:({activePageIndex:e,hideText:n,isActive:a,isCoverPage:l,muteVideos:r,onClickThrough:s,page:o,pageIndex:d,pageWidth:c,pinId:u})=>(0,g.jsx)(I,{activePageIndex:e,clientTrackingParams:t,hideText:n,isActive:a,isCoverPage:l,muteVideos:r,onClickThrough:s,page:o,pageIndex:d,pageWidth:c,pin:i,pinId:u}),renderStoryPinPage:({activePageIndex:e,customEndCard:a,fontsLoaded:s,isActive:d,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:m,page:h,pageAspectRatio:_,pageHeight:y,pageWidth:f,ownerId:x,pinId:v,productPins:k,shouldLogTimeSpent:b,stillLoading:P,videoPinProgress:S})=>(0,g.jsx)(o.Z,{activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:n,customEndCard:a,fontsLoaded:s,isActive:d,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:m,ownerId:x,page:h,pageAspectRatio:_,pageHeight:y,pageIndex:e,pageWidth:f,pin:i,pinId:v,productPins:k,shouldLogTimeSpent:b,stillLoading:P,videoPinProgress:S,viewParameter:l,viewType:r}),renderStoryPinSplitLayout:({page:e})=>(0,g.jsx)(C,{page:e}),renderStoryPinText:({blocks:e,onClickThrough:n,pageId:i,pinId:a})=>(0,g.jsx)(P,{blocks:e,clientTrackingParams:t,onClickThrough:n,pageId:i,pinId:a}),children:e})}function D({clientTrackingParams:e,children:t,isInStream:n,viewType:i,viewParameter:a}){return n?t:(0,g.jsx)(K.Z,{clientTrackingParams:e,component:85,view:i,viewParameter:a,children:t})}function z({children:e,pin:t}){return e({productPins:(0,L.Z)({name:"StoryPinTaggedProductsResource",options:{id:t.id},noCache:!0}).data||[]})}function M({children:e,clientTrackingParams:t,closeupStoryPinViewability:n,pin:i,isInStream:a=!1,viewType:l,viewParameter:r}){let s=!!i.story_pin_data?.has_product_pins,o=({productPins:a})=>(0,g.jsx)(E,{clientTrackingParams:t,closeupStoryPinViewability:n,pin:i,productPins:a,viewParameter:r,viewType:l,children:e});return(0,g.jsx)(D,{clientTrackingParams:t,isInStream:a,viewParameter:r,viewType:l,children:s?(0,g.jsx)(z,{pin:i,children:o}):o({productPins:[]})})}var B=n("674320"),O=n("86485"),V=n("290241"),H=n("870912"),U=n("13596"),N=n("297706"),W=n("561162"),$=n("927998"),G=n("282290"),X=n("673695"),q=n("116766"),Y=n("3879"),J=n("226978");function Q({appConfig:e}){let t=(0,c.ZP)(),n=(0,J.Z)(),{isRTL:a}=(0,Y.B)();return(0,g.jsx)(i.Fragment,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{marginTop:16}},"data-test-id":"back-button",left:!a,paddingX:4,position:"absolute",right:a,top:!0,children:"authDesktop"===e.type&&(0,g.jsx)(l.hU,{accessibilityLabel:t._('Back button', 'storyPin.closeup.back', 'Button label to navigate to previous page'),bgColor:"transparent",icon:"directional-arrow-left",iconColor:"darkGray",onClick:()=>{n({action:"click",item:"back-button"}),e.onNavigateBack()},size:"lg"})})})}var ee=n("170914"),et=n("729674"),en=n("517534"),ei=n("760186"),ea=n("119195"),el=n("764385"),er=n("236256"),es=n("818194"),eo=n("80887"),ed=n("430732"),ec=n("652348");let eu=(0,i.lazy)(()=>n.e("65443").then(n.bind(n,994576))),ep=(0,i.lazy)(()=>Promise.resolve().then(n.bind(n,717798))),em=(0,i.lazy)(()=>n.e("32560").then(n.bind(n,504407))),eg=(0,i.lazy)(()=>Promise.all([n.e("99610"),n.e("96415")]).then(n.bind(n,120524))),eh=(0,i.lazy)(()=>Promise.resolve().then(n.bind(n,916178))),e_={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"32px 32px 0 0"},ey={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"0 0 32px 32px",bottom:0},ef={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",borderRadius:"32px 32px 0 0",paddingTop:"30px",top:0},ex=[5,6,2];function ev({appConfig:e,clientTrackingParams:t,isInFocus:n,isInStream:a=!1,isStreamMuted:o,isStreamPanelOpen:d=!0,pin:u,storyPinData:p,onIdeaPinCloseupCommentClick:m,setStreamIsMuted:h,streamItemIndex:_,togglePanel:y,variant:x,viewType:v=3,viewParameterType:k,onTogglePanel:b}){let P;let S=(0,A.c)(),{peekCloseupEnabled:w,viewportSize:j}=(0,eo.x4)(),I=(0,c.ZP)(),C=(0,B.Z)(),T=(0,G.g)(),F=(0,$.E)(),{setIdeaPinActivePage:L,setIdeaPinDynamicWidth:K}=(0,ed.Ut)(),{activePage:Z}=(0,ed.H8)(),{clearSeekTime:R}=(0,ea.RC)(),{seekTimes:E}=(0,ea.Hx)(),{closeupPaneWidth:D,headerHeight:z,isLandingPage:M,renderStoryPinMediaLayout:V,renderStoryPinPage:Y,renderStoryPinSplitLayout:J,renderStoryPinText:ec,productPins:ev}=S||{},{id:ek,image_signature:eb,story_pin_data_id:eP}=u,eS=E&&E[u.id],ew=!!p?.is_deleted,ej=u.native_creator?.id,{pages:eI=[],metadata:eC={}}=p||{},{canvas_aspect_ratio:eT,version:eF}=eC,eL=eT??f.ap,[eA,eK]=(0,i.useState)(0),eZ=(0,i.useRef)(0),eR=(0,i.useRef)(null),[eE,eD]=(0,i.useState)("closeup"===x&&n),[ez,eM]=(0,i.useState)(375),eB="calc(100% - 32px)",eO=(0,i.useRef)(null),[eV,eH]=(0,i.useState)(!1),[eU,eN]=(0,i.useState)(!1),[eW,e$]=(0,i.useState)(!0);(0,i.useEffect)(()=>{b&&b(eW)},[eW,b]),(0,i.useEffect)(()=>{e$(d)},[d]);let{should_mute:eG=!0,music_attributions:eX=[]}=eI[eA],[eq,eY]=(0,i.useState)(M||eG),eJ=void 0!==h?h:eY,eQ=void 0!==o?o:eq;(0,i.useEffect)(()=>{eG&&eJ(!0)},[eG,eJ]);let e0=eI.filter(e=>!ex.includes(e.layout)),e1=e0.length,e2=e0[eA],e8=k||(0,N.Z)({hasPin:!!u,hasPinRichMetadata:!!u.rich_metadata,hasPinRichMetadataProducts:!!u.rich_metadata?.products,hasPinRichMetadataArticle:!!u.rich_metadata?.article,hasPinRichMetadataRecipe:!!u.rich_metadata?.recipe,hasPinStoryPinData:!!u.story_pin_data}),e3=z+64,{getNormalizedPinImage:e6}=(0,U.Z)({pinKey:{type:"deprecated",data:u},maxWidth:q.RZ}),e7="closeup"===x,e4=()=>{if("undefined"!=typeof window){let e=window.innerWidth-(eW?D:0)-216;if(e7)eM(function({availableWidth:e,pageAspectRatio:t,unavailableHeight:n,windowInnerHeight:i}){let a=i-n,l=Math.min(Math.max(650,Math.min((i-n)*t,e)),1e3);return l/t>=a&&(l=a*t),l}({availableWidth:e,pageAspectRatio:eL,unavailableHeight:e3,windowInnerHeight:window.innerHeight}));else{let{width:e}=e6();eM(e),K(e)}}};(0,er.Z)(()=>(window.addEventListener("resize",e4),e4(),()=>{window.removeEventListener("resize",e4)}));let[e5,e9]=(0,i.useState)(!1),[te,tt]=(0,i.useState)(null),[tn,ti]=(0,i.useState)(!1);(0,i.useEffect)(()=>{!tn&&n&&(C({event_type:7588,view_type:v,view_parameter:e8,component:13801,object_id_str:ek,aux_data:{..."number"==typeof _?{grid_index:_}:{}}}),ti(!0))},[tn,n,C,ek,v,e8,_]);let{checkExperiment:ta}=(0,W.F)(),[tl,tr]=(0,i.useState)(!1),ts=n&&a&&ta("closeup_mweb_remove_fsv_logging");(0,i.useEffect)(()=>{!tl&&n&&a&&!ts&&(C({event_type:9314,view_type:v,view_parameter:e8,component:13801,aux_data:{grid_index:_,pin_id:ek,image_signature:eb,creator_id:ej,story_pin_data_id:eP},clientTrackingParams:t}),tr(!0))},[t,ej,eb,n,a,eP,v,e8,ek,tl,C,_,ts]);let to=(0,i.useCallback)(e=>{let{blocks:t}=eI[e]||{},i=t?.find(e=>3===e.block_type);eO.current&&eO.current instanceof el.B7&&(eO.current.clear(),eO.current=null),!i&&n&&(eO.current=new el.B7(e=>{tt({currentTime:e<1?e:1,duration:1})},()=>{let t="closeup"===x?e:Z;t<e1-1?(eO.current&&eO.current instanceof el.B7&&(eO.current.clear(),eO.current=null),tp(t+1)):(eH(!0),eD(!1))},H.oN))},[n,e1,eI,Z,x]),td=e=>{tt({currentTime:0,duration:1}),to(e)};(0,i.useEffect)(()=>{eZ.current=eA},[eA]),(0,i.useEffect)(()=>{eR.current=eE},[eE]),(0,er.Z)(()=>(td(eA),()=>{eO.current&&eO.current instanceof el.B7&&eR.current&&eO.current.clear()}));let tc=()=>{F&&(F.addBinaryAnnotation("page.current.index",eA,"I16"),F.addBinaryAnnotation("page.count",eI.length,"I16"),F.addBinaryAnnotation("view.type",v,"I32"),F.addBinaryAnnotation("view.parameter",e8,"I32"))},tu=e=>{F&&F.abort("startNewPwt"),T&&(T.abort("startNewPwt"),T.start(),T.addBinaryAnnotation("page.current.index",e,"I16"),T.addBinaryAnnotation("page.count",eI.length,"I16"),T.addBinaryAnnotation("view.type",v,"I32"),T.addBinaryAnnotation("view.parameter",e8,"I32"))};(0,er.Z)(()=>{tc()});let tp=e=>{eE||eD(!0),eV&&eH(!1),td(e),e!==eA&&R(),eK(e),L(e),tu(e)};(0,i.useEffect)(()=>{if(eV&&eH(!1),eO.current&&eS){let e=eO.current;e.pause(),e.remaining=H.oN-eS*es.gJ,tt({currentTime:eS/H.P6,duration:1})}},[eS]),(0,i.useEffect)(()=>{L(Z)},[L,Z]),(0,i.useEffect)(()=>{"related-products"===x&&(eK(Z),tp(Z))},[Z,x]);let tm=()=>eV?13799:0===eA?227:228,tg=()=>{eA<e1-1&&(tp(eA+1),C({event_type:101,view_type:v,view_parameter:e8,component:tm(),element:12261,object_id_str:ek}))},th=()=>{eA===e1-1&&eV?(tp(eA),C({event_type:101,view_type:v,view_parameter:e8,component:tm(),element:12260,object_id_str:ek})):eA>0&&(tp(eA-1),C({event_type:101,view_type:v,view_parameter:e8,component:tm(),element:12260,object_id_str:ek}))},t_=e=>{let{keyCode:t}=e,{srcElement:n}=e,i=n.isContentEditable||n.contentEditable&&"true"===n.contentEditable;37!==t||i?39!==t||i||tg():th()};(0,i.useEffect)(()=>(document.addEventListener("keydown",t_),()=>document.removeEventListener("keydown",t_)),[eA]);let{fontsLoaded:ty,mediaDataReceived:tf}=(0,ei.tq)({hasPin:!!u,pages:eI}),tx=eF?(0,el.n4)(eF,"0.8.0"):null,tv=null!=tx&&tx>=0,tk=t=>{let n=0===t.layout;switch(t.layout){case 0:case 1:return V({activePageIndex:eA,hideText:n,isActive:!0,isCoverPage:n,muteVideos:eQ,onClickThrough:e.onClickThrough,page:t,pageIndex:eA,pageWidth:ez,pinId:ek});case 4:return t.blocks.length>0&&ec({blocks:t.blocks,pageId:`text-${eA}`,page:t,pinId:ek,onClickThrough:e.onClickThrough});case 3:return J({page:t});default:return null}},tb=e=>{e===e1-1&&(eH(!0),eD(!1),L(0)),e===eA&&tg()},tP=e=>{tt({currentTime:e?.currentTime??0,duration:e?.duration??1})},tS=()=>{eN(!0),eD(!1),eO.current&&!eO.current.paused&&eO.current.pause()},tw=e=>eI[e]?tv?Y({activePageIndex:eA,fontsLoaded:ty,customEndCard:!0,isActive:e===eA&&eE,muteVideos:eQ,onChangeMuteVideo:eJ,onEnded:tb,onFlyoutOpen:tS,videoPinProgress:eA===e?te:void 0,onUpdateVideoInfo:tP,ownerId:u.native_creator?.id??"",page:eI[e],pageAspectRatio:eL,pageIndex:e,pageHeight:ez/eL,pageWidth:ez,pinId:u.id,productPins:ev,shouldLogTimeSpent:n,stillLoading:!tf}):tk(e2):null,tj=()=>{eD(!1),eO.current&&eO.current.pause(),C({event_type:9324,view_type:v,view_parameter:e8,component:tm(),object_id_str:ek,aux_data:{story_pin_page_id:eA}})},tI=()=>{if(eD(!0),eO.current){let e=eO.current;eS&&eS>0&&R(),e.resume()}else te||td(eA);C({event_type:9323,view_type:v,view_parameter:e8,component:tm(),object_id_str:ek,aux_data:{story_pin_page_id:eA}})},tC=()=>{eV||(eN(!1),eE?tj():tI())};(0,i.useEffect)(()=>{"closeup"===x&&(!n||eV||eE?!n&&eE&&tj():tI())},[n,x]),(0,i.useEffect)(()=>{"related-products"===x&&tj()},[]);let tT=()=>{tp(0)},tF=()=>{a&&y?y():e$(!0)},{fiftyPercentWidth:tL,fiftyPercentHeight:tA}=(0,s.Re)(64),{maxHeight:tK}=(0,s.Re)(0,32),{fiftyPercentWidth:tZ}=(0,s.Re)();return w&&(P="sm"===j?tA:tK),(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:e7?{top:z,height:`calc(100vh - ${z}px)`,position:"sticky",pointerEvents:"none",minHeight:632,maxHeight:w?P:void 0,zIndex:eW?"auto":3}:{}},display:"flex",left:!0,children:[(0,g.jsxs)(l.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",minWidth:w&&"sm"!==j?tZ:void 0}},display:"flex",flex:"grow",justifyContent:"center",position:"relative",children:[e7&&(0,g.jsx)(l.xu,{bottom:!0,color:"secondary",left:!0,position:"absolute",right:!0,top:!0}),ew?(0,g.jsx)(et.Z,{height:ez/f.ap,rounding:f.yR,width:ez}):(0,g.jsxs)(i.Fragment,{children:[tf&&(0,g.jsx)(l.xu,{height:1,left:!0,marginTop:-1,overflow:"hidden",position:"absolute",top:!0,width:1,children:(()=>{let e=[];for(let t=1;t<=eI.length;t+=1)eA+t<eI.length&&e.push(tw(eA+t));return e})()}),(0,g.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:e7?void 0:`${f.YL}px`}},display:"flex",onMouseLeave:()=>{e9(!1)},onMouseOver:()=>e9(!0),position:"relative",children:(0,g.jsxs)(l.xu,{paddingX:4,children:[(0,g.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...ey,flexDirection:"column-reverse"}},display:"flex",height:128,paddingX:6,position:"absolute",width:eB,zIndex:f.Gf,children:(0,g.jsx)(en.Z,{activePageIndex:eA,handleMute:()=>{eG||eJ(!eQ)},handlePanelChange:()=>{e$(!eW)},handlePause:tj,handlePausePlay:tC,handlePlay:tI,handleVideoScrubbingNewPage:e=>{eV&&eH(!1),td(e),eK(e),L(e),tu(e)},handleWatchAgain:tT,inMilliseconds:!0,isMuted:eQ,isPanelOpen:eW,isPlaying:eE,onPageSelect:e=>tp(e),pageCount:e1,pages:e0,pinId:u.id,progressInfo:te,showEndCard:eV,showVideoControls:e5,viewParameter:e8})}),(0,g.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...eW?ef:{paddingLeft:"26px",bottom:0},marginBottom:eW?void 0:"88px",maxWidth:tL}},"data-test-id":"music-attribution",display:"flex",justifyContent:eW?"center":"start",overflow:"hidden",paddingY:eW?5:void 0,position:"absolute",width:ez,zIndex:f.Gf,children:(0,g.jsx)(r.Z,{handlePause:tj,handlePlay:tI,musicAttributions:eX,shouldMute:eG,showEndCard:eV})}),!eV&&!eW&&(0,g.jsxs)(l.xu,{alignItems:"start",dangerouslySetInlineStyle:{__style:eW?{}:e_},display:"flex",height:128,justifyContent:"between",padding:4,position:"absolute",top:!0,width:eB,zIndex:f.Gf,children:[(0,g.jsxs)(l.kC,{alignItems:"stretch",direction:"row",children:[!eW&&(0,g.jsx)(O.Z,{name:"SafeSuspense_IdeaPinCloseup_IdeaPinSecondarySendButton",children:(0,g.jsx)(X.Z,{children:(0,g.jsx)(eh,{imageSrc:u.image_url??"",pinDescription:u.description??"",pinId:u.id})})}),!eW&&u.is_eligible_for_aggregated_comments&&(0,g.jsx)(O.Z,{name:"SafeSuspense_IdeaPinCloseup_CommentButton",children:(0,g.jsx)(X.Z,{children:(0,g.jsx)(eu,{onCommentClick:()=>{C({event_type:101,view_type:v,view_parameter:e8,component:13801,element:10944,object_id_str:u.id}),tF(),m&&m();let e=document.getElementById(`canonical-card-${u.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}})})}),!eW&&(0,g.jsx)(O.Z,{name:"SafeSuspense_IdeaPinCloseup_ReactionPickerContainer",children:(0,g.jsx)(X.Z,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,g.jsx)(eg,{clientTrackingParams:t,component:13801,iconColor:"white",pinId:u.id,reactionByMe:u.reaction_by_me,showTooltip:!0,viewParameter:e8,viewType:v})})})})]}),!eW&&(0,g.jsx)(O.Z,{name:"SafeSuspense_IdeaPinCloseup_PinSaveButton",children:(0,g.jsx)(X.Z,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,g.jsx)(em,{clientTrackingParams:t,isCloseupPin:!0,onClickCallback:()=>{C({event_type:101,view_type:v,view_parameter:e8,component:13801,element:0,object_id_str:u.id})},pinKey:{type:"deprecated",data:u},size:"lg"})})})})]}),(0,g.jsx)(l.xu,{"data-test-id":"story-pin-closeup-container",position:"relative",children:(0,g.jsx)(l.iP,{accessibilityLabel:eE?I._('Pause', 'storyPin.closeup.pauseButton.accessibilityLabel', 'Button label for pause tap area'):I._('Play', 'storyPin.closeup.playButton.accessibilityLabel', 'Button label for play tap area'),disabled:eV,onTap:tC,rounding:f.yR,children:(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{maxWidth:tL,maxHeight:P}},"data-test-id":"story-pin-closeup-page",height:ez/eL,overflow:"hidden",position:"relative",rounding:f.yR,width:ez,children:[tw(eA),!eV&&!eU&&!eS&&(0,g.jsx)(ee.Z,{playing:eE}),"authDesktop"===e.type&&eV&&u.native_creator&&(0,g.jsx)(O.Z,{name:"IdeaPinCloseup_EndCard",children:(0,g.jsx)(X.Z,{children:(0,g.jsx)(l.xu,{bottom:!0,left:!0,padding:4,position:"absolute",right:!0,rounding:f.yR,top:!0,zIndex:f.s5,children:(0,g.jsx)(ep,{clientTrackingParams:u.trackingParams||u.tracking_params,imageSrc:u.image_url??"",pinDescription:u.description??"",pinId:u.id,watchAgain:tT})})})})]})})})]})})]}),!a&&e7&&(0,g.jsx)(Q,{appConfig:e})]}),eW&&e7&&(0,g.jsx)(l.xu,{flex:"none",height:"100%",position:"relative",width:D,children:"duplo"===e.type&&e.storyPinDetails})]})}function ek(e){let{pin:t,viewType:n=3,viewParameterType:r}=e,[s,o]=(0,i.useState)({isInFocus:!0,viewability:0}),{isInFocus:d,viewability:c}=s,u=r||(0,N.Z)({hasPin:!!t,hasPinRichMetadata:!!t.rich_metadata,hasPinRichMetadataProducts:!!t.rich_metadata?.products,hasPinRichMetadataArticle:!!t.rich_metadata?.article,hasPinRichMetadataRecipe:!!t.rich_metadata?.recipe,hasPinStoryPinData:!!t.story_pin_data}),p=(0,a.TH)(),m=e.clientTrackingParams||(0,ec.Z)((p?.state||{}).trackingParams,t.trackingParams||t.tracking_params);return(0,g.jsx)(G.T,{children:(0,g.jsx)(V.Z,{onVisibilityChange:e=>{if(e&&e.length>0){let{intersectionRatio:t}=e[0];o({isInFocus:t>.5,viewability:t})}},options:{threshold:[0,.5,.8,.99,1]},children:i=>(0,g.jsx)(l.xu,{ref:i,children:(0,g.jsx)(M,{clientTrackingParams:m,closeupStoryPinViewability:c,pin:t,viewParameter:u,viewType:n,children:d?(0,g.jsx)(K.Z,{clientTrackingParams:m,component:13801,objectId:t.id,view:n,viewParameter:u,children:(0,g.jsx)(ev,{...e,isInFocus:d})}):(0,g.jsx)(ev,{...e,isInFocus:d})})})})})}},170914:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(667294),a=n(883119),l=n(342117),r=n(482678),s=n(551603),o=n(785893);function d({playing:e,zIndexValue:t}){return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(l.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,o.jsx)(a.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:r.yR,top:!0,zIndex:t?new a.Ry(t):s.lt,children:!e&&(0,o.jsx)(a.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},729674:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(883119),a=n(708130),l=n(785893);function r({height:e,isDenseView:t,rounding:n,width:r,color:s}){let o=(0,a.ZP)();return(0,l.jsx)(i.xu,{alignItems:"center",color:s||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:n,width:r,children:(0,l.jsxs)(i.kC,{alignItems:"center",direction:"column",children:[(0,l.jsx)(i.xu,{paddingY:t?2:4,children:(0,l.jsx)(i.JO,{accessibilityLabel:o._('Pin not available', 'story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:"default",icon:"alert",size:20})}),(0,l.jsx)(i.xv,{weight:"bold",children:o._('Unavailable', 'story-pin.Closeup.UnavailableIdeaPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),!t&&(0,l.jsx)(i.xu,{paddingY:1,children:(0,l.jsx)(i.xv,{children:o._('Removed by the creator', 'story-pin.Closeup.UnavailableIdeaPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})}},517534:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(667294),a=n(883119),l=n(708130),r=n(870912),s=n(561162),o=n(3879),d=n(172660),c=n(482678),u=n(119195),p=n(202732),m=n(226978),g=n(55077),h=n(236256),_=n(818194),y=n(68938),f=n(80887),x=n(785893);let v=()=>{},k=({accessibilityLabel:e,dataTestId:t,disable:n,handleTap:i,icon:l})=>(0,x.jsx)(a.xu,{"data-test-id":t,opacity:n?.5:void 0,children:(0,x.jsx)(a.iP,{disabled:n,onTap:i,children:(0,x.jsx)(a.JO,{accessibilityLabel:e,color:"light",icon:l,size:16})})});function b({activePageIndex:e,handlePanelChange:t,handlePlay:n,handlePause:b,handlePausePlay:P,handleMute:S,handleVideoScrubbingNewPage:w,handleWatchAgain:j,inMilliseconds:I,isPlaying:C,isMuted:T,isPanelOpen:F,pages:L,pageCount:A,pinId:K="",progressInfo:Z,showEndCard:R,showVideoControls:E=!1,viewParameter:D,isStoryPin:z=!0,captionsUrl:M=""}){let B=(0,l.ZP)(),{currentTime:O}=Z||{},{seekTimes:V}=(0,u.Hx)(),{closeupWithinMasonryEnabled:H}=(0,f.x4)(),U=(0,o.B)(),N=(0,y.r)(),{checkExperiment:W}=(0,s.F)(),$=(0,g.HG)(),{isAuthenticated:G}=U,{captionsEnabled:X,setCaptionsEnabled:q}=N,Y=(0,m.Z)(),J=L[e],{should_mute:Q}=J||T,ee=Object.keys(V).includes(K)&&V[K]?V[K]:O,et=(0,i.useMemo)(()=>L.map(e=>{let t=e.blocks?.find(e=>3===e.block_type),n=t?.video?.video_list?.V_HLSV3_MOBILE?.duration||t?.video?.video_list?.V_720P?.duration;return n?{duration:n,isVideo:!0}:{duration:r.oN,isVideo:!1}}),[L]),en=[{duration:Z?.duration||0,isVideo:!0}],ei=z?et:en,ea=(J&&J.blocks?.[0]||{}).video?.video_list?.V_HLSV3_MOBILE?.captions_urls,el=!1;(ea&&0!==Object.keys(ea).length||M)&&(el=!0);let er=T&&el&&W(G?"auth_default_captions_on":"unauth_default_captions_on").anyEnabled;(0,h.Z)(()=>{er&&q(!0)});let es=(0,i.useMemo)(()=>ei.reduce((e,t)=>e+(t.duration||0),0)/(z?_.gJ:1),[ei,z]),eo=(0,i.useMemo)(()=>ei.filter((t,n)=>n<e).reduce((e,t)=>e+(t.duration||0),0)/_.gJ,[ei,e]),ed=ei.length>0&&ei[e]?.isVideo?O??0:(O??0)*5+(eo??0),ec=B._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),eu=B._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button');return(0,x.jsxs)(a.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,x.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:E||!C?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,x.jsxs)(a.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,x.jsx)(k,{accessibilityLabel:C?B._('Pause', 'closeup.IdeaPinVideo.Pause', 'Pause button on Idea Pin video'):B._('Play', 'closeup.IdeaPinVideo.Play', 'Play button on Idea Pin video'),dataTestId:`story-pin-closeup-${C?"pause":"play"}`,handleTap:R&&j?j:P,icon:C?"pause":"play"}),Z&&(0,x.jsxs)(a.xu,{"data-test-id":"time-display",children:[(0,x.jsx)(a.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`${(0,c.Lc)(ed)}`})," ",(0,x.jsx)(a.xu,{display:"inlineBlock",opacity:.6,children:(0,x.jsx)(a.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:`/ ${(0,c.Lc)(es)}`})})]})]}),(0,x.jsxs)(a.kC,{direction:"row",gap:5,children:[el&&(0,x.jsx)(k,{accessibilityLabel:X?eu:ec,dataTestId:`closed-captions-button-${X?"disable":"enable"}`,handleTap:()=>{let e=$?"desktop_pin_page":"mweb_pin_page";X?(0,p.My)(`${e}.closed_captions_button.toggle_off`):(0,p.My)(`${e}.closed_captions_button.toggle_on`),Y({action:"click",item:"closed-captions-button"}),N.setCaptionsEnabled(!X)},icon:X?"captions":"captions-outline"}),(0,x.jsx)(k,{accessibilityLabel:T?B._('Unmute', 'closeup.IdeaPinVideo.unmute', 'Unmute button on Idea Pin video'):B._('Mute', 'closeup.IdeaPinVideo.mute', 'Mute button on Idea Pin video'),dataTestId:`story-pin-closeup-${T?"unmute":"mute"}`,disable:Q,handleTap:S,icon:T?"mute":"sound"}),t&&!H&&(0,x.jsx)(k,{accessibilityLabel:F?B._('Maximize', 'closeup.IdeaPinVideo.maximize', 'Maximize button on Idea Pin video'):B._('Minimize', 'closeup.IdeaPinVideo.minimize', 'Minimize button on Idea Pin video'),dataTestId:`story-pin-closeup-${F?"maximize":"minimize"}`,handleTap:t||v,icon:F?"maximize":"minimize"})]})]}),(0,x.jsx)(d.ZP,{activePageCurrentTime:ee,activePageIndex:e,duration:es,handlePause:b,handlePlay:n,handleVideoScrubbingNewPage:w,inMilliseconds:I,isPlaying:C,pageCount:A,pageDurations:ei,pinId:K,progressInfo:Z,shouldShowPlayhead:!0,showEndCard:R,showVideoControls:E,videoDurations:ei,viewParameter:D})]})}},172660:function(e,t,n){n.d(t,{$E:()=>g,$:()=>h,ZP:()=>x});var i=n("667294"),a=n("883119"),l=n("674320"),r=n("708130"),s=n("870912"),o=n("3879"),d=n("785893");function c({pillHeight:e,scrubberWidth:t}){return(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:g}},display:"flex",flex:"grow",height:e,overflow:"hidden",rounding:"pill",children:(0,d.jsx)(a.xu,{color:h,dangerouslySetInlineStyle:{__style:{width:t}},"data-test-id":"video-progress-bar",height:"100%",rounding:"pill"})})}var u=n("119195"),p=n("55077"),m=n("818194");let g="rgba(255,255,255,0.24)",h="light",_=()=>{},y=({children:e,setHoveringChange:t,handleMouseDown:n,handleMouseLeave:i,handleTouchStart:l,playhead:s,isPlaying:o,showVideoControls:c})=>{let u=(0,r.ZP)(),m=!(0,p.HG)();return(0,d.jsx)(a.iP,{children:(0,d.jsx)(a.xu,{ref:s,alignItems:"center","aria-label":u._('Video scrubber progress bar', 'ideaPin.closeupvideo.videoScrubberLabel', 'Accessibility label for video scrubber progress bar on video idea pins.'),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:m?"center":"start",marginBottom:m?0:6,minHeight:"8px",onFocus:t(!0),onMouseDown:n,onMouseLeave:i,onMouseOver:t(!0),onTouchEnd:e=>e.preventDefault(),onTouchStart:l,opacity:c||!o?1:0,paddingY:m?6:0,position:"relative",role:"progressbar",width:"100%",children:e})})},f=({isRTL:e,isSeeking:t,scrubberWidth:n})=>(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:e?{right:n}:{left:n}},"data-test-id":"video-progress-bar-playhead",position:"relative",children:(0,d.jsx)(a.xu,{color:h,height:4,position:"absolute",rounding:"pill",children:(0,d.jsx)(a.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:t?-8:-6}},height:t?16:12,marginStart:-2,rounding:"circle",width:t?16:12})})});function x({activePageIndex:e,activePageCurrentTime:t,pageCount:n,progressInfo:r,showEndCard:g,duration:x=0,pageDurations:v=[],handlePlay:k=_,handlePause:b=_,handleVideoScrubbingNewPage:P=_,inMilliseconds:S,videoDurations:w=[],viewParameter:j,isInactiveStreamPin:I=!1,isPlaying:C=!1,setVideoProgress:T,shouldShowPlayhead:F=!1,showVideoControls:L=!0,pinId:A=""}){let K=!(0,p.HG)(),Z=(0,i.useRef)(null),{isAuthenticated:R,isRTL:E}=(0,o.B)(),[D,z]=(0,i.useState)(!1),[M,B]=(0,i.useState)(C),[O,V]=(0,i.useState)(),H=(0,l.Z)(),[U,N]=(0,i.useState)(!1),{clearSeekTime:W,updateSeekTime:$}=(0,u.RC)(),G=(0,i.useCallback)((t,i)=>{if(!I&&i<=n){if(i!==e&&P(i),T){let{isVideo:e}=w[i];T({currentTime:t/1e3,duration:e?r?.duration??1:r?.duration??5,pinId:A})}$(t/1e3,A)}H({event_type:101,view_type:3,view_parameter:j,component:14302})},[e,P,I,H,n,A,r?.duration,T,$,w,j]),X=v.map(e=>`${(e.duration||0)/x/10}%`),q=(0,i.useMemo)(()=>{let e=0;return v.map(({duration:t})=>{let n=t+e,i={min:e,max:n};return e=n,i})},[v]),Y=D?"0 1.2px":"0 1px",J=e=>()=>z(e),Q=(0,i.useCallback)(e=>{if(Z.current){let{left:t=0,right:n=0,width:i=0}=Z.current.getBoundingClientRect(),a=(E?Math.max(0,Math.min((n-e)/i,1)):Math.max(0,Math.min((e-t)/i,1)))*x*1e3,l=q.findIndex(e=>a>=e.min&&a<=e.max),r=-1===l?0:l;G(a-q[r].min,r)}},[x,G,q,E]),ee=(0,i.useCallback)(()=>{U||B(C||g),N(!0)},[U,B,C,g]),et=(0,i.useCallback)(e=>{ee(),C&&b(),Q(e.pageX)},[ee,C,b,Q]),en=(0,i.useCallback)(e=>{U&&Q(e.pageX)},[Q,U]),ei=(0,i.useCallback)(e=>{if(U){e.preventDefault();let t=Array.from(e.changedTouches).find(e=>e.identifier===O);t&&Q(t.pageX)}},[U,Q,O]),ea=(0,i.useCallback)(()=>{J(!1),V(void 0),N(!1),R||W(),M&&k()},[W,k,R,M]),el=(0,i.useCallback)(e=>{Array.from(e.changedTouches).find(e=>e.identifier===O)&&(J(!1),V(void 0),N(!1),W()),M&&k()},[W,k,M,O]);(0,i.useEffect)(()=>(U&&!I&&(window.addEventListener("mousemove",en),window.addEventListener("mouseup",ea),window.addEventListener("touchmove",ei),window.addEventListener("touchend",el)),()=>{window.removeEventListener("mousemove",en),window.removeEventListener("mouseup",ea),window.removeEventListener("touchmove",ei),window.removeEventListener("touchend",el)}),[en,ea,el,ei,I,U,Q,M,O]);let er=(t,n)=>t<e||g?(0,d.jsx)(a.xu,{color:h,height:4,rounding:"pill"}):e===t&&r?(0,d.jsxs)(a.kC,{alignItems:"center",flex:"grow",children:[F&&(L||D||U||K)&&(0,d.jsx)(f,{isRTL:E,isSeeking:U,scrubberWidth:n}),(0,d.jsx)(c,{pillHeight:4,scrubberWidth:n})]}):(0,d.jsx)(a.xu,{color:h,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"});return(0,d.jsx)(y,{handleMouseDown:et,handleMouseLeave:()=>{J(!1)},handleTouchStart:e=>{ee(),J(!0);let t=e.changedTouches[0];V(t.identifier),C&&b(),Q(t.pageX)},isPlaying:C,playhead:Z,setHoveringChange:J,showVideoControls:L,children:Array(n).fill(void 0).map((e,i)=>{let l=r?.currentTime??0,o=r?.duration??s.P6,c=w[i],u=`${c?.isVideo&&S?Math.floor(1e4*(t??l)/(c.duration/m.gJ))/100:l/o*100}%`;return(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{margin:Y}},flex:"grow",width:X.length===n?X[i]:"auto",children:(0,d.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:er(i,u)})},`${A}-${i}`)})})}},4141:function(e,t,n){n.d(t,{c:function(){return s},o:function(){return r}});var i=n(667294),a=n(785893);let l=(0,i.createContext)(null);function r({children:e,closeupPaneWidth:t,headerHeight:n,isLandingPage:r,loadFonts:s,renderStoryPinMediaLayout:o,renderStoryPinSplitLayout:d,renderStoryPinText:c,renderStoryPinPage:u,productPins:p}){let m=(0,i.useMemo)(()=>({closeupPaneWidth:t,headerHeight:n,isLandingPage:r,loadFonts:s,renderStoryPinMediaLayout:o,renderStoryPinSplitLayout:d,renderStoryPinText:c,renderStoryPinPage:u,productPins:p}),[t,n,r,s,o,d,c,u,p]);return(0,a.jsx)(l.Provider,{value:m,children:e})}let s=()=>(0,i.useContext)(l)},760186:function(e,t,n){n.d(t,{BN:function(){return c},RK:function(){return d},d3:function(){return p},tq:function(){return m},xm:function(){return u}});var i=n(667294),a=n(204728),l=n(482678),r=n(764385),s=n(236256);let o=(e,t)=>{let n=(0,l.pE)(e,t);return`${n.y}px ${n.x}px`},d=({alignment:e,verticalAlignment:t})=>{let n={alignItems:"flex-start",display:"flex",height:"100%",justifyContent:"start",textAlign:"left",width:"100%"};return 1===t?n.alignItems="center":2===t&&(n.alignItems="flex-end"),1===e&&(n.justifyContent="center",n.textAlign="center"),n},c=({fontSize:e,hexColor:t,highlightColor:n,letterSpacing:i,lineHeight:a,name:l})=>({fontSize:e,letterSpacing:i,color:t,fontFamily:l,margin:0,maxHeight:"100%",textShadow:!n&&t&&"#ffffff"===t.toLowerCase()?"0px 1px 4px rgba(0, 0, 0, 0.2)":void 0,wordBreak:"break-word",...n?{backgroundColor:n,borderRadius:e/5,padding:o(e,a)}:{}}),u=({fontSize:e,hasText:t,highlightColor:n,lineHeight:i})=>({...n?{backgroundColor:t?n:void 0,borderRadius:e/5,padding:o(e,i)}:{}}),p=({letterSpacing:e,lineHeight:t,name:n,url:i})=>({fontFamily:n,fontGroup:"",fontOverrides:{letterSpacing:e,lineHeight:t,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:i}]}),m=({hasPin:e,pages:t,limitToSingleFont:n})=>{let[o,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(()=>!!e&&(0,r.X7)(t)),m=()=>{let e=t.reduce((e,t)=>{let i=t?.blocks?.filter(e=>[l.h8.PARAGRAPH,l.h8.HEADING].includes(e.type))||[];return n&&i.length>1&&(i=[i[0]]),i.forEach(t=>{let n=t.style?.font||l.Cc.font,{name:i=""}=n;e[i]||(e[i]=n)}),e},{});if(Object.keys(e).length>0){let t=Object.keys(e).map(t=>{let n=e[t];return p({letterSpacing:n.letter_spacing,lineHeight:n.line_height,name:n.name,url:n.url})});(0,a.Z)(t),d(!0)}};return(0,s.Z)(()=>{m()}),(0,s.Z)(()=>{c||m()}),(0,i.useEffect)(()=>{c||u((0,r.X7)(t))},[c,t]),{fontsLoaded:o,mediaDataReceived:c}}},311963:function(e,t,n){n.d(t,{Z:function(){return i}});function i({currentTime:e,endTime:t,startTime:n}){return"number"!=typeof n||"number"!=typeof t||!(n>=0)||!(t>0)||!(n<t)||n<=e&&e<=t}},764385:function(e,t,n){n.d(t,{B7:function(){return r},X7:function(){return s},n4:function(){return l}});var i=n(482678);function a(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let l=(e,t)=>{let n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e?.match(n)||!t?.match(n))return null;let i=e?.split("."),a=t?.split("."),l=Math.max((i??"").length,(a??"").length);for(let e=0;e<l;e+=1){let t=e<(i?.length??0)?parseInt(i?.[e]??"",10):0,n=e<(a?.length??0)?parseInt(a?.[e]??"",10):0;if(t<n)return -1;if(t>n)return 1}return 0};class r{constructor(e,t,n){if(a(this,"start",Date.now()),a(this,"paused",!1),this.onProgress=e,this.onComplete=t,this.duration=n,this.remaining=n,"undefined"==typeof window)return;this.intervalId=window.setInterval(()=>{let e=this.paused?this.duration-this.remaining:this.duration-this.remaining+(Date.now()-this.start);this.onProgress(e/this.duration)},500),this.resume()}currentTime(){return this.duration-this.remaining}pause(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;let e=this.duration-this.remaining;this.onProgress(e/this.duration)}resume(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}clear(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}let s=e=>e.some(e=>(e?.blocks??[]).some(e=>e.type===i.h8.IMAGE&&!!e.image||e.type===i.h8.VIDEO&&(!!e.video||!!e.video_signature)))},557108:function(e,t,n){function i(e,t){let n=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>|<!--[\s\S]*/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,(e,t)=>n.indexOf("<"+t.toLowerCase()+">")>-1?e:"")}n.d(t,{Z:function(){return a},o:function(){return i}});let a=e=>e.replace(/(<([^>]+)>)/gi,"")},991342:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(667294),a=n(883119),l=n(708130),r=n(80887),s=n(785893);function o({content:e,header:t,headerWidth:n,inCommentFeedRedesignExp:o,inMwebPdpCommentsExp:d,isCollapsible:c=!0,isCommentSectionOpen:u,isContentLoaded:p=!0,isOpenByDefault:m,maxHeight:g,onToggle:h,onOpen:_,previewContent:y,previewContentHeight:f,shouldToggleOnBodyTap:x,arrowDirection:v}){let[k,b]=(0,i.useState)(!1),[P,S]=(0,i.useState)(0),w=(0,i.useRef)(null),j=(0,l.ZP)(),I=(0,r.x4)();(0,i.useEffect)(()=>{(u||m&&p)&&b(!0)},[u,m,p]),(0,i.useLayoutEffect)(()=>{if(void 0!==g)return;let e=()=>{if(w.current){let e=w.current.getBoundingClientRect().height;e>P&&S(Math.ceil(e))}},t=new MutationObserver(e);return w.current&&t.observe(w.current,{childList:!0,subtree:!0}),requestAnimationFrame(e),()=>{t.disconnect()}},[P,g]);let C=()=>{c&&(b(!k),_&&!k&&_(),h&&h(!k))},T=v||"arrow-forward";return(0,s.jsx)(a.iP,{disabled:x&&u,onTap:x?C:void 0,children:(0,s.jsxs)(a.kC,{direction:"column",gap:o?3:0,children:[(0,s.jsx)(a.xu,{paddingY:o?0:y?1:5,width:n,children:(0,s.jsx)(a.iP,{onTap:C,children:(0,s.jsxs)(a.kC,{alignItems:"center",justifyContent:"between",children:[I?(0,s.jsx)(a.X6,{size:"400",children:t}):(0,s.jsx)(a.xv,{size:"300",weight:"bold",children:t}),c&&(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transition:"transform 0.3s ease-in-out",transform:k?`rotate(${"arrow-down"===T?"180deg":"-90deg"})`:""}},marginEnd:d?0:4,children:(0,s.jsx)(a.iP,{onTap:C,children:d?(0,s.jsx)(a.kC,{justifyContent:"center",width:48,children:(0,s.jsx)(a.JO,{accessibilityLabel:j._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),color:"default",icon:T,size:20})}):(0,s.jsx)(a.JO,{accessibilityLabel:j._('Expand icon', 'accordion.actionButton', 'accessibility label on accordion'),color:"default",icon:T,size:I||o?16:20})})})]})})}),(0,s.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{transition:`all 0.3s ease-in-out, visibility 0s linear ${k?"0s":"0.3s"}`,visibility:k||y?"visible":"hidden"}},"data-test-id":"accordion-panel",height:!k&&y?f:k?g||P:0,marginEnd:y?7:0,opacity:k||y?1:0,overflow:void 0===g?"hidden":"auto",children:[(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{display:k?"none":"block"}},children:y}),(0,s.jsx)(a.xu,{ref:w,dangerouslySetInlineStyle:{__style:{visibility:k?"visible":"hidden",transition:`all 0.3s ease-in-out, visibility 0s linear ${k||y?"0s":"0.3s"}`}},opacity:k||y?1:0,children:e})]})]})})}},348953:function(e,t,n){n.d(t,{Z:function(){return _},m:function(){return m}});var i=n(667294),a=n(883119),l=n(708130),r=n(342117),s=n(3879),o=n(80887),d=n(417573),c=n(580705),u=n(990833),p=n(785893);let m=4,g=`
@keyframes showShadow {
  0% {
    box-shadow: none;
  }

  100% {
    background-color: rgba(255, 255, 255, 0.97);
    box-shadow: 0 1px 20px 0 rgba(0, 0, 0, 0.1);
  }
}

@keyframes hideShadow {
  0% {
    background-color: rgba(255, 255, 255, 0.97);
    box-shadow: 0 1px 20px 0 rgba(0, 0, 0, 0.1);
  }

  100% {
    box-shadow: none;
  }
}
`,h=({deepLinkBackGoesToBoard:e,isNewOrRes:t,onClick:n,showLabel:r=!1,trafficSource:o,showShadow:d,size:c="lg"})=>{let u=(0,l.ZP)(),{isRTL:m}=(0,s.B)(),g=()=>(0,p.jsx)(a.iP,{onTap:n,rounding:"pill",children:(0,p.jsx)(a.xu,{left:!0,maxWidth:90,padding:2,children:(0,p.jsx)(a.X6,{align:"center",size:"400",children:u._('For you', 'closeup.backButton.label', 'Close/back button label for homefeed')})})},"buttonBack"),h=r&&("feed_home"===o||"deep_linking"===o&&!e)&&t;return(0,p.jsxs)(i.Fragment,{children:[h&&m?(0,p.jsx)(g,{}):null,(0,p.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{animation:d?"showShadow 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards":"hideShadow 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards"}},rounding:"circle",children:(0,p.jsx)(a.hU,{accessibilityLabel:u._('Back', 'backButton.accessibilityLabel', 'Accessibility label for the button to navigate back to the previous page'),bgColor:"white",dataTestId:"back-icon-button",icon:"directional-arrow-left",iconColor:"darkGray",onClick:n,size:c})},"back-button-icon"),h&&!m?(0,p.jsx)(g,{}):null]})};function _({deepLinkBackGoesToBoard:e,handleScroll:t,isNewOrRes:n,marginTop:l,onClick:_,showLabel:y=!1,trafficSource:f,showShadow:x}){let{closeupWithinMasonryEnabled:v,isCloseupRelatedPinsAboveTheFoldEnabled:k}=(0,o.x4)(),{isRTL:b}=(0,s.B)(),P=(0,u.Z)();k&&(P=v?0:-12);let S=b?{right:0}:{left:P};(0,i.useEffect)(()=>t?(window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)):()=>{},[]);let w=l||0===l?4*l:4*m;return k&&(w=0),k?(0,p.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:w,...S}},"data-test-id":"back-button",display:"flex",paddingX:4,position:k?"relative":"fixed",children:(0,p.jsx)(h,{deepLinkBackGoesToBoard:e,isNewOrRes:n,marginTop:l,onClick:_,showLabel:y,showShadow:x,trafficSource:f})}):(0,p.jsxs)(c.Z,{position:"fixed",style:{zIndex:d.Cq,width:"60px",maxWidth:"265px"},children:[(0,p.jsx)(r.Z,{unsafeCSS:g}),(0,p.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:w,...S}},"data-test-id":"back-button",display:"flex",paddingX:4,position:"fixed",children:(0,p.jsx)(h,{deepLinkBackGoesToBoard:e,isNewOrRes:n,marginTop:l,onClick:_,showLabel:y,showShadow:x,trafficSource:f})})]})}},554846:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(667294),a=n(883119),l=n(508993),r=n(785893);function s(e){return null!=e}function o({additionalPadding:e,color:t="darkGray",inline:n,items:o}){let d=e?(0,r.jsx)("span",{style:{padding:`0 ${4*e}px`},children:(0,r.jsx)(l.Z,{color:t})}):(0,r.jsx)(l.Z,{color:t}),c=o.filter(s).reduce((e,t,n)=>[...e,0!==n?d:null,t],[]).filter(s).map((e,t)=>(0,r.jsx)(i.Fragment,{children:e},t));return 0===c.length?null:n?(0,r.jsx)(a.xu,{children:c}):(0,r.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:c})}},270187:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(667294),a=n(296327);function l(e){let[t,n]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async function(){n(await (0,a.Z)(e))})()},[e]),t}},40422:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(667294),a=n(836855),l=n(45389);let r=(e="throttle")=>{let[t,n]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let t="throttle"===e?(0,l.Z)(()=>n(window.scrollY),10):(0,a.Z)(()=>n(window.scrollY),10);return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[e]),t}},379774:function(e,t,n){n.d(t,{Z:function(){return p},i:function(){return m}});var i=n(667294),a=n(883119),l=n(785893);let r=new Map,s=null,o=e=>{e.forEach(e=>{let t=r.get(e.target);t&&t(e)})},d=e=>{s.unobserve(e),r.delete(e)},c=(e,t="-64px 0px 0px 0px",n)=>{let i={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};s=s||new window.IntersectionObserver(o,i),r.set(e,n),s.observe(e)},u=e=>r.has(e);function p({onVisibilityChanged:e,trackFullVisible:t,rootMargin:n}){let a=(0,i.useRef)(null),l=!1,s=t=>{(l=t.intersectionRatio>0||t.isIntersecting)&&e(!0)},o=()=>{a.current instanceof HTMLElement&&u(a.current)&&l&&(e(!1),l=!1)},p=(0,i.useCallback)(e=>{a.current instanceof HTMLElement&&c(a.current,e,e=>{if(!r.has(a.current))return;let n=t?e.intersectionRatio>=1:e.intersectionRatio>=.5,i=t?0===e.intersectionRatio:!n;!l&&n?s(e):l&&i&&o()})},[a.current]);return(0,i.useEffect)(()=>(p(n),()=>{a.current instanceof HTMLElement&&(o(),d(a.current))}),[p]),a}let m=({onVisibilityChanged:e,children:t,...n})=>{let i=p({onVisibilityChanged:e,...n});return(0,l.jsx)(a.xu,{ref:i,children:t})}},952246:function(e,t,n){n.d(t,{Z:function(){return i}});function i(e,t){let{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,a={...n,...i};return a[e]&&a[e].currentTime}},207706:function(e,t,n){n.d(t,{Q6:function(){return a},ZP:function(){return r},t2:function(){return l}});let i=()=>!window?.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x",a=()=>{let e;let t="undefined"!=typeof window?window.navigator?.connection?.effectiveType:void 0,n=i();return t?"4g"===t?e="40-80":(n="1x",e="0-1"):e="unknown",{downloadSpeedGroup:e,screenDimension:n}};function l({vEXP3:e,vEXP4:t,vEXP5:n,vEXP6:i,vEXP7:l,v720P:r}){let{downloadSpeedGroup:s,screenDimension:o}=a(),d={"1x":e,"2x":n},c={"1x":l,"2x":l};return({unknown:d,"0-1":d,"1-5":{"1x":t,"2x":n},"5-10":{"1x":n,"2x":n},"10-20":{"1x":i,"2x":i},"20-40":c,"40-80":c,"80_or_above":c})[s][o]||r||void 0}function r(e){let{vHLSV3MOBILE:t,...n}=e,i=l(n),a=t||void 0;return i?{hlsv3:a,mp4:i}:{hlsv3:a}}},618704:function(e,t,n){n.d(t,{Z:function(){return i}});function i(e,t){let{organicVideosAutoplaying:n,promotedVideosAutoplaying:i}=t,a={...n,...i};return!!a[e]&&!a[e].paused}},843075:function(e,t,n){n.d(t,{Z:function(){return i}});function i({cropArea:e,scaledWidth:t,scaledHeight:n}){let i=e.h||0;return{h:Math.floor(i*n),w:Math.floor((e.w||0)*t),x:Math.floor((e.x||0)*t),y:Math.floor((e.y||0)*n)}}},866652:function(e,t,n){n.d(t,{Z:function(){return i}});function i({cropArea:e,cropSource:t,requestParams:n,searchQuery:i,surfaceType:a,title:l,trafficSource:r}){let s=[];if(e){let{x:t,y:n,w:i,h:a}=e;t>=0&&n>=0&&i>=0&&a>=0&&s.push(`x=${t}`,`y=${n}`,`w=${i}`,`h=${a}`)}return t&&s.push(`cropSource=${t}`),a&&s.push(`surfaceType=${a}`),l&&s.push(`full_feed_title=${encodeURIComponent(l)}`),i&&s.push(`q=${i}`),r&&"unknown"!==r&&s.push(`rs=${r}`),n&&s.push(`requestParams=${encodeURIComponent(n)}`),s.length?`?${s.join("&")}`:""}},479830:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(866652);function a({cropArea:e,cropSource:t,isProductPage:n,pinId:a,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:d}){let c=(0,i.Z)({cropArea:e,cropSource:t,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:d}),u="";return n&&(u="products/"),`/pin/${a}/visual-search/${u}${c}`}},240091:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(561162),a=n(55077);function l(){let{checkExperiment:e}=(0,i.F)();return"desktop"===(0,a.ZP)()?e("dweb_pdm_shopping_module_gql").anyEnabled:e("mweb_shopping_module_gql").anyEnabled}},23114:function(e,t,n){n.d(t,{Z:()=>w});var i,a=n("667294");n("167912");var l=n("883119"),r=n("962520"),s=n("561162"),o=n("55077");let d={employees:100,enabled_100:100,enabled_200:200,enabled_300:300,enabled_500:500};var c=n("199342"),u=n("219300"),p=n("131548"),m=n("708130"),g=n("522282"),h=n("537225"),_=n("657204"),y=n("959474"),f=n("339274"),x=n("458410"),v=n("789652"),k=n("435443"),b=n("320288"),P=n("785893");let S=void 0!==i?i:i=n(701645);function w({sizing:e="default",children:t,collageChipId:n,componentType:i,contextLogData:w,elementType:j,disableA11yLabel:I,isEggsUi:C,pinKey:T,derivedSaveButtonOptionsSavedInfo:F,productTagParentPinId:L,viewParameter:A,viewType:K}){let Z=(0,m.ZP)(),R=(0,p.Z)(S,T),{logContextEvent:E}=(0,u.v)(),D=(0,f.E)(),{checkExperiment:z}=(0,s.F)(),{isAuth:M}=(0,y.Z)(),B=(0,a.useRef)(null),{preloadQuery:O}=(0,k.Us)(),V=z("web_easy_gift_guide_saving",{dangerouslySkipActivation:!0}).anyEnabled,{isGraphQLEnabledInGeneral:H}=(0,x.nF)(),U=z("closeup_dweb_preload_closeup_query_before_navigation").anyEnabled,N=D.contextLogData?.story_type==="product_tagged_shopping_module_upsell",{isCloseupRelatedPinsAboveTheFoldEnabled:W}=(0,r.Z)(M),$=M&&z("closeup_dweb_remove_magnifying_glass").anyEnabled,{isPrefetchImageOnHoverEnabled:G,prefetchAfterMs:X,prefetchOnMouseDown:q}=function(){let e=(0,o.HG)(),{checkExperiment:t}=(0,s.F)(),n=t("closeup_dweb_prefetch_image_on_hover");return{isPrefetchImageOnHoverEnabled:e&&n.anyEnabled,prefetchAfterMs:d[n.group]||null,prefetchOnMouseDown:"enabled_mouse_down"===n.group}}(),{carouselData:Y,entityId:J}=R,Q=!!R.promotedIsLeadAd,ee=(0,a.useMemo)(()=>R?.imageSpec_564x?.url||R?.imageSpec_736x?.url||R?.imageSpec_orig?.url||R?.imageSpec_474x?.url||R?.imageSpec_236x?.url,[R]),et={},en=`/pin/${n||J}/`,ei=(0,c.Xx)();if(ei?.variantUrl&&(en=`/pin/${ei.variantUrl}/`),Y){let{carouselSlots:e,entityId:t}=Y,n=Y.index??0;en=`/pin/${J}/`,et={carousel_slot_id:e?.[n]&&e[n].entityId,carousel_data_id:t,carousel_slot_index:n}}let ea=(0,_.Z)(R);et={...et,...ea({default:w?.commerce_data})};let el=()=>{let e={};if(Q)E({event_type:8948,view_type:K||D.viewType,view_parameter:A||D.viewParameter,component:null,object_id_str:R.entityId,clientTrackingParams:R?.trackingParams,aux_data:{closeup_navigation_type:"click",lead_form_id:R.promotedLeadForm?.leadFormId,is_lead_ad:1}}),E({event_type:12,view_type:K||D.viewType,view_parameter:A||D.viewParameter,component:null,object_id_str:R.entityId,clientTrackingParams:R?.trackingParams,aux_data:{lead_form_id:R.promotedLeadForm?.leadFormId,is_lead_ad:1,...ea()}});else{let t={...w,...ea({default:w?.commerce_data})};E({event_type:101,component:i||D.componentType,element:j,object_id_str:J,clientTrackingParams:R?.trackingParams,view_type:K||D.viewType,view_parameter:A||D.viewParameter,aux_data:t}),N&&(e={storyPinProductEventData:{productPinIdStr:J,pinIdStr:L}}),E({aux_data:{closeup_navigation_type:"click",...t},component:i||D.componentType,element:j,event_data:e,event_type:8948,clientTrackingParams:R?.trackingParams,object_id_str:J,view_type:K||D.viewType,view_parameter:A||D.viewParameter})}G&&(q?(0,b.nP)("web.closeup.prefetched_image_on_hover.on_mouse_down.clicked"):(0,b.nP)(`web.closeup.prefetched_image_on_hover.${X}_ms.clicked`))},er=(0,a.useCallback)(async()=>{!G||!X||!ee||R?.videos?.entityId||q||(B.current=window.setTimeout(async()=>{let e=new Image;e.src=ee,e.complete||(0,b.nP)(`web.closeup.prefetched_image_on_hover.${X}_ms.fetched`)},X))},[B,G,X,ee,R?.videos?.entityId,q]),es=(0,a.useCallback)(()=>{!G||!B.current||R?.videos?.entityId||(clearTimeout(B.current),B.current=null)},[B,G,R?.videos?.entityId]),eo=(0,a.useCallback)(()=>{if(!G||!ee||R?.videos?.entityId||!q)return;let e=new Image;e.src=ee,e.complete||(0,b.nP)("web.closeup.prefetched_image_on_hover.on_mouse_down.fetched")},[G,ee,R?.videos?.entityId,q]),ed={pathname:en,state:{trackingParams:R?.trackingParams,...F&&{board:F},...V&&{fromEggsBoard:C}}},ec=(0,g.Z)({href:ed,clientTrackingParams:R?.trackingParams,externalData:{auxData:et,pin:R&&{advertiserId:R.advertiserId,attributionSourceId:R.attributionSourceId,board:R.board&&{url:R.board.url},campaignId:R.campaignId,entityId:R.entityId,isDownstreamPromotion:R.isDownstreamPromotion,isPromoted:R.isPromoted,pinner:R.pinner&&{username:R.pinner.username},pinPromotionId:R.pinPromotionId,promoter:R.promoter&&{entityId:R.promoter.entityId},storyPinDataId:R.storyPinDataId,trackingParams:R.trackingParams}}}),eu=(0,a.useCallback)(()=>{U&&H&&O((0,v.D)({pinId:R.entityId}))},[R.entityId,O,U,H]);return(0,P.jsx)(l.Tg,{accessibilityLabel:I?void 0:(0,h.Z)(Z._('{{ pinTitle }} pin page', 'pinRep.closeupLink.tapArea.accessibilityLabel', 'Accessibility label with pin title on individual links'),{pinTitle:R.gridTitle||R.title||R.description||""}),fullHeight:"fullSize"===e,fullWidth:"fullSize"===e,href:en,mouseCursor:W||$?void 0:"zoomIn",onMouseDown:eo,onMouseEnter:er,onMouseLeave:es,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),el(),eu(),ec({event:e})},rounding:2,children:t})}},329544:function(e,t,n){function i(e){let t=e.split("/");return[t[2],t[1]]}function a(e,t){return!e||!e.some(e=>e.pin_type===t)}n.d(t,{E:function(){return a},J:function(){return i}})},430732:function(e,t,n){n.d(t,{H8:function(){return m},Ut:function(){return p},fr:function(){return u}});var i=n(667294),a=n(486188),l=n(721259),r=n(151531),s=n(785893);let o=()=>n.e("42349").then(n.bind(n,527722)),{Provider:d,useHook:c}=(0,a.Z)("IdeaPin");function u({children:e}){let[t,n]=(0,l.Z)(o,r.Z),a=(0,i.useMemo)(()=>({dispatch:n,ideaPin:t}),[n,t]);return(0,s.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,i.useMemo)(()=>({setIdeaPinActivePage:t=>{e({type:"IDEA_PIN_ACTIVE_PAGE",payload:{activePage:t}})},setIdeaPinDynamicWidth:t=>{e({type:"IDEA_PIN_DYNAMIC_WIDTH",payload:{dynamicWidth:t}})}}),[e])}function m(){let{ideaPin:e}=c();return e}},151531:function(e,t,n){n.d(t,{Z:function(){return i}});let i={activePage:0,dynamicWidth:0}},895321:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(883119),a=n(708130),l=n(471320),r=n(967629),s=n(605046),o=n(3879),d=n(990637),c=n(785893);let u=({rating:e,textSize:t,type:n})=>{if("single"===n){let n=parseFloat(e);return Number.isNaN(n)?null:(0,c.jsxs)(i.kC,{alignItems:"center",children:[(0,c.jsx)(s.A,{fill:"full"}),(0,c.jsx)(i.xv,{size:t,children:n.toFixed(1)})]})}return(0,c.jsx)(s.Z,{rating:e})},p=({bracket:e,count:t,countFormat:n,countType:s,marginStart:d,textSize:u,underline:p,unauthPdp:m})=>{let{locale:g}=(0,o.B)(),h=(0,a.ZP)(),_=(0,l.Z)();if(null==t)return null;let y=_(g,t,{shortform:!0,shortform_maximum_fraction_digits:1});if("text"===n){let e="review"===s?h.ngettext('{{ count }} review', '{{ count }} reviews', t, 'webapp.app.www-unified.productStarRatings.RatingCountText', 'count: total reviews count'):h.ngettext('{{ count }} rating', '{{ count }} ratings', t, 'webapp.app.www-unified.productStarRatings.RatingCountText', 'count: total ratings count');y=(0,r.nk)(e,{count:t}).join("")}return e&&(y=`(${y})`),(0,c.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{borderBottom:p?"1px solid gray":"none"}},marginStart:d,children:(0,c.jsx)(i.xv,{color:p?"subtle":"default",size:u,underline:p,children:(0,c.jsx)(i.xu,{"data-test-id":"ratings-count-text",display:"inlineBlock",children:m?`(${y})`:y})})})};function m({bracket:e,count:t,countFormat:n,countType:a,rating:l,textSize:r,underline:s,unauthPdp:o}){return(0,d.Z)({count:t,rating:l})?(0,c.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(u,{rating:l,textSize:r,type:"multiple"}),(0,c.jsx)(p,{bracket:e,count:t,countFormat:n,countType:a,textSize:r,unauthPdp:o,underline:s})]}):null}},990637:function(e,t,n){n.d(t,{Z:function(){return i}});function i({count:e,rating:t}){return!!(t&&"None"!==t&&Number.isFinite(e))}},531545:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(667294),a=n(883119),l=n(445294),r=n(558919),s=n(708130),o=n(561162),d=n(80887),c=n(183542),u=n(785893);let p=new a.Ry(3);function m({anchor:e,children:t,displayOptions:n,onFlyoutDismiss:i}){let l=(0,s.ZP)(),{closeupWithinMasonryEnabled:c}=(0,d.x4)(),{checkExperiment:m}=(0,o.F)(),g=m("sg_dweb_sharesheet_update").anyEnabled?r.b7:void 0;return n?.shownWithinMasonry||n?.shownWithinProfileHeader?(0,u.jsx)(a.mh,{zIndex:n.shownWithinProfileHeader||c&&n?.shownWithinMasonry?p:g,children:(0,u.jsx)(a.xu,{position:n.inModal?"absolute":void 0,top:!!n.inModal||void 0,zIndex:n.inModal?r.b7:void 0,children:(0,u.jsx)(a.J2,{_deprecatedShowCaret:n.showCaret,accessibilityLabel:l._('Share Menu', 'SendShareController.ShareMenu.accessibilityLabel', 'Accessbililty label for the share menu.'),anchor:e,forceDirection:n.forceDirection??!1,idealDirection:n.idealDirection??"down",onDismiss:()=>{i()},positionRelativeToAnchor:!1,size:"flexible",children:t})})}):(0,u.jsx)(a.J2,{_deprecatedShowCaret:n?.showCaret,accessibilityLabel:l._('Share Menu', 'SendShareController.ShareMenu.accessibilityLabel', 'Accessbililty label for the share menu.'),anchor:e,forceDirection:n?.forceDirection??!1,idealDirection:n?.idealDirection??"down",onDismiss:()=>{i()},size:"flexible",children:t})}function g({children:e,flyoutDisplayOptions:t,isFlyoutOpen:n,loggingOptions:r,onClick:s,onFlyoutDismiss:o,onToggleFlyout:p,sendObject:g}){let h=(0,i.useRef)(null),{clientTrackingParams:_}=(0,d.x4)(),y=(0,l.Z)();return(0,u.jsxs)(a.xu,{ref:h,dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:[(0,u.jsx)(a.xu,{children:e({handleSendShareFlyoutButtonClick:()=>{if(y){y();return}p()}})}),n&&(0,u.jsx)(m,{anchor:h.current,displayOptions:t,onFlyoutDismiss:o,children:(0,u.jsx)(c.Z,{clientTrackingParams:_,component:r.component,element:r.element,onExternalSend:r.onExternalSend,onHide:()=>{s?.(),o()},sendType:g.type,sharedObject:{...g,type:"user"===g.type?"pinner":g.type},viewParameter:r.viewParameter,viewType:r.viewType})})]})}},1916:function(e,t,n){n.d(t,{V:function(){return s},Z:function(){return o}});var i=n(667294),a=n(785893);let l={cropArea:{x:0,y:0,w:1,h:1},cropSource:5,entrySource:"flashlight",isProductPage:!1,surfaceType:"flashlight",title:""},r=(0,i.createContext)(l);function s({children:e,value:t}){let[n,s]=(0,i.useState)(!1),[o,d]=(0,i.useState)({}),[c,u]=(0,i.useState)({}),[p,m]=(0,i.useState)(!1),[g,h]=(0,i.useState)(null),[_,y]=(0,i.useState)(!1),f=(0,i.useMemo)(()=>({...t||l,hasAnimatedCutoutsOnLand:p,isHoveringOnCropperEdges:n,setIsHoveringOnCropperEdges:s,cutoutContours:o,setCutoutContours:d,scaledValues:c,setScaledValues:u,setHasAnimatedCutoutsOnLand:m,selectedId:g,setSelectedId:h,hasLoggedRender:_,setHasLoggedRender:y}),[t,p,s,n,o,c,m,g,h,d,u,_,y]);return(0,a.jsx)(r.Provider,{value:f,children:e})}function o(){return(0,i.useContext)(r)}},368097:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i,a=n(581722);n(167912);var l=n(883119),r=n(674320),s=n(131548),o=n(3879),d=n(202732),c=n(226978),u=n(55077),p=n(959474),m=n(245918),g=n(150918),h=n(757861),_=n(828520),y=n(785893);let f=void 0!==i?i:i=n(488944),x=["thumbnail","imageOnly"];function v({boardKey:e,containerBackgroundColor:t,display:n="responsive",forwardedRef:i,fullSize:v,hideSecretBoardIcon:k=!1,isAttributionHeightUnfixed:b=!1,isBoardsActualizationReps:P=!1,isCollaboratorsAttributionVisible:S=!1,isNoBoardTitleStyle:w=!1,noPaddings:j=!1,showFollowButton:I=!0,showPinCount:C=!0,slotIndex:T,type:F,viewParameter:L,viewType:A}){let K=(0,p.Z)(),Z=K&&K.isAuth,R=(0,a.I0)(),{locale:E}=(0,o.B)(),D=(0,c.Z)(),z=(0,s.Z)(f,e),M=(0,g.Z)(z),B=(0,r.Z)(),O=(0,u.HG)();if(!z)return null;let{owner:V,shouldShowBoardCollaborators:H}=z,U=K.isAuth?K.id:"",N=V?.entityId===U,W=z.collaboratingUsers?.__typename==="UserCollaboratingUsersConnectionContainer"?z.collaboratingUsers.connection?.edges:[],$=W?.some(e=>e?.node?.entityId===U);if("secret"===z.privacy&&!$&&!N)return null;let G="grid"===F||"thumbnail"===F?2:4,X=M(G),q=(z?.coverPin?.crop&&z?.coverPin?.size&&{x:z?.coverPin?.crop[0]??0,y:z?.coverPin?.crop[1]??0,width:z?.coverPin?.size[0]??0,height:z?.coverPin?.size[0]??0})??{x:0,y:0,width:0,height:0},Y={isCustom:z.hasCustomCover||void 0,url:X,position:q},J=(0,h.Jx)(z?.images170x,z?.pinThumbnailUrls?.filter(e=>null!==e)??void 0,X).map(({url:e})=>({name:(0,h.po)(e),url:e})),Q=[44,49].includes(L),ee=()=>49===L?N?3106:3107:L,et=z?.sensitivityScreen?{reason:z.sensitivityScreen?.reason,showWarning:z.sensitivityScreen?.showWarning}:void 0,en=(0,y.jsx)(m.Z,{archivedDate:z.archivedByMeAt??void 0,boardId:z.entityId,canEdit:!!z.boardAccess&&z.boardAccess.includes("write"),containerBackgroundColor:t,coverPhoto:X?Y:null,display:n,followedByMe:!!z.followedByMe,fullSizeDrawer:v,hideMeta:x.includes(F),hideSecretBoardIcon:k,id:z.entityId,imagesLego:J,isAttributionHeightUnfixed:b,isAuthenticated:Z,isBoardsActualizationReps:P,isCollaborative:!!z.isCollaborative,isCollaborator:!!$,isCollaboratorsAttributionVisible:S,isNoBoardTitleStyle:w,isOwner:N,isProtected:"protected"===z.privacy,isSecret:"secret"===z.privacy,isTemporarilyDisabled:!!z.isTemporarilyDisabled,lastModifiedDate:z.boardOrderModifiedAt??"",layout:O?"square":void 0,locale:E,metaMarginTop:2,metaPaddingY:0,name:z.name??"",numberOfCollaborators:W?.length??0,numCols:G,onFollow:e=>R((0,_.Z)(e,B)),onUnfollow:e=>R((0,_.f)(e,B)),pinCount:C&&z.pinCount?z.pinCount:void 0,sectionCount:z.sectionCount??0,sensitivityScreen:et,showBoardCollaborators:!!H,showFollowButton:I,slotIndex:T,userKey:z?.owner,viewerId:U,viewParameter:L,viewType:A});return!x.includes(F)&&z.url?(0,y.jsx)(l.Tg,{href:Z?z.url:z.url.toLowerCase(),onTap:()=>{Q&&B({aux_data:{board_id:z.entityId,board_pin_count:z.pinCount??0,board_section_count:z.sectionCount??0},component:1,element:36,event_type:102,view_parameter:ee()}),Z||((0,d.NC)("click_go_to_board"),D({action:"click",item:"board-card"}))},rounding:2,tapStyle:"compress",children:(0,y.jsx)(l.xu,{ref:i,paddingY:j?0:O?2:3,children:en})}):en}},409412:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(88509),a=n(3879),l=n(52681),r=n(785893);function s({children:e,type:t}){let n=(0,a.B)();return(0,r.jsx)(i.Z,{annotateExperiments:[...n.isAuthenticated?["authDesktop"===t?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page"]:[],n.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth",..."authDesktop"===t?[]:[n.isAuthenticated?"auth_mweb_suspense_closeup":"unauth_mweb_suspense_closeup"]],constraints:"authDesktop"===t?[...l.d0]:["PinPageMainImageRendered"],customEnabledNavigationTypes:["initial_app_load","client_route_push","client_route_replace"],surface:"pin_closeup",children:e})}},220004:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(667294),a=n(883119),l=n(188568),r=n(219300),s=n(3879),o=n(55077),d=n(80887),c=n(785893);function u({auxData:e,children:t,collapseButtonElementType:n,collapseByDefault:u=!0,componentType:p,displayViewState:m,expandButtonElementType:g,forceTappableHeader:h,headerHeight:_,headerPaddingRight:y,headerPreview:f,heading:x,surface:v,viewParameter:k,viewType:b}){let P=(0,o.HG)(),{isBot:S}=(0,s.B)(),{logContextEvent:w}=(0,r.v)(),{isCloseupRelatedPinsAboveTheFoldEnabled:j,setIsShoppingModuleExpanded:I}=(0,d.x4)(),C=(0,i.useRef)(null),[T,F]=(0,i.useState)(!S&&u||[1,2].includes(m));return(0,i.useEffect)(()=>{I&&I(!T)},[]),(0,c.jsxs)(a.kC,{dataTestId:"collapsible-layout",direction:"column",gap:P&&j?0:4,children:[(0,c.jsx)(l.Z,{collapsed:T,displayViewState:m,forceTappableHeader:h,headerHeight:_,headerPaddingRight:y,headerPreview:f,heading:x,onClick:()=>{F(!T),I&&I(T),w({aux_data:e,component:p,element:T?g:n,event_type:P?101:102,view_parameter:k,view_type:b})},showArrow:!0,surface:v}),P&&j?(0,c.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transition:j?"height 600ms cubic-bezier(.25,1,.5,1)":void 0}},"data-test-id":`collapsible-layout-content-${T?"collapsed":"expanded"}`,height:T?"0px":`${C?.current?.scrollHeight}px`,marginBottom:j&&!T?1:void 0,overflow:"hidden",children:(0,c.jsx)(a.xu,{ref:C,children:t})}):!T&&(0,c.jsx)(a.xu,{children:t})]})}},376317:function(e,t,n){n.d(t,{Z:function(){return A}});var i,a=n(667294);n(167912);var l=n(883119),r=n(131548),s=n(342117),o=n(522282),d=n(961971),c=n(311258),u=n(561162),p=n(110172),m=n(49441),g=n(959474),h=n(228132),_=n(80887),y=n(785893);let f=`
.CloseupTitleCard {
  color: #444;
  font-weight: bold;
}

.CloseupTitleCard .richPinInformation {
  padding: 0 40px 16px;
  padding-top: 0;
  width: 470px; /* 80% of closeup width */
}

.CloseupTitleCard a {
    color: #444;
}

.CloseupTitleCard a:hover,
.CloseupTitleCard a:active {
  color: #444;
}`,x=void 0!==i?i:i=n(738471),v=e=>{let{carouselData:t,title:n}=e??{};if(n)return!0;if(t){let{carouselSlots:e,index:n}=t;if(null!=n&&e?.[n]&&e[n].title)return!0}return!1},k=e=>{let{clientTrackingParams:t,children:n,isLink:i=!0,onClick:a,pin:r}=e,s=(0,d.Z)(r),c=(0,u.F)(),p=(0,g.Z)(),{closeupWithinMasonryEnabled:m}=(0,_.x4)(),h=r.imageSpec_orig?.url&&r.imageSpec_orig.width&&r.imageSpec_orig.height?r.imageSpec_orig:null,f=n;if(r.carouselData){let{carouselSlots:e,index:t}=r.carouselData;e&&null!=t&&e[t]&&(s=e[t].link||s,f=e[t].title||f)}let x=r?.originPinner&&p.isAuth&&p.id===r.originPinner.entityId||!(r.isGoLinkless&&c.checkExperiment("closeup_ctx_is_go_linkless_web").anyEnabled),v=(0,o.Z)({href:{pathname:s??h?.url??"",state:{trackingParams:t}},clientTrackingParams:t,target:"blank",externalData:{pin:r&&{advertiserId:r.advertiserId,attributionSourceId:r.attributionSourceId,board:r.board&&{url:r.board.url},campaignId:r.campaignId,entityId:r.entityId,isDownstreamPromotion:r.isDownstreamPromotion,isPromoted:r.isPromoted,pinner:r.pinner&&{username:r.pinner.username},pinPromotionId:r.pinPromotionId,promoter:r.promoter&&{entityId:r.promoter.entityId},storyPinDataId:r.storyPinDataId,trackingParams:r.trackingParams}}});if(!e.pin.entityId)return null;let k=f&&(0,y.jsx)(l.X6,{accessibilityLevel:1,size:m?"400":"500",children:f});return(0,y.jsx)("div",{itemProp:"name",children:(i||s)&&x?(0,y.jsx)(l.rU,{href:s??h?.url??"",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),a&&a(),v({event:e})},rel:"nofollow",target:"blank",underline:"none",children:k}):k})},b=e=>{if(!e.pin.entityId)return null;let{entityId:t}=e.pin,n=e.pin.imageSpec_736x?.url&&e.pin.imageSpec_736x.width&&e.pin.imageSpec_736x.height?e.pin.imageSpec_736x:null;return(0,y.jsxs)(l.xu,{children:[(0,y.jsx)("meta",{content:`https://${m.Vi}/pin/${t}/`,itemProp:"url"}),n&&(0,y.jsx)("meta",{content:n.url,itemProp:"image"})]})},P=e=>{if(!e.pin.entityId)return null;let{pin:t}=e||{},{gridTitle:n,title:i}=t||{},l=n||i;return(0,y.jsx)(a.Fragment,{children:l&&(0,y.jsx)(p.Z,{children:(0,y.jsx)(k,{...e,children:l})})})},S=e=>{if(!e.pin.entityId)return null;let{pin:t}=e||{},{richMetadata:n,gridTitle:i}=t||{},{title:l}=n||{};return(0,y.jsx)(a.Fragment,{children:(i||l)&&(0,y.jsx)(p.Z,{itemType:h.iB.PRODUCT,children:(0,y.jsxs)(k,{...e,children:[i||l,(0,y.jsx)(b,{...e})]})})})},w=e=>{if(!e.pin.entityId)return null;let{pin:t}=e||{},{richMetadata:n,gridTitle:i}=t||{},{title:a}=n||{};return(0,y.jsx)(p.Z,{itemType:h.iB.ARTICLE,children:(0,y.jsx)(k,{...e,children:i||a})})},j=e=>{if(!e.pin.richMetadata?.recipe?.name)return null;let{name:t}=e.pin.richMetadata.recipe;return(0,y.jsx)(p.Z,{itemType:h.iB.RECIPE,children:(0,y.jsx)(k,{...e,children:(0,y.jsx)(l.xu,{children:t})})})},I=e=>e.pin.richMetadata?.tutorial?.fromAggregatedData||!e.pin.richMetadata?.tutorial?.name?null:(0,y.jsx)(p.Z,{children:(0,y.jsx)(k,{...e,children:(0,y.jsx)(l.xu,{children:e.pin.richMetadata.tutorial.name})})}),C=e=>{let t=!!e.pin.richSummary?.displayName;return t?(0,y.jsx)(p.Z,{children:(0,y.jsx)(k,{...e,children:(0,y.jsx)(l.xu,{children:t})})}):null},T=e=>{if(!e.pin.entityId)return null;let{gridTitle:t}=e.pin||{};return(0,y.jsx)(p.Z,{itemType:h.iB.ARTICLE,children:(0,y.jsx)(k,{...e,children:t})})};function F(e){let{carouselInfo:t}=e,{carouselData:n}=t||{},{carousel_slots:i}=n||{};return((i||[])[0]||{}).title}let L=e=>{let{pin:t,...n}=e;if(!e.pin.entityId)return null;let i=F(n);return(0,y.jsx)(p.Z,{itemType:h.iB.ARTICLE,children:(0,y.jsx)(k,{...e,children:i})})},A=({pinKey:e,...t})=>{let n=(0,r.Z)(x,e),{carouselInfo:i,inCommentFeedRedesignExp:o,onTitleCheck:d}=t,u=!!n.richMetadata?.tutorial?.name,p=!!n.richMetadata?.recipe?.name,m=!!n.richMetadata?.article?.name,g=!!n.richSummary?.displayName,h=(0,c.Z)(n),{isCloseupRelatedPinsAboveTheFoldEnabled:k,clientTrackingParams:b}=(0,_.x4)(),A=!(n.closeupUnifiedDescription||"").trim(),K=T,Z=!1;return i&&n.entityId&&F(t)?K=L:h?K=S:v(n)?K=P:u?K=I:p?K=j:m?K=w:g?K=C:Z=!0,(0,a.useEffect)(()=>{d?.(Z)},[Z,d]),(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(s.Z,{unsafeCSS:f}),(0,y.jsx)("div",{className:"CloseupTitleCard",children:(0,y.jsx)(l.xu,{marginBottom:A&&o?4:void 0,marginTop:k?void 0:4,children:(0,y.jsx)(K,{...t,clientTrackingParams:b,pin:n})})})]})}},52681:function(e,t,n){let i;n.d(t,{GL:function(){return r},_z:function(){return a},d0:function(){return o},hO:function(){return s},pM:function(){return l}});let a="video",l="image",r=new Map([["DEFAULT",new Set(["button"])],["story_pin",new Set([a])],["product_detail_page",new Set(["description","shopButton","thumbnailsLoaded"])],["product_detail_page_plus",new Set(["description","shopButton","thumbnailsLoaded"])]]),s=(i=new Set,r.forEach(e=>{i=new Set([...i,...e])}),i),o=new Set([...s,l,"resource"])},596078:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(870912),a=n(156689);let l=(e,t)=>{let n=e.action||void 0,l=(0,a.Z)({url:e.location.search});return"PUSH"===n?"click":("POP"!==n||e.location.key)&&"news_hub"!==l.entrySource?t&&(0,i.sV)(t)?"deeplink":"click":"deeplink"}},249278:function(e,t,n){n.d(t,{Yf:function(){return i}});let i=e=>{let{url:t,width:n,height:i}=e||{};return t&&n&&i?{url:t,width:n,height:i}:void 0}},566700:function(e,t,n){n.d(t,{Z:function(){return d}});var i,a=n(667294);n(167912);var l=n(131548),r=n(297706),s=n(657204);let o=void 0!==i?i:i=n(327786);function d({logCommerceAuxData:e,deepLinkBackGoesToBoard:t,element:n,goBack:i,pinKey:d,routePush:c,trafficSource:u,viewer:p,requestContext:m,viewType:g,viewParameterType:h,componentType:_},y){let f=(0,l.Z)(o,d),x=(0,s.Z)(f);return{onHandleBackButtonClick:(0,a.useCallback)(()=>{let a=f.promotedLeadForm?.leadId,l=e?x():null;f.promotedIsLeadAd?(y({event_type:4100,view_type:175,view_parameter:null,component:null,object_id_str:f.entityId,aux_data:{...l,lead_form_id:a,is_lead_ad:1}}),y({event_type:10369,view_type:175,view_parameter:null,component:14307,duration_ns:13606e6,object_id_str:f.entityId,aux_data:{lead_form_id:a,is_lead_ad:1}})):y({aux_data:l,event_type:101,view_type:g||3,view_parameter:h||(0,r.Z)({hasPin:!0,hasPinRichMetadata:!!f.richMetadata,hasPinRichMetadataProducts:!!f.richMetadata?.products,hasPinRichMetadataArticle:!!f.richMetadata?.article,hasPinRichMetadataRecipe:!!f.richMetadata?.recipe,hasPinStoryPinData:!!f.storyPinData}),..._?{component:_}:void 0,element:n||34});let s="deep_linking"===u&&!t,o=p.partner?"/homefeed/":"/",{utm_source:d,news_hub_id:v}=function(e){let t=e.searchParams;return{utm_source:t.get("utm_source")??"",utm_medium:t.get("utm_medium")??"",utm_campaign:t.get("utm_campaign")??"",news_hub_id:t.get("news_hub_id")??""}}(new URL(m.fullPath,m.origin)),k=`/news_hub/${v}`;return"31"==`${d}`&&v?c(k):s?c(o):i()},[_,t,n,x,i,e,y,f.entityId,f.promotedIsLeadAd,f.promotedLeadForm?.leadId,f.richMetadata,f.storyPinData,m.fullPath,m.origin,c,u,h,g,p.partner])}}},290674:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(883119),a=n(4913),l=n(112393),r=n(785893);let s=function({marginStart:e=l.D6}){let t=(0,a.vs)();return(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:`${-(4*e)}px`,marginRight:`${-(4*e)}px`,backgroundColor:t?a.Ov:"#E9E9E9"}},height:1})}},974241:function(e,t,n){n.d(t,{Z:function(){return i}});function i(){return["aggregatedpindata.aggregated_stats","aggregatedpindata.creator_analytics","aggregatedpindata.id","aggregatedpindata.is_shop_the_look","aggregatedpindata.pin_tags","board.collaborated_by_me","board.followed_by_me","board.id","board.image_thumbnail_url","board.is_collaborative","board.layout","board.name","board.owner()","board.privacy","board.type","board.url","buyableproductmetadata.display_active_max_price","buyableproductmetadata.display_active_min_price","buyableproductmetadata.short_description","buyableproductmetadata.title","comment.commenter()","comment.created_at","comment.deletable_by_me","comment.id","comment.text","comment.type","pin.access","pin.ad_destination_url","pin.ad_match_reason","pin.additional_hide_reasons","pin.aggregated_pin_data()","pin.alt_text","pin.attribution","pin.board()","pin.carousel_data()","pin.collection_pin()","pin.comment_count","pin.comments(limit:5,resume:true)","pin.created_at","pin.creator_analytics","pin.debug_info_html","pin.description","pin.description_html","pin.domain","pin.dominant_color","pin.embed","pin.grid_description","pin.grid_title","pin.has_required_attribution_provider","pin.id","pin.image_crop","pin.image_signature","pin.images[170x,136x136,236x,474x,736x,orig]","pin.is_downstream_promotion","pin.is_eligible_for_web_closeup","pin.is_native","pin.is_playable","pin.is_promoted","pin.is_quick_promotable","pin.is_repin","pin.is_uploaded","pin.is_video","pin.is_whitelisted_for_tried_it","pin.link","pin.manual_interest_tags","pin.method","pin.native_creator()","pin.pinner()","pin.price_currency","pin.price_value","pin.privacy","pin.promoted_is_removable","pin.promoter()","pin.reaction_counts","pin.repin_count","pin.rich_summary()","pin.shopping_flags","pin.sponsorship","pin.story_pin_data()","pin.story_pin_data_id","pin.title","pin.tracking_params","pin.type","pin.videos()","pin.view_tags","pincarouselslot.details","pincarouselslot.id","pincarouselslot.images[60x60,136x136,170x,236x,474x,564x,736x,600x315,orig]","pincarouselslot.link","pincarouselslot.title","user.blocked_by_me","user.explicitly_followed_by_me","user.full_name","user.id","user.image_large_url","user.image_small_url","user.type","user.username","video.id","video.video_list[V_HLSV4,V_HLSV3_WEB,V_HLSV3_MOBILE,V_EXP3,V_EXP4,V_EXP5,V_EXP6,V_EXP7]","pintag.pins()","pintag.type","pintag.pin_tag_key","pintag.x_percent","pintag.y_percent","pin.rich_summary()","pin.grid_title","pin.image_square_url","pin.images[236x]","pin.id","pin.is_eligible_for_pdp","pin.link_domain()","domain.official_user()","user.is_verified_merchant","user.verified_identity","pin.promoted_lead_form"]}},865330:function(e,t,n){n.d(t,{Z:function(){return C},w:function(){return S}});var i,a=n(667294),l=n(581722);n(167912);var r=n(616550),s=n(442279),o=n(883119),d=n(441863),c=n(131548),u=n(820368),p=n(55077),m=n(236256),g=n(959474),h=n(460515),_=n(237861),y=n(400996),f=n(253525),x=n(640474),v=n(165278),k=n(522291),b=n(716996),P=n(785893);let S=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:n,isDesktop:i,isReversed:a=!1,noCache:l=!1,orbacSubjectId:r=""})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:n,page_size:i?10:25,redux_normalize_feed:!0,is_reversed:a,...r?{orbac_subject_id:r}:{}},noCache:l}),w=(0,s.createSelector)((e,t,n)=>n,({feeds:e},t)=>e[`${k.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,t,n,i)=>i,(e,t,n,i)=>t?.map(({id:t,type:a})=>{let l="aggregatedcomment"===a.toLowerCase()?e[t]:n[t];if(!l)return;let r="string"==typeof l.user?i[l.user]??{}:l.user??{};return{...l,user:r??{}}}).filter(e=>e)||[]),j=void 0!==i?i:i=n(663930),I=({aggregatedPinDataId:e,shouldPreviewNewReply:t,closeupAttributionId:n,closeupAttributionUsername:i,commentsDisabled:s,hasComments:c,isReadOnly:k,pinId:j,isVideo:I,pinnerId:C,scrollContainer:T,setIsComposingNewComment:F=()=>{},storyPinDataId:L,viewParameter:A,toggleComposerForReply:K,openMwebOverflowMenu:Z})=>{let{comment_id:R}=(0,r.UO)(),E=(0,l.I0)(),D=(0,p.HG)(),z=(0,g.Z)(),M=(0,a.useRef)(c),B=(0,h.Z)(),O=(0,_.lJ)(z,B),V=(0,u.Z)(M.current&&e?S({aggregatedPinDataId:e,featuredCommentIds:R?[R]:[],isDesktop:D}):null),{removeUnauthCommentPinId:H,unauthCommentPinId:U}=(0,x.C)(),N=(0,y.lV)(),{toggleAggregatedCommentHelpful:W,toggleAggregatedCommentLike:$}=(0,y.nf)(),G=(0,b.kW)(),X=(0,l.v9)(t=>w(t,e,N,G)),[q,Y]=(0,a.useState)(void 0),J=()=>{F(!0)};return(0,m.Z)(()=>{!D&&z.isAuth&&U&&j&&U===j&&(J(),H())}),(0,a.useEffect)(()=>{let e=()=>{let t=!!T&&T.scrollTop+T.clientHeight+10>=T.scrollHeight;V&&!V.isFetching&&(V.isAtEnd?T?.removeEventListener("scroll",e):t&&V.fetchMore())};return T?.addEventListener("scroll",e),()=>{T?.removeEventListener("scroll",e)}},[V,T]),(0,P.jsx)(a.Fragment,{children:(0,P.jsx)(o.xu,{display:"flex",marginTop:D?6:0,width:"100%",children:(0,P.jsx)(d.Z,{aggregatedPinDataId:e,closeupAttributionId:n,closeupAttributionUsername:i,comments:X,commentsDisabled:s,isDesktop:D,isLoaded:V&&V.isLoaded||!c,isReadOnly:k,isVideo:I,openOverflowMenu:Z,parentId:e??"",parentType:f.o.pin,pinId:j,pinnerId:C,reactionListCommentId:q,shouldPreviewNewReply:t,showReactionListForComment:Y,storyPinDataId:L,toggleHelpful:(e,t,n)=>()=>{n?E((0,v.YH)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:O})):W({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:O})},toggleLike:(e,t,n)=>()=>{n?E((0,v.wH)({didItDataId:e,isLikedByMe:t,orbacSubjectId:O})):$({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:O})},toggleReplyComposer:K,userAvatarSize:"sm",viewParameter:A})})})};function C({pinKey:e,...t}){let n=(0,c.Z)(j,e),i=(n?.aggregatedPinData?.commentCount||0)+(n?.aggregatedPinData?.didItData?.imagesCount||0);return(0,P.jsx)(I,{aggregatedPinDataId:n?.aggregatedPinData?.entityId,closeupAttributionId:n?.closeupAttribution?.entityId,closeupAttributionUsername:n?.closeupAttribution?.username,commentsDisabled:n?.commentsDisabled,disablePhotoCommentSelection:!!n?.doneByMe,hasComments:i>0&&!n?.commentsDisabled,isVideo:!!n?.videos?.videoList,pinId:n?.entityId,pinnerId:n?.pinner?.entityId,storyPinDataId:n?.storyPinData?.entityId,...t})}},640474:function(e,t,n){n.d(t,{C:function(){return s},p:function(){return o}});var i=n(667294),a=n(486188),l=n(785893);let{Provider:r,useHook:s}=(0,a.Z)("Session");function o({children:e}){let[t,n]=(0,i.useState)(void 0),a=(0,i.useCallback)(()=>n(void 0),[]),s=(0,i.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:n,removeUnauthCommentPinId:a}),[t,a]);return(0,l.jsx)(r,{value:s,children:e})}},44858:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(883119),a=n(249043),l=n(708130),r=n(967629),s=n(785893);function o({boardName:e,boardUrl:t,isBoardlessPin:n,isFromPinBuilder:o,hasNewPin:d,onChangeButtonClick:c,onVisitButtonClick:u=()=>{},onHide:p,onUndo:m,pinImageUrl:g}){let h;let _=(0,l.ZP)();return o?h={accessibilityLabel:_._('Visit Pin', 'PostSavedPinToast.a11yVisitButton', 'Accessibility label for Visit Pin saved from PinBuilder'),label:_._('Visit', 'PostSavedPinToast.VisitButton', 'Visit Pin saved from PinBuilder'),size:"lg",onClick:u}:(c||m)&&(h={accessibilityLabel:d&&n&&c?_._('Change Pin destination', 'PostSavedPinToast.a11yChangeButton', 'Change saved pin to a different destination'):_._('Undo Saved Pin', 'PostSavedPinToast.a11yUndoButton', 'Undo Saved Pin'),label:d&&n&&c?_._('Change', 'PostSavedPinToast.ChangeButton', 'Change saved pin to a different destination'):_._('Undo', 'PostSavedPinToast.UndoButton', 'Undo Saved Pin'),size:"lg",onClick:d&&n&&c?()=>c():m}),(0,s.jsx)(a.ZP,{duration:n?6e3:3e3,imageUrl:g,onHide:p,primaryAction:h,text:(0,s.jsx)(i.xv,{overflow:"normal",size:"200",children:(0,r.nk)(_._('Saved to {{ destination }}', 'PostSavedPinToast.SavedToBoardLabel', 'Saved to label for better save'),{destination:(0,s.jsx)(i.rU,{href:n?"/me/":t??"",children:(0,s.jsx)(i.xv,{lineClamp:1,size:"200",weight:"bold",children:e},"PostSavedPinToastBoardName")})})}),thumbnail:n?{icon:(0,s.jsx)(i.JO,{accessibilityLabel:_._('Saved to profile thumbnail', 'PostSavedPinToast.thumbnail.accessibilityLabel', 'Thumbnail for saved to profile.'),color:"default",icon:"history",size:24})}:void 0})}},115435:function(e,t,n){n.d(t,{Z:()=>o});var i=n("883119"),a=n("708130"),l=n("3879"),r=n("785893");let s=()=>{};function o({direction:e,handleNavHoverToggle:t,leftHover:n,isDarkMode:o=!1,onScroll:d,rightHover:c,shouldPadArrows:u,size:p="md"}){let m=(0,a.ZP)(),{isRTL:g}=(0,l.B)(),h=function({direction:e,isDarkMode:t,isRTL:n,leftHover:i,rightHover:a,shouldPadArrows:l,verticalSize:r},s){let o={backgroundImage:`linear-gradient(to ${e}, rgba(255, 255, 255, 0) 0%, #fff 90%)`,height:"100%",top:"0px",bottom:void 0},d={color:t?"inverse":"default",height:"40px",justifyContent:"center",left:void 0,right:void 0},c={sm:"54px",md:"124px"};return{up:{...d,backgroundImage:`linear-gradient(${t?"#000 0%, rgba(0, 0, 0, 0) 90%":"#fff 0%, rgba(255, 255, 255, 0) 90%"})`,bottom:void 0,icon:"arrow-up",label:s._('Up arrow', 'product.carousel.arrowUp', 'Label for up arrow button in closeup image carousel'),top:"0px",width:c[r]},down:{...d,backgroundImage:`linear-gradient(${t?"rgba(0, 0, 0, 0) 0%, #000 90%":"rgba(255, 255, 255, 0) 0%, #fff 90%"})`,bottom:"0px",icon:"arrow-down",label:s._('Down arrow', 'product.carousel.arrowDown', 'Label for down arrow button in closeup image carousel'),top:void 0,width:c[r]},left:{...o,color:l?"default":i?"default":"subtle",icon:n?"arrow-forward":"arrow-back",justifyContent:"start",label:s._('Left arrow', 'Label for left arrow button in search guides', 'Label for left arrow button in search guides'),left:"0px",right:void 0,width:n?"22px":"210px"},right:{...o,color:l?"default":a?"default":"subtle",icon:n?"arrow-back":"arrow-forward",justifyContent:"end",label:s._('Right arrow', 'Label for right arrow button in search guides', 'Label for right arrow button in search guides'),left:void 0,right:"0px",width:n?"22px":"210px"}}}({direction:e,isDarkMode:o,isRTL:g,leftHover:n,rightHover:c,shouldPadArrows:u,verticalSize:p},m);return(0,r.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{willChange:"transform",pointerEvents:"none",top:h[e].top,bottom:h[e].bottom,left:h[e].left,right:h[e].right}},height:h[e].height,position:"absolute",children:(0,r.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundImage:h[e].backgroundImage,marginTop:u?"25px":void 0}},display:"flex",height:"100%",justifyContent:h[e].justifyContent,width:h[e].width,children:(0,r.jsx)("button",{onClick:d,onMouseEnter:t?()=>t(e,!0):s,onMouseLeave:t?()=>t(e,!1):s,style:{backgroundColor:"transparent",border:0,height:"100%",outline:"none",padding:0,pointerEvents:"all"},children:(0,r.jsx)(i.kC,{alignItems:"center",height:"100%",justifyContent:h[e].justifyContent,width:"50px",children:(0,r.jsx)(i.JO,{accessibilityLabel:h[e].label,color:h[e].color,icon:h[e].icon})})})})})}},801617:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(883119),a=n(871273),l=n(785893);function r({coverImages:e,height:t,isHovered:n,onClick:r,onMouseEnter:s,onMouseLeave:o,textType:d,text:c,url:u,width:p}){let m=e&&(e["236x"]||e["280x280"]);return(0,l.jsx)(a.Z,{backgroundColor:"gray",coverImage:m,height:t,isHovered:n,onClick:r,onMouseEnter:s,onMouseLeave:o,url:u,width:p,children:(0,l.jsx)(i.xu,{alignItems:"center",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:"text"===d?(0,l.jsx)(i.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,l.jsx)(i.X6,{align:"center",color:"light",size:"500",children:c})}):(0,l.jsx)(i.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,l.jsx)(i.xv,{align:"center",weight:"bold",children:c})})})})}},778240:function(e,t,n){n.d(t,{C0:function(){return i},ZU:function(){return a},a0:function(){return l}});let i=["DMCA","Trademark","GDPR"],a=new Date(2024,0,1),l={test:{LAW:"test",DECIDER_KEY:"legal_webapp_takedown_form_test",COUNTRY_CODES:["US"],API:"/v3/legal/takedowns/test/",COMPLAINTS_OFFICE:!0,TRUSTED_FLAGGER:!1,RESTRICT_MULTIPLE_LAWS:!1,ALLOW_ANON_SUBMISSION:!1},turkey:{LAW:"turkey",DECIDER_KEY:"legal_webapp_takedown_form_turkey",COUNTRY_CODES:["TR"],API:"/v3/legal/takedowns/turkey/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!1,TRUSTED_FLAGGER:!1},dsa:{LAW:"dsa",DECIDER_KEY:"legal_webapp_takedown_form_dsa",COUNTRY_CODES:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"],API:"/v3/legal/takedowns/dsa/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!0,TRUSTED_FLAGGER:!0},india:{LAW:"india",DECIDER_KEY:"legal_webapp_takedown_form_india",COUNTRY_CODES:["IN"],API:"/v3/legal/takedowns/india/",COMPLAINTS_OFFICE:!1,RESTRICT_MULTIPLE_LAWS:!0,ALLOW_ANON_SUBMISSION:!0,TRUSTED_FLAGGER:!1}}},746152:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(667294);function a(e,t){(0,i.useEffect)(()=>{if(!t.current)return()=>{};{let n=t.current;if("ResizeObserver"in window){let t=new ResizeObserver(t=>{Array.isArray(t)&&t.length&&e(n)});return t.observe(n),()=>t.unobserve(n)}{let t=n.clientHeight,i=n.clientWidth,a=()=>{let l=n.clientHeight,r=n.clientWidth;(t!==l||i!==r)&&(t=l,i=r,e(n)),window.requestAnimationFrame(a)};return a(),()=>window.cancelAnimationFrame(a)}}},[t,e])}},828520:function(e,t,n){n.d(t,{Z:function(){return l},f:function(){return r}});var i=n(193733),a=n(993227);function l(e,t){return async n=>{n((0,a.md)(e,!0));try{await (0,i.Z)({url:`/v3/boards/${e}/follow/`,method:"PUT"}),t({event_type:26,object_id_str:e})}catch(t){n((0,a.md)(e,!1))}}}function r(e,t){return async n=>{n((0,a.md)(e,!1));try{await (0,i.Z)({url:`/v3/boards/${e}/follow/`,method:"DELETE"}),t({event_type:27,object_id_str:e})}catch(t){n((0,a.md)(e,!0))}}}},689222:function(e,t,n){function i(e){return{type:"PIN_QUICK_SAVE",payload:e}}function a(e){return{type:"UPDATE_PINS_WITH_QUICKSAVE_REPIN",payload:{newPin:e}}}n.d(t,{X:function(){return a},d:function(){return i}})},641851:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(442279),a=n(522291);let l=(0,i.createSelector)((e,t,n)=>n,({feeds:e},t)=>e[`${a.Z.UNIFIED_COMMENTS}:${t}`],({didItData:e})=>e,(e,t,n)=>t?.map(({id:t,type:i})=>"aggregatedcomment"===i.toLowerCase()?e[t]:n[t]).filter(e=>e)||[])},780445:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(737787),a=n(84870),l=n(634855);function r(e,t,n,r){switch(e){case 0:return function({isShortened:e,minutes:t,i18n:n}){if(!t)return"";if(e)return(0,l.Z)(t,n).join("");let r=(0,a.Z)((0,i.X)({m:t}),n);if(!r)return"";let s=r.join(""),o=n._('Cook Time', 'ideapin.basics.cookTime', 'The cook time for the food in this pin');return`${o}: ${s}`}({minutes:parseInt(t,10),i18n:n,isShortened:r});case 1:return function({servingSize:e,i18n:t}){return e?1===e?`${e} ${t._('serving', 'ideapin.basics.servings', 'The number of servings this recipe makes')}`:`${e} ${t._('servings', 'ideapin.basics.servings', 'The number of servings this recipe makes')}`:""}({servingSize:parseInt(t,10),i18n:n});case 2:return function({difficulty:e,i18n:t}){let n={1:t._('Easy', 'closeup.storyPin.basicsLayout.difficulty', 'Easy difficulty level'),2:t._('Intermediate', 'closeup.storyPin.basicsLayout.difficulty', 'Intermediate difficulty level'),3:t._('Expert', 'closeup.storyPin.basicsLayout.difficulty', 'Expert difficulty level')},i=t._('Difficulty', 'ideapin.basics.difficulty', 'The difficulty for the activity in this pin');return`${i}: ${n[e??"1"]}`}({difficulty:t,i18n:n});default:return""}}},986885:function(e,t,n){n.d(t,{Z:function(){return i}});let i=e=>e.join(` \u2022 `)},551603:function(e,t,n){n.d(t,{Ai:function(){return b},B5:function(){return m},CR:function(){return c},Cc:function(){return s},Dv:function(){return f},Wz:function(){return o},_P:function(){return y},dP:function(){return P},dX:function(){return v},gx:function(){return u},h8:function(){return l},hk:function(){return d},lp:function(){return h},lt:function(){return p},oe:function(){return x},r4:function(){return _},rM:function(){return k}});var i=n(883119),a=n(772866);let l={GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},r={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1},s={...r,font:{default_size:28,letter_spacing:-.4,line_height:1.25,name:"Graphik Regular",url:"https://pinterest-taipei.s3.amazonaws.com/Graphik-Regular.otf"},font_size:28},o={...r,font:{default_size:48,letter_spacing:0,line_height:1,name:"Graphik Bold Italic",url:"https://pinterest-taipei.s3.amazonaws.com/Graphik-Bold-Italic.otf"},font_size:48},d=64,c=48,u=48,p=new i.H3([a.tD]),m=new i.H3([p]),g=new i.H3([a.tD]),h=new i.H3([g]),_=4;function y(e){return e?{paddingX:0,paddingY:0}:{paddingX:2,paddingY:_}}let f=60,x=47,v=8,k=4,b=5,P=3},656319:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(153102);function a(e){return{defaultStyle:0,fontFamily:e.name??"",fontGroup:i.gu,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]}}},494086:function(e,t,n){n.d(t,{X:function(){return i},j:function(){return a}});let i={BOLD:"formatted_description_bold_component",ELEMENT:"formatted_description_element_component",HEADER:"formatted_description_header_component",PARAGRAPH:"formatted_description_paragraph_component",POINTS:"formatted_description_points_component",SPECS:"formatted_description_specs_component",TABLE:"formatted_description_table_component"},a=({components:e,pinDescription:t})=>e&&0!==e.length?e:[{content:t,type:i.PARAGRAPH}]},215198:function(e){e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},747454:function(e){e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/16223-ecd2571c819db3fe.mjs.map